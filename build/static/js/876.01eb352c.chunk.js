"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[876],{73431:(e,t,o)=>{o.d(t,{Z:()=>s});var n=o(47313),l=o(39180),a=o(2717),i=o(28830),r=o(60535),d=o(46417);const s=()=>{const e=(0,a.I0)(),{languages:t,defaultLang:o}=(0,a.v9)((e=>e.formLang),a.wU);(0,n.useEffect)((()=>{r.Z.getAllActive().then((t=>{let{data:o}=t;e((0,i.dc)(o)),e((0,i.mh)(o.find((e=>!(null===e||void 0===e||!e.default))).locale))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.ZP.Group,{value:o,onChange:t=>{let{target:{value:o}}=t;e((0,i.mh)(o))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,d.jsx)(l.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},90876:(e,t,o)=>{o.r(t),o.d(t,{default:()=>O});var n=o(47313),l=o(83999),a=o(10976),i=o(77181),r=o(97890),d=o(2717),s=o(73431),u=o(24511),c=o(29395),v=o(53456),m=o(35233),p=o(69096),f=o(33834),y=o(90954),h=o(17649),g=o(70816),_=o.n(g),b=o(90486),x=o(70250),Z=o(23560),C=o(8550),k=o(51282),E=o(46417);const{Step:j}=l.Z;function O(){var e,t,o,g,O,S,w,F,P,N,M,I;const{t:K}=(0,u.$)(),[D]=a.Z.useForm(),{id:U}=(0,r.UO)(),L=(0,f.K)(),Y=(0,d.I0)(),B=(0,r.s0)(),{activeMenu:H}=(0,d.v9)((e=>e.menu),d.wU),{settings:A}=(0,d.v9)((e=>e.globalSettings),d.wU),{defaultCurrency:R}=(0,d.v9)((e=>e.currency),d.wU),T=Number((null===(e=L.values)||void 0===e?void 0:e.step)||0),[V,q]=(0,n.useState)(!1),[G,J]=(0,n.useState)(!1),[$,z]=(0,n.useState)((null===H||void 0===H||null===(t=H.data)||void 0===t?void 0:t.images)||[]),[Q,W]=(0,n.useState)(null!==H&&void 0!==H&&null!==(o=H.data)&&void 0!==o&&o.location_from?{lat:parseFloat(null===H||void 0===H||null===(g=H.data)||void 0===g||null===(O=g.location_from)||void 0===O?void 0:O.latitude),lng:parseFloat(null===H||void 0===H||null===(S=H.data)||void 0===S||null===(w=S.location_from)||void 0===w?void 0:w.longitude)}:(0,h.Z)(A)),[X,ee]=(0,n.useState)(null!==H&&void 0!==H&&null!==(F=H.data)&&void 0!==F&&F.location_to?{lat:parseFloat(null===H||void 0===H||null===(P=H.data)||void 0===P||null===(N=P.location_to)||void 0===N?void 0:N.latitude),lng:parseFloat(null===H||void 0===H||null===(M=H.data)||void 0===M||null===(I=M.location_to)||void 0===I?void 0:I.longitude)}:(0,h.Z)(A));(0,n.useEffect)((()=>()=>{const e=D.getFieldsValue(!0),t=JSON.stringify(e.delivery_date),o=JSON.stringify(e.delivery_time),n={...e,date:t,time:o};Y((0,y.nc)({activeMenu:H,data:n}))}),[]);const te=()=>{const e=T+1;L.set("step",e)},oe=()=>{const e=T-1;L.set("step",e)};(0,n.useEffect)((()=>{H.refetch&&U&&(e=>{q(!0),b.Z.getById(e).then((e=>{var t,o,n,l,a,i,r,d,s,u,c,v,m,p,f,h,g,b,x;let Z=e.data;z([(0,C.Z)(Z.img)]),W({lat:null===Z||void 0===Z||null===(t=Z.address_from)||void 0===t?void 0:t.latitude,lng:null===Z||void 0===Z||null===(o=Z.address_from)||void 0===o?void 0:o.longitude}),ee({lat:null===Z||void 0===Z||null===(n=Z.address_to)||void 0===n?void 0:n.latitude,lng:null===Z||void 0===Z||null===(l=Z.address_to)||void 0===l?void 0:l.longitude});const k={...Z,image:[(0,C.Z)(Z.img)],delivery_time:_()(null===Z||void 0===Z?void 0:Z.delivery_time,"HH:mm:ss"),delivery_date:_()(Z.delivery_date,"YYYY-MM-DD"),address_from:null===Z||void 0===Z||null===(a=Z.address_from)||void 0===a?void 0:a.address,address_to:null===Z||void 0===Z||null===(i=Z.address_to)||void 0===i?void 0:i.address,house_from:null===Z||void 0===Z||null===(r=Z.address_from)||void 0===r?void 0:r.house,house_to:null===Z||void 0===Z||null===(d=Z.address_to)||void 0===d?void 0:d.house,stage_from:null===Z||void 0===Z||null===(s=Z.address_from)||void 0===s?void 0:s.stage,stage_to:null===Z||void 0===Z||null===(u=Z.address_to)||void 0===u?void 0:u.stage,room_from:null===Z||void 0===Z||null===(c=Z.address_from)||void 0===c?void 0:c.room,room_to:null===Z||void 0===Z||null===(v=Z.address_to)||void 0===v?void 0:v.room,user_from:{label:[null===(m=Z.user)||void 0===m?void 0:m.firstname,null===(p=Z.user)||void 0===p?void 0:p.lastname].join(" "),value:null===(f=Z.user)||void 0===f?void 0:f.id},type:{label:null===(h=Z.type)||void 0===h?void 0:h.type,value:null===(g=Z.type)||void 0===g?void 0:g.id},payment_type:{label:K(null===Z||void 0===Z||null===(b=Z.transaction)||void 0===b?void 0:b.payment_system.tag),value:null===Z||void 0===Z||null===(x=Z.transaction)||void 0===x?void 0:x.payment_system.id}};D.setFieldsValue(k),Y((0,y.nc)({activeMenu:H,data:k}))})).finally((()=>{q(!1),Y((0,y.A_)(H))}))})(U)}),[H.refetch]);return(0,E.jsxs)(i.Z,{title:K("add.parcel.order"),extra:(0,E.jsx)(s.Z,{}),children:[(0,E.jsx)(l.Z,{current:T,onChange:e=>{L.set("step",e)},children:c.S.map((e=>(0,E.jsx)(j,{title:K(e.title)},e.title)))}),(0,E.jsx)("div",{className:"steps-content",children:V?(0,E.jsx)(k.Z,{}):(0,E.jsxs)(a.Z,{form:D,name:"parcel-create",layout:"vertical",onFinish:e=>{var t,o;console.log("values => ",e),J(!0);const n={user_id:null===(t=e.user_from)||void 0===t?void 0:t.value,currency_id:null===R||void 0===R?void 0:R.id,type_id:null===(o=e.type)||void 0===o?void 0:o.value,rate:null===R||void 0===R?void 0:R.rate,phone_from:e.phone_from.toString(),username_from:e.username_from,address_from:{longitude:null===Q||void 0===Q?void 0:Q.lng,latitude:null===Q||void 0===Q?void 0:Q.lat,address:e.address_from,house:e.house_from,stage:e.stage_from,room:e.room_from},phone_to:e.phone_to.toString(),username_to:e.username_to,address_to:{longitude:null===X||void 0===X?void 0:X.lng,latitude:null===X||void 0===X?void 0:X.lat,address:e.address_to,house:e.house_to,stage:e.stage_to,room:e.room_to},delivery_date:_()(e.delivery_date).format("YYYY-MM-DD"),delivery_time:_()(e.delivery_time,"HH:mm").format("HH:mm"),note:e.note,images:$.map((e=>e.name))},l="parcel-orders";b.Z.update(U,n).then((()=>{Y((0,x.LF)()),Z.Am.success(K("successfully.created")),Y((0,y.ph)({...H,nextUrl:l})),B(`/${l}`)})).finally((()=>J(!1)))},initialValues:{...H.data},onFinishFailed:e=>{const t=["","",""];e.errorFields.map((e=>e.name[0])).forEach((e=>{e.includes("_from")?t[0]="sender.details.invalid":e.includes("_to")?t[1]="receiver.details.invalid":t[2]="parcel.details.invalid"})),t.forEach((e=>{e&&Z.Am.error(K(e))}))},children:[(0,E.jsx)("div",{className:"First-content"===c.S[T].content?"":"d-none",children:(0,E.jsx)(v.Z,{form:D,next:te,location:Q,setLocation:W})}),(0,E.jsx)("div",{className:"Second-content"===c.S[T].content?"":"d-none",children:(0,E.jsx)(m.Z,{form:D,next:te,prev:oe,location:X,setLocation:ee})}),(0,E.jsx)("div",{className:"Third-content"===c.S[T].content?"":"d-none",children:(0,E.jsx)(p.Z,{form:D,loading:G,prev:oe,locationFrom:Q,locationTo:X,image:$,setImage:z})})]})})]})}},39180:(e,t,o)=>{o.d(t,{ZP:()=>P});var n=o(4942),l=o(87462),a=o(47313),i=o(56482),r=o(46123),d=o.n(r),s=o(16945),u=o(4431),c=o(91964),v=a.createContext(null),m=v.Provider;const p=v;var f=a.createContext(null),y=f.Provider,h=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},g=function(e,t){var o,r=a.useContext(p),v=a.useContext(f),m=a.useContext(c.E_),y=m.getPrefixCls,g=m.direction,_=a.useRef(),b=(0,s.sQ)(t,_),x=(0,a.useContext)(u.aM).isFormItemInput,Z=e.prefixCls,C=e.className,k=e.children,E=e.style,j=h(e,["prefixCls","className","children","style"]),O=y("radio",Z),S="button"===((null===r||void 0===r?void 0:r.optionType)||v)?"".concat(O,"-button"):O,w=(0,l.Z)({},j);r&&(w.name=r.name,w.onChange=function(t){var o,n;null===(o=e.onChange)||void 0===o||o.call(e,t),null===(n=null===r||void 0===r?void 0:r.onChange)||void 0===n||n.call(r,t)},w.checked=e.value===r.value,w.disabled=e.disabled||r.disabled);var F=d()("".concat(S,"-wrapper"),(o={},(0,n.Z)(o,"".concat(S,"-wrapper-checked"),w.checked),(0,n.Z)(o,"".concat(S,"-wrapper-disabled"),w.disabled),(0,n.Z)(o,"".concat(S,"-wrapper-rtl"),"rtl"===g),(0,n.Z)(o,"".concat(S,"-wrapper-in-form-item"),x),o),C);return a.createElement("label",{className:F,style:E,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(i.Z,(0,l.Z)({},w,{type:"radio",prefixCls:S,ref:b})),void 0!==k?a.createElement("span",null,k):null)},_=a.forwardRef(g);_.displayName="Radio";const b=_;var x=o(29439),Z=o(10288),C=o(21631),k=o(81176),E=a.forwardRef((function(e,t){var o=a.useContext(c.E_),i=o.getPrefixCls,r=o.direction,s=a.useContext(C.Z),u=(0,Z.Z)(e.defaultValue,{value:e.value}),v=(0,x.Z)(u,2),p=v[0],f=v[1];return a.createElement(m,{value:{onChange:function(t){var o=p,n=t.target.value;"value"in e||f(n);var l=e.onChange;l&&n!==o&&l(t)},value:p,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var o,u=e.prefixCls,c=e.className,v=void 0===c?"":c,m=e.options,f=e.buttonStyle,y=void 0===f?"outline":f,h=e.disabled,g=e.children,_=e.size,x=e.style,Z=e.id,C=e.onMouseEnter,E=e.onMouseLeave,j=i("radio",u),O="".concat(j,"-group"),S=g;m&&m.length>0&&(S=m.map((function(e){return"string"===typeof e||"number"===typeof e?a.createElement(b,{key:e.toString(),prefixCls:j,disabled:h,value:e,checked:p===e},e):a.createElement(b,{key:"radio-group-value-options-".concat(e.value),prefixCls:j,disabled:e.disabled||h,value:e.value,checked:p===e.value,style:e.style},e.label)})));var w=_||s,F=d()(O,"".concat(O,"-").concat(y),(o={},(0,n.Z)(o,"".concat(O,"-").concat(w),w),(0,n.Z)(o,"".concat(O,"-rtl"),"rtl"===r),o),v);return a.createElement("div",(0,l.Z)({},(0,k.Z)(e),{className:F,style:x,onMouseEnter:C,onMouseLeave:E,id:Z,ref:t}),S)}())}));const j=a.memo(E);var O=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},S=function(e,t){var o=a.useContext(c.E_).getPrefixCls,n=e.prefixCls,i=O(e,["prefixCls"]),r=o("radio",n);return a.createElement(y,{value:"button"},a.createElement(b,(0,l.Z)({prefixCls:r},i,{type:"radio",ref:t})))};const w=a.forwardRef(S);var F=b;F.Button=w,F.Group=j;const P=F},56482:(e,t,o)=>{o.d(t,{Z:()=>f});var n=o(87462),l=o(4942),a=o(45987),i=o(1413),r=o(15671),d=o(43144),s=o(60136),u=o(54062),c=o(47313),v=o(46123),m=o.n(v),p=function(e){(0,s.Z)(o,e);var t=(0,u.Z)(o);function o(e){var n;(0,r.Z)(this,o),(n=t.call(this,e)).handleChange=function(e){var t=n.props,o=t.disabled,l=t.onChange;o||("checked"in n.props||n.setState({checked:e.target.checked}),l&&l({target:(0,i.Z)((0,i.Z)({},n.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},n.saveInput=function(e){n.input=e};var l="checked"in e?e.checked:e.defaultChecked;return n.state={checked:l},n}return(0,d.Z)(o,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,o=t.prefixCls,i=t.className,r=t.style,d=t.name,s=t.id,u=t.type,v=t.disabled,p=t.readOnly,f=t.tabIndex,y=t.onClick,h=t.onFocus,g=t.onBlur,_=t.onKeyDown,b=t.onKeyPress,x=t.onKeyUp,Z=t.autoFocus,C=t.value,k=t.required,E=(0,a.Z)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),j=Object.keys(E).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=E[t]),e}),{}),O=this.state.checked,S=m()(o,i,(e={},(0,l.Z)(e,"".concat(o,"-checked"),O),(0,l.Z)(e,"".concat(o,"-disabled"),v),e));return c.createElement("span",{className:S,style:r},c.createElement("input",(0,n.Z)({name:d,id:s,type:u,required:k,readOnly:p,disabled:v,tabIndex:f,className:"".concat(o,"-input"),checked:!!O,onClick:y,onFocus:h,onBlur:g,onKeyUp:x,onKeyDown:_,onKeyPress:b,onChange:this.handleChange,autoFocus:Z,ref:this.saveInput,value:C},j)),c.createElement("span",{className:"".concat(o,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,i.Z)((0,i.Z)({},t),{},{checked:e.checked}):null}}]),o}(c.Component);p.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const f=p}}]);