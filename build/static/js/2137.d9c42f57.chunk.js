"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2137],{12137:(e,l,t)=>{t.r(l),t.d(l,{default:()=>O});var n=t(9950),a=t(80737),o=t(20978),s=t(48538),i=t(23263),r=t(12203),d=t(24513),u=t(44070),c=t(53387),v=t(12449),h=t(70030),p=t(91854),x=t(43999),m=t(11260),g=t(82615),A=t(32645),f=t(44414);function j(e){let{id:l,loading:t,handleClose:n,text:a,click:o}=e;const{t:i}=(0,h.B)();return(0,f.jsxs)(A.A,{closable:!1,visible:!!l,footer:null,centered:!0,children:[(0,f.jsx)("p",{children:a}),(0,f.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,f.jsx)(s.A,{type:"primary",className:"mr-2",onClick:o,loading:t,children:i("yes")}),(0,f.jsx)(s.A,{onClick:n,children:i("no")})]})]})}var y=t(35116),C=t(63620),b=t(74623),k=t(28645),w=t(22875),S=t(21777),_=t(13564),V=t(80905),z=t(58547),N=t(88986);function O(){var e,l,t,A,O,H,I;const{t:M}=(0,h.B)(),F=(0,p.wA)(),{activeMenu:R}=(0,p.d4)((e=>e.menu),p.bN),{extraGroups:T}=(0,p.d4)((e=>e.extraGroup),p.bN),{extraValues:B,loading:Z,meta:G}=(0,p.d4)((e=>e.extraValue),p.bN),P=(0,_.Zp)(),[E,q]=(0,n.useState)(null);const[$,D]=(0,n.useState)(null),[X,K]=(0,n.useState)(null),[L,Q]=(0,n.useState)(!1),[W,J]=(0,n.useState)(null),[U,Y]=(0,n.useState)([{title:M("id"),dataIndex:"id",key:"id",is_show:!0},{title:M("title"),dataIndex:"extra_group_id",key:"extra_group_id",is_show:!0,render:e=>{var l,t;return null===T||void 0===T||null===(l=T.find((l=>l.id===e)))||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title}},{title:M("created.by"),dataIndex:"shop",key:"shop",is_show:!0,render:(e,l)=>{var t,n,a,o;return null!==l&&void 0!==l&&null!==(t=l.group)&&void 0!==t&&t.shop?(0,f.jsx)("span",{onClick:()=>{var e;return(e=>{F((0,b.X4)({id:"edit-shop",url:`shop/${e.uuid}`,name:M("edit.shop")})),P(`/shop/${e.uuid}`,{state:"edit"})})(null===l||void 0===l||null===(e=l.group)||void 0===e?void 0:e.shop)},className:"text-hover",children:null===(n=l.group)||void 0===n||null===(a=n.shop)||void 0===a||null===(o=a.translation)||void 0===o?void 0:o.title}):M("admin")}},{title:M("value"),dataIndex:"value",key:"value",is_show:!0,render:(e,l)=>{var t,n,s;return(0,f.jsxs)(a.A,{className:"extras",children:["color"===(null===l||void 0===l||null===(t=l.group)||void 0===t?void 0:t.type)?(0,f.jsx)("div",{className:"extra-color-wrapper-contain",style:{backgroundColor:null===l||void 0===l?void 0:l.value}}):null,"image"===(null===l||void 0===l||null===(n=l.group)||void 0===n?void 0:n.type)?(0,f.jsx)(o.A,{width:100,src:C.sE+(null===l||void 0===l?void 0:l.value),className:"borderRadius"}):null,"image"===(null===l||void 0===l||null===(s=l.group)||void 0===s?void 0:s.type)?null:(0,f.jsx)("span",{children:null===l||void 0===l?void 0:l.value})]})}},{title:M("options"),is_show:!0,render:e=>(0,f.jsxs)(a.A,{children:[(0,f.jsx)(s.A,{type:"primary",icon:(0,f.jsx)(d.A,{}),onClick:()=>K(e)}),(0,f.jsx)(y.A,{type:"primary",danger:!0,icon:(0,f.jsx)(u.A,{}),onClick:()=>D([e.id])})]})}]),ee=null===R||void 0===R?void 0:R.data,le={shop_id:null===ee||void 0===ee||null===(e=ee.selectedShop)||void 0===e?void 0:e.value,perPage:null===ee||void 0===ee?void 0:ee.perPage,page:null===ee||void 0===ee?void 0:ee.page};(0,N.A)((()=>{F((0,x.nZ)(le))}),[null===R||void 0===R?void 0:R.data]),(0,n.useEffect)((()=>{R.refetch&&(F((0,x.nZ)(le)),F((0,b.km)(R)))}),[R.refetch]);return(0,f.jsxs)(i.A,{title:M("extra.value"),extra:(0,f.jsxs)(a.A,{wrap:!0,children:[(0,f.jsx)(V.j,{placeholder:M("select.shop"),hasMore:null===E||void 0===E?void 0:E.next,loading:Z,fetchOptions:async function(e){let{search:l,page:t}=e;const n={search:0===(null===l||void 0===l?void 0:l.length)?void 0:l,status:"approved",page:t};return z.A.search(n).then((e=>(q(e.links),e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id}))))))},style:{minWidth:180,marginLeft:"8px"},onChange:e=>{return l=e,t="selectedShop",void F((0,b.Ok)({activeMenu:R,data:{...R.data,[t]:l}}));var l,t},value:null===(l=R.data)||void 0===l?void 0:l.selectedShop}),(0,f.jsx)(s.A,{type:"primary",icon:(0,f.jsx)(c.A,{}),onClick:()=>K({}),children:M("add.extra")}),"deleted_at"!==(null===(t=R.data)||void 0===t?void 0:t.role)&&(0,f.jsx)(y.A,{size:"",onClick:()=>J({delete:!0}),children:M("delete.all")}),"deleted_at"===(null===(A=R.data)||void 0===A?void 0:A.role)&&(0,f.jsx)(y.A,{icon:(0,f.jsx)(w.DQ9,{className:"mr-2"}),onClick:()=>J({restore:!0}),children:M("restore.all")}),(0,f.jsx)(k.A,{columns:U,setColumns:Y})]}),children:[(0,f.jsx)(r.A,{scroll:{x:!0},loading:Z,columns:null===U||void 0===U?void 0:U.filter((e=>e.is_show)),dataSource:B,rowKey:e=>e.id,pagination:{pageSize:le.perPage,page:(null===(O=R.data)||void 0===O?void 0:O.page)||1,total:G.total,defaultCurrent:null===(H=R.data)||void 0===H?void 0:H.page,current:null===(I=R.data)||void 0===I?void 0:I.page},onChange:function(e,l,t){const{pageSize:n,current:a}=e,{field:o}=t;F((0,b.Ok)({activeMenu:R,data:{...R.data,perPage:n,page:a,column:o}}))}}),X&&(0,f.jsx)(g.A,{modal:X,handleCancel:()=>K(null)}),$&&(0,f.jsx)(j,{id:$,click:()=>{Q(!0);const e={...Object.assign({},...$.map(((e,l)=>({[`ids[${l}]`]:e}))))};m.A.deleteValue(e).then((()=>{v.oR.success(M("successfully.deleted")),D(null),F((0,x.nZ)())})).finally((()=>Q(!1)))},text:M("delete.extra"),loading:L,handleClose:()=>D(null)}),W&&(0,f.jsx)(S.A,{open:W,handleCancel:()=>J(null),click:W.restore?()=>{Q(!0),m.A.restoreAllValue().then((()=>{v.oR.success(M("successfully.restored")),F((0,x.nZ)(le)),J(null)})).finally((()=>Q(!1)))}:()=>{Q(!0),m.A.dropAllValue().then((()=>{v.oR.success(M("successfully.deleted")),F((0,x.nZ)(le)),J(null)})).finally((()=>Q(!1)))},text:W.restore?M("restore.modal.text"):M("read.carefully"),subTitle:W.restore?"":M("confirm.deletion"),loading:L,setText:D})]})}},21777:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var n=t(32645),a=t(32312),o=t(48538),s=t(70030),i=t(44414);const r=e=>{let{open:l,handleCancel:t,text:r,click:d,loading:u,subTitle:c}=e;const{t:v}=(0,s.B)();return(0,i.jsxs)(n.A,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,i.jsx)(a.Ay,{status:"warning",title:r,subTitle:c}),(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(o.A,{type:"primary",className:"mr-2",onClick:d,loading:u,children:v("yes")}),(0,i.jsx)(o.A,{onClick:()=>t(),children:v("no")})]})]})}},28645:(e,l,t)=>{t.d(l,{A:()=>x});var n=t(9950),a=t(66362),o=t(69216),s=t(80737),i=t(25933),r=t(57811),d=t(81541),u=t(48538),c=t(89323),v=t(70030),h=t(44414);const{Text:p}=a.A,x=e=>{let{columns:l=[],setColumns:t,style:a,size:x="",iconOnly:m}=e;const{t:g}=(0,v.B)(),[A,f]=(0,n.useState)(!1),j=(0,h.jsx)(o.A,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,h.jsx)(o.A.Item,{children:(0,h.jsxs)(s.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(p,{children:e.title}),(0,h.jsx)(i.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(r.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{f(e)},visible:A,children:(0,h.jsx)(d.A,{title:g("change.columns"),children:(0,h.jsx)(u.A,{style:{...a},size:x,icon:(0,h.jsx)(c.A,{}),children:m?null:g("Columns")})})})}},35116:(e,l,t)=>{t.d(l,{A:()=>d});t(9950);var n=t(48538),a=t(44070),o=t(12449),s=t(70030),i=t(13311),r=t(44414);function d(e){let{size:l="",onClick:t,type:d="default",...u}=e;const{t:c}=(0,s.B)(),{isDemo:v}=(0,i.A)();return(0,r.jsx)(n.A,{size:l,icon:(0,r.jsx)(a.A,{}),onClick:e=>{v?o.oR.warning(c("cannot.work.demo")):t(e)},type:d,...u})}},47992:(e,l,t)=>{t.d(l,{G:()=>d});var n=t(9950),a=t(95491),o=t.n(a),s=t(99674),i=t(90650),r=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:a,...d}=e;const[u,c]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),p=(0,n.useMemo)((()=>o()((e=>{h([]),c(!0),l(e).then((e=>{h(e),c(!1)}))}),t)),[l,t]);return(0,r.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:u?(0,r.jsx)(i.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{p("")}})}},53387:(e,l,t)=>{t.d(l,{A:()=>r});var n=t(89379),a=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=t(25085),i=function(e,l){return a.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};i.displayName="PlusCircleOutlined";const r=a.forwardRef(i)},80905:(e,l,t)=>{t.d(l,{j:()=>d});var n=t(9950),a=t(95491),o=t.n(a),s=t(99674),i=t(90650),r=t(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:t=400,hasMore:a,refetchOnFocus:d=!1,...u}=e;const[c,v]=(0,n.useState)(!1),[h,p]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[g,A]=(0,n.useState)(null),[f,j]=(0,n.useState)(1),y=(0,n.useMemo)((()=>o()((e=>{p([]),A(e),v(!0),l({search:e}).then((e=>{p(e),j(2),v(!1)})).finally((()=>m(!1)))}),t)),[l,t,f]);return(0,r.jsxs)(s.A,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const t=e.target;x||t.scrollTop+t.offsetHeight!==t.scrollHeight||a&&(m(!0),l({search:g,page:f}).then((e=>{j((e=>e+1)),p([...h,...e])})).finally((()=>m(!1))))},labelInValue:!0,filterOption:!1,onSearch:y,notFoundContent:c?(0,r.jsx)(i.A,{size:"small"}):"no results",onFocus:()=>{d?y(""):null!==h&&void 0!==h&&h.length||y("")},...u,children:[h.map(((e,l)=>(0,r.jsx)(s.A.Option,{value:e.value,children:e.label},l))),x&&(0,r.jsx)(s.A.Option,{children:(0,r.jsx)(i.A,{size:"small"})})]})}},82615:(e,l,t)=>{t.d(l,{A:()=>A});var n=t(3969),a=t(55902),o=t(32645),s=t(48538),i=t(9950),r=t(28276),d=t(70030),u=t(91854),c=t(12449),v=t(32599),h=t(62466),p=t(43999),x=t(11260),m=t(47992),g=t(44414);function A(e){let{modal:l,handleCancel:t,onSuccess:A,groupId:f}=e;const[j]=n.A.useForm(),{t:y}=(0,d.B)(),C=(0,u.wA)(),[b,k]=(0,i.useState)(!1),[w,S]=(0,i.useState)("text"),[_,V]=(0,i.useState)(null),[z,N]=(0,i.useState)(""),{extraGroups:O}=(0,u.d4)((e=>e.extraGroup),u.bN);(0,i.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,t,n;S(l.group.type);const a={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(t=e.translation)||void 0===t?void 0:t.title,value:null===l||void 0===l||null===(n=l.group)||void 0===n?void 0:n.id},value:l.value};switch(l.group.type){case"color":N(l.value);break;case"image":V((0,h.A)(l.value))}j.setFieldsValue(a)}f&&j.setFieldsValue({extra_group_id:{value:f}})}),[l,f]);function H(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,g.jsx)(o.A,{title:null!==l&&void 0!==l&&l.id?y("edit.extra"):y("add.extra"),visible:!!l,onCancel:t,footer:[(0,g.jsx)(s.A,{type:"primary",onClick:()=>j.submit(),loading:b,children:y("save")}),(0,g.jsx)(s.A,{type:"default",onClick:t,children:y("cancel")})],children:(0,g.jsxs)(n.A,{name:"extra-form",layout:"vertical",form:j,onFinish:e=>{var n;console.log(e);const a={extra_group_id:null===e||void 0===e||null===(n=e.extra_group_id)||void 0===n?void 0:n.value,value:H(w,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{k(!0),x.A.updateValue(e,l).then((()=>{c.oR.success(y("successfully.updated")),t(),C((0,p.nZ)())})).finally((()=>k(!1)))})(l.id,a):(e=>{k(!0),x.A.createValue(e).then((()=>{c.oR.success(y("successfully.created")),t(),C((0,p.nZ)()),A&&A()})).finally((()=>k(!1)))})(a)},children:[(0,g.jsx)(n.A.Item,{name:"extra_group_id",label:y("extra.group"),hidden:!!f,rules:[{required:!0,message:""}],children:(0,g.jsx)(m.G,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),x.A.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,g.jsx)(n.A.Item,{name:"value",label:y("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,g.jsx)(r.Xq,{onChangeComplete:e=>N(e.hex),color:z,disableAlpha:!0});case"text":return(0,g.jsx)(a.A,{placeholder:y("enter.extra.value")});case"image":return(0,g.jsx)(v.A,{type:"extras",image:_,setImage:V,form:j,name:"value"});default:return""}})(w)})]})})}},89323:(e,l,t)=>{t.d(l,{A:()=>r});var n=t(89379),a=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var s=t(25085),i=function(e,l){return a.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:o}))};i.displayName="TableOutlined";const r=a.forwardRef(i)}}]);