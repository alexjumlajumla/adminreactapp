"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9906],{37553:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(9950),i=a(3969),l=a(87094),r=a(41988),n=a(55902),d=a(25933),c=a(48538),u=a(16254),m=a(91854),o=a(70030),v=a(44414);function h(e){var t,a;let{form:h,handleSubmit:j}=e;const{t:A}=(0,o.B)(),{activeMenu:b}=(0,m.d4)((e=>e.menu),m.bN),[f,g]=(0,s.useState)(null!==(t=b.data)&&void 0!==t&&t.image?null===(a=b.data)||void 0===a?void 0:a.image:[]),[p,x]=(0,s.useState)(!1);return(0,v.jsxs)(i.A,{name:"basic",layout:"vertical",onFinish:e=>{x(!0),j(e,f).finally((()=>x(!1)))},form:h,initialValues:{active:!0,...b.data},children:[(0,v.jsxs)(l.A,{gutter:12,children:[(0,v.jsx)(r.A,{span:12,children:(0,v.jsx)(i.A.Item,{label:A("title"),name:"title",rules:[{validator:(e,t)=>t?t&&""===(null===t||void 0===t?void 0:t.trim())?Promise.reject(new Error(A("no.empty.space"))):t&&(null===t||void 0===t?void 0:t.trim().length)<2?Promise.reject(new Error(A("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(A("required")))}],children:(0,v.jsx)(n.A,{})})}),(0,v.jsx)(r.A,{span:6,children:(0,v.jsx)(i.A.Item,{label:A("image"),name:"images",rules:[{validator:()=>0===(null===f||void 0===f?void 0:f.length)?Promise.reject(new Error(A("required"))):Promise.resolve()}],children:(0,v.jsx)(u.A,{type:"brands",imageList:f,setImageList:g,form:h,multiple:!1})})}),(0,v.jsx)(r.A,{span:6,children:(0,v.jsx)("div",{className:"col-md-12 col-sm-6",children:(0,v.jsx)(i.A.Item,{label:A("active"),name:"active",valuePropName:"checked",children:(0,v.jsx)(d.A,{})})})})]}),(0,v.jsx)(c.A,{type:"primary",htmlType:"submit",loading:p,children:A("submit")})]})}},39906:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var s=a(9950),i=a(13564),l=a(12449),r=a(3969),n=a(23263),d=a(90650),c=a(63620),u=a(91854),m=a(74623),o=a(37963),v=a(59759),h=a(70030),j=a(37553),A=a(44414);const b=()=>{const{t:e}=(0,h.B)(),{activeMenu:t}=(0,u.d4)((e=>e.menu),u.bN),{id:a}=(0,i.g)(),b=(0,u.wA)(),[f]=r.A.useForm(),g=(0,i.Zp)(),[p,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);b((0,m.Ok)({activeMenu:t,data:e}))}),[]);return(0,s.useEffect)((()=>{t.refetch&&(e=>{x(!0),o.A.getById(e).then((e=>{let a=e.data;const s={...a,image:[(i=a.img,{name:i,url:c.sE+i})]};var i;f.setFieldsValue(s),b((0,m.Ok)({activeMenu:t,data:s}))})).finally((()=>{x(!1),b((0,m.km)(t))}))})(a)}),[t.refetch]),(0,A.jsx)(n.A,{title:e("edit.brand"),children:p?(0,A.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,A.jsx)(d.A,{size:"large",className:"py-5"})}):(0,A.jsx)(j.A,{form:f,handleSubmit:(s,i)=>{var r;const n="catalog/brands",d={status:"published"},c={...s,active:s.active?1:0,"images[0]":null===(r=i[0])||void 0===r?void 0:r.name};return o.A.update(a,c).then((()=>{l.oR.success(e("successfully.updated")),(0,u.vA)((()=>{b((0,m.EK)({...t,nextUrl:n})),b((0,v.$F)(d))})),g(`/${n}`)}))}})})}}}]);