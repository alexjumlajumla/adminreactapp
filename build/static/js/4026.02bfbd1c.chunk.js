"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4026],{8168:(e,l,o)=>{function r(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}o.d(l,{A:()=>r})},44026:(e,l,o)=>{o.r(l),o.d(l,{default:()=>w});var r=o(9950),t=o(87864),d=o(23263),i=o(80737),n=o(12203),a=o(13564),s=o(91854),u=o(74623),v=o(70030),c=o(88986),p=o(8168),h=o(53774),m=o(47992),_=o(53271),f=o(59051),y=o.n(f),g=o(58547),x=o(43430),b=o(44414);const{RangePicker:A}=t.A;function w(){var e,l,o,t,f,w,Y;const{type:k}=(0,a.g)(),j=(0,s.wA)(),M=(0,a.Zp)(),{t:D}=(0,v.B)(),{defaultCurrency:C}=(0,s.d4)((e=>e.currency),s.bN),I=[{title:D("order.id"),is_show:!0,dataIndex:"order_id",key:"order_id",sorter:!0,render:e=>(0,b.jsxs)("span",{className:"text-hover",onClick:()=>(e=>{j((0,u.X4)({url:`order/details/${e}`,id:"order_details",name:D("order.details")})),M(`/order/details/${e}`)})(e),children:["#",e]})},{title:D(k),is_show:!0,dataIndex:"user",key:"user",render:(e,l)=>{const o=null===l||void 0===l?void 0:l.user;return(0,b.jsxs)("div",{children:[null===o||void 0===o?void 0:o.firstname," ",(null===o||void 0===o?void 0:o.lastname)||""]})}},{title:D("order.total_price"),is_show:!0,dataIndex:"transaction",key:"transaction",render:(e,l)=>{var o;null===e||void 0===e||e.status;return(0,b.jsx)("span",{children:(0,h.A)(null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.total_price,C.symbol)})}},..."seller"===k?[{title:D("coupon.price"),is_show:!0,dataIndex:"coupon_sum_price",key:"coupon_sum_price",render:(e,l)=>{var o;return(0,h.A)(null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.coupon_sum_price,C.symbol)}}]:[],..."seller"===k?[{title:D("total.cashback"),is_show:!0,dataIndex:"point_history_sum_price",key:"point_history_sum_price",render:(e,l)=>{var o;return(0,h.A)(null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.point_history_sum_price,C.symbol)}}]:[],{title:D("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:(e,l)=>{var o;return(0,h.A)(null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.delivery_fee,C.symbol)}},..."seller"===k?[{title:D("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,l)=>{var o;return(0,h.A)((null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.service_fee)||0,C.symbol)}}]:[],..."seller"===k?[{title:D("commission.fee"),is_show:!0,dataIndex:"commission_fee",key:"commission_fee",render:(e,l)=>(0,h.A)((null===l||void 0===l?void 0:l.order.commission_fee)||0,C.symbol)}]:[],..."seller"===k?[{title:D("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:(e,l)=>{var o;return(0,h.A)(null===l||void 0===l||null===(o=l.order)||void 0===o?void 0:o.seller_fee,C.symbol)}}]:[],{title:D("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return D(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}}],{activeMenu:S}=(0,s.d4)((e=>e.menu),s.bN),[$,O]=(0,r.useState)(y()().subtract(1,"month"),y()()),{completedList:N,loading:P,params:F,meta:z}=(0,s.d4)((e=>e.paymentToPartners),s.bN),G=S.data,L={search:null===G||void 0===G?void 0:G.search,sort:null===G||void 0===G?void 0:G.sort,column:null===G||void 0===G?void 0:G.column,perPage:null===G||void 0===G?void 0:G.perPage,page:null===G||void 0===G?void 0:G.page,user_id:null===G||void 0===G?void 0:G.user_id,shop_id:null!==(null===(e=S.data)||void 0===e?void 0:e.shop_id)?null===(l=S.data)||void 0===l?void 0:l.shop_id:null,date_from:Array.isArray($)?null===(o=$[0])||void 0===o?void 0:o.format("YYYY-MM-DD"):y()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray($)?null===(t=$[1])||void 0===t?void 0:t.format("YYYY-MM-DD"):y()().format("YYYY-MM-DD"),type:k};(0,c.A)((()=>{j((0,x.eL)(L))}),[G,$,k]);const E=(e,l)=>{j((0,u.Ok)({activeMenu:S,data:{...G,[l]:e}}))};return(0,r.useEffect)((()=>{null!==S&&void 0!==S&&S.refetch&&(j((0,x.eL)(L)),j((0,u.km)(S)))}),[null===S||void 0===S?void 0:S.refetch]),(0,r.useEffect)((()=>()=>{j((0,u.Ok)({activeMenu:S,data:{}}))}),[]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.A,{children:(0,b.jsx)("div",{className:"flex justify-content-space-between",children:(0,b.jsxs)(i.A,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,b.jsx)(m.G,{placeholder:D("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return g.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>E(e.value,"shop_id"),onDeselect:()=>E(null,"shop_id"),allowClear:!0,value:null===G||void 0===G?void 0:G.shop_id}),(0,b.jsx)(m.G,{placeholder:D("select.user"),fetchOptions:async function(e){const l={search:e,perPage:10,role:k};return _.A.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id})))}))},onSelect:e=>E(e.value,"user_id"),onDeselect:()=>E(null,"user_id"),style:{width:"100%"},value:null===G||void 0===G?void 0:G.user_id}),(0,b.jsx)(A,{value:$,onChange:e=>{E((l=>{var o,r;return{...l,date_from:null===e||void 0===e||null===(o=e[0])||void 0===o?void 0:o.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(r=e[1])||void 0===r?void 0:r.format("YYYY-MM-DD")}})),O(e)},disabledDate:e=>e&&e>y()().endOf("day"),style:{width:"100%"}})]})})}),(0,b.jsx)(d.A,{children:(0,b.jsx)(n.A,{scroll:{x:!0},columns:null===I||void 0===I?void 0:I.filter((e=>e.is_show)),dataSource:N,loading:P,pagination:{pageSize:F.perPage,page:(null===(f=S.data)||void 0===f?void 0:f.page)||1,total:null===z||void 0===z?void 0:z.total,defaultCurrent:null===(w=S.data)||void 0===w?void 0:w.page,current:null===(Y=S.data)||void 0===Y?void 0:Y.page},rowKey:e=>e.id,onChange:function(e,l,o){const{pageSize:r,current:t}=e,{field:d,order:i}=o,n=(0,p.A)(i);j((0,u.Ok)({activeMenu:S,data:{...G,perPage:r,page:t,column:d,sort:n}}))}})})]})}},47992:(e,l,o)=>{o.d(l,{G:()=>s});var r=o(9950),t=o(95491),d=o.n(t),i=o(99674),n=o(90650),a=o(44414);const s=e=>{let{fetchOptions:l,debounceTimeout:o=400,onClear:t,...s}=e;const[u,v]=(0,r.useState)(!1),[c,p]=(0,r.useState)([]),h=(0,r.useMemo)((()=>d()((e=>{p([]),v(!0),l(e).then((e=>{p(e),v(!1)}))}),o)),[l,o]);return(0,a.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),t&&t()},notFoundContent:u?(0,a.jsx)(n.A,{size:"small"}):"no results",...s,options:c,onFocus:()=>{h("")}})}},53774:(e,l,o)=>{o.d(l,{A:()=>t});var r=o(83291);function t(){var e,l;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,d=arguments.length>2?arguments[2]:void 0;const i=null===(e=r.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,n=Number(o).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a=t||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(d||(null===i||void 0===i?void 0:i.position)||"before")?`${n} ${a}`:`${a} ${n}`}}}]);