"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[7299],{27299:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var i=t(9950),a=t(12678),l=t(44070),n=t(29633),d=t(80737),o=t(48538),r=t(23263),u=t(12203),c=t(12449),v=t(76083),h=t(55386),m=t(91854),x=t(74623),g=t(88986),p=t(8168),f=t(70030),j=t(12408),k=t(18583),w=t(59051),y=t.n(w),A=t(13564),_=t(35116),C=t(28645),b=t(1160),I=t(44414);function S(){const{t:e}=(0,f.B)(),s=(0,m.wA)(),t=(0,A.Zp)(),w=i=>{s((0,x.X4)({url:`/users/user/${i.uuid}`,id:"user_info",name:e("user.info")})),t(`/users/user/${i.uuid}`,{state:{user_id:i.id}})},[S,M]=(0,i.useState)([{title:e("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:e("user"),dataIndex:"assign_user",key:"assign_user",is_show:!0,render:e=>(0,I.jsxs)("div",{className:"text-hover",onClick:()=>w(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("deliveryman"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,I.jsxs)("div",{className:"text-hover",onClick:()=>w(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("rating"),dataIndex:"rating",key:"rating",is_show:!0,render:e=>(0,I.jsx)(n.A,{allowHalf:!0,disabled:!0,defaultValue:e})},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>y()(e).format("YYYY-MM-DD HH:mm")},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,s)=>(0,I.jsxs)(d.A,{children:[(0,I.jsx)(o.A,{type:"primary",icon:(0,I.jsx)(a.A,{}),onClick:()=>H(s.id)}),(0,I.jsx)(_.A,{icon:(0,I.jsx)(l.A,{}),onClick:()=>{Y([s.id]),N(!0),O(!0)}})]})}]),{setIsModalVisible:N}=(0,i.useContext)(h.o),[P,Y]=(0,i.useState)(null),[z,H]=(0,i.useState)(null),[R,$]=(0,i.useState)(!1),[D,O]=(0,i.useState)(null),{activeMenu:V}=(0,m.d4)((e=>e.menu),m.bN),{reviews:B,meta:E,loading:K,params:T}=(0,m.d4)((e=>e.deliveryboyReview),m.bN),X=V.data,Z={sort:null===X||void 0===X?void 0:X.sort,column:null===X||void 0===X?void 0:X.column,perPage:null===X||void 0===X?void 0:X.perPage,page:null===X||void 0===X?void 0:X.page,assign:"deliveryman"};(0,i.useEffect)((()=>{V.refetch&&(s((0,b.iI)(Z)),s((0,x.km)(V)))}),[V.refetch]),(0,g.A)((()=>{s((0,b.iI)(Z))}),[V.data]);const q={id:P,onChange:e=>{Y(e)}};return(0,I.jsxs)(r.A,{title:e("deliveryboy.reviews"),extra:(0,I.jsxs)(d.A,{wrap:!0,children:[(0,I.jsx)(_.A,{size:"",onClick:()=>{null===P||0===P.length?c.oR.warning(e("select.the.product")):(N(!0),O(!1))},children:e("delete.selected")}),(0,I.jsx)(C.A,{columns:S,setColumns:M})]}),children:[(0,I.jsx)(u.A,{scroll:{x:!0},rowSelection:q,columns:null===S||void 0===S?void 0:S.filter((e=>e.is_show)),dataSource:B,pagination:{pageSize:T.perPage,page:T.page,total:E.total,defaultCurrent:T.page},rowKey:e=>e.id,onChange:function(e,t,i){const{pageSize:a,current:l}=e,{field:n,order:d}=i,o=(0,p.A)(d);s((0,x.Ok)({activeMenu:V,data:{perPage:a,page:l,column:n,sort:o}}))},loading:K}),(0,I.jsx)(v.A,{click:()=>{$(!0);const t={...Object.assign({},...P.map(((e,s)=>({[`ids[${s}]`]:e}))))};j.A.delete(t).then((()=>{c.oR.success(e("successfully.deleted")),s((0,b.iI)()),N(!1)})).finally((()=>$(!1)))},text:e(D?"delete":"all.delete"),setText:Y,loading:R}),z&&(0,I.jsx)(k.A,{id:z,handleCancel:()=>H(null)})]})}}}]);