"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[3590],{4587:(e,t,i)=>{i.d(t,{A:()=>h});var r=i(9950),s=i(23263),l=i(39452),a=i(94116),n=i(53439),o=i(44414);const d={position:"absolute",zIndex:"1"},c={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:i,width:u,height:h,xAxis:v,customOptions:m,card:p,type:x,extra:g,direction:f,bodyClass:y}=e,A=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return n.V3;case"bar":return n.ck;case"area":return n.cZ;case"pie":return n.vX}})(x)));const j=window.innerWidth<768,b=()=>{if(w.current){var e;const t=w.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight=`${j?0:null===(e=_.current)||void 0===e?void 0:e.offsetWidth}px`,"rtl"===f&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,r.useEffect)((()=>{b()}),[]);const _=(0,r.useRef)(null),w=(0,r.useRef)();A.xaxis={categories:v,labels:{formatter:function(e){return e},rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,style:{fontFamily:"inherit"}},tickAmount:Math.min(null===v||void 0===v?void 0:v.length,6),axisBorder:{show:!0},axisTicks:{show:!0}},m&&(A={...A,...m});const z=()=>(0,o.jsx)(a.Ay,{onResize:void setTimeout((()=>{b()}),600),children:(0,o.jsx)("div",{style:"rtl"===f?{direction:"ltr"}:{},className:"chartRef",ref:w,children:(0,o.jsx)(l.A,{options:A,type:x,series:i,width:u,height:h})})});return(0,o.jsx)(o.Fragment,{children:p?(0,o.jsx)(s.A,{children:(0,o.jsxs)("div",{className:`position-relative ${y}`,children:[(0,o.jsx)("div",{style:j?{}:d,children:t})&&(0,o.jsx)("h4",{className:"font-weight-bold",style:j?{}:d,children:t}),g&&(0,o.jsx)("div",{ref:_,style:j?{}:c,children:g}),z()]})}):z()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const h=u},27109:(e,t,i)=>{i.d(t,{A:()=>o});var r=i(89379),s=i(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var a=i(25085),n=function(e,t){return s.createElement(a.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:l}))};n.displayName="LineChartOutlined";const o=s.forwardRef(n)},28645:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(9950),s=i(66362),l=i(69216),a=i(80737),n=i(25933),o=i(57811),d=i(81541),c=i(48538),u=i(89323),h=i(70030),v=i(44414);const{Text:m}=s.A,p=e=>{let{columns:t=[],setColumns:i,style:s,size:p="",iconOnly:x}=e;const{t:g}=(0,h.B)(),[f,y]=(0,r.useState)(!1),A=(0,v.jsx)(l.A,{children:null===t||void 0===t?void 0:t.map(((e,r)=>(0,v.jsx)(l.A.Item,{children:(0,v.jsxs)(a.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(n.A,{defaultChecked:!0,onClick:()=>function(e){const r=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));i(r)}(e),disabled:1===r})]})},e+r)))});return(0,v.jsx)(o.A,{overlay:A,trigger:["click"],onVisibleChange:e=>{y(e)},visible:f,children:(0,v.jsx)(d.A,{title:g("change.columns"),children:(0,v.jsx)(c.A,{style:{...s},size:p,icon:(0,v.jsx)(u.A,{}),children:x?null:g("Columns")})})})}},31397:(e,t,i)=>{i.d(t,{A:()=>y});var r=i(66362),s=i(87094),l=i(41988),a=i(23263),n=i(80737),o=i(99674),d=i(40895),c=i(9950),u=i(27109),h=i(31598),v=i(4587),m=i(53439),p=i(70030),x=i(71795),g=i(44414);const{Title:f}=r.A,y=e=>{let{reportData:t={}}=e;const{by_time:i,options:r,handleByTime:y,chart_type:A,setChartType:j}=(0,c.useContext)(x.M),{t:b}=(0,p.B)(),_=(0,c.useMemo)((()=>{var e;return null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>e.time))}),[null===t||void 0===t?void 0:t.chart]),w=(0,c.useMemo)((()=>{var e;return Boolean(t.charts)?t.charts.map((e=>{var t;return{name:e.translation.title,data:(null===(t=e.stocks)||void 0===t?void 0:t.map((e=>e.total_order_quantity||e.avg_quantity||e.quantity||e.count||e.price||e.order_details_sum_quantity||0)))||[]}})):[{name:b("orders"),data:(null===t||void 0===t||null===(e=t.chart)||void 0===e?void 0:e.map((e=>parseInt(e.count||e.total_price||e.quantity||e.price||e.products_count||e.order_details_avg_quantity||e.order_details_avg_total_price||e.order_details_sum_quantity||e.avg_price||e.avg_quantity||0,10))))||[]}]}),[null===t||void 0===t?void 0:t.chart]);return(0,g.jsx)(s.A,{gutter:24,children:(0,g.jsx)(l.A,{span:24,children:(0,g.jsxs)(a.A,{children:[(0,g.jsx)(s.A,{gutter:24,className:"w-100",children:(0,g.jsxs)("div",{className:"d-flex justify-content-between w-100",children:[(0,g.jsx)(n.A,{size:"large",className:"d-flex",children:(0,g.jsx)(f,{level:3,className:"mb-0",children:b("item.sold")})}),(0,g.jsxs)("div",{className:"d-flex",children:[(0,g.jsx)(o.A,{style:{width:100},onChange:y,options:r,defaultValue:i}),(0,g.jsx)(d.A,{type:"vertical",style:{height:"100%"}}),(0,g.jsxs)(n.A,{children:[(0,g.jsx)(u.A,{style:{fontSize:"22px",cursor:"pointer",color:"area"===A?"green":""},onClick:()=>j("area")}),(0,g.jsx)(h.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===A?"green":""},onClick:()=>j("bar")})]})]})]})}),(0,g.jsx)(d.A,{}),(0,g.jsx)(v.A,{type:A||"area",card:!1,series:w,xAxis:_,height:280,customOptions:{colors:[m.lm[1],m.lm[2],m.lm[3],m.lm[4],m.lm[5],m.lm[6],m.lm[0]],legend:{show:!1},stroke:{width:2.5,curve:"smooth"}}})]})})})}},43590:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var r=i(66362),s=i(87864),l=i(48538),a=i(12916),n=i(57811),o=i(69216),d=i(90650),c=i(87094),u=i(41988),h=i(80737),v=i(23263),m=i(12203),p=i(9950),x=i(74623),g=i(91854),f=i(31397),y=i(59051),A=i.n(y),j=i(71795),b=i(28645),_=i(13564),w=i(70030),z=i(52073),k=i(88986),N=i(53774),C=(i(58547),i(44414));const{Text:I,Title:q}=r.A,{RangePicker:O}=s.A,S=()=>{const e=(0,g.wA)(),t=(0,_.Zp)(),{t:i}=(0,w.B)(),{date_from:r,date_to:s,by_time:y,chart:S,handleChart:V,handleDateRange:H}=(0,p.useContext)(j.M),{activeMenu:$}=(0,g.d4)((e=>e.menu),g.bN),{loading:M,chartData:R,productList:T}=(0,g.d4)((e=>e.orderReport),g.bN),{defaultCurrency:B}=(0,g.d4)((e=>e.currency),g.bN),[F,L]=(0,p.useState)(),[P,D]=(0,p.useState)([{title:"Order #",dataIndex:"id",key:"id",is_show:!0,render:(e,t)=>(0,C.jsxs)(l.A,{type:"primary",onClick:()=>W(t),children:["#",t.id]})},{title:"Status",dataIndex:"items_sold",key:"items_sold",is_show:!0,render:(e,t)=>(0,C.jsx)(a.A,{children:t.status})},{title:"Customer",dataIndex:"user_firstname",key:"user_firstname",is_show:!0,render:(e,t)=>(0,C.jsx)(C.Fragment,{children:`${t.firstname} ${t.lastname}`})},{title:"Customer type",key:"user_active",dataIndex:"user_active",is_show:!0,render:(e,t)=>{const i=Boolean(t.active);return(0,C.jsx)(a.A,{color:i?"green":"red",children:i?"Active":"Inactive"},t.id)}},{title:"Product(s)",key:"category",dataIndex:"category",is_show:!0,render:(e,t)=>{var i,r,s;return(null===(i=t.products)||void 0===i?void 0:i.length)>1?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("p",{children:t.products[0]}),(0,C.jsx)(n.A,{overlay:(0,C.jsx)(o.A,{children:null===(r=t.products)||void 0===r?void 0:r.slice(1,t.products.length).map(((e,t)=>(0,C.jsx)(o.A.Item,{children:e},t)))}),children:(0,C.jsx)(a.A,{style:{cursor:"pointer"},children:`+ ${(null===(s=t.products)||void 0===s?void 0:s.length)-1} more`})})]}):(0,C.jsx)(C.Fragment,{children:t.products[0]})}},{title:"Item sold",key:"item_sold",dataIndex:"item_sold",sorter:(e,t)=>Number(e.quantity)-Number(t.quantity),is_show:!0,render:(e,t)=>Number(t.quantity)},{title:"Net sales",key:"price",dataIndex:"price",is_show:!0,sorter:(e,t)=>e.price-t.price,render:(e,t)=>(0,C.jsx)(C.Fragment,{children:(0,N.A)(t.price,null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position)})}]),E=[{label:"Item sold",value:"quantity",price:!1,qty:"quantity"},{label:"Net sales",value:"price",price:!0,qty:"price"},{label:"Avg Order price",value:"avg_price",price:!0,qty:"avg_price"},{label:"Orders",value:"count",price:!1,qty:"count"}],W=r=>{const s=`seller/order/details/${r.id}`;e((0,x.wr)({url:s,id:"order_details",name:i("order.details"),refetch:!0,data:{}})),t(`/${s}`)},X=()=>{if(E.find((e=>e.value===S))){const t={date_from:r,date_to:s,type:y,chart:S,shop_id:null===F||void 0===F?void 0:F.value};e((0,z.HX)(t))}},Z=(t,i)=>{e((0,z.Nl)({date_from:r,date_to:s,by_time:y,chart:S,page:1,perPage:10,shop_id:null===F||void 0===F?void 0:F.value}))};(0,p.useEffect)((()=>{V(E[0].value)}),[]),(0,p.useEffect)((()=>{$.refetch&&(Z(),X(),e((0,x.km)($)))}),[$.refetch]),(0,k.A)((()=>{Z()}),[s,y,S,r,null===F||void 0===F?void 0:F.value]),(0,k.A)((()=>{X()}),[s,y,S,r,null===F||void 0===F?void 0:F.value]);return(0,C.jsxs)(d.A,{size:"large",spinning:M,children:[(0,C.jsx)(c.A,{gutter:24,className:"mb-3",children:(0,C.jsx)(u.A,{span:12,children:(0,C.jsx)(h.A,{size:"large",children:(0,C.jsx)(O,{defaultValue:[A()(r),A()(s)],onChange:H})})})}),(0,C.jsx)(c.A,{gutter:24,className:"report-products",children:null===E||void 0===E?void 0:E.map(((e,t)=>(0,C.jsx)(u.A,{span:6,onClick:()=>V(e.value),children:(0,C.jsxs)(v.A,{className:S===e.value&&"active",children:[(0,C.jsx)(c.A,{className:"mb-5",children:(0,C.jsx)(u.A,{children:(0,C.jsx)(I,{children:e.label})})}),(0,C.jsx)(c.A,{gutter:24,children:(0,C.jsx)(u.A,{span:18,children:(0,C.jsx)(q,{level:2,children:e.price?(0,N.A)(R[e.qty],null===B||void 0===B?void 0:B.symbol,null===B||void 0===B?void 0:B.position):R[e.qty]})})})]})},e.label)))}),(0,C.jsx)(f.A,{reportData:R,chart_data:"price_avg"}),(0,C.jsx)(c.A,{gutter:24,children:(0,C.jsx)(u.A,{span:24,children:(0,C.jsxs)(v.A,{children:[(0,C.jsxs)(h.A,{className:"d-flex justify-content-between",children:[(0,C.jsx)(I,{level:3,children:"Orders"}),(0,C.jsx)(h.A,{className:"d-flex justify-content-end",children:(0,C.jsx)(b.A,{columns:P,setColumns:D})})]}),(0,C.jsx)(m.A,{columns:null===P||void 0===P?void 0:P.filter((e=>e.is_show)),dataSource:null===T||void 0===T?void 0:T.data,rowKey:e=>e.id,loading:M,pagination:{pageSize:null===T||void 0===T?void 0:T.per_page,page:(null===T||void 0===T?void 0:T.current_page)||1,total:null===T||void 0===T?void 0:T.total,defaultCurrent:1},onChange:e=>{const{pageSize:t,current:i}=e;Z()},scroll:{x:1200}})]})})})]})}},53439:(e,t,i)=>{i.d(t,{V3:()=>s,cZ:()=>l,ck:()=>a,lm:()=>r,vX:()=>n});const r=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],s={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...r],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[],labels:{hideOverlappingLabels:!0,rotate:0,style:{fontSize:"12px"},showDuplicates:!1,trim:!1},tickAmount:void 0,tickPlacement:"on",axisBorder:{show:!0},axisTicks:{show:!0}},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},l={...s},a={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...r],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>`${e}`}}},n={colors:[...r],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},53774:(e,t,i)=>{i.d(t,{A:()=>s});var r=i(83291);function s(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;const a=null===(e=r.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,n=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=s||(null===a||void 0===a?void 0:a.symbol)||"$";return"after"===(l||(null===a||void 0===a?void 0:a.position)||"before")?`${n} ${o}`:`${o} ${n}`}},89323:(e,t,i)=>{i.d(t,{A:()=>o});var r=i(89379),s=i(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var a=i(25085),n=function(e,t){return s.createElement(a.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:l}))};n.displayName="TableOutlined";const o=s.forwardRef(n)}}]);