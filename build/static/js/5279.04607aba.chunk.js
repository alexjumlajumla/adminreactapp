"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5279],{55279:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var a=l(47313),n=l(97890),s=l(23560),i=l(10976),c=l(77181),o=l(72652),r=l(2717),u=l(90954),d=l(32447),v=l(54872),h=l(24511),f=l(73431),p=l(75336),b=l(20364),m=l(46417);const g=()=>{const{t:e}=(0,h.$)(),{activeMenu:t}=(0,r.v9)((e=>e.menu),r.wU),l=(0,r.I0)(),[g]=i.Z.useForm(),x=(0,n.s0)(),{id:Z}=(0,n.UO)(),[j,_]=(0,a.useState)(!1),{languages:k}=(0,r.v9)((e=>e.formLang),r.wU);(0,a.useEffect)((()=>()=>{const e=g.getFieldsValue(!0);l((0,u.nc)({activeMenu:t,data:e}))}),[]);function y(e){if(!e)return{};const{translations:t}=e,l=k.map((e=>{var l,a,n;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,[`button_text[${e.locale}]`]:null===(n=t.find((t=>t.locale===e.locale)))||void 0===n?void 0:n.button_text}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{var e;t.refetch&&(e=Z,_(!0),v.Z.getById(e).then((e=>{var a;let n=e.data;const s={...n,img:(i=n.galleries,i.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===(a=n.shops)||void 0===a?void 0:a.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(n)};var i;g.setFieldsValue(s),l((0,u.nc)({activeMenu:t,data:s}))})).finally((()=>{l((0,u.A_)(t)),_(!1)})))}),[t.refetch]),(0,m.jsx)(c.Z,{title:e("clone.banner"),className:"h-100",extra:(0,m.jsx)(f.Z,{}),children:j?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,m.jsx)(o.Z,{size:"large",className:"py-5"})}):(0,m.jsx)(b.Z,{form:g,handleSubmit:(a,n)=>{var i;const c="banners",o={status:"published"},h={url:a.url,shops:null===(i=a.shops)||void 0===i?void 0:i.map((e=>e.value)),images:n.map((e=>e.name)),clickable:a.clickable,title:(0,p.Z)(k,a,"title"),description:(0,p.Z)(k,a,"description"),button_text:(0,p.Z)(k,a,"button_text")};return v.Z.create(h).then((()=>{s.Am.success(e("successfully.cloned")),(0,r.dC)((()=>{l((0,u.ph)({...t,nextUrl:c})),l((0,d.f)(o))})),x("/banners")}))}})})}}}]);