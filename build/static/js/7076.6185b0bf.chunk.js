"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[7076],{36790:(e,l,a)=>{a.d(l,{A:()=>n});var i=a(82371);const n={getAll:e=>i.A.get("dashboard/admin/kitchen",{params:e})}},44832:(e,l,a)=>{a.d(l,{A:()=>_});var i=a(9950),n=a(3969),t=a(87094),s=a(41988),d=a(23263),r=a(55902),o=a(8724),u=a(25933),c=a(48538),v=a(47992),m=a(58547),h=a(37963),p=a(62572),x=a(91854),A=a(47933),j=a(74623),g=a(63010),y=a(13564),b=a(70030),f=a(16254),k=a(15249),I=a(79406),q=a(8750),N=a(72345),S=a(36790),C=a(80905),w=a(44414);const _=e=>{var l,a,_;let{next:$,action_type:F="",isRequest:P}=e;const{t:O}=(0,b.B)(),[B]=n.A.useForm(),E=n.A.useWatch("shop",B),L=(0,x.wA)(),{uuid:M}=(0,y.g)(),G=(0,y.Zp)(),[R,V]=(0,i.useState)(null),{activeMenu:T}=(0,x.d4)((e=>e.menu),x.bN),{defaultLang:Z,languages:z}=(0,x.d4)((e=>e.formLang),x.bN),[U,K]=(0,i.useState)(null!==(l=T.data)&&void 0!==l&&l.images?null===(a=T.data)||void 0===a?void 0:a.images:[]),[W,X]=(0,i.useState)(!1),[D,H]=(0,i.useState)(Boolean(null===(_=T.data)||void 0===_?void 0:_.kcal)),[J,Q]=(0,i.useState)({kitchen:!1});(0,i.useEffect)((()=>{const e=B.getFieldsValue(!0);L((0,j.Ok)({activeMenu:T,data:{...T.data,...e}}))}),[]);const Y=()=>{L((0,j.X4)({id:"category-add",url:"category/add",name:O("add.category")})),G("/category/add")};return(0,w.jsxs)(n.A,{layout:"vertical",form:B,initialValues:{active:!0,vegetarian:!0,...T.data},onFinish:e=>{var l,a,i,n,t;X(!0);const s={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(a=e.category)||void 0===a?void 0:a.value)||e.category,shop_id:null===(i=e.shop)||void 0===i?void 0:i.value,kitchen_id:(null===e||void 0===e||null===(n=e.kitchen)||void 0===n?void 0:n.value)||void 0,unit_id:null===(t=e.unit)||void 0===t?void 0:t.value,kcal:D?String(e.kcal):void 0,carbs:D?String(e.carbs):void 0,protein:D?String(e.protein):void 0,fats:D?String(e.fats):void 0,images:void 0,brand:void 0,category:void 0,shop:void 0,unit:void 0,kitchen:void 0,tax:e.tax||0,...Object.assign({},...U.map(((e,l)=>({[`images[${l}]`]:e.name}))))};if(P)return L((0,j.Ok)({activeMenu:T,data:{...T.data,...s,images:U,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0,title:{...Object.assign({},...z.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},description:{...Object.assign({},...z.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))}}})),void $();"edit"===F?function(e,l){A.A.update(M,l).then((()=>{L((0,j.Ok)({activeMenu:T,data:{...e,...null===T||void 0===T?void 0:T.data}})),$()})).catch((e=>V(e.response.data.params))).finally((()=>X(!1)))}(e,s):function(e,l){A.A.create(l).then((l=>{let{data:a}=l;L((0,j.W6)({id:`product-${a.uuid}`,url:`product/${a.uuid}`,name:O("add.product"),data:e,refetch:!1})),G(`/product/${a.uuid}/?step=1`)})).catch((e=>V(e.response.data.params))).finally((()=>X(!1)))}(e,s)},children:[(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:16,children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("basic.info"),children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:z.map((e=>(0,w.jsx)(n.A.Item,{label:O("name"),name:`title[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===Z,message:O("required")},{type:"string",min:2,max:200,message:O("min.2.max.200.chars")}],hidden:e.locale!==Z,children:(0,w.jsx)(r.A,{})},"name"+e.id)))}),(0,w.jsx)(s.A,{span:24,children:z.map((e=>(0,w.jsx)(n.A.Item,{label:O("description"),name:`description[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===Z,message:O("required")},{type:"string",min:2,max:200,message:O("min.2.max.200.chars")}],hidden:e.locale!==Z,children:(0,w.jsx)(k.A,{rows:3})},"description"+e.id)))})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("pricing"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("min.qty"),name:"min_qty",rules:[{required:!0,message:O("required")}],children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("max.qty"),name:"max_qty",rules:[{required:!0,message:O("required")}],children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("tax"),name:"tax",rules:[{validator:(e,l)=>l&&(l<0||l>100)?Promise.reject(new Error(O("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,w.jsx)(o.A,{className:"w-100",addonAfter:"%"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:O("required")},{type:"number",min:0,message:O("must.be.positive")}],help:null!==R&&void 0!==R&&R.interval?R.interval[0]:null,validateStatus:null!==R&&void 0!==R&&R.interval?"error":"success",children:(0,w.jsx)(o.A,{className:"w-100"})})})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("additions"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("active"),name:"active",valuePropName:"checked",children:(0,w.jsx)(u.A,{})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,w.jsx)(u.A,{})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{label:O("nutrition."+(D?"on":"off")),valuePropName:"checked",children:(0,w.jsx)(u.A,{checked:D,onChange:e=>H(e)})})})]})})}),D&&(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("nutritional.value.of.product"),children:(0,w.jsxs)(t.A,{gutter:12,children:[(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{rules:[{required:!0,message:O("required")}],label:O("kcal"),name:"kcal",children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{rules:[{required:!0,message:O("required")}],label:O("carbs"),name:"carbs",children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{rules:[{required:!0,message:O("required")}],label:O("protein"),name:"protein",children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})}),(0,w.jsx)(s.A,{span:6,children:(0,w.jsx)(n.A.Item,{rules:[{required:!0,message:O("required")}],label:O("fats"),name:"fats",children:(0,w.jsx)(o.A,{min:0,className:"w-100"})})})]})})})]})}),(0,w.jsx)(s.A,{span:8,children:(0,w.jsxs)(t.A,{children:[(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("organization"),children:(0,w.jsxs)(t.A,{children:[!P&&(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{label:O("shop/restaurant"),name:"shop",rules:[{required:!0,message:O("required")}],children:(0,w.jsx)(I.a,{fetchOptions:async function(e){const l={search:null!==e&&void 0!==e&&e.length?e:void 0,perPage:20,page:1,active:1};return m.A.get(l).then((e=>e.data.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onChange:()=>{B.setFieldsValue({category:void 0,kitchen:void 0})}})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{label:O("category"),name:"category",rules:[{required:!0,message:O("required")}],children:(0,w.jsx)(N.v,{disabled:!(null!==E&&void 0!==E&&E.value),refetch:!0,fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,shop_id:null===E||void 0===E?void 0:E.value,"statuses[0]":"pending","statuses[1]":"published",active:1};return p.A.selectPaginate(l).then((e=>e.data.map((e=>{var l,a,i;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0,children:null===e||void 0===e||null===(i=e.children)||void 0===i?void 0:i.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))))},dropdownRender:e=>(0,w.jsxs)(w.Fragment,{children:[e,(0,w.jsx)("div",{className:"p-1",children:(0,w.jsx)(c.A,{icon:(0,w.jsx)(q.A,{}),className:"w-100",onClick:Y,children:O("add.category")})})]})})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{label:O("kitchen"),name:"kitchen",children:(0,w.jsx)(C.j,{allowClear:!1,fetchOptions:e=>{let{search:l,page:a=1}=e;const i={search:null!==l&&void 0!==l&&l.length?l:void 0,page:a,perPage:20,active:1,shop_id:null===E||void 0===E?void 0:E.value};return S.A.getAll(i).then((e=>{var l,a,i;return Q({...J,kitchen:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.last_page)}),null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:J.kitchen,disabled:!(null!==E&&void 0!==E&&E.value)})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{label:O("brand"),name:"brand",children:(0,w.jsx)(v.G,{fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return h.A.getAll(l).then((e=>e.data.map((e=>({label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{label:O("unit"),name:"unit",rules:[{required:!0,message:O("required")}],children:(0,w.jsx)(v.G,{fetchOptions:function(e){const l={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return g.A.getAll(l).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})]})})}),(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(d.A,{title:O("media"),children:(0,w.jsx)(t.A,{children:(0,w.jsx)(s.A,{span:24,children:(0,w.jsx)(n.A.Item,{name:"images",rules:[{required:!(null!==U&&void 0!==U&&U.length),message:O("required")}],children:(0,w.jsx)(f.A,{type:"products",imageList:U,setImageList:K,form:B,multiple:!0})})})})})})]})})]}),(0,w.jsx)(c.A,{type:"primary",htmlType:"submit",loading:W,children:O("next")})]})}},49326:(e,l,a)=>{a.d(l,{C:()=>i});const i=[{title:"product",content:"First-content"},{title:"product.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]},56409:(e,l,a)=>{a.d(l,{A:()=>A});var i=a(9950),n=a(3969),t=a(32645),s=a(48538),d=a(55902),r=a(70030),o=a(71999),u=a(91854),c=a(11260),v=a(12449),m=a(88149),h=a(31281),p=a(81446),x=a(44414);function A(e){let{modal:l,handleCancel:a,onSuccess:A}=e;const[j]=n.A.useForm(),{t:g}=(0,r.B)(),y=(0,u.wA)(),[b,f]=(0,i.useState)(!1),[k,I]=(0,i.useState)(!1),{languages:q,defaultLang:N}=(0,u.d4)((e=>e.formLang),u.bN);(0,i.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),c.A.getGroupById(e).then((e=>{const l=e.data;j.setFieldsValue({...l,...S(l)})})).finally((()=>I(!1))))}),[l]);function S(e){if(!e)return{};const{translations:l}=e,a=q.map((e=>{var a;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,x.jsx)(t.A,{title:null!==l&&void 0!==l&&l.id?g("edit.extra.group"):g("add.extra.group"),visible:!!l,onCancel:a,footer:[(0,x.jsx)(s.A,{type:"primary",onClick:()=>j.submit(),loading:b,children:g("save")},"save-button-group"),(0,x.jsx)(s.A,{type:"default",onClick:a,children:g("cancel")},"cancel-button-group")],children:k?(0,x.jsx)(p.A,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(o.A,{})}),(0,x.jsx)(n.A,{layout:"vertical",name:"extra-group",form:j,onFinish:e=>{const i={title:(0,h.A)(q,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){f(!0),c.A.updateGroup(e,l).then((()=>{v.oR.success(g("successfully.updated")),y((0,m.Nj)()),a()})).finally((()=>f(!1)))}(null===l||void 0===l?void 0:l.id,i):function(e){f(!0),c.A.createGroup(e).then((()=>{v.oR.success(g("successfully.created")),a(),y((0,m.Nj)()),A&&A()})).finally((()=>f(!1)))}(i)},children:q.map((e=>(0,x.jsx)(n.A.Item,{rules:[{required:e.locale===N,message:g("required")}],name:`title[${e.locale}]`,label:g("title"),hidden:e.locale!==N,children:(0,x.jsx)(d.A,{placeholder:g("title")})},"title"+e.locale)))})]})})}},57844:(e,l,a)=>{a.d(l,{A:()=>f});var i=a(9950),n=a(23263),t=a(91524),s=a(87094),d=a(41988),r=a(98412),o=a(80737),u=a(48538),c=a(90650),v=a(91854),m=a(13564),h=a(74623),p=a(92979),x=a(70030),A=a(47933),j=a(63620),g=a(12449),y=a(98890),b=a(44414);const f=e=>{var l,a,f,k,I,q,N,S,C,w,_,$,F;let{prev:P,isRequest:O}=e;const{t:B}=(0,x.B)(),{activeMenu:E}=(0,v.d4)((e=>e.menu),v.bN),{defaultLang:L,languages:M}=(0,v.d4)((e=>e.formLang),v.bN),G=(0,m.Zp)(),R=(0,v.wA)(),[V,T]=(0,i.useState)({}),[Z,z]=(0,i.useState)(null),{uuid:U}=(0,m.g)(),[K,W]=(0,i.useState)(!1);function X(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,a=M.map((e=>{var a,i;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.description}}));return Object.assign({},...a)}(0,i.useEffect)((()=>{O||function(e){z(!0),A.A.getById(e).then((e=>{const l={...e.data,...X(e.data),properties:e.data.properties.map(((e,l)=>({id:l,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};T(l)})).finally((()=>z(!1)))}(U)}),[O]);const D=E.data,H=O?E.data.model:V;return Z?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(c.A,{size:"large",className:"py-5"})}):(0,b.jsxs)(n.A,{children:[O&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(t.A,{bordered:!0,title:B("changed.info"),children:[(0,b.jsx)(t.A.Item,{label:`${B("title")} (${L})`,span:3,children:D[`title[${L}]`]}),(0,b.jsx)(t.A.Item,{label:`${B("description")} (${L})`,span:3,children:D[`description[${L}]`]}),(0,b.jsx)(t.A.Item,{label:B("shop"),span:1.5,children:null===D||void 0===D||null===(l=D.shop)||void 0===l?void 0:l.translation.title}),(0,b.jsx)(t.A.Item,{label:B("category"),span:1.5,children:null===D||void 0===D||null===(a=D.category)||void 0===a?void 0:a.label}),(0,b.jsx)(t.A.Item,{label:B("brand"),span:1.5,children:null===D||void 0===D||null===(f=D.brand)||void 0===f?void 0:f.label}),(0,b.jsx)(t.A.Item,{label:B("unit"),span:1.5,children:null===D||void 0===D||null===(k=D.unit)||void 0===k?void 0:k.label}),(0,b.jsx)(t.A.Item,{label:B("images"),span:3,children:(0,b.jsx)(s.A,{gutter:12,children:null===D||void 0===D||null===(I=D.images)||void 0===I?void 0:I.map(((e,l)=>(0,b.jsx)(d.A,{children:(0,b.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,b.jsx)(t.A.Item,{label:B("tax"),children:(null===D||void 0===D?void 0:D.tax)||0}),(0,b.jsx)(t.A.Item,{label:B("min.quantity"),children:null===D||void 0===D?void 0:D.min_qty}),(0,b.jsx)(t.A.Item,{label:B("max.quantity"),children:null===D||void 0===D?void 0:D.max_qty})]}),(0,b.jsx)(r.A,{className:"mt-4",children:(0,b.jsx)(r.A.Panel,{header:B("stocks"),children:null===D||void 0===D?void 0:D.stocks.map(((e,l)=>{var a;return e?(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",children:[(0,b.jsx)(t.A.Item,{label:B("price"),span:2,children:e.price}),(0,b.jsx)(t.A.Item,{label:B("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(a=e.ids)||void 0===a?void 0:a.map(((e,l)=>(0,b.jsx)(t.A.Item,{label:null===D||void 0===D?void 0:D.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l):""}))},"stocks")})]}),(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",title:B("original.info"),children:[(0,b.jsx)(t.A.Item,{label:`${B("title")} (${L})`,span:3,column:3,children:(null===(q=H.translation)||void 0===q?void 0:q.title)||H[`title[${L}]`]}),(0,b.jsx)(t.A.Item,{label:`${B("description")} (${L})`,span:3,column:3,children:(null===H||void 0===H||null===(N=H.translation)||void 0===N?void 0:N.description)||H[`description[${L}]`]}),(0,b.jsx)(t.A.Item,{label:B("shop"),span:1.5,column:1.5,children:null===(S=H.shop)||void 0===S?void 0:S.translation.title}),(0,b.jsx)(t.A.Item,{label:B("category"),span:1.5,column:1.5,children:null===(C=H.category)||void 0===C?void 0:C.translation.title}),(0,b.jsx)(t.A.Item,{label:B("brand"),span:1.5,column:1.5,children:null===(w=H.brand)||void 0===w?void 0:w.title}),(0,b.jsx)(t.A.Item,{label:B("unit"),span:1.5,column:1.5,children:null===(_=H.unit)||void 0===_?void 0:_.translation.title}),(0,b.jsx)(t.A.Item,{label:B("images"),span:3,column:3,children:(0,b.jsx)(s.A,{gutter:12,children:null===H||void 0===H||null===($=H.galleries)||void 0===$?void 0:$.map(((e,l)=>(0,b.jsx)(d.A,{children:(0,b.jsx)("img",{width:80,alt:"product",src:j.sE+e.path})},"image"+l)))})}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:B("tax"),children:H.tax||0}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:B("min.quantity"),children:H.min_qty}),(0,b.jsx)(t.A.Item,{span:3,column:3,label:B("max.quantity"),children:H.max_qty})]}),(0,b.jsx)(r.A,{className:"mt-4",children:(0,b.jsx)(r.A.Panel,{header:B("stocks"),children:null===(F=H.stocks)||void 0===F?void 0:F.map(((e,l)=>e?(0,b.jsxs)(t.A,{bordered:!0,className:"mt-4",children:[(0,b.jsx)(t.A.Item,{label:B("price"),span:2,column:2,children:e.price}),(0,b.jsx)(t.A.Item,{label:B("quantity"),span:2,column:2,children:e.quantity}),e.extras.map(((e,l)=>{var a,i;return(0,b.jsx)(t.A.Item,{label:null===e||void 0===e||null===(a=e.group)||void 0===a||null===(i=a.translation)||void 0===i?void 0:i.title,span:2,column:2,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l):""))},"stocks")}),(0,b.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,b.jsxs)(o.A,{children:[(0,b.jsx)(u.A,{onClick:P,children:B("prev")}),(0,b.jsx)(u.A,{loading:K,type:"primary",onClick:function(){const e={status:void 0},l="catalog/products";if(O&&E.data){W(!0);const e={id:E.data.model_id,type:"product",data:E.data};y.A.requestChangeUpdate(E.data.request_id,e).then((()=>{G(`/${l}`,{state:{tab:"request"}}),g.oR.success(B("successfully.updated")),R((0,h.EK)({...E,nextUrl:l}))})).finally((()=>{W(!1)}))}else R((0,h.EK)({...E,nextUrl:l})),R((0,p.j0)(e)),G(`/${l}`)},children:B("finish")})]})})]})}},59585:(e,l,a)=>{a.d(l,{A:()=>_});var i=a(9950),n=a(23263),t=a(3969),s=a(80737),d=a(48538),r=a(91854),o=a(47933),u=a(74623),c=a(70030),v=a(13564),m=a(12449),h=a(25495),p=a(32645),x=a(55902),A=a(63611),j=a(12916),g=a(7785),y=a(11260),b=a(56409),f=a(8750),k=a(37295),I=a(44414);const q=e=>{let{open:l,onClose:a,selectedExtras:n,onSelect:t}=e;const{t:s}=(0,c.B)(),[r,o]=(0,i.useState)([]),[u,v]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1),[q,N]=(0,i.useState)(""),S=(0,k.A)(q,500),[C,w]=(0,i.useState)(),_=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const a={valid:!0,perPage:10,search:e,page:l};y.A.getAllGroups(a).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));o(l),w(e.meta)})).finally((()=>v(!1)))};return(0,i.useEffect)((()=>{l&&_(S)}),[l,S]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.A,{visible:l,onCancel:()=>{a(),N("")},footer:u?null:(0,I.jsx)(d.A,{type:"link",onClick:()=>h(!0),style:{paddingLeft:0},icon:(0,I.jsx)(f.A,{}),children:s("add.new.extra")}),children:[(0,I.jsx)(x.A,{className:"mt-3",value:q,onChange:e=>N(e.target.value)}),(0,I.jsx)(A.Ay,{loading:u,dataSource:r.filter((e=>!(null!==n&&void 0!==n&&n.some((l=>l.id===e.id))))),renderItem:e=>(0,I.jsx)(A.Ay.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,I.jsx)(j.A,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{t(e)},children:e.label})}),(0,I.jsx)(g.A,{onChange:e=>{_(S,e)},current:null===C||void 0===C?void 0:C.current_page,total:null===C||void 0===C?void 0:C.total})]}),(0,I.jsx)(b.A,{modal:m,handleCancel:()=>h(!1),onSuccess:()=>_()})]})};var N=a(52765),S=a(90247),C=a(82615);const w=e=>{let{extra:l,onClose:a,onSelect:n}=e;const{t:t}=(0,c.B)(),[s,r]=(0,i.useState)(!1),[o,u]=(0,i.useState)([]),[v,m]=(0,i.useState)([]),[h,x]=(0,i.useState)(!1);function j(e){r(!0),y.A.getGroupById(e).then((e=>u(e.data.extra_values.map((e=>({label:e.value,value:e.id})))))).finally((()=>{r(!1)}))}return(0,i.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(j(l.value),m((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.A,{visible:!!l,onCancel:a,footer:[(0,I.jsx)(d.A,{onClick:a,children:t("cancel")}),!s&&o.length>0&&(0,I.jsx)(d.A,{onClick:()=>{const e=[];o.forEach((l=>{v.forEach((a=>{l.value===a&&e.push(l)}))})),n(null===l||void 0===l?void 0:l.value,e),a()},type:"primary",children:t("save")})],children:[(0,I.jsx)(N.A.Group,{value:v,onChange:e=>{m(e)},className:"w-100",children:0!==(null===o||void 0===o?void 0:o.length)||s?(0,I.jsx)(A.Ay,{dataSource:o,loading:s,renderItem:e=>(0,I.jsx)(A.Ay.Item,{children:(0,I.jsx)(N.A,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,I.jsx)(S.A,{})}),s?null:(0,I.jsx)(d.A,{type:"link",onClick:()=>x(!0),style:{paddingLeft:0},icon:(0,I.jsx)(f.A,{}),children:t("add.new.extra")})]}),l&&(0,I.jsx)(C.A,{modal:h,handleCancel:()=>x(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>j(null===l||void 0===l?void 0:l.value)})]})},_=e=>{var l;let{next:a,prev:p,isRequest:x}=e;const{t:A}=(0,c.B)(),j=(0,r.wA)(),{uuid:g,id:y}=(0,v.g)(),b=(0,v.Zp)(),{activeMenu:f}=(0,r.d4)((e=>e.menu),r.bN),[k,N]=(0,i.useState)(!1),[S,C]=(0,i.useState)(!1),[_,$]=(0,i.useState)((null===(l=f.data)||void 0===l?void 0:l.extras)||[]),[F,P]=(0,i.useState)(null),[O,B]=(0,i.useState)(!1);return(0,I.jsx)(n.A,{children:(0,I.jsxs)(t.A,{layout:"vertical",initialValues:{...f.data},onFinish:()=>{if(_.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void m.oR.error(A("please.select.at.least.1.extra.value.for.each.extra"));const e=_.map((e=>e.value));if(e.sort(((e,l)=>e-l)),x)return j((0,u.Ok)({activeMenu:f,data:{...f.data,extras:_}})),void b(`/product-request/${y}?step=2`,{state:{generate:O}});N(!0),o.A.extras(g,{extras:e}).then((()=>{j((0,u.Ok)({activeMenu:f,data:{...f.data,extras:_}})),a()})).finally((()=>N(!1)))},children:[(0,I.jsx)(q,{open:S,onClose:()=>C(!1),selectedExtras:_,onSelect:e=>{B(!0),$((l=>[...l,e])),C(!1)}}),(0,I.jsx)(w,{extra:F,onClose:()=>P(null),onSelect:(e,l)=>{B(!0),$((a=>a.map((a=>{if(a.value===e){const e=l.map((e=>{var l,a;const i=null===(l=f.data)||void 0===l||null===(a=l.extras)||void 0===a?void 0:a.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===i||void 0===i?void 0:i.stock_id}}));return{...a,values:e}}return a}))))}}),(0,I.jsx)(s.A,{className:"w-100",size:"middle",direction:"vertical",children:_.map((e=>{var l;return(0,I.jsxs)(s.A,{className:"w-100",direction:"vertical",children:[(0,I.jsxs)(s.A,{className:"w-100",wrap:!0,children:[(0,I.jsx)(d.A,{onClick:()=>P(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,I.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,I.jsx)("button",{onClick:()=>{return a=e.value,i=l.value,B(!0),void $((e=>e.map((e=>e.value===a?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==i)))||[]}:e))));var a,i},type:"button",className:"extra-clear",children:(0,I.jsx)(h.lr4,{})})]},l.value)))]}),(0,I.jsx)(s.A,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,I.jsx)(d.A,{danger:!0,onClick:()=>{return l=e,B(!0),void $((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:A("delete")})})]},e.id)}))}),(0,I.jsx)(d.A,{onClick:()=>C(!0),className:"w-100 my-3",type:"dashed",children:A("add.extra")}),(0,I.jsxs)(s.A,{className:"mt-3",children:[(0,I.jsx)(d.A,{onClick:p,children:A("prev")}),(0,I.jsx)(d.A,{type:"primary",htmlType:"submit",loading:k,children:A("next")})]})]})})}},79406:(e,l,a)=>{a.d(l,{a:()=>o});var i=a(9950),n=a(95491),t=a.n(n),s=a(99674),d=a(90650),r=a(44414);const o=e=>{let{fetchOptions:l,debounceTimeout:a=400,refetch:n=!1,...o}=e;const[u,c]=(0,i.useState)(!1),[v,m]=(0,i.useState)([]),h=(0,i.useMemo)((()=>t()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),a)),[l,a]);return(0,r.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:u?(0,r.jsx)(d.A,{size:"small"}):"no results",...o,options:v,onFocus:()=>{h("")}})}},82615:(e,l,a)=>{a.d(l,{A:()=>j});var i=a(3969),n=a(55902),t=a(32645),s=a(48538),d=a(9950),r=a(28276),o=a(70030),u=a(91854),c=a(12449),v=a(32599),m=a(62466),h=a(43999),p=a(11260),x=a(47992),A=a(44414);function j(e){let{modal:l,handleCancel:a,onSuccess:j,groupId:g}=e;const[y]=i.A.useForm(),{t:b}=(0,o.B)(),f=(0,u.wA)(),[k,I]=(0,d.useState)(!1),[q,N]=(0,d.useState)("text"),[S,C]=(0,d.useState)(null),[w,_]=(0,d.useState)(""),{extraGroups:$}=(0,u.d4)((e=>e.extraGroup),u.bN);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,a,i;N(l.group.type);const n={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title,value:null===l||void 0===l||null===(i=l.group)||void 0===i?void 0:i.id},value:l.value};switch(l.group.type){case"color":_(l.value);break;case"image":C((0,m.A)(l.value))}y.setFieldsValue(n)}g&&y.setFieldsValue({extra_group_id:{value:g}})}),[l,g]);function F(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,A.jsx)(t.A,{title:null!==l&&void 0!==l&&l.id?b("edit.extra"):b("add.extra"),visible:!!l,onCancel:a,footer:[(0,A.jsx)(s.A,{type:"primary",onClick:()=>y.submit(),loading:k,children:b("save")}),(0,A.jsx)(s.A,{type:"default",onClick:a,children:b("cancel")})],children:(0,A.jsxs)(i.A,{name:"extra-form",layout:"vertical",form:y,onFinish:e=>{var i;console.log(e);const n={extra_group_id:null===e||void 0===e||null===(i=e.extra_group_id)||void 0===i?void 0:i.value,value:F(q,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),p.A.updateValue(e,l).then((()=>{c.oR.success(b("successfully.updated")),a(),f((0,h.nZ)())})).finally((()=>I(!1)))})(l.id,n):(e=>{I(!0),p.A.createValue(e).then((()=>{c.oR.success(b("successfully.created")),a(),f((0,h.nZ)()),j&&j()})).finally((()=>I(!1)))})(n)},children:[(0,A.jsx)(i.A.Item,{name:"extra_group_id",label:b("extra.group"),hidden:!!g,rules:[{required:!0,message:""}],children:(0,A.jsx)(x.G,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),p.A.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,A.jsx)(i.A.Item,{name:"value",label:b("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,A.jsx)(r.Xq,{onChangeComplete:e=>_(e.hex),color:w,disableAlpha:!0});case"text":return(0,A.jsx)(n.A,{placeholder:b("enter.extra.value")});case"image":return(0,A.jsx)(v.A,{type:"extras",image:S,setImage:C,form:y,name:"value"});default:return""}})(q)})]})})}},93567:(e,l,a)=>{a.d(l,{A:()=>S});var i=a(91854),n=a(9950),t=a(68387),s=a(32645),d=a(23263),r=a(80737),o=a(48538),u=a(70030),c=a(47933),v=a(12449),m=a(13564),h=a(74623),p=a(12203),x=a(24513),A=a(44070),j=a(35116),g=a(44414);const y=e=>{let{properties:l,editSelectedProperty:a,deleteProperty:i,loading:n=!1}=e;const{t:t}=(0,u.B)(),s=[{title:t("key"),dataIndex:"key",key:"key"},{title:t("value"),dataIndex:"value",key:"value"},{title:t("options"),key:"options",render:(e,l)=>(0,g.jsxs)(r.A,{children:[(0,g.jsx)(o.A,{type:"primary",icon:(0,g.jsx)(x.A,{}),onClick:()=>a(l)}),(0,g.jsx)(j.A,{type:"primary",danger:!0,icon:(0,g.jsx)(A.A,{}),onClick:()=>i(null===l||void 0===l?void 0:l.id)})]})}];return(0,g.jsx)(d.A,{loading:n,children:(0,g.jsx)(p.A,{dataSource:l,columns:s,pagination:!1})})};var b=a(3969),f=a(87094),k=a(41988),I=a(55902);const q=e=>{let{addNewProperty:l,loading:a=!1}=e;const{t:n}=(0,u.B)(),[s]=b.A.useForm(),{defaultLang:r,languages:c}=(0,i.d4)((e=>e.formLang),i.bN);return(0,g.jsx)(d.A,{loading:a,children:(0,g.jsx)(b.A,{form:s,layout:"vertical",onFinish:e=>{const a={key:null===e||void 0===e?void 0:e[`key[${r}]`],value:null===e||void 0===e?void 0:e[`value[${r}]`]},i=c.map((l=>({id:(0,t.P)(),locale:null===l||void 0===l?void 0:l.locale,key:(null===e||void 0===e?void 0:e[`key[${null===l||void 0===l?void 0:l.locale}]`])||(null===a||void 0===a?void 0:a.key),value:(null===e||void 0===e?void 0:e[`value[${l.locale}]`])||(null===a||void 0===a?void 0:a.value)})));l(i),s.resetFields()},children:(0,g.jsxs)(f.A,{gutter:12,children:[(0,g.jsx)(k.A,{span:8,children:c.map((e=>(0,g.jsx)(b.A.Item,{label:n("key"),name:`key[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==r,rules:[{required:(null===e||void 0===e?void 0:e.locale)===r,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.A,{span:8,children:c.map((e=>(0,g.jsx)(b.A.Item,{label:n("value"),name:`value[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==r,rules:[{required:(null===e||void 0===e?void 0:e.locale)===r,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.A,{children:(0,g.jsx)(b.A.Item,{label:" ",children:(0,g.jsx)(o.A,{type:"primary",htmlType:"submit",children:n("add")})})})]})})})},N=e=>{let{property:l,editProperty:a}=e;const{t:i}=(0,u.B)(),[n]=b.A.useForm();return(0,g.jsx)(d.A,{children:(0,g.jsx)(b.A,{form:n,layout:"vertical",onFinish:e=>{a({...l,...e})},initialValues:{key:null===l||void 0===l?void 0:l.key,value:null===l||void 0===l?void 0:l.value},children:(0,g.jsxs)(f.A,{gutter:12,children:[(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(b.A.Item,{label:i("key"),name:"key",rules:[{required:!0,message:i("required")},{type:"string",min:2,max:200,message:i("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})})}),(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(b.A.Item,{label:i("value"),name:"value",rules:[{required:!0,message:i("required")},{type:"string",min:2,max:200,message:i("min.2.max.200.chars")}],children:(0,g.jsx)(I.A,{})})}),(0,g.jsx)(k.A,{span:24,children:(0,g.jsx)(o.A,{type:"primary",htmlType:"submit",className:"w-100",children:i("edit")})})]})})})},S=e=>{var l;let{prev:a,next:p,isRequest:x=!1}=e;const{t:A}=(0,u.B)(),{uuid:j}=(0,m.g)(),b=(0,i.wA)(),{defaultLang:f}=(0,i.d4)((e=>e.formLang),i.bN),{activeMenu:k}=(0,i.d4)((e=>e.menu),i.bN),[I,S]=(0,n.useState)(x&&(null===(l=k.data)||void 0===l?void 0:l.properties)||[]),[C,w]=(0,n.useState)(null),[_,$]=(0,n.useState)(!1),[F,P]=(0,n.useState)(!1);(0,n.useEffect)((()=>{x||O(j)}),[]);const O=e=>{$(!0),c.A.getById(e).then((e=>{var l,a;S(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(a=l.properties)||void 0===a?void 0:a.map((e=>({...e,id:(0,t.P)()}))))})).finally((()=>{$(!1)}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(q,{loading:_,addNewProperty:e=>{S([...I,...e])}}),(0,g.jsx)(y,{loading:_,properties:null===I||void 0===I?void 0:I.filter((e=>(null===e||void 0===e?void 0:e.locale)===f)),editSelectedProperty:w,deleteProperty:e=>{s.A.confirm({title:A("are.you.sure?"),okText:A("yes"),onOk:()=>{S((l=>l.filter((l=>l.id!==e))))}})}}),(0,g.jsx)(d.A,{children:(0,g.jsxs)(r.A,{children:[(0,g.jsx)(o.A,{onClick:a,disabled:_,children:A("prev")}),(0,g.jsx)(o.A,{type:"primary",onClick:()=>{const e={key:[],value:[]};if(null===I||void 0===I||I.map((l=>{e.key.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.key}),e.value.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.value})})),x)return b((0,h.Ok)({activeMenu:k,data:{...k.data,properties:I,props:e}})),void p();P(!0),c.A.properties(j,e).then((()=>{v.oR.success(A("successfully.updated")),p()})).finally((()=>{P(!1)}))},disabled:_,loading:F,children:A("next")})]})}),!!C&&(0,g.jsx)(s.A,{visible:!!C,onCancel:()=>{w(null)},footer:!1,children:(0,g.jsx)(N,{property:C,editProperty:e=>{S((l=>l.map((l=>l.id===e.id?e:l)))),w(null)}})})]})}}}]);