"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[5617],{15617:(e,l,t)=>{t.r(l),t.d(l,{default:()=>x});var a=t(9950),i=t(13564),n=t(12449),s=t(3969),o=t(23263),u=t(90650),d=t(91854),r=t(74623),c=t(5386),v=t(5302),m=t(70030),p=t(71999),h=t(31281),b=t(82035),f=t(44414);const x=()=>{const{t:e}=(0,m.B)(),{activeMenu:l}=(0,d.d4)((e=>e.menu),d.bN),t=(0,d.wA)(),[x]=s.A.useForm(),A=(0,i.Zp)(),{id:g}=(0,i.g)(),[j,k]=(0,a.useState)(!1),{languages:_}=(0,d.d4)((e=>e.formLang),d.bN);function y(e){if(!e)return{};const{translations:l}=e,t=_.map((e=>{var t,a,i;return{[`title[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.title,[`description[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description,[`button_text[${e.locale}]`]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.button_text}}));return Object.assign({},...t)}return(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.refetch&&(e=g,k(!0),v.A.getById(e).then((e=>{var a;let i=e.data;const n={...i,img:(s=i.galleries,s.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===i||void 0===i||null===(a=i.shops)||void 0===a?void 0:a.map((e=>{var l;return{label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id}})),...y(i)};var s;x.setFieldsValue(n),t((0,r.Ok)({activeMenu:l,data:n}))})).finally((()=>{t((0,r.km)(l)),k(!1)})))}),[null===l||void 0===l?void 0:l.refetch]),(0,f.jsx)(o.A,{title:e("edit.banner"),className:"h-100",extra:(0,f.jsx)(p.A,{}),children:j?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(u.A,{size:"large",className:"py-5"})}):(0,f.jsx)(b.A,{form:x,handleSubmit:(a,i)=>{var s;const o="banners",u={status:"published"},m={url:a.url,shops:null===a||void 0===a||null===(s=a.shops)||void 0===s?void 0:s.map((e=>e.value)),images:null===i||void 0===i?void 0:i.map((e=>e.name)),clickable:a.clickable,title:(0,h.A)(_,a,"title"),description:(0,h.A)(_,a,"description"),button_text:(0,h.A)(_,a,"button_text")};return v.A.update(g,m).then((()=>{n.oR.success(e("successfully.updated")),(0,d.vA)((()=>{t((0,r.EK)({...l,nextUrl:o})),t((0,c.s)(u))})),A(`/${o}`)}))}})})}}}]);