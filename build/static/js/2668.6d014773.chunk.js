(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2668],{6107:(l,i,o)=>{"use strict";o.r(i),o.d(i,{default:()=>k});var d=o(9950),t=o(86366),n=o(23263),e=o(90650),v=o(71999),a=o(13564),u=o(47933),s=o(91854),r=o(74623),c=o(70030),p=o(65820),h=o(88986),g=o(11906),x=o(49326),f=o(93567),j=o(57844),m=o(59585),_=o(44832),y=o(44414);const{Step:b}=t.A,k=()=>{var l;const{t:i}=(0,c.B)(),{uuid:o}=(0,a.g)(),k=(0,p.s)(),A=(0,s.wA)(),{activeMenu:C}=(0,s.d4)((l=>l.menu),s.bN),{languages:M}=(0,s.d4)((l=>l.formLang),s.bN),[N,O]=(0,d.useState)(C.refetch),E=Number((null===(l=k.values)||void 0===l?void 0:l.step)||0);(0,d.useEffect)((()=>{$(o)}),[]),(0,h.A)((()=>{C.refetch&&$(o)}),[C.refetch]);const F=()=>{const l=E+1;k.set("step",l)},w=()=>{const l=E-1;k.set("step",l)},S=l=>{var i;return l?{label:null!==l&&void 0!==l&&l.translation?null===l||void 0===l||null===(i=l.translation)||void 0===i?void 0:i.title:null===l||void 0===l?void 0:l.title,value:null===l||void 0===l?void 0:l.id}:null},$=l=>{O(!0),u.A.getById(l).then((l=>{var i,o,d,t,n,e,v,a,u,s,c;const p={};null===l||void 0===l||null===(i=l.data)||void 0===i||null===(o=i.stocks)||void 0===o||o.forEach((l=>{var i;null===l||void 0===l||null===(i=l.extras)||void 0===i||i.forEach((i=>{var o,d,t,n,e;(null===i||void 0===i?void 0:i.extra_group_id)in p?null!==p&&void 0!==p&&null!==(o=p[null===i||void 0===i?void 0:i.extra_group_id])&&void 0!==o&&null!==(d=o.values)&&void 0!==d&&d.some((l=>(null===l||void 0===l?void 0:l.value)===(null===i||void 0===i?void 0:i.id)))||null===p||void 0===p||null===(t=p[null===i||void 0===i?void 0:i.extra_group_id])||void 0===t||null===(n=t.values)||void 0===n||n.push({value:null===i||void 0===i?void 0:i.id,label:null===i||void 0===i?void 0:i.value,stock_id:null===l||void 0===l?void 0:l.id}):p[null===i||void 0===i?void 0:i.extra_group_id]={label:null===i||void 0===i||null===(e=i.group.translation)||void 0===e?void 0:e.title,value:null===i||void 0===i?void 0:i.extra_group_id,id:null===i||void 0===i?void 0:i.extra_group_id,stock_id:null===l||void 0===l?void 0:l.id,values:[{value:null===i||void 0===i?void 0:i.id,label:null===i||void 0===i?void 0:i.value,stock_id:null===l||void 0===l?void 0:l.id}]}}))}));const h={...l.data,...q(null===l||void 0===l?void 0:l.data),shop:S(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.shop),category:S(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.category),brand:S(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.brand),kitchen:S(null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.kitchen),unit:S(null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.unit),images:(g=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.galleries,g.map((l=>({uid:null===l||void 0===l?void 0:l.id,name:null===l||void 0===l?void 0:l.path,url:null===l||void 0===l?void 0:l.path})))),extras:Object.values(p),stocks:null===l||void 0===l||null===(u=l.data)||void 0===u||null===(s=u.stocks)||void 0===s?void 0:s.map((l=>{var i;return{...l,...Object.assign({},...null===l||void 0===l||null===(i=l.extras)||void 0===i?void 0:i.map(((l,i)=>({[`extras[${i}]`]:l.id})))),quantity:(null===l||void 0===l?void 0:l.quantity)||0,price:(null===l||void 0===l?void 0:l.price)||0,extras:void 0}})),properties:null===l||void 0===l||null===(c=l.data)||void 0===c?void 0:c.properties,translation:void 0,translations:void 0};var g;A((0,r.Ok)({activeMenu:C,data:h}))})).finally((()=>{O(!1),A((0,r.km)(C))}))},q=l=>{if(null===l||void 0===l||!l.translations)return{};const{translations:i}=l,o=null===M||void 0===M?void 0:M.map((l=>{var o,d;return{[`title[${null===l||void 0===l?void 0:l.locale}]`]:null===i||void 0===i||null===(o=i.find((i=>(null===i||void 0===i?void 0:i.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===o?void 0:o.title,[`description[${null===l||void 0===l?void 0:l.locale}]`]:null===i||void 0===i||null===(d=i.find((i=>(null===i||void 0===i?void 0:i.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===d?void 0:d.description}}));return Object.assign({},...o)};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(n.A,{title:i("edit.product"),extra:(0,y.jsx)(v.A,{}),children:(0,y.jsx)(t.A,{current:E,onChange:l=>{A((0,r.Ok)({activeMenu:C,data:{...C.data,step:l}})),k.set("step",l)},children:x.C.map((l=>(0,y.jsx)(b,{title:i(l.title)},l.title)))})}),N?(0,y.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,y.jsx)(e.A,{size:"large",className:"py-5"})}):(0,y.jsxs)("div",{children:["First-content"===x.C[E].content&&(0,y.jsx)(_.A,{next:F,action_type:"edit"}),"Second-content"===x.C[E].content&&(0,y.jsx)(m.A,{next:F,prev:w}),"Third-content"===x.C[E].content&&(0,y.jsx)(g.A,{next:F,prev:w}),"Fourth-content"===x.C[E].content&&(0,y.jsx)(f.A,{next:F,prev:w}),"Finish-content"===x.C[E].content&&(0,y.jsx)(j.A,{prev:w})]})]})}},42634:()=>{},65820:(l,i,o)=>{"use strict";o.d(i,{s:()=>e});var d=o(13564),t=o(21215),n=o.n(t);const e=()=>{const l=(0,d.Zp)(),i=(0,d.zy)(),o=n().parse(i.search,{ignoreQueryPrefix:!0});return{values:o,set:(i,d)=>l({search:n().stringify({...o,[i]:d})}),reset:i=>{const d={...o};d[i]&&delete d[i],l({search:n().stringify({...d})})},clear:()=>l({search:n().stringify({})}),merge:i=>l({search:n().stringify({...o,...i})}),get:l=>o[l],setMultiple:i=>{const d={...o,...i};l({search:n().stringify(d)})},resetMultiple:i=>{const d={...o};i.forEach((l=>{d[l]&&delete d[l]})),l({search:n().stringify(d)})}}}}}]);