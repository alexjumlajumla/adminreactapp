"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7357],{98501:(l,d,i)=>{i.d(d,{CM:()=>n,Km:()=>u,OT:()=>t,Q1:()=>o,Sp:()=>a,a5:()=>s,gN:()=>e,qO:()=>v});const o={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},e=["progress","paid","canceled","rejected","refund"],n=["before","after"],v=["blue","red","gold","volcano","cyan","lime"],t=["new","accepted","cooking","ready","ended"],a=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],u=["dine_in","delivery","pickup"],s=["male","female"]},33834:(l,d,i)=>{i.d(d,{K:()=>v});var o=i(97890),e=i(74776),n=i.n(e);const v=()=>{const l=(0,o.s0)(),d=(0,o.TH)(),i=n().parse(d.search,{ignoreQueryPrefix:!0});return{values:i,set:(d,o)=>l({search:n().stringify({...i,[d]:o})}),reset:d=>{const o={...i};o[d]&&delete o[d],l({search:n().stringify({...o})})},clear:()=>l({search:n().stringify({})}),merge:d=>l({search:n().stringify({...i,...d})}),get:l=>i[l],setMultiple:d=>{const o={...i,...d};l({search:n().stringify(o)})},resetMultiple:d=>{const o={...i};d.forEach((l=>{o[l]&&delete o[l]})),l({search:n().stringify(o)})}}}},42039:(l,d,i)=>{i.r(d),i.d(d,{default:()=>Zl});var o=i(10976),e=i(68197),n=i(59624),v=i(77181),t=i(59491),a=i(47313),u=i(1003),s=i(7370),r=i(2717),c=i(73270),h=i(97890),p=i(90954),x=i(80314),y=i(98501),m=i(24511),g=i(16031);const j=l=>{if(l)return(0,g.isArray)(l)?l.map((l=>({label:`${(null===l||void 0===l?void 0:l.firstname)||""} ${(null===l||void 0===l?void 0:l.lastname)||""}`,value:null===l||void 0===l?void 0:l.id,id:null===l||void 0===l?void 0:l.id}))):{label:`${(null===l||void 0===l?void 0:l.firstname)||""} ${(null===l||void 0===l?void 0:l.lastname)||""}`,value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}};var Z=i(70816),_=i.n(Z),f=i(74776),b=i.n(f),k=i(71136),q=i(72652),w=i(46155),N=i(95882),S=i(33834),$=i(51988),C=i(11875),I=i(82138),M=i(59713),T=i(9274),A=i(26824),z=i(83371),P=i(45705),D=i(17101),O=i(77370),Y=i(84017),F=i(91220),U=i(20693),E=i(8846),V=i(46417);const W=l=>{var d,i,o,u,s,h,p,x,y,g,j;let{uuid:Z,type:_="add",onCancel:f}=l;const{t:b}=(0,m.$)(),k=(0,r.I0)(),[w,N]=(0,a.useState)(!1),[S,$]=(0,a.useState)({}),[C,M]=(0,a.useState)({}),[W,H]=(0,a.useState)([]),[K,Q]=(0,a.useState)([]),[B,L]=(0,a.useState)([]),[G,J]=(0,a.useState)([]),[R,X]=(0,a.useState)([]),[ll,dl]=(0,a.useState)({extras:[],stock:{id:0,quantity:1,price:0}}),[il,ol]=(0,a.useState)(null!==(d=null===S||void 0===S?void 0:S.min_qty)&&void 0!==d?d:1),el=l=>{var d;const i=null===G||void 0===G?void 0:G.reduce(((l,d)=>{var i,o,e,n,v,t,a;return l+(null!==(i=null===d||void 0===d||null===(o=d.product)||void 0===o||null===(e=o.stock)||void 0===e?void 0:e.price)&&void 0!==i?i:0)*(null!==(n=null!==(v=null===d||void 0===d||null===(t=d.product)||void 0===t?void 0:t.quantity)&&void 0!==v?v:null===d||void 0===d||null===(a=d.product)||void 0===a?void 0:a.min_qty)&&void 0!==n?n:1)}),0);return(null!==i&&void 0!==i?i:0)+(null!==(d=null===ll||void 0===ll?void 0:ll.stock)&&void 0!==d?d:0)?null===ll||void 0===ll?void 0:ll.stock[l||"price"]:0};return(0,a.useEffect)((()=>(Z&&(l=>{N(!0),D.Z.getById(l).then((l=>{var d,i,o,e,n,v;$(null===l||void 0===l?void 0:l.data);const t=(0,O.o)(null===l||void 0===l?void 0:l.data);H(null===t||void 0===t?void 0:t.extras),ol(null!==(d=null!==(i=null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.min_qty)&&void 0!==i?i:null===l||void 0===l||null===(e=l.data)||void 0===e?void 0:e.quantity)&&void 0!==d?d:1),Q(null===t||void 0===t?void 0:t.stock),dl((0,O.y)(B,null===t||void 0===t?void 0:t.extras,null===t||void 0===t?void 0:t.stock)),null===(n=(0,O.y)("",null===t||void 0===t?void 0:t.extras,null===t||void 0===t?void 0:t.stock))||void 0===n||null===(v=n.extras)||void 0===v||v.forEach((l=>{L((d=>[...d,l[0]]))}))})).finally((()=>{N(!1)}))})(Z),()=>{})),[Z]),(0,a.useEffect)((()=>{var l;if(null!==ll&&void 0!==ll&&null!==(l=ll.stock)&&void 0!==l&&l.addons){var d,i;return(l=>{J(l)})(null===ll||void 0===ll||null===(d=ll.stock)||void 0===d||null===(i=d.addons)||void 0===i?void 0:i.filter((l=>null===R||void 0===R?void 0:R.includes(String(null===l||void 0===l?void 0:l.addon_id)))))}}),[R,null===S||void 0===S?void 0:S.uuid,null===ll||void 0===ll||null===(i=ll.stock)||void 0===i?void 0:i.addons]),(0,a.useEffect)((()=>{null!==ll&&void 0!==ll&&ll.stock&&M({...ll.stock,extras:B})}),[null===ll||void 0===ll?void 0:ll.stock,B]),(0,V.jsx)(T.Z,{visible:!!Z,title:(null===S||void 0===S||null===(o=S.translation)||void 0===o?void 0:o.title)||b("product"),onCancel:f,footer:[(0,V.jsx)(t.Z,{type:"primary",disabled:w,onClick:()=>{const l={stock_id:null===C||void 0===C?void 0:C.id,quantity:il,addons:null!==G&&void 0!==G&&G.length?null===G||void 0===G?void 0:G.map((l=>{var d,i,o,e,n,v;return{stock_id:null===l||void 0===l||null===(d=l.product)||void 0===d||null===(i=d.stock)||void 0===i?void 0:i.id,quantity:null!==(o=null!==(e=null===l||void 0===l||null===(n=l.product)||void 0===n?void 0:n.quantity)&&void 0!==e?e:null===l||void 0===l||null===(v=l.product)||void 0===v?void 0:v.min_qty)&&void 0!==o?o:1}})):[]};(0,r.dC)((()=>{k((0,c.Yg)(l))})),f()},children:b(_)},"addUpdateOrderProductModal"),(0,V.jsx)(t.Z,{onClick:f,children:b("cancel")},"closeOrderProductModal")],children:(0,V.jsxs)(v.Z,{children:[w&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsxs)(e.Z,{gutter:12,children:[(0,V.jsx)(n.Z,{span:8,children:(0,V.jsx)(A.Z,{src:(null===S||void 0===S?void 0:S.img)||"https://via.placeholder.com/150",alt:(null===S||void 0===S||null===(u=S.translation)||void 0===u?void 0:u.title)||b("N/A"),height:200,style:{objectFit:"contain"}})}),(0,V.jsx)(n.Z,{span:16,children:(0,V.jsxs)(z.Z,{title:(null===S||void 0===S||null===(s=S.translation)||void 0===s?void 0:s.title)||b("product"),children:[(0,V.jsxs)(z.Z.Item,{label:b("price"),span:3,children:[(0,V.jsx)("div",{className:null!==C&&void 0!==C&&C.discount?"strike":"",children:(0,Y.Z)(el())}),!(null===C||void 0===C||!C.discount)&&(0,V.jsx)("div",{className:"ml-2 font-weight-bold",children:(0,Y.Z)(el("total_price"))})]}),(0,V.jsx)(z.Z.Item,{label:b("in.stock"),span:3,children:(0,F.Z)(null!==(h=null===C||void 0===C?void 0:C.quantity)&&void 0!==h?h:1,null===S||void 0===S?void 0:S.unit)}),(0,V.jsx)(z.Z.Item,{label:b("tax"),span:3,children:(0,Y.Z)(null===C||void 0===C?void 0:C.tax)})]})})]}),!(null===ll||void 0===ll||null===(p=ll.extras)||void 0===p||!p.length)&&(null===ll||void 0===ll||null===(x=ll.extras)||void 0===x?void 0:x.map(((l,d)=>(0,V.jsx)("div",{className:"extra-group",children:(0,V.jsx)(P.Z,{className:"extras-select",wrap:!0,children:null===l||void 0===l?void 0:l.map((l=>(0,V.jsx)("span",{className:"extras-text rounded "+(null!==B&&void 0!==B&&B.find((d=>(null===d||void 0===d?void 0:d.id)===(null===l||void 0===l?void 0:l.id)))?"selected":""),onClick:()=>(l=>{var d,i,o,e,n;const v=B.findIndex((d=>(null===d||void 0===d?void 0:d.extra_group_id)===(null===l||void 0===l?void 0:l.extra_group_id)));let t=B;v>-1&&(t=null===(d=t)||void 0===d?void 0:d.slice(0,v)),null===(i=t)||void 0===i||i.push(l);const a=null===(o=t)||void 0===o||null===(e=o.map((l=>null===l||void 0===l?void 0:l.id)))||void 0===e?void 0:e.join(",");let u=(0,O.y)(a,W,K);dl(u),null===u||void 0===u||null===(n=u.extras)||void 0===n||n.forEach((d=>{var i;const o=B.findIndex((i=>{var o,e;return(null===(o=d[0])||void 0===o?void 0:o.extra_group_id)!==(null===l||void 0===l?void 0:l.extra_group_id)?(null===i||void 0===i?void 0:i.extra_group_id)===(null===(e=d[0])||void 0===e?void 0:e.extra_group_id):(null===i||void 0===i?void 0:i.extra_group_id)===(null===l||void 0===l?void 0:l.extra_group_id)}));if((null===(i=d[0])||void 0===i?void 0:i.level)>=(null===l||void 0===l?void 0:l.level)){var e;let i=(null===(e=d[0])||void 0===e?void 0:e.extra_group_id)!==(null===l||void 0===l?void 0:l.extra_group_id)?d[0]:l;-1===o?t.push(i):t[o]=i}})),L(t)})(l),style:{padding:"0 10px"},children:(null===l||void 0===l?void 0:l.value)||b("N/A")},null===l||void 0===l?void 0:l.id)))})},`extra-group_${d}`)))),(0,V.jsx)(U.Z,{showExtras:ll,selectedValues:R,handleChange:l=>{const d=String(null===l||void 0===l?void 0:l.addon_id);null!==R&&void 0!==R&&R.includes(d)?X((l=>l.filter((l=>l!==d)))):X((l=>[...l,d]))},addonCalculate:(l,d)=>{dl((i=>{var o;return{...i,stock:{...null===i||void 0===i?void 0:i.stock,addons:null===i||void 0===i||null===(o=i.stock)||void 0===o?void 0:o.addons.map((i=>(null===i||void 0===i?void 0:i.addon_id)===l?{...i,product:{...null===i||void 0===i?void 0:i.product,quantity:d}}:i))}}})),J((i=>i.map((i=>(null===i||void 0===i?void 0:i.addon_id)===l?{...i,product:{...null===i||void 0===i?void 0:i.product,quantity:d}}:i))))}}),(0,V.jsx)(e.Z,{gutter:12,className:"mt-5",children:(0,V.jsx)(n.Z,{span:24,children:(0,V.jsxs)(P.Z,{children:[(0,V.jsx)(t.Z,{type:"primary",icon:(0,V.jsx)(E.Z,{}),onClick:()=>{1!==il&&(il<=(null===S||void 0===S?void 0:S.min_qty)||ol((l=>l-1)))},disabled:il===(null===S||void 0===S?void 0:S.min_qty)}),(null!==il&&void 0!==il?il:1)*(null!==(y=null===S||void 0===S?void 0:S.interval)&&void 0!==y?y:1),null===S||void 0===S||null===(g=S.unit)||void 0===g||null===(j=g.translation)||void 0===j?void 0:j.title,(0,V.jsx)(t.Z,{type:"primary",icon:(0,V.jsx)(I.Z,{}),onClick:()=>{il>=(null===S||void 0===S?void 0:S.quantity)||il>=(null===S||void 0===S?void 0:S.max_qty)||ol((l=>l+1))},disabled:il===(null===S||void 0===S?void 0:S.quantity)||il===(null===S||void 0===S?void 0:S.max_qty)})]})})})]})})},H=()=>{const{t:l}=(0,m.$)(),d=(0,S.K)(),{products:i,loading:o}=(0,r.v9)((l=>l.product),r.wU);return(0,V.jsxs)(V.Fragment,{children:[o&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsx)("div",{className:"products-row order-items",children:null!==i&&void 0!==i&&i.length?null===i||void 0===i?void 0:i.map((i=>{var o,e,n;return(0,V.jsxs)(v.Z,{className:"products-col",cover:(0,V.jsx)("img",{alt:(null===i||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title)||l("N/A"),src:(null===i||void 0===i?void 0:i.img)||"https://via.placeholder.com/150"}),onClick:()=>{var l;l=null===i||void 0===i?void 0:i.uuid,d.set("uuid",l)},children:[(0,V.jsx)(C.Z,{title:(null===i||void 0===i||null===(e=i.translation)||void 0===e?void 0:e.title)||l("N/A")}),(0,V.jsx)("div",{className:"preview",children:(0,V.jsx)(I.Z,{})}),null===i||void 0===i||null===(n=i.stocks)||void 0===n?void 0:n.map((l=>{var d,i;return(0,V.jsxs)("span",{className:null!==l&&void 0!==l&&l.bonus?"show-bonus":"d-none",children:[(0,V.jsx)(M.ojn,{})," ",null===l||void 0===l||null===(d=l.bonus)||void 0===d?void 0:d.value,"+",null===l||void 0===l||null===(i=l.bonus)||void 0===i?void 0:i.bonus_quantity]})}))]},null===i||void 0===i?void 0:i.id)})):(0,V.jsx)(e.Z,{style:{width:"100%"},children:(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)($.Z,{})})})}),!!d.get("uuid")&&(0,V.jsx)(W,{uuid:d.get("uuid"),onCancel:()=>{d.reset("uuid")}})]})};var K=i(41481),Q=i(49655),B=i(11216),L=i(30763),G=i(82528);const J=()=>{const{t:l}=(0,m.$)(),d=(0,S.K)(),[i,o]=(0,a.useState)({shop:!1,brand:!1,category:!1}),e=(l,i)=>{d.set(l,i)};return(0,V.jsxs)(P.Z,{wrap:!0,children:[(0,V.jsx)(K.Z,{defaultValue:d.get("search"),handleChange:l=>{e("search",l)},placeholder:l("product.search"),style:{width:200}}),(0,V.jsx)(Q._,{fetchOptions:l=>{let{page:d=1,search:i=""}=l;const e={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return B.Z.getAll(e).then((l=>{var d;return o((d=>{var i,o;return{...d,brand:!(null===l||void 0===l||null===(i=l.meta)||void 0===i||null===(o=i.links)||void 0===o||!o.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,G.Z)(l)))}))},hasMore:null===i||void 0===i?void 0:i.brand,placeholder:l("select.brand"),defaultValue:d.get("brand_id"),onChange:l=>{e("brand_id",null===l||void 0===l?void 0:l.value)},style:{width:200}}),(0,V.jsx)(Q._,{fetchOptions:l=>{let{page:d=1,search:i=""}=l;const e={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d,type:"main"};return L.Z.search(e).then((l=>{var d;return o((d=>{var i,o;return{...d,category:!(null===l||void 0===l||null===(i=l.meta)||void 0===i||null===(o=i.links)||void 0===o||!o.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,G.Z)(l)))}))},hasMore:null===i||void 0===i?void 0:i.category,placeholder:l("select.category"),defaultValue:d.get("category_id"),onChange:l=>{e("category_id",null===l||void 0===l?void 0:l.value)},style:{width:200}})]})},R=l=>{var d;let{orderLoading:i}=l;const o=(0,r.I0)(),e=(0,S.K)(),{data:n}=(0,r.v9)((l=>l.order),r.wU),t={shop_id:(null===n||void 0===n||null===(d=n.shop)||void 0===d?void 0:d.id)||void 0,search:e.get("search")||void 0,brand_id:e.get("brand_id")||void 0,category_id:e.get("category_id")||void 0,perPage:20,page:1,active:1};return(0,a.useEffect)((()=>{var l;return null!==n&&void 0!==n&&null!==(l=n.shop)&&void 0!==l&&l.id&&o((0,N.q1)(t)),()=>{}}),[null===n||void 0===n?void 0:n.id,null===t||void 0===t?void 0:t.shop_id,null===t||void 0===t?void 0:t.search,null===t||void 0===t?void 0:t.brand_id,null===t||void 0===t?void 0:t.category_id]),(0,V.jsxs)(v.Z,{className:"order-add",children:[i&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsx)(J,{}),(0,V.jsx)(w.Z,{}),(0,V.jsx)(H,{})]})};var X=i(66204),ll=i(92855),dl=i(47515);const il=l=>{var d,i,o,e,v,u,s,r,c,h,p,y,g,j,Z,_,f,b,q,w,N,S,$,C,M,T,A,z,D,O,F,U,W,H,K,Q,B,L;let{item:G,data:J,handleChangeProductQuantity:R,handleDeleteProduct:il}=l;const{t:ol}=(0,m.$)(),[el,nl]=(0,a.useState)(null!==(d=null===G||void 0===G?void 0:G.quantity)&&void 0!==d?d:0),vl=(0,k.Z)(el,300),tl=(l,d)=>{if("increment"===l){var i,o;if((null===G||void 0===G||null===(i=G.stock)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.max_qty)<d)return;nl((l=>l+1))}else if("decrement"===l){var e,n;if((null===G||void 0===G||null===(e=G.stock)||void 0===e||null===(n=e.product)||void 0===n?void 0:n.min_qty)>d||0===d)return;nl((l=>l-1))}};return(0,x.Z)((()=>(R({...G,quantity:vl}),()=>{})),[vl]),(0,x.Z)((()=>{var l;null!==G&&void 0!==G&&G.quantity&&(null===G||void 0===G?void 0:G.quantity)!==el&&nl(null!==(l=null===G||void 0===G?void 0:G.quantity)&&void 0!==l?l:0)}),[null===G||void 0===G?void 0:G.quantity]),(0,V.jsx)(n.Z,{span:24,style:{border:"1px solid var(--input-border)",borderRadius:"12px",padding:"10px 15px",columnGap:"20px"},children:(0,V.jsxs)(P.Z,{size:20,children:[(0,V.jsx)(ll.Z,{image:null===G||void 0===G||null===(i=G.stock)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.img,id:null===G||void 0===G?void 0:G.stock_id}),(0,V.jsxs)(P.Z,{direction:"vertical",size:15,children:[(0,V.jsx)("h3",{style:{margin:0},children:(null===G||void 0===G||null===(e=G.stock)||void 0===e||null===(v=e.product)||void 0===v||null===(u=v.translation)||void 0===u?void 0:u.title)||ol("N/A")}),!(null===G||void 0===G||!G.bonus)&&(0,V.jsx)(X.Z,{color:"red",children:ol("bonus")}),!(null===G||void 0===G||null===(s=G.stock)||void 0===s||null===(r=s.stock_extras)||void 0===r||!r.length)&&(0,V.jsx)("div",{children:null===G||void 0===G||null===(c=G.stock)||void 0===c||null===(h=c.stock_extras)||void 0===h?void 0:h.map((l=>(0,V.jsx)(X.Z,{children:(null===l||void 0===l?void 0:l.value)||ol("N/A")},null===l||void 0===l?void 0:l.id)))}),!(null===G||void 0===G||null===(p=G.addons)||void 0===p||!p.length)&&(0,V.jsx)("div",{children:null===G||void 0===G||null===(y=G.addons)||void 0===y?void 0:y.map((l=>{var d,i,o;return(0,V.jsx)(X.Z,{children:`${(null===l||void 0===l||null===(d=l.product)||void 0===d||null===(i=d.translation)||void 0===i?void 0:i.title)||ol("N/A")} x ${null!==(o=null===l||void 0===l?void 0:l.quantity)&&void 0!==o?o:0}`},null===l||void 0===l?void 0:l.id)}))}),(0,V.jsxs)("div",{style:{display:"flex",columnGap:"10px",fontSize:"16px"},children:[!(null===G||void 0===G||!G.discount)&&(0,V.jsx)("span",{style:{textDecoration:"line-through",color:"orangered"},children:(0,Y.Z)(null===G||void 0===G?void 0:G.price,null===J||void 0===J||null===(g=J.currency)||void 0===g?void 0:g.symbol,null===J||void 0===J||null===(j=J.currency)||void 0===j?void 0:j.position)}),(0,V.jsx)("span",{children:(0,Y.Z)(null===G||void 0===G?void 0:G.total_price,null===J||void 0===J||null===(Z=J.currency)||void 0===Z?void 0:Z.symbol,null===J||void 0===J||null===(_=J.currency)||void 0===_?void 0:_.position)})]}),(0,V.jsxs)(P.Z,{children:[(0,V.jsx)(t.Z,{icon:(0,V.jsx)(E.Z,{}),onClick:()=>{tl("decrement",el-1)},disabled:(null===G||void 0===G||null===(f=G.stock)||void 0===f||null===(b=f.product)||void 0===b?void 0:b.min_qty)===el||!(null===G||void 0===G||!G.bonus)}),(0,V.jsxs)(P.Z,{children:["before"===(null===G||void 0===G||null===(q=G.stock)||void 0===q||null===(w=q.product)||void 0===w||null===(N=w.unit)||void 0===N?void 0:N.position)&&(0,V.jsx)("span",{children:(null===G||void 0===G||null===(S=G.stock)||void 0===S||null===($=S.product)||void 0===$||null===(C=$.unit)||void 0===C||null===(M=C.translation)||void 0===M?void 0:M.title)||ol("N/A")}),(null!==el&&void 0!==el?el:0)*(null!==(T=null===G||void 0===G||null===(A=G.stock)||void 0===A||null===(z=A.product)||void 0===z?void 0:z.interval)&&void 0!==T?T:1),"after"===(null===G||void 0===G||null===(D=G.stock)||void 0===D||null===(O=D.product)||void 0===O||null===(F=O.unit)||void 0===F?void 0:F.position)&&(0,V.jsx)("span",{children:(null===G||void 0===G||null===(U=G.stock)||void 0===U||null===(W=U.product)||void 0===W||null===(H=W.unit)||void 0===H||null===(K=H.translation)||void 0===K?void 0:K.title)||ol("N/A")})]}),(0,V.jsx)(t.Z,{icon:(0,V.jsx)(I.Z,{}),onClick:()=>{tl("increment",el+1)},disabled:(null===G||void 0===G||null===(Q=G.stock)||void 0===Q||null===(B=Q.product)||void 0===B?void 0:B.max_qty)===el||(null===G||void 0===G||null===(L=G.stock)||void 0===L?void 0:L.quantity)<=el||!(null===G||void 0===G||!G.bonus)}),(0,V.jsx)(t.Z,{icon:(0,V.jsx)(dl.Z,{}),onClick:()=>il(G),disabled:!(null===G||void 0===G||!G.bonus)})]})]})]})})},ol=l=>{var d,i,o;return{stock_id:null===l||void 0===l||null===(d=l.stock)||void 0===d?void 0:d.id,quantity:null===l||void 0===l?void 0:l.quantity,addons:null!==l&&void 0!==l&&null!==(i=l.addons)&&void 0!==i&&i.length?null===l||void 0===l||null===(o=l.addons)||void 0===o?void 0:o.map((l=>({stock_id:null===l||void 0===l?void 0:l.id,quantity:null===l||void 0===l?void 0:l.quantity}))):[]}},el=l=>{let{orderLoading:d}=l;const i=(0,r.I0)(),{orderItems:o,data:t}=(0,r.v9)((l=>l.order),r.wU),a=l=>{const d=ol(l);i((0,c.Yg)(d))},u=l=>{const d=ol(l);i((0,c.JY)(d))};return null!==o&&void 0!==o&&o.length?(0,V.jsxs)(v.Z,{children:[d&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsx)(e.Z,{gutter:12,style:{display:"flex",flexDirection:"column",rowGap:"20px"},children:null===o||void 0===o?void 0:o.map(((l,d)=>(0,V.jsx)(il,{item:l,data:t,handleChangeProductQuantity:a,handleDeleteProduct:u},`${null===l||void 0===l?void 0:l.id}_${d}`)))})]}):(0,V.jsxs)(v.Z,{children:[d&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsx)(e.Z,{style:{width:"100%"},children:(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)($.Z,{id:"nosell"})})})]})};var nl=i(74294),vl=i(99096),tl=i(49986),al=i(25357);const ul=l=>{let{form:d}=l;const{t:i}=(0,m.$)(),[e,v]=(0,a.useState)({user:!1,address:!1}),t=o.Z.useWatch("deliveryDate",d);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)(o.Z.Item,{name:"user",label:i("user"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(Q._,{hasMore:null===e||void 0===e?void 0:e.user,fetchOptions:async l=>{let{page:d=1,search:i=""}=l;const o={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return await tl.Z.search(o).then((l=>(v((d=>{var i;return{...d,user:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),j(null===l||void 0===l?void 0:l.data))))},placeholder:i("select.user"),allowClear:!1})})}),(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)(o.Z.Item,{name:"address",label:i("address"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(Q._,{hasMore:null===e||void 0===e?void 0:e.address,fetchOptions:async l=>{let{page:d=1,search:i=""}=l;const o={search:null!==i&&void 0!==i&&i.length?i:void 0,perPage:20,page:d};return await al.Z.getAll(o).then((l=>{var d;return v((d=>{var i;return{...d,address:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>{var d,i,o,e,n,v,t,a,u;return{label:(null===l||void 0===l||null===(d=l.address)||void 0===d?void 0:d.address)||(null===l||void 0===l?void 0:l.title),value:`${(null===l||void 0===l||null===(i=l.address)||void 0===i?void 0:i.address)||(null===l||void 0===l?void 0:l.title)}_${(null===l||void 0===l||null===(o=l.location)||void 0===o?void 0:o.latitude)||(null===l||void 0===l||null===(e=l.location)||void 0===e?void 0:e[0])}_${(null===l||void 0===l||null===(n=l.location)||void 0===n?void 0:n.longitude)||(null===l||void 0===l||null===(v=l.location)||void 0===v?void 0:v[1])}`,key:`${(null===l||void 0===l||null===(t=l.address)||void 0===t?void 0:t.address)||(null===l||void 0===l?void 0:l.title)}_${null===l||void 0===l||null===(a=l.location)||void 0===a?void 0:a.latitude}_${null===l||void 0===l||null===(u=l.location)||void 0===u?void 0:u.longitude}`}}))}))},placeholder:i("select.address"),allowClear:!1})})}),(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"deliveryDate",label:i("delivery.date"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(vl.Z,{placeholder:i("select.delivery.date"),format:"YYYY-MM-DD",className:"w-100",showToday:!1,disabledDate:l=>l&&l<_()().startOf("day")})})}),(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"deliveryTime",label:i("delivery.time"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(vl.Z,{placeholder:i("select.delivery.time"),format:"HH:mm",className:"w-100",showNow:!1,picker:"time",disabled:!t})})})]})};var sl=i(9408),rl=i(20001);const cl=l=>{let{form:d}=l;const{t:i}=(0,m.$)(),{data:e}=(0,r.v9)((l=>l.order),r.wU),[v,t]=(0,a.useState)({deliveryZone:!1,table:!1}),u=o.Z.useWatch("deliveryZone",d);return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"deliveryZone",label:i("delivery.zone"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(Q._,{hasMore:null===v||void 0===v?void 0:v.deliveryZone,fetchOptions:async l=>{var d;let{search:i,page:o=1}=l;const n={search:null!==i&&void 0!==i&&i.length?i:void 0,shop_id:null===e||void 0===e||null===(d=e.shop)||void 0===d?void 0:d.id,perPage:20,page:o};return await sl.Z.getAll(n).then((l=>{var d;return t((d=>{var i;return{...d,deliveryZone:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>(0,G.Z)(l)))}))},placeholder:i("select.delivery.zone"),allowClear:!1,onChange:()=>{d.setFieldsValue({table:void 0})}})})}),(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"table",label:i("table"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(Q._,{hasMore:null===v||void 0===v?void 0:v.table,fetchOptions:async l=>{var d;let{search:o,page:n=1}=l;const v={search:null!==o&&void 0!==o&&o.length?o:void 0,shop_section_id:(null===u||void 0===u?void 0:u.value)||void 0,shop_id:null===e||void 0===e||null===(d=e.shop)||void 0===d?void 0:d.id,perPage:20,page:n};return await rl.Z.getAll(v).then((l=>{var d;return t((d=>{var i;return{...d,table:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.map((l=>({label:(null===l||void 0===l?void 0:l.name)||i("N/A"),value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id})))}))},placeholder:i("select.table"),allowClear:!1,refetchOnFocus:!0,disabled:!u})})})]})},hl=(l,d)=>{switch(l){case"delivery":return(0,V.jsx)(ul,{form:d});case"dine_in":return(0,V.jsx)(cl,{form:d});default:return null}},pl=l=>{let{form:d}=l;const{t:i}=(0,m.$)(),{data:t}=(0,r.v9)((l=>l.order),r.wU),u=(0,a.useMemo)((()=>y.Km.map(((l,d)=>({label:i(l),value:l,key:d})))),[null===t||void 0===t?void 0:t.id]),s=o.Z.useWatch("deliveryType",d),c=o.Z.useWatch("paymentType",d);return(0,x.Z)((()=>("dine_in"===(null===s||void 0===s?void 0:s.value)&&"wallet"===(null===c||void 0===c?void 0:c.value)&&d.setFieldsValue({paymentType:null}),()=>{})),[null===s||void 0===s?void 0:s.value,null===c||void 0===c?void 0:c.value]),(0,V.jsx)(v.Z,{children:(0,V.jsxs)(e.Z,{gutter:12,children:[(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)(o.Z.Item,{name:"deliveryType",label:i("delivery.type"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(nl.Z,{labelInValue:!0,options:u,placeholder:i("select.delivery.type")})})}),hl(null===s||void 0===s?void 0:s.value,d)]})})};var xl=i(20637);const yl=l=>{let{form:d}=l;const{t:i}=(0,m.$)(),[t,u]=(0,a.useState)({paymentType:!1}),s=o.Z.useWatch("deliveryType",d);return(0,V.jsx)(v.Z,{children:(0,V.jsxs)(e.Z,{gutter:12,children:[(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"currency",label:i("currency"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(nl.Z,{placeholder:i("select.currency"),labelInValue:!0,disabled:!0})})}),(0,V.jsx)(n.Z,{span:12,children:(0,V.jsx)(o.Z.Item,{name:"paymentType",label:i("payment.type"),rules:[{required:!0,message:i("required")}],children:(0,V.jsx)(Q._,{placeholder:i("select.payment.type"),hasMore:null===t||void 0===t?void 0:t.paymentType,fetchOptions:async l=>{let{page:d=1,search:o=""}=l;const e={search:null!==o&&void 0!==o&&o.length?o:void 0,perPage:20,page:d};return await xl.Z.getAll(e).then((l=>(u((d=>{var i;return{...d,paymentType:!(null===l||void 0===l||null===(i=l.links)||void 0===i||!i.next)}})),null===l||void 0===l?void 0:l.data.filter((l=>"dine_in"===(null===s||void 0===s?void 0:s.value)?"cash"===l.tag:"cash"===l.tag||"wallet"===l.tag)).map((l=>({label:i(l.tag)||i("N/A"),value:null===l||void 0===l?void 0:l.tag,key:null===l||void 0===l?void 0:l.id}))))))},refetchOnFocus:!0,allowClear:!1})})})]})})},ml=l=>{let{orderLoading:d,form:i}=l;return d?(0,V.jsx)(v.Z,{loading:d}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(pl,{form:i}),(0,V.jsx)(yl,{form:i})]})},gl=l=>{let{loading:d}=l;const{t:i}=(0,m.$)(),{data:o,totalPrices:t}=(0,r.v9)((l=>l.order),r.wU),u=(0,a.useCallback)((function(){var l,d;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,Y.Z)(i,null===o||void 0===o||null===(l=o.currency)||void 0===l?void 0:l.symbol,null===o||void 0===o||null===(d=o.currency)||void 0===d?void 0:d.position)}),[null===o||void 0===o?void 0:o.id]);return(0,V.jsxs)(v.Z,{children:[d&&(0,V.jsx)("div",{className:"loader",children:(0,V.jsx)(q.Z,{})}),(0,V.jsx)(e.Z,{gutter:12,children:(0,V.jsxs)(n.Z,{span:24,children:[(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("sub.total")}),(0,V.jsx)("h4",{style:{fontSize:"16px"},children:u(null===t||void 0===t?void 0:t.price)})]}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("shop.tax")}),(0,V.jsx)("h4",{style:{fontSize:"16px"},children:u(null===t||void 0===t?void 0:t.total_shop_tax)})]}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("delivery.fee")}),(0,V.jsx)("h4",{style:{fontSize:"16px"},children:u(null===t||void 0===t?void 0:t.delivery_fee)})]}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("service.fee")}),(0,V.jsx)("h4",{style:{fontSize:"16px"},children:u(null===t||void 0===t?void 0:t.service_fee)})]}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("discount")}),(0,V.jsx)("h4",{style:{fontSize:"16px",color:"orangered"},children:`- ${u(null===t||void 0===t?void 0:t.total_discount)}`})]}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h4",{style:{fontSize:"16px"},children:i("coupon")}),(0,V.jsx)("h4",{style:{fontSize:"16px",color:"orangered"},children:`- ${u(null===t||void 0===t?void 0:t.coupon_price)}`})]}),(0,V.jsx)(w.Z,{}),(0,V.jsxs)("div",{className:"flex",children:[(0,V.jsx)("h3",{style:{fontSize:"18px"},children:i("total.price")}),(0,V.jsx)("h3",{style:{fontSize:"18px"},children:u(null===t||void 0===t?void 0:t.total_price)})]})]})})]})};var jl=i(16233);const Zl=()=>{var l,d;const i=(0,r.I0)(),g=(0,h.s0)(),[Z]=o.Z.useForm(),{t:f}=(0,m.$)(),{id:q}=(0,h.UO)(),{activeMenu:w}=(0,r.v9)((l=>l.menu),r.wU),{calculateProductsBody:N,data:S}=(0,r.v9)((l=>l.order),r.wU),[$,C]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),[T,A]=(0,a.useState)(!1),[z,P]=(0,a.useState)(null),D=(0,a.useMemo)((()=>y.Km.map(((l,d)=>({label:f(l),value:l,key:d})))),[q]),O=(0,k.Z)(N,300),Y=o.Z.useWatch("deliveryType",Z),F=o.Z.useWatch("address",Z),U=null===(l=o.Z.useWatch("address",Z))||void 0===l||null===(d=l.value)||void 0===d?void 0:d.split("_");(0,a.useEffect)((()=>(H(),()=>{})),[q]),(0,x.Z)((()=>(w.refetch&&H(),()=>{})),[w.refetch]),(0,x.Z)((()=>(null!==S&&void 0!==S&&S.id&&!z&&W(),()=>{})),[null===S||void 0===S?void 0:S.id,O,null===F||void 0===F?void 0:F.value]);const E=()=>{var l,d,i,o,e;const n={products:null===N||void 0===N||null===(l=N.filter((l=>!(null!==l&&void 0!==l&&l.bonus))))||void 0===l?void 0:l.map((l=>{var d;return{...l,addons:null!==l&&void 0!==l&&null!==(d=l.addons)&&void 0!==d&&d.length?null===l||void 0===l?void 0:l.addons:void 0}})),currency_id:null===S||void 0===S||null===(d=S.currency)||void 0===d?void 0:d.id,coupon:(null===S||void 0===S||null===(i=S.coupon)||void 0===i?void 0:i.name)||void 0,shop_id:null===S||void 0===S||null===(o=S.shop)||void 0===o?void 0:o.id,type:(null===Y||void 0===Y?void 0:Y.value)||(null===S||void 0===S?void 0:S.delivery_type),tips:null!==(e=null===S||void 0===S?void 0:S.tips)&&void 0!==e?e:void 0,address:null!==U&&void 0!==U&&U.length?{latitude:null===U||void 0===U?void 0:U[(null===U||void 0===U?void 0:U.length)-2],longitude:null===U||void 0===U?void 0:U[(null===U||void 0===U?void 0:U.length)-1]}:null!==S&&void 0!==S&&S.location?null===S||void 0===S?void 0:S.location:void 0};return b().stringify(n,{addQueryPrefix:!0})},W=async function(){const l=E();A(!0),await s.Z.calculate(l).then((l=>{var d,o,e;i((0,c.aU)({...null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.data,stocks:void 0,shop:void 0})),i((0,c.B4)(null===l||void 0===l||null===(o=l.data)||void 0===o||null===(e=o.data)||void 0===e?void 0:e.stocks))})).finally((()=>{A(!1)}))},H=()=>{(async l=>{C(!0),await s.Z.getById(l).then((l=>{var d,o,e,n,v,t,a,u,s,h,p,x,y,m,g,b,k,q,w,N,S,$,C,I,M,T,A,z,P,O,Y,F,U,E,V,W,H,K,Q,B,L,G,J,R,X,ll,dl,il,ol,el,nl,vl,tl,al,ul;const sl={deliveryType:D.find((d=>{var i;return d.value===(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.delivery_type)})),currency:{label:`${null===l||void 0===l||null===(d=l.data)||void 0===d||null===(o=d.currency)||void 0===o?void 0:o.title} ${null===l||void 0===l||null===(e=l.data)||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.symbol}`,value:null===l||void 0===l||null===(v=l.data)||void 0===v||null===(t=v.currency)||void 0===t?void 0:t.id,key:null===l||void 0===l||null===(a=l.data)||void 0===a||null===(u=a.currency)||void 0===u?void 0:u.id},paymentType:null!==l&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&null!==(h=s.transaction)&&void 0!==h&&h.payment_system?{label:f(null===l||void 0===l||null===(p=l.data)||void 0===p||null===(x=p.transaction)||void 0===x||null===(y=x.payment_system)||void 0===y?void 0:y.tag)||f("N/A"),value:null===l||void 0===l||null===(m=l.data)||void 0===m||null===(g=m.transaction)||void 0===g||null===(b=g.payment_system)||void 0===b?void 0:b.tag,key:null===l||void 0===l||null===(k=l.data)||void 0===k||null===(q=k.transaction)||void 0===q||null===(w=q.payment_system)||void 0===w?void 0:w.id}:void 0,user:j(null===l||void 0===l||null===(N=l.data)||void 0===N?void 0:N.user),address:null!==l&&void 0!==l&&null!==(S=l.data)&&void 0!==S&&S.address?{label:null===l||void 0===l||null===($=l.data)||void 0===$||null===(C=$.address)||void 0===C?void 0:C.address,value:`${null===l||void 0===l||null===(I=l.data)||void 0===I||null===(M=I.address)||void 0===M?void 0:M.address}_${null===l||void 0===l||null===(T=l.data)||void 0===T||null===(A=T.location)||void 0===A?void 0:A.latitude}_${null===l||void 0===l||null===(z=l.data)||void 0===z||null===(P=z.location)||void 0===P?void 0:P.longitude}`,key:`${null===l||void 0===l||null===(O=l.data)||void 0===O||null===(Y=O.address)||void 0===Y?void 0:Y.address}_${null===l||void 0===l||null===(F=l.data)||void 0===F||null===(U=F.location)||void 0===U?void 0:U.latitude}_${null===l||void 0===l||null===(E=l.data)||void 0===E||null===(V=E.location)||void 0===V?void 0:V.longitude}`}:null,deliveryDate:null!==l&&void 0!==l&&null!==(W=l.data)&&void 0!==W&&W.delivery_date?_()(null===l||void 0===l||null===(H=l.data)||void 0===H?void 0:H.delivery_date,"YYYY-MM-DD"):null,deliveryTime:null!==l&&void 0!==l&&null!==(K=l.data)&&void 0!==K&&K.delivery_time?_()(null===l||void 0===l||null===(Q=l.data)||void 0===Q?void 0:Q.delivery_time,"HH:mm"):null,table:{label:(null===l||void 0===l||null===(B=l.data)||void 0===B||null===(L=B.table)||void 0===L?void 0:L.name)||f("N/A"),value:null===l||void 0===l||null===(G=l.data)||void 0===G||null===(J=G.table)||void 0===J?void 0:J.id,key:null===l||void 0===l||null===(R=l.data)||void 0===R||null===(X=R.table)||void 0===X?void 0:X.id},deliveryZone:{label:(null===l||void 0===l||null===(ll=l.data)||void 0===ll||null===(dl=ll.table)||void 0===dl||null===(il=dl.shop_section)||void 0===il||null===(ol=il.translation)||void 0===ol?void 0:ol.title)||f("N/A"),value:null===l||void 0===l||null===(el=l.data)||void 0===el||null===(nl=el.table)||void 0===nl||null===(vl=nl.shop_section)||void 0===vl?void 0:vl.id,key:null===l||void 0===l||null===(tl=l.data)||void 0===tl||null===(al=tl.table)||void 0===al||null===(ul=al.shop_section)||void 0===ul?void 0:ul.id}};Z.setFieldsValue(sl),(0,r.dC)((()=>{var d,o;i((0,c.oM)(null===l||void 0===l?void 0:l.data)),i((0,c.QD)(null===l||void 0===l||null===(d=l.data)||void 0===d||null===(o=d.details)||void 0===o?void 0:o.map((l=>{var d,i,o,e;return{stock_id:null===l||void 0===l||null===(d=l.stock)||void 0===d?void 0:d.id,quantity:null!==(i=null===l||void 0===l?void 0:l.quantity)&&void 0!==i?i:0,bonus:(null===l||void 0===l?void 0:l.bonus)||void 0,addons:null!==l&&void 0!==l&&null!==(o=l.addons)&&void 0!==o&&o.length?null===l||void 0===l||null===(e=l.addons)||void 0===e?void 0:e.map((l=>{var d;return{stock_id:(null===l||void 0===l?void 0:l.stock_id)||(null===l||void 0===l?void 0:l.id),quantity:null!==(d=null===l||void 0===l?void 0:l.quantity)&&void 0!==d?d:0}})):[]}}))))}))})).finally((()=>{C(!1)}))})(q),i((0,p.A_)(w))};return(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(o.Z,{form:Z,name:"order-edit-form",layout:"vertical",onFinish:l=>{var d,o,e,n,v,t,a,r,h,p,x,y;const m=null===l||void 0===l||null===(d=l.address)||void 0===d||null===(o=d.value)||void 0===o?void 0:o.split("_"),g={shop_id:null===S||void 0===S||null===(e=S.shop)||void 0===e?void 0:e.id,coupon:(null===S||void 0===S||null===(n=S.coupon)||void 0===n?void 0:n.name)||void 0,currency_id:null===l||void 0===l||null===(v=l.currency)||void 0===v?void 0:v.value,payment_type:null===l||void 0===l||null===(t=l.paymentType)||void 0===t?void 0:t.value,delivery_type:null===l||void 0===l||null===(a=l.deliveryType)||void 0===a?void 0:a.value,products:null===N||void 0===N?void 0:N.map((l=>{var d;return{...l,addons:null!==l&&void 0!==l&&null!==(d=l.addons)&&void 0!==d&&d.length?null===l||void 0===l?void 0:l.addons:void 0}}))},j={user_id:null===l||void 0===l||null===(r=l.user)||void 0===r?void 0:r.value,address:{address:null===l||void 0===l||null===(h=l.address)||void 0===h?void 0:h.label,office:null,house:null,floor:null},location:{latitude:null===m||void 0===m?void 0:m[(null===m||void 0===m?void 0:m.length)-2],longitude:null===m||void 0===m?void 0:m[(null===m||void 0===m?void 0:m.length)-1]},delivery_date:null===l||void 0===l||null===(p=l.deliveryDate)||void 0===p?void 0:p.format("YYYY-MM-DD"),delivery_time:null===l||void 0===l||null===(x=l.deliveryTime)||void 0===x?void 0:x.format("HH:mm"),...g},Z={table_id:(null===l||void 0===l||null===(y=l.table)||void 0===y?void 0:y.value)||void 0,...g},_="delivery"===(null===Y||void 0===Y?void 0:Y.value)?j:Z;M(!0),s.Z.update(q,_).then((d=>{var o;u.Z.create(d.data.id,{payment_sys_id:null===l||void 0===l||null===(o=l.paymentType)||void 0===o?void 0:o.key}).then((()=>{var l;i((0,c.oM)({})),i((0,c.B4)([])),i((0,c.QD)([])),i((0,c.aU)({})),P(null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.id)})).finally((()=>{M(!1)}))})).catch((()=>{M(!1)}))},children:(0,V.jsxs)(e.Z,{gutter:24,children:[(0,V.jsxs)(n.Z,{span:16,children:[(0,V.jsx)(R,{orderLoading:$}),(0,V.jsx)(el,{orderLoading:$||T})]}),(0,V.jsx)(n.Z,{span:8,children:(0,V.jsxs)("div",{style:{position:"sticky",top:"16px",right:0},children:[(0,V.jsx)(ml,{form:Z}),(0,V.jsx)(gl,{loading:$||T}),(0,V.jsx)(v.Z,{children:(0,V.jsx)(e.Z,{gutter:12,children:(0,V.jsx)(n.Z,{span:24,children:(0,V.jsx)(t.Z,{type:"primary",htmlType:"submit",style:{minWidth:"100%"},loading:I,disabled:T,children:f("update")})})})})]})})]})}),!!z&&(0,V.jsx)(jl.Z,{orderId:z,handleClose:()=>{P(null);const l="orders-board";i((0,p.ph)({...w,nextUrl:l})),g(`/${l}`)}})]})}}}]);