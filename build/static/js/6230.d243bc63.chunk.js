"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[6230],{16230:(e,l,a)=>{a.r(l),a.d(l,{default:()=>_});var t=a(9950),n=a(80737),i=a(20978),s=a(48538),o=a(23263),r=a(12203),d=a(24513),u=a(44070),c=a(53387),v=a(12449),h=a(70030),p=a(91854),x=a(43999),m=a(59621),g=a(97434),A=a(32645),f=a(44414);function j(e){let{id:l,loading:a,handleClose:t,text:n,click:i}=e;const{t:o}=(0,h.B)();return(0,f.jsxs)(A.A,{closable:!1,visible:!!l,footer:null,centered:!0,children:[(0,f.jsx)("p",{children:n}),(0,f.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,f.jsx)(s.A,{type:"primary",className:"mr-2",onClick:i,loading:a,children:o("yes")}),(0,f.jsx)(s.A,{onClick:t,children:o("no")})]})]})}var y=a(35116),b=a(63620),C=a(74623),k=a(28645),w=a(88986);function _(){var e,l,a;const{t:A}=(0,h.B)(),_=(0,p.wA)(),{activeMenu:V}=(0,p.d4)((e=>e.menu),p.bN),{extraValues:z,loading:S,meta:H}=(0,p.d4)((e=>e.extraValue),p.bN),[I,N]=(0,t.useState)(null),[O,B]=(0,t.useState)(null),[M,R]=(0,t.useState)(!1),[F,P]=(0,t.useState)([{title:A("id"),dataIndex:"id",key:"id",is_show:!0},{title:A("title"),dataIndex:"extra_group_id",key:"extra_group_id",is_show:!0,render:(e,l)=>{var a,t;return null===(a=l.group)||void 0===a||null===(t=a.translation)||void 0===t?void 0:t.title}},{title:A("created.by"),dataIndex:"shop",key:"shop",is_show:!0,render:(e,l)=>{var a;return null!==l&&void 0!==l&&null!==(a=l.group)&&void 0!==a&&a.shop?A("you"):A("admin")}},{title:A("value"),dataIndex:"value",key:"value",is_show:!0,render:(e,l)=>(0,f.jsxs)(n.A,{className:"extras",children:["color"===l.group.type?(0,f.jsx)("div",{className:"extra-color-wrapper-contain",style:{backgroundColor:l.value}}):null,"image"===l.group.type?(0,f.jsx)(i.A,{width:100,src:b.sE+l.value,className:"borderRadius"}):null,"image"===l.group.type?null:(0,f.jsx)("span",{children:l.value})]})},{title:A("options"),is_show:!0,render:e=>{var l,a;return(0,f.jsxs)(n.A,{children:[(0,f.jsx)(s.A,{type:"primary",icon:(0,f.jsx)(d.A,{}),onClick:()=>B(e),disabled:!(null!==e&&void 0!==e&&null!==(l=e.group)&&void 0!==l&&l.shop_id)}),(0,f.jsx)(y.A,{type:"primary",danger:!0,icon:(0,f.jsx)(u.A,{}),onClick:()=>N([e.id]),disabled:!(null!==e&&void 0!==e&&null!==(a=e.group)&&void 0!==a&&a.shop_id)})]})}}]),X=null===V||void 0===V?void 0:V.data,E={perPage:null===X||void 0===X?void 0:X.perPage,page:null===X||void 0===X?void 0:X.page};return(0,w.A)((()=>{_((0,x.Xb)(E))}),[null===V||void 0===V?void 0:V.data]),(0,t.useEffect)((()=>{V.refetch&&(_((0,x.Xb)()),_((0,C.km)(V)))}),[V.refetch]),(0,f.jsxs)(o.A,{title:A("extra.value"),extra:(0,f.jsxs)(n.A,{wrap:!0,children:[(0,f.jsx)(s.A,{type:"primary",icon:(0,f.jsx)(c.A,{}),onClick:()=>B({}),children:A("add.extra")}),(0,f.jsx)(k.A,{columns:F,setColumns:P})]}),children:[(0,f.jsx)(r.A,{scroll:{x:!0},loading:S,columns:null===F||void 0===F?void 0:F.filter((e=>e.is_show)),dataSource:z,rowKey:e=>e.id,pagination:{pageSize:E.perPage,page:(null===(e=V.data)||void 0===e?void 0:e.page)||1,total:H.total,defaultCurrent:null===(l=V.data)||void 0===l?void 0:l.page,current:null===(a=V.data)||void 0===a?void 0:a.page},onChange:function(e,l,a){const{pageSize:t,current:n}=e,{field:i}=a;_((0,C.Ok)({activeMenu:V,data:{...V.data,perPage:t,page:n,column:i}}))}}),O&&(0,f.jsx)(g.A,{modal:O,handleCancel:()=>B(null)}),I&&(0,f.jsx)(j,{id:I,click:()=>{R(!0);const e={...Object.assign({},...I.map(((e,l)=>({[`ids[${l}]`]:e}))))};m.A.deleteValue(e).then((()=>{v.oR.success(A("successfully.deleted")),N(null),_((0,x.Xb)())})).finally((()=>R(!1)))},text:A("delete.extra"),loading:M,handleClose:()=>N(null)})]})}},28645:(e,l,a)=>{a.d(l,{A:()=>x});var t=a(9950),n=a(66362),i=a(69216),s=a(80737),o=a(25933),r=a(57811),d=a(81541),u=a(48538),c=a(89323),v=a(70030),h=a(44414);const{Text:p}=n.A,x=e=>{let{columns:l=[],setColumns:a,style:n,size:x="",iconOnly:m}=e;const{t:g}=(0,v.B)(),[A,f]=(0,t.useState)(!1),j=(0,h.jsx)(i.A,{children:null===l||void 0===l?void 0:l.map(((e,t)=>(0,h.jsx)(i.A.Item,{children:(0,h.jsxs)(s.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(p,{children:e.title}),(0,h.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const t=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));a(t)}(e),disabled:1===t})]})},e+t)))});return(0,h.jsx)(r.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{f(e)},visible:A,children:(0,h.jsx)(d.A,{title:g("change.columns"),children:(0,h.jsx)(u.A,{style:{...n},size:x,icon:(0,h.jsx)(c.A,{}),children:m?null:g("Columns")})})})}},35116:(e,l,a)=>{a.d(l,{A:()=>d});a(9950);var t=a(48538),n=a(44070),i=a(12449),s=a(70030),o=a(13311),r=a(44414);function d(e){let{size:l="",onClick:a,type:d="default",...u}=e;const{t:c}=(0,s.B)(),{isDemo:v}=(0,o.A)();return(0,r.jsx)(t.A,{size:l,icon:(0,r.jsx)(n.A,{}),onClick:e=>{v?i.oR.warning(c("cannot.work.demo")):a(e)},type:d,...u})}},47992:(e,l,a)=>{a.d(l,{G:()=>d});var t=a(9950),n=a(95491),i=a.n(n),s=a(99674),o=a(90650),r=a(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:a=400,onClear:n,...d}=e;const[u,c]=(0,t.useState)(!1),[v,h]=(0,t.useState)([]),p=(0,t.useMemo)((()=>i()((e=>{h([]),c(!0),l(e).then((e=>{h(e),c(!1)}))}),a)),[l,a]);return(0,r.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),n&&n()},notFoundContent:u?(0,r.jsx)(o.A,{size:"small"}):"no results",...d,options:v,onFocus:()=>{p("")}})}},53387:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(89379),n=a(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=a(25085),o=function(e,l){return n.createElement(s.A,(0,t.A)((0,t.A)({},e),{},{ref:l,icon:i}))};o.displayName="PlusCircleOutlined";const r=n.forwardRef(o)},89323:(e,l,a)=>{a.d(l,{A:()=>r});var t=a(89379),n=a(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var s=a(25085),o=function(e,l){return n.createElement(s.A,(0,t.A)((0,t.A)({},e),{},{ref:l,icon:i}))};o.displayName="TableOutlined";const r=n.forwardRef(o)},97434:(e,l,a)=>{a.d(l,{A:()=>A});var t=a(3969),n=a(55902),i=a(32645),s=a(48538),o=a(9950),r=a(28276),d=a(70030),u=a(91854),c=a(12449),v=a(32599),h=a(62466),p=a(43999),x=a(59621),m=a(47992),g=a(44414);function A(e){let{modal:l,handleCancel:a,onSuccess:A,groupId:f}=e;const[j]=t.A.useForm(),{t:y}=(0,d.B)(),b=(0,u.wA)(),[C,k]=(0,o.useState)(!1),[w,_]=(0,o.useState)("text"),[V,z]=(0,o.useState)(null),[S,H]=(0,o.useState)(""),{extraGroups:I}=(0,u.d4)((e=>e.extraGroup),u.bN);(0,o.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,a,t;_(l.group.type);const n={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title,value:null===l||void 0===l||null===(t=l.group)||void 0===t?void 0:t.id},value:l.value};switch(l.group.type){case"color":H(l.value);break;case"image":z((0,h.A)(l.value))}j.setFieldsValue(n)}f&&j.setFieldsValue({extra_group_id:{value:f}})}),[l,f]);function N(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,g.jsx)(i.A,{title:null!==l&&void 0!==l&&l.id?y("edit.extra"):y("add.extra"),visible:!!l,onCancel:a,footer:[(0,g.jsx)(s.A,{type:"primary",onClick:()=>j.submit(),loading:C,children:y("save")}),(0,g.jsx)(s.A,{type:"default",onClick:a,children:y("cancel")})],children:(0,g.jsxs)(t.A,{name:"extra-form",layout:"vertical",form:j,onFinish:e=>{var t;console.log(e);const n={extra_group_id:null===e||void 0===e||null===(t=e.extra_group_id)||void 0===t?void 0:t.value,value:N(w,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{k(!0),x.A.updateValue(e,l).then((()=>{c.oR.success(y("successfully.updated")),a(),b((0,p.Xb)())})).finally((()=>k(!1)))})(l.id,n):(e=>{k(!0),x.A.createValue(e).then((()=>{c.oR.success(y("successfully.created")),a(),b((0,p.Xb)()),A&&A()})).finally((()=>k(!1)))})(n)},children:[(0,g.jsx)(t.A.Item,{name:"extra_group_id",label:y("extra.group"),hidden:!!f,rules:[{required:!0,message:""}],children:(0,g.jsx)(m.G,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),x.A.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,g.jsx)(t.A.Item,{name:"value",label:y("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,g.jsx)(r.Xq,{onChangeComplete:e=>H(e.hex),color:S,disableAlpha:!0});case"text":return(0,g.jsx)(n.A,{placeholder:y("enter.extra.value")});case"image":return(0,g.jsx)(v.A,{type:"extras",image:V,setImage:z,form:j,name:"value"});default:return""}})(w)})]})})}}}]);