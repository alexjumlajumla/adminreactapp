(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4403],{8168:(e,t,l)=>{"use strict";function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}l.d(t,{A:()=>a})},8297:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var a=l(9950),i=l(55902),n=l(41397),s=l(60767),d=l(44414);function o(e){let{handleChange:t,defaultValue:l,resetSearch:o,...r}=e;const[u,c]=(0,a.useState)(l),v=(0,a.useMemo)((()=>(0,n.debounce)((e=>{t(e)}),800)),[t]);return(0,a.useEffect)((()=>{c(l)}),[o,l]),(0,d.jsx)(i.A,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(s.A,{}),...r})}},10156:(e,t,l)=>{"use strict";l.d(t,{A:()=>g});var a=l(9950),i=l(3969),n=l(32645),s=l(48538),d=l(87094),o=l(41988),r=l(99674),u=l(91854),c=l(57056),v=l(74623),h=l(70030),m=l(29514),p=l(47992),y=l(66209),A=l(80415),x=l(44414);function g(e){var t,l,g,j;let{orderDetails:f,handleCancel:_}=e;const{t:b}=(0,h.B)(),{activeMenu:C}=(0,u.d4)((e=>e.menu),u.bN),[k]=i.A.useForm(),w=(0,u.wA)(),[S,H]=(0,a.useState)(!1),M=A.HF.map((e=>({label:b(e),value:e,key:e})));(0,a.useEffect)((()=>{w((0,m.d8)({}))}),[]);return(0,x.jsx)(n.A,{visible:!!f,title:f.title,onCancel:_,footer:[(0,x.jsx)(s.A,{type:"primary",onClick:()=>k.submit(),loading:S,children:b("save")}),(0,x.jsx)(s.A,{type:"default",onClick:_,children:b("cancel")})],children:(0,x.jsx)(i.A,{form:k,layout:"vertical",onFinish:e=>{var t,l;const a={deliveryman:null===e||void 0===e||null===(t=e.deliveryman)||void 0===t?void 0:t.value,transaction_status:(null===e||void 0===e||null===(l=e.transaction_status)||void 0===l?void 0:l.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};H(!0),c.A.updateDelivery(f.id,a).then((()=>{_(),w((0,v.Ms)(C))})).finally((()=>H(!1)))},initialValues:{deliveryman:{label:null===f||void 0===f||null===(t=f.deliveryman)||void 0===t?void 0:t.firstname,value:null===(l=f.deliveryman)||void 0===l?void 0:l.id,key:null===(g=f.deliveryman)||void 0===g?void 0:g.id},transaction_status:null===f||void 0===f||null===(j=f.transaction)||void 0===j?void 0:j.status},children:(0,x.jsxs)(d.A,{gutter:12,children:[(0,x.jsx)(o.A,{span:24,children:(0,x.jsx)(i.A.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,x.jsx)(p.G,{fetchOptions:e=>{var t,l;const a={perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0,"address[latitude]":(null===f||void 0===f||null===(t=f.location)||void 0===t?void 0:t.latitude)||void 0,"address[longitude]":(null===f||void 0===f||null===(l=f.location)||void 0===l?void 0:l.longitude)||void 0};return y.A.getDeliverymans(a).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.firstname,value:null===e||void 0===e?void 0:e.id})))))}})})}),(null===f||void 0===f?void 0:f.transaction)&&(0,x.jsx)(o.A,{span:24,children:(0,x.jsx)(i.A.Item,{label:b("transaction.status"),name:"transaction_status",children:(0,x.jsx)(r.A,{options:M})})})]})})})}},13700:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var a=l(89379),i=l(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var s=l(25085),d=function(e,t){return i.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:n}))};d.displayName="ClearOutlined";const o=i.forwardRef(d)},16503:(e,t,l)=>{"use strict";l.d(t,{A:()=>A});var a=l(3969),i=l(87094),n=l(41988),s=l(99674),d=l(40895),o=l(80737),r=l(48538),u=l(70030),c=l(80415),v=l(9950),h=l(57056),m=l(91854),p=l(74623),y=l(44414);const A=e=>{let{data:t,onCancel:l,refreshOrders:A}=e;const[x]=a.A.useForm(),{t:g}=(0,u.B)(),j=(0,m.wA)(),{activeMenu:f}=(0,m.d4)((e=>e.menu),m.bN),[_,b]=(0,v.useState)(!1),C=c.HF.map((e=>({label:g(e),value:e,key:e})));return(0,y.jsx)(a.A,{form:x,layout:"vertical",initialValues:{status:t.status},onFinish:e=>{var a;const i={status:null===e||void 0===e||null===(a=e.status)||void 0===a?void 0:a.value,transaction_id:t.id};b(!0),h.A.updateTransactionStatus(t.payable_id,i).finally((()=>{b(!1),l(),A?A():j((0,p.Ms)(f))}))},children:(0,y.jsxs)(i.A,{gutter:12,children:[(0,y.jsx)(n.A,{span:24,children:(0,y.jsx)(a.A.Item,{label:g("status"),name:"status",rules:[{required:!0,message:g("required")}],children:(0,y.jsx)(s.A,{options:C,labelInValue:!0})})}),(0,y.jsx)(d.A,{}),(0,y.jsx)(n.A,{span:24,children:(0,y.jsxs)(o.A,{style:{display:"flex",justifyContent:"end"},children:[(0,y.jsx)(r.A,{onClick:l,children:g("cancel")}),(0,y.jsx)(r.A,{type:"primary",htmlType:"submit",loading:_,children:g("save")})]})})]})})}},28645:(e,t,l)=>{"use strict";l.d(t,{A:()=>p});var a=l(9950),i=l(66362),n=l(69216),s=l(80737),d=l(25933),o=l(57811),r=l(81541),u=l(48538),c=l(89323),v=l(70030),h=l(44414);const{Text:m}=i.A,p=e=>{let{columns:t=[],setColumns:l,style:i,size:p="",iconOnly:y}=e;const{t:A}=(0,v.B)(),[x,g]=(0,a.useState)(!1),j=(0,h.jsx)(n.A,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,h.jsx)(n.A.Item,{children:(0,h.jsxs)(s.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));l(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(o.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:x,children:(0,h.jsx)(r.A,{title:A("change.columns"),children:(0,h.jsx)(u.A,{style:{...i},size:p,icon:(0,h.jsx)(c.A,{}),children:y?null:A("Columns")})})})}},35116:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});l(9950);var a=l(48538),i=l(44070),n=l(12449),s=l(70030),d=l(13311),o=l(44414);function r(e){let{size:t="",onClick:l,type:r="default",...u}=e;const{t:c}=(0,s.B)(),{isDemo:v}=(0,d.A)();return(0,o.jsx)(a.A,{size:t,icon:(0,o.jsx)(i.A,{}),onClick:e=>{v?n.oR.warning(c("cannot.work.demo")):l(e)},type:r,...u})}},42634:()=>{},47992:(e,t,l)=>{"use strict";l.d(t,{G:()=>r});var a=l(9950),i=l(95491),n=l.n(i),s=l(99674),d=l(90650),o=l(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:i,...r}=e;const[u,c]=(0,a.useState)(!1),[v,h]=(0,a.useState)([]),m=(0,a.useMemo)((()=>n()((e=>{h([]),c(!0),t(e).then((e=>{h(e),c(!1)}))}),l)),[t,l]);return(0,o.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),i&&i()},notFoundContent:u?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},53387:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var a=l(89379),i=l(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=l(25085),d=function(e,t){return i.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:n}))};d.displayName="PlusCircleOutlined";const o=i.forwardRef(d)},53774:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var a=l(83291);function i(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const s=null===(e=a.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,d=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=i||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(n||(null===s||void 0===s?void 0:s.position)||"before")?`${d} ${o}`:`${o} ${d}`}},58891:(e,t,l)=>{"use strict";l.d(t,{A:()=>r});var a=l(17811),i=(l(9950),l(29949)),n=l(42935),s=l(13564),d=l(44414);const o=[{value:"seller/orders-board",title:"Board",icon:(0,d.jsx)(n.oeo,{size:20})},{value:"seller/orders",title:"List",icon:(0,d.jsx)(i.AyK,{size:20})}],r=e=>{let{listType:t}=e;const{type:l}=(0,s.g)(),i=(0,s.Zp)();return(0,d.jsx)(a.Ay.Group,{value:t,onChange:e=>{i(`/${e.target.value}${l?`/${l}`:""}`)},className:"float-right",buttonStyle:"solid",children:null===o||void 0===o?void 0:o.map((e=>(0,d.jsx)(a.Ay.Button,{value:e.value,children:(0,d.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},65820:(e,t,l)=>{"use strict";l.d(t,{s:()=>s});var a=l(13564),i=l(21215),n=l.n(i);const s=()=>{const e=(0,a.Zp)(),t=(0,a.zy)(),l=n().parse(t.search,{ignoreQueryPrefix:!0});return{values:l,set:(t,a)=>e({search:n().stringify({...l,[t]:a})}),reset:t=>{const a={...l};a[t]&&delete a[t],e({search:n().stringify({...a})})},clear:()=>e({search:n().stringify({})}),merge:t=>e({search:n().stringify({...l,...t})}),get:e=>l[e],setMultiple:t=>{const a={...l,...t};e({search:n().stringify(a)})},resetMultiple:t=>{const a={...l};t.forEach((e=>{a[e]&&delete a[e]})),e({search:n().stringify(a)})}}}},69447:(e,t,l)=>{"use strict";l.d(t,{A:()=>A});var a=l(9950),i=l(3969),n=l(32645),s=l(48538),d=l(87094),o=l(41988),r=l(99674),u=l(91854),c=l(70030),v=l(57056),h=l(74623),m=l(80415),p=l(13564),y=l(44414);function A(e){var t;let{orderDetails:l,handleCancel:A}=e;const{t:x}=(0,c.B)(),g=(0,p.Zp)(),[j]=i.A.useForm(),f=(0,u.wA)(),{activeStatusList:_}=(0,u.d4)((e=>e.orderStatus),u.bN),{activeMenu:b}=(0,u.d4)((e=>e.menu),u.bN),C=(0,u.d4)((e=>e.globalSettings.settings),u.bN);console.log("activeStatusList",_);const[k,w]=(0,a.useState)(!1),[S,H]=(0,a.useState)([{id:0,name:"all",active:!0,sort:0},..._,{id:(null===_||void 0===_?void 0:_.length)+1,name:"canceled",active:!0,sort:8}]),M=m.HF.map((e=>({label:x(e),value:e,key:e})));(0,a.useEffect)((()=>{var e;const t=S.findIndex((e=>(null===e||void 0===e?void 0:e.name)===(null===l||void 0===l?void 0:l.status)));let a=[S[t],S[t+1],S[(null===_||void 0===_?void 0:_.length)+1]];t<0&&(a=[S[t+1],S[(null===_||void 0===_?void 0:_.length)+1]]),null===(e=a)||void 0===e||e.map(((e,t,a)=>{(null===e||void 0===e?void 0:e.name)===(null===l||void 0===l?void 0:l.status)&&H(a.slice(t))}))}),[l]);return(0,y.jsx)(n.A,{visible:!!l,title:l.title,onCancel:A,footer:[(0,y.jsx)(s.A,{type:"primary",onClick:()=>j.submit(),loading:k,children:x("save")}),(0,y.jsx)(s.A,{type:"default",onClick:A,children:x("cancel")})],children:(0,y.jsx)(i.A,{form:j,layout:"vertical",onFinish:e=>{var t,a;w(!0);const i={status:(null===e||void 0===e||null===(t=e.status)||void 0===t?void 0:t.value)||(null===e||void 0===e?void 0:e.status),transaction_status:(null===e||void 0===e||null===(a=e.transaction_status)||void 0===a?void 0:a.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};v.A.updateStatus(l.id,i).then((e=>{var t,l;"accepted"===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.status)&&"1"===(null===C||void 0===C?void 0:C.auto_print_order)?(e=>{const t=`seller/generate-invoice/${e}`;f((0,h.X4)({url:t,id:"seller-generate-invoice ",name:x("generate.invoice")})),g(`/${t}?print=true`)})(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.id):(A(),f((0,h.Ms)(b)))})).finally((()=>w(!1)))},initialValues:{status:l.status,transaction_status:null===l||void 0===l||null===(t=l.transaction)||void 0===t?void 0:t.status},children:(0,y.jsxs)(d.A,{gutter:12,children:[(0,y.jsx)(o.A,{span:24,children:(0,y.jsx)(i.A.Item,{label:x("status"),name:"status",rules:[{required:!0,message:x("required")}],children:(0,y.jsx)(r.A,{children:null===S||void 0===S?void 0:S.map((e=>(0,y.jsx)(r.A.Option,{value:e.name,children:x(e.name)},e.id)))})})}),(null===l||void 0===l?void 0:l.transaction)&&(0,y.jsx)(o.A,{span:24,children:(0,y.jsx)(i.A.Item,{label:x("transaction.status"),name:"transaction_status",children:(0,y.jsx)(r.A,{options:M})})})]})})})}},80415:(e,t,l)=>{"use strict";l.d(t,{Av:()=>u,HF:()=>i,HV:()=>o,LH:()=>a,No:()=>d,Qt:()=>s,fz:()=>r,g$:()=>n});const a={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=["progress","paid","canceled","rejected","refund"],n=["before","after"],s=["blue","red","gold","volcano","cyan","lime"],d=["new","accepted","cooking","ready","ended"],o=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],u=["male","female"]},89323:(e,t,l)=>{"use strict";l.d(t,{A:()=>o});var a=l(89379),i=l(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var s=l(25085),d=function(e,t){return i.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:n}))};d.displayName="TableOutlined";const o=i.forwardRef(d)},94326:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>K});var a=l(9950),i=l(87864),n=l(54909),s=l(12916),d=l(48538),o=l(80737),r=l(23263),u=l(99674),c=l(12203),v=l(32645),h=l(13564),m=l(24513),p=l(12678),y=l(44070),A=l(53387),x=l(13700),g=l(91854),j=l(74623),f=l(70030),_=l(88986),b=l(20626),C=l(8168),k=l(8297),w=l(51242),S=l(53774),H=l(47992),M=l(66209),V=l(28645),z=l(90352),N=l(35116),I=l(55386),$=l(12449),O=l(76083),D=l(57056),F=l(59051),P=l.n(F),Y=l(65820),B=l(10156),T=l(69447),E=l(58891),R=l(16503),q=l(44414);const{RangePicker:G}=i.A,{TabPane:L}=n.A;function K(){var e,t,l,i,F,K,W,Z,X,Q,J;const U=(0,g.wA)(),ee=(0,h.Zp)(),{t:te}=(0,f.B)(),le=(0,h.g)(),[ae,ie]=(0,a.useState)(null),[ne,se]=(0,a.useState)(null),{setIsModalVisible:de}=(0,a.useContext)(I.o),[oe,re]=(0,a.useState)(!1),{defaultCurrency:ue}=(0,g.d4)((e=>e.currency),g.bN),{statusList:ce}=(0,g.d4)((e=>e.orderStatus),g.bN),ve=null===le||void 0===le?void 0:le.type,he=[{name:"all",id:0,active:!0,sort:0},...ce],[me,pe]=(0,a.useState)(null),[ye,Ae]=(0,a.useState)(null),[xe,ge]=(0,a.useState)(null),[je,fe]=(0,a.useState)([{title:te("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:te("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>e?(0,q.jsxs)("div",{children:[(null===e||void 0===e?void 0:e.firstname)||""," ",(null===e||void 0===e?void 0:e.lastname)||""]}):(0,q.jsx)(s.A,{color:"red",children:te("deleted.user")})},{title:te("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,q.jsxs)("div",{onClick:e=>{e.stopPropagation(),Ae(t)},className:"cursor-pointer",style:{width:"max-content"},children:["new"===e?(0,q.jsx)(s.A,{color:"blue",children:te(e)}):"canceled"===e?(0,q.jsx)(s.A,{color:"red",children:te(e)}):(0,q.jsx)(s.A,{color:"cyan",children:te(e)}),"delivered"===e||"canceled"===e||t.deleted_at?"":(0,q.jsx)(m.A,{disabled:t.deleted_at})]})},{title:te("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,t)=>(0,q.jsx)("div",{children:"ready"===t.status&&"pickup"!==t.delivery_type?(0,q.jsx)(d.A,{disabled:t.deleted_at,type:"link",onClick:()=>pe(t),children:(0,q.jsxs)(o.A,{children:[e?`${null===e||void 0===e?void 0:e.firstname} ${(null===e||void 0===e?void 0:e.lastname)||""}`:te("add.deliveryman"),(0,q.jsx)(m.A,{})]})}):(0,q.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})})},{title:te("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,q.jsxs)("div",{className:"text-lowercase",children:[e||0," ",te("products")]})},{title:te("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,S.A)(e,null===ue||void 0===ue?void 0:ue.symbol,null===ue||void 0===ue?void 0:ue.position)},{title:te("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var t;return te(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:te("last.payment.status"),is_show:!0,dataIndex:"transaction",key:"transaction",render:(e,t)=>{var l;const a=(null===(l=t.transactions)||void 0===l?void 0:l.at(-1))||{};return(0,q.jsxs)("div",{className:"cursor-pointer",children:[(0,q.jsx)(s.A,{color:"progress"===(null===a||void 0===a?void 0:a.status)?"blue":"paid"===(null===a||void 0===a?void 0:a.status)?"green":"canceled"===(null===a||void 0===a?void 0:a.status)?"red":"rejected"===(null===a||void 0===a?void 0:a.status)?"orange":"refund"===(null===a||void 0===a?void 0:a.status)?"purple":"",children:null!==a&&void 0!==a&&a.status?te(null===a||void 0===a?void 0:a.status):te("N/A")}),!(null!==t&&void 0!==t&&t.deleted_at)&&!!a&&(0,q.jsx)(m.A,{onClick:e=>{e.stopPropagation(),ge(a)},disabled:null===t||void 0===t?void 0:t.deleted_at})]})}},{title:te("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:(e,t)=>P()(null===t||void 0===t?void 0:t.created_at).format("YYYY-MM-DD HH:mm")},{title:te("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date"},{title:te("options"),key:"options",is_show:!0,render:(e,t)=>(0,q.jsxs)(o.A,{children:[(0,q.jsx)(d.A,{icon:(0,q.jsx)(p.A,{}),onClick:()=>(e=>{U((0,j.X4)({url:`seller/order/details/${e.id}`,id:"order_details",name:te("order.details")})),ee(`/seller/order/details/${e.id}`)})(t)}),(0,q.jsx)(N.A,{icon:(0,q.jsx)(y.A,{}),onClick:()=>{ie([t.id]),de(!0),se(!0)}})]})}]),{activeMenu:_e}=(0,g.d4)((e=>e.menu),g.bN),be=(0,Y.s)(),[Ce,ke]=(0,a.useState)(be.values.status||"all"),we=(null===(e=_e.data)||void 0===e?void 0:e.role)||Ce,{orders:Se,meta:He,loading:Me,params:Ve}=(0,g.d4)((e=>e.sellerOrders),g.bN),[ze,Ne]=(0,a.useState)(null),Ie=null===_e||void 0===_e?void 0:_e.data,$e={search:null===Ie||void 0===Ie?void 0:Ie.search,sort:null===Ie||void 0===Ie?void 0:Ie.sort,column:null===Ie||void 0===Ie?void 0:Ie.column,perPage:null===Ie||void 0===Ie?void 0:Ie.perPage,page:null===Ie||void 0===Ie?void 0:Ie.page,user_id:null===Ie||void 0===Ie?void 0:Ie.user_id,status:"deleted_at"===we||"all"===we?void 0:we,deleted_at:"deleted_at"===we?"deleted_at":void 0,shop_id:null!==(null===(t=_e.data)||void 0===t?void 0:t.shop_id)?null===(l=_e.data)||void 0===l?void 0:l.shop_id:null,delivery_type:ve||(null!==(null===(i=_e.data)||void 0===i?void 0:i.delivery_type)?null===(F=_e.data)||void 0===F?void 0:F.delivery_type:null),date_from:(null===ze||void 0===ze||null===(K=ze[0])||void 0===K?void 0:K.format("YYYY-MM-DD"))||void 0,date_to:(null===ze||void 0===ze||null===(W=ze[1])||void 0===W?void 0:W.format("YYYY-MM-DD"))||void 0};(0,a.useEffect)((()=>{Oe()}),[$e.page,$e.perPage,$e.status,$e.shop_id,$e.sort,$e.user_id,$e.delivery_type,$e.date_from,$e.search]),(0,_.A)((()=>{_e.refetch&&Oe()}),[_e.refetch]);const Oe=()=>{U((0,b.Gb)($e)),U((0,z.nr)({})),U((0,j.km)(_e))};const De=(e,t)=>{U((0,j.Ok)({activeMenu:_e,data:{...Ie,[t]:e}}))};const Fe={selectedRowKeys:ae,onChange:e=>{ie(e)}},Pe=()=>{(0,g.vA)((()=>{U((0,b.gw)()),U((0,j.Ok)({activeMenu:_e,data:null}))})),Ne(null)},Ye=()=>{pe(null),Ae(null)};return(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(o.A,{className:"justify-content-end w-100 mb-3",children:[(0,q.jsx)(E.A,{listType:"seller/orders"}),(0,q.jsx)(d.A,{type:"primary",icon:(0,q.jsx)(A.A,{}),onClick:()=>{U((0,w.Uy)()),U((0,j.X4)({id:"pos.system",url:"seller/pos-system",name:te("add.order")})),ee("/seller/pos-system",{state:{delivery_type:ve}})},style:{width:"100%"},children:te("add.order")})]}),(0,q.jsx)(r.A,{children:(0,q.jsxs)(o.A,{wrap:!0,className:"p-0 mb-0",children:[(0,q.jsx)(k.A,{placeholder:te("search"),handleChange:e=>De(e,"search"),defaultValue:null===(Z=_e.data)||void 0===Z?void 0:Z.search,style:{minWidth:200},onClear:Pe}),(0,q.jsx)(H.G,{placeholder:te("select.client"),fetchOptions:async function(e){const t={search:null!==e&&void 0!==e&&e.length?e:void 0,page:1,perPage:20};return M.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:`${(null===e||void 0===e?void 0:e.firstname)||""} ${(null===e||void 0===e?void 0:e.lastname)||""}`,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))}))},onSelect:e=>De(null===e||void 0===e?void 0:e.value,"user_id"),style:{minWidth:200},onClear:Pe,value:null===Ie||void 0===Ie?void 0:Ie.user_id}),(0,q.jsx)(G,{value:ze,onChange:e=>{De(JSON.stringify(e),"data_time"),Ne(e)},style:{minWidth:200},onClear:()=>Pe(),defaultValue:ze}),!ve&&(0,q.jsx)(u.A,{value:null===Ie||void 0===Ie?void 0:Ie.delivery_type,placeholder:te("order.type"),onSelect:e=>De(e,"delivery_type"),options:[{label:te("pickup"),value:"pickup"},{label:te("delivery"),value:"delivery"}],allowClear:!0,style:{minWidth:200},onDeselect:()=>De(null,"delivery_type"),onClear:Pe}),(0,q.jsx)(d.A,{icon:(0,q.jsx)(x.A,{}),onClick:Pe,children:te("clear")})]})}),(0,q.jsx)(r.A,{children:(0,q.jsxs)(o.A,{wrap:!0,children:[(0,q.jsx)(N.A,{onClick:()=>{null===ae||0===ae.length?$.oR.warning(te("select.the.product")):(de(!0),se(!1))},children:te("delete.selected")}),(0,q.jsx)(V.A,{columns:je,setColumns:fe})]})}),(0,q.jsxs)(r.A,{children:[(0,q.jsx)(n.A,{onChange:e=>{const t=e;U((0,j.Ok)({activeMenu:_e,data:{role:t,page:1}})),ke(e),ee(`?status=${t}`)},type:"card",activeKey:we,children:he.filter((e=>!0===e.active)).map((e=>(0,q.jsx)(L,{tab:te(e.name)},e.name)))}),(0,q.jsx)(c.A,{scroll:{x:!0},rowSelection:Fe,columns:null===je||void 0===je?void 0:je.filter((e=>e.is_show)),dataSource:Se,loading:Me,pagination:{pageSize:Ve.perPage,page:(null===(X=_e.data)||void 0===X?void 0:X.page)||1,total:null===He||void 0===He?void 0:He.total,defaultCurrent:null===(Q=_e.data)||void 0===Q?void 0:Q.page,current:null===(J=_e.data)||void 0===J?void 0:J.page},rowKey:e=>e.id,onChange:function(e,t,l){const{pageSize:a,current:i}=e,{field:n,order:s}=l,d=(0,C.A)(s);U((0,j.Ok)({activeMenu:_e,data:{...Ie,perPage:a,page:i,column:n,sort:d}}))}}),(0,q.jsx)(O.A,{click:()=>{re(!0);const e={...Object.assign({},...ae.map(((e,t)=>({[`ids[${t}]`]:e}))))};D.A.delete(e).then((()=>{$.oR.success(te("successfully.deleted")),de(!1),U((0,b.Gb)($e)),se(null)})).finally((()=>re(!1)))},text:te(ne?"delete":"all.delete"),loading:oe,setText:ie})]}),ye&&(0,q.jsx)(T.A,{orderDetails:ye,handleCancel:Ye,status:ce,paramsData:$e}),me&&(0,q.jsx)(B.A,{orderDetails:me,handleCancel:Ye}),!!xe&&(0,q.jsx)(v.A,{visible:!!xe,footer:!1,onCancel:()=>ge(null),children:(0,q.jsx)(R.A,{data:xe,onCancel:()=>ge(null)})})]})}}}]);