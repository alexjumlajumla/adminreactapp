"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9738],{49655:(l,e,n)=>{n.d(e,{_:()=>s});var t=n(47313),i=n(12279),o=n.n(i),u=n(74294),a=n(72652),d=n(46417);const s=l=>{let{fetchOptions:e,debounceTimeout:n=400,hasMore:i,refetchOnFocus:s=!1,...r}=l;const[v,c]=(0,t.useState)(!1),[p,h]=(0,t.useState)([]),[b,m]=(0,t.useState)(!1),[x,f]=(0,t.useState)(null),[g,_]=(0,t.useState)(1),j=(0,t.useMemo)((()=>o()((l=>{h([]),f(l),c(!0),e({search:l}).then((l=>{h(l),_(2),c(!1)})).finally((()=>m(!1)))}),n)),[e,n,g]);return(0,d.jsxs)(u.Z,{showSearch:!0,allowClear:!0,onPopupScroll:async l=>{const n=l.target;b||n.scrollTop+n.offsetHeight!==n.scrollHeight||i&&(m(!0),e({search:x,page:g}).then((l=>{_((l=>l+1)),h([...p,...l])})).finally((()=>m(!1))))},labelInValue:!0,filterOption:!1,onSearch:j,notFoundContent:v?(0,d.jsx)(a.Z,{size:"small"}):"no results",onFocus:()=>{s?j(""):null!==p&&void 0!==p&&p.length||j("")},...r,children:[p.map(((l,e)=>(0,d.jsx)(u.Z.Option,{value:l.value,children:l.label},e))),b&&(0,d.jsx)(u.Z.Option,{children:(0,d.jsx)(a.Z,{size:"small"})})]})}},79738:(l,e,n)=>{n.r(e),n.d(e,{default:()=>f});var t=n(47313),i=n(97890),o=n(23560),u=n(10976),a=n(77181),d=n(2717),s=n(90954),r=n(24511),v=n(70816),c=n.n(v),p=n(96708),h=n(73346),b=n(51282),m=n(77397),x=n(46417);const f=()=>{const{t:l}=(0,r.$)(),{activeMenu:e}=(0,d.v9)((l=>l.menu),d.wU),n=(0,d.I0)(),[v]=u.Z.useForm(),f=(0,i.s0)(),[g,_]=(0,t.useState)(!1),{id:j}=(0,i.UO)();(0,t.useEffect)((()=>()=>{const l=v.getFieldsValue(!0),t={...l,expired_at:JSON.stringify(null===l||void 0===l?void 0:l.expired_at)};n((0,s.nc)({activeMenu:e,data:t}))}),[]);const Z=l=>{_(!0),h.Z.getById(l).then((l=>{!function(l){var t,i,o,u,a,d,r,p,h,b,m,x,f,g,j,Z,y,k,S,$;const q={...l,expired_at:c()(l.expired_at,"YYYY-MM-DD"),bonusable_id:{label:`${null===l||void 0===l||null===(t=l.bonusable)||void 0===t||null===(i=t.product)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title} ${null!==l&&void 0!==l&&null!==(u=l.bonusable)&&void 0!==u&&null!==(a=u.extras)&&void 0!==a&&a.length?` => ${null===l||void 0===l||null===(d=l.bonusable)||void 0===d||null===(r=d.extras)||void 0===r||null===(p=r.map((l=>{var e,n;return`${null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title}: ${null===l||void 0===l?void 0:l.value}`})))||void 0===p?void 0:p.join(", ")}`:""}`,value:null===l||void 0===l||null===(h=l.bonusable)||void 0===h?void 0:h.id,key:null===l||void 0===l||null===(b=l.bonusable)||void 0===b?void 0:b.id},bonus_stock_id:{label:`${null===l||void 0===l||null===(m=l.bonusStock)||void 0===m||null===(x=m.product)||void 0===x||null===(f=x.translation)||void 0===f?void 0:f.title} ${null!==l&&void 0!==l&&null!==(g=l.bonusStock)&&void 0!==g&&null!==(j=g.extras)&&void 0!==j&&j.length?` => ${null===l||void 0===l||null===(Z=l.bonusStock)||void 0===Z||null===(y=Z.extras)||void 0===y||null===(k=y.map((l=>{var e,n;return`${null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title}: ${null===l||void 0===l?void 0:l.value}`})))||void 0===k?void 0:k.join(", ")}`:""}`,value:null===l||void 0===l||null===(S=l.bonusStock)||void 0===S?void 0:S.id,key:null===l||void 0===l||null===($=l.bonusStock)||void 0===$?void 0:$.id}};v.setFieldsValue({...q}),n((0,s.nc)({activeMenu:e,data:{...q,expired_at:JSON.stringify(q.expired_at)}})),_(!1)}(l.data)})).finally((()=>{_(!1),n((0,s.A_)(e))}))};(0,t.useEffect)((()=>{e.refetch&&Z(j)}),[e.refetch]);return(0,x.jsx)(a.Z,{title:l("edit.bonus"),className:"h-100",children:g?(0,x.jsx)(b.Z,{}):(0,x.jsx)(m.Z,{form:v,handleSubmit:t=>{const i={expired_at:c()(t.expired_at).format("YYYY-MM-DD"),status:t.status,type:"count",bonusable_id:t.bonusable_id.value,value:t.value,bonus_stock_id:t.bonus_stock_id.value,bonus_quantity:t.bonus_quantity},u="seller/bonus/product";h.Z.update(j,i).then((()=>{o.Am.success(l("successfully.updated")),(0,d.dC)((()=>{n((0,s.ph)({...e,nextUrl:u})),n((0,p.k)({}))})),f(`/${u}`)}))}})})}},77397:(l,e,n)=>{n.d(e,{Z:()=>f});var t=n(47313),i=n(10976),o=n(68197),u=n(59624),a=n(16124),d=n(99096),s=n(86345),r=n(59491),v=n(70816),c=n.n(v),p=n(24511),h=n(2717),b=n(18333),m=n(49655),x=n(46417);function f(l){let{form:e,handleSubmit:n}=l;const{t:v}=(0,p.$)(),{activeMenu:f}=(0,h.v9)((l=>l.menu),h.wU),[g,_]=(0,t.useState)(!1),[j,Z]=(0,t.useState)({product:!1,bonusProduct:!1});return(0,x.jsxs)(i.Z,{name:"product-bonus-form",layout:"vertical",onFinish:l=>{_(!0),n(l).finally((()=>_(!1)))},form:e,initialValues:{status:!0,...f.data,...(()=>{var l,e;if(null===(l=f.data)||void 0===l||!l.expired_at)return{};const n=JSON.parse(null===(e=f.data)||void 0===e?void 0:e.expired_at);return{expired_at:c()(n,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,x.jsxs)(o.Z,{gutter:12,children:[(0,x.jsx)(u.Z,{span:12,children:(0,x.jsx)(i.Z.Item,{label:v("products.stock"),name:"bonusable_id",rules:[{required:!0,message:v("required")}],children:(0,x.jsx)(m._,{fetchOptions:function(l){let{page:e=1,search:n}=l;const t={page:e,search:null!==n&&void 0!==n&&n.length?n:void 0};return b.Z.getStock(t).then((l=>{var e,n;return Z({...j,product:(null===l||void 0===l||null===(e=l.meta)||void 0===e?void 0:e.current_page)<(null===l||void 0===l||null===(n=l.meta)||void 0===n?void 0:n.last_page)}),l.data.map((l=>{var e,n,t,i,o;return{label:`${null===l||void 0===l||null===(e=l.product)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title} ${null!==l&&void 0!==l&&null!==(t=l.extras)&&void 0!==t&&t.length?`=> ${null===l||void 0===l||null===(i=l.extras)||void 0===i||null===(o=i.map((l=>{var e,n;return`${null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title}: ${null===l||void 0===l?void 0:l.value}`})))||void 0===o?void 0:o.join(", ")}`:""}`,value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))}))},hasMore:j.product,allowClear:!1})})}),(0,x.jsx)(u.Z,{span:12,children:(0,x.jsx)(i.Z.Item,{label:v("product.quantity"),name:"value",rules:[{required:!0,message:v("required")}],children:(0,x.jsx)(a.Z,{className:"w-100"})})}),(0,x.jsx)(u.Z,{span:12,children:(0,x.jsx)(i.Z.Item,{label:v("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:v("required")}],children:(0,x.jsx)(m._,{fetchOptions:function(l){let{page:e=1,search:n}=l;const t={page:e,search:null!==n&&void 0!==n&&n.length?n:void 0};return b.Z.getStock(t).then((l=>{var e,n;return Z({...j,bonusProduct:(null===l||void 0===l||null===(e=l.meta)||void 0===e?void 0:e.current_page)<(null===l||void 0===l||null===(n=l.meta)||void 0===n?void 0:n.last_page)}),l.data.map((l=>{var e,n,t,i,o;return{label:`${null===l||void 0===l||null===(e=l.product)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title} ${null!==l&&void 0!==l&&null!==(t=l.extras)&&void 0!==t&&t.length?`=> ${null===l||void 0===l||null===(i=l.extras)||void 0===i||null===(o=i.map((l=>{var e,n;return`${null===l||void 0===l||null===(e=l.group)||void 0===e||null===(n=e.translation)||void 0===n?void 0:n.title}: ${null===l||void 0===l?void 0:l.value}`})))||void 0===o?void 0:o.join(", ")}`:""}`,value:null===l||void 0===l?void 0:l.id,key:null===l||void 0===l?void 0:l.id}}))}))},hasMore:j.bonusProduct,allowClear:!1})})}),(0,x.jsx)(u.Z,{span:12,children:(0,x.jsx)(i.Z.Item,{label:v("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:v("required")}],children:(0,x.jsx)(a.Z,{className:"w-100"})})}),(0,x.jsx)(u.Z,{span:12,children:(0,x.jsx)(i.Z.Item,{name:"expired_at",label:v("expired.at"),rules:[{required:!0,message:v("required")}],children:(0,x.jsx)(d.Z,{className:"w-100",placeholder:"",disabledDate:l=>c()().add(-1,"days")>=l})})}),(0,x.jsx)(u.Z,{span:8,children:(0,x.jsx)(i.Z.Item,{label:v("active"),name:"status",valuePropName:"checked",children:(0,x.jsx)(s.Z,{})})})]}),(0,x.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,x.jsx)("div",{className:"pb-5",children:(0,x.jsx)(r.Z,{type:"primary",htmlType:"submit",loading:g,children:v("submit")})})})]})}}}]);