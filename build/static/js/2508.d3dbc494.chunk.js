"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2508],{4014:(e,d,t)=>{function l(e){var d,t;let l=null===e||void 0===e?void 0:e.slice(0,1),i=null===e||void 0===e?void 0:e.lastIndexOf("@"),o=null===e||void 0===e?void 0:e.slice(1,i-1);o=null===(d=o)||void 0===d?void 0:d.replace(/./g,"*");let n=null===e||void 0===e?void 0:e.slice(i-1,e.length);return null===l||void 0===l||null===(t=l.concat(o))||void 0===t?void 0:t.concat(n)}t.d(d,{Z:()=>l})},13945:(e,d,t)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(d,{Z:()=>l})},84017:(e,d,t)=>{t.d(d,{Z:()=>i});var l=t(67968);function i(){var e,d;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const n=null===(e=l.h.getState())||void 0===e||null===(d=e.currency)||void 0===d?void 0:d.defaultCurrency,r=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a=i||(null===n||void 0===n?void 0:n.symbol)||"$",s=o||(null===n||void 0===n?void 0:n.position)||"before";return"after"===s?`${r} ${a}`:`${a} ${r}`}},29457:(e,d,t)=>{t.r(d),t.d(d,{default:()=>E});var l=t(45705),i=t(66204),o=t(56140),n=t(78508),r=t(72652),a=t(256),s=t(59491),u=t(68197),c=t(59624),v=t(77181),p=t(26824),h=t(83371),x=t(41068),m=t(70816),g=t.n(m),Z=t(47313),y=t(24511),j=t(2717),b=t(97890),f=t(84017),I=t(90954),k=t(49986),_=t(45464),$=t(22054),w=t(13945),C=t(79492),S=t(80314),M=t(7370),P=t(46417);const Y=e=>{let{id:d}=e;const{t:t}=(0,y.$)(),o=(0,j.I0)(),r=(0,b.s0)(),[a,s]=(0,Z.useState)([]),[u,c]=(0,Z.useState)(!1),{defaultCurrency:h}=(0,j.v9)((e=>e.currency),j.wU),x=e=>{c(!0),M.Z.getUserTopProducts(d,e).then((e=>s(e.data))).finally((()=>c(!1)))};return(0,Z.useEffect)((()=>{x()}),[]),(0,P.jsx)(v.Z,{title:t("top.products"),children:(0,P.jsx)(n.Z,{loading:u,dataSource:null===a||void 0===a?void 0:a.data,pagination:{total:null===a||void 0===a?void 0:a.total,current:null===a||void 0===a?void 0:a.current_page,pageSize:null===a||void 0===a?void 0:a.per_page},columns:[{title:t("product"),dataIndex:"stock",key:"stock",render:e=>{var d,i,n;return(0,P.jsxs)(l.Z,{children:[(0,P.jsx)(p.Z,{width:100,src:null===e||void 0===e||null===(d=e.countable)||void 0===d?void 0:d.img,placeholder:!0,style:{borderRadius:4}}),(0,P.jsx)("div",{onClick:()=>(e=>{o((0,I.bL)({id:"product-edit",url:`product/${e.uuid}`,name:t("edit.product")})),r(`/product/${e.uuid}`)})(null===e||void 0===e?void 0:e.countable),className:"text-hover",children:null===e||void 0===e||null===(i=e.countable)||void 0===i||null===(n=i.translation)||void 0===n?void 0:n.title})]})}},{title:t("count"),dataIndex:"count",key:"count"},{title:t("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,f.Z)(e,null===h||void 0===h?void 0:h.symbol)},{title:t("status"),dataIndex:"status",key:"status",render:(e,d)=>{var l,o;return(0,P.jsx)(i.Z,{children:null!==(l=d.stock)&&void 0!==l&&null!==(o=l.countable)&&void 0!==o&&o.active?t("active"):t("inactive")})}}],onChange:e=>x({page:null===e||void 0===e?void 0:e.current,perPage:null===e||void 0===e?void 0:e.pageSize})})})};var D=t(74294),N=t(49319);const U=e=>{var d,t,l;let{id:o}=e;const{t:r}=(0,y.$)(),[a,s]=(0,Z.useState)({}),[u,c]=(0,Z.useState)(!1),{defaultCurrency:p}=(0,j.v9)((e=>e.currency),j.wU),h=e=>{c(!0),N.Z.getAll({user_uuid:o,...e}).then((e=>{s(e)})).finally((()=>{c(!1)}))};return(0,Z.useEffect)((()=>{h()}),[]),(0,P.jsx)(v.Z,{title:r("order.refunds"),extra:(0,P.jsx)(D.Z,{options:[{label:r("pending"),value:"pending"},{label:r("accepted"),value:"accepted"},{label:r("canceled"),value:"canceled"}],onChange:e=>h({status:e}),placeholder:r("status"),allowClear:!0}),children:(0,P.jsx)(n.Z,{loading:u,dataSource:null===a||void 0===a?void 0:a.data,pagination:{total:null===a||void 0===a||null===(d=a.meta)||void 0===d?void 0:d.total,current:null===a||void 0===a||null===(t=a.meta)||void 0===t?void 0:t.current_page,pageSize:null===a||void 0===a||null===(l=a.meta)||void 0===l?void 0:l.per_page},columns:[{title:r("cause"),dataIndex:"cause",key:"cause"},{title:r("answer"),dataIndex:"answer",key:"answer"},{title:r("total.price"),dataIndex:"total_price",key:"total_price",render:(e,d)=>{var t;return(0,f.Z)(null===(t=d.order)||void 0===t?void 0:t.total_price,null===p||void 0===p?void 0:p.symbol)}},{title:r("status"),dataIndex:"status",key:"status",render:e=>(0,P.jsx)(i.Z,{children:e})},{title:r("created.date.&.time"),dataIndex:"created_at",key:"created_at"}],onChange:e=>h({page:e.current,perPage:e.pageSize})})})};var z=t(4014);const E=()=>{var e;const{id:d}=(0,b.UO)(),t=(0,b.s0)(),[m,M]=(0,Z.useState)({}),D=(0,j.I0)(),[N,E]=(0,Z.useState)(!1),{t:L}=(0,y.$)(),{activeMenu:R}=(0,j.v9)((e=>e.menu),j.wU),{defaultCurrency:q}=(0,j.v9)((e=>e.currency),j.wU),{orders:T,meta:F,loading:A,params:H,statistic:K}=(0,j.v9)((e=>e.orders),j.wU),{isDemo:O,demoDeliveryman:B,demoSeller:G,demoAdmin:J,demoModerator:Q,demoMeneger:V}=(0,C.Z)();const W=e=>{D((0,I.bL)({id:"product-edit",url:`product/${e}`,name:L("edit.product")})),t(`/product/${e}`)};return(0,Z.useEffect)((()=>{var e;e=d,E(!0),k.Z.getById(e).then((e=>M(e.data))).finally((()=>E(!1)))}),[d]),(0,Z.useEffect)((()=>{const e={user_id:d,page:1,perPage:10};D((0,$.dT)(e))}),[]),(0,S.Z)((()=>{var e,t;const l={user_id:d,page:(null===R||void 0===R||null===(e=R.data)||void 0===e?void 0:e.page)||1,perPage:(null===R||void 0===R||null===(t=R.data)||void 0===t?void 0:t.perPage)||10};D((0,$.dT)(l))}),[R.data]),N?(0,P.jsx)("div",{className:"d-flex justify-content-center align-items-center h-100",children:(0,P.jsx)(r.Z,{})}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(a.Z,{title:L("user.info"),extra:(0,P.jsx)(s.Z,{type:"primary",disabled:O&&(null===m||void 0===m?void 0:m.id)==B||O&&(null===m||void 0===m?void 0:m.id)==Q||O&&(null===m||void 0===m?void 0:m.id)==V||O&&(null===m||void 0===m?void 0:m.id)==G||O&&(null===m||void 0===m?void 0:m.id)===J,onClick:()=>{D((0,I.bL)({url:`user/${d}`,id:"user_edit",name:L("edit.user")})),t(`/user/${d}`,{state:"user"})},children:L("edit")})}),(0,P.jsxs)(u.Z,{gutter:24,children:[(0,P.jsx)(c.Z,{span:16,children:(0,P.jsxs)(v.Z,{title:`${null===m||void 0===m?void 0:m.firstname} ${(null===m||void 0===m?void 0:m.lastname)||""} #${null===m||void 0===m?void 0:m.id}`,children:[(0,P.jsx)(p.Z,{src:(0,_.Z)(null===m||void 0===m?void 0:m.img),alt:null===m||void 0===m?void 0:m.firstname,width:100,height:100,style:{borderRadius:"10px",objectFit:"cover"}}),(0,P.jsxs)(h.Z,{column:2,children:[(0,P.jsx)(h.Z.Item,{label:L("registration.date"),children:g()(null===m||void 0===m?void 0:m.registered_at).format("YYYY-MM-DD HH:mm")}),(0,P.jsx)(h.Z.Item,{label:L("status"),children:(0,P.jsx)(i.Z,{color:null!==m&&void 0!==m&&m.active?"cyan":"red",children:null!==m&&void 0!==m&&m.active?L("active"):L("inactive")})}),(0,P.jsx)(h.Z.Item,{label:L("birthday"),children:g()(null===m||void 0===m?void 0:m.birthday).format("YYYY-MM-DD")}),(0,P.jsx)(h.Z.Item,{label:L("email"),children:O?(0,z.Z)(null===m||void 0===m?void 0:m.email):null===m||void 0===m?void 0:m.email}),(0,P.jsx)(h.Z.Item,{label:L("gender"),children:null===m||void 0===m?void 0:m.gender}),(0,P.jsx)(h.Z.Item,{label:L("role"),children:null===m||void 0===m?void 0:m.role}),(0,P.jsx)(h.Z.Item,{label:L("wallet"),children:(0,f.Z)(null===m||void 0===m||null===(e=m.wallet)||void 0===e?void 0:e.price,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position)}),(0,P.jsx)(h.Z.Item,{label:L("phone"),children:null===m||void 0===m?void 0:m.phone})]})]})}),(0,P.jsxs)(c.Z,{span:8,children:[(0,P.jsx)(v.Z,{title:L("successfull.orders"),children:(0,P.jsxs)(h.Z,{column:1,children:[(0,P.jsx)(h.Z.Item,{label:L("delivered.orders.count"),children:(0,P.jsx)(x.Z,{showZero:!0,style:{backgroundColor:"#3d7de3"},count:(null===K||void 0===K?void 0:K.delivered_orders_count)||0})}),(0,P.jsx)(h.Z.Item,{label:L("spent.since.registration"),children:(0,P.jsx)(x.Z,{showZero:!0,style:{backgroundColor:"#48e33d"},count:(0,f.Z)(null===K||void 0===K?void 0:K.total_delivered_price,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position)})})]})}),(null===m||void 0===m?void 0:m.shop)&&(0,P.jsx)(v.Z,{title:`${L("shop.info")} #${null===m||void 0===m?void 0:m.shop.id}`,children:(0,P.jsxs)(h.Z,{column:2,children:[(0,P.jsx)(h.Z.Item,{label:L("name"),children:null===m||void 0===m?void 0:m.shop.translation.title}),(0,P.jsx)(h.Z.Item,{label:L("phone"),children:null===m||void 0===m?void 0:m.shop.phone}),(0,P.jsx)(h.Z.Item,{label:L("shop.type"),children:null===m||void 0===m?void 0:m.shop.type})]})})]}),(0,P.jsxs)(c.Z,{span:24,children:[(0,P.jsx)(v.Z,{title:L("orders"),children:(0,P.jsx)(n.Z,{expandable:{expandedRowRender:e=>{const d=[{title:L("product"),dataIndex:"product",render:(e,d)=>{var t,o,n,r;return(0,P.jsx)("div",{className:"text-hover",onClick:()=>{var e,t;return W(null===(e=d.stock)||void 0===e||null===(t=e.product)||void 0===t?void 0:t.uuid)},children:(0,P.jsxs)(l.Z,{wrap:!0,children:[null===(t=d.stock)||void 0===t||null===(o=t.product)||void 0===o||null===(n=o.translation)||void 0===n?void 0:n.title,null===(r=d.addons)||void 0===r?void 0:r.map((e=>{var d,t,l;return(0,P.jsxs)(i.Z,{children:[null===e||void 0===e||null===(d=e.stock)||void 0===d||null===(t=d.product)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title," x ",e.quantity]},e.id)}))]})})},key:"product"},{title:L("quantity"),dataIndex:"quantity",key:"quantity"},{title:L("total.price"),dataIndex:"total_price",render:e=>(0,f.Z)(e,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position),key:"total_price"},{title:L("discount"),dataIndex:"discount",key:"discount"}];return(0,P.jsxs)(l.Z,{direction:"vertical",className:"w-100",children:[(0,P.jsx)(o.Z.Text,{children:L("ordered.products")}),(0,P.jsx)(n.Z,{scroll:{x:!0},columns:d,dataSource:e.details,pagination:!1})]})},defaultExpandedRowKeys:["0"]},dataSource:T,columns:[{title:"ID",dataIndex:"id",key:"id",render:e=>(0,P.jsxs)("div",{onClick:()=>(e=>{D((0,I.bL)({url:`/order/details/${e}`,id:"order.details",name:L("order.details")})),t(`/order/details/${e}`)})(e),className:"text-hover",children:["#",e]})},{title:L("shop"),dataIndex:"shop",key:"shop",render:e=>{var d;return(0,P.jsx)("div",{className:"text-hover",onClick:()=>{return d=e.uuid,D((0,I.bL)({url:`/shop/${d}`,id:"edit.shop",name:L("edit.shop")})),void t(`/shop/${d}`);var d},children:null===e||void 0===e||null===(d=e.translation)||void 0===d?void 0:d.title})}},{title:L("number.of.products"),dataIndex:"order_details_count",key:"order_details_count",render:e=>`${e||0} ${L(e&&e<2?"products":"product")}`},{title:L("total.price"),dataIndex:"total_price",key:"total_price",render:e=>(0,f.Z)(e,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position)},{title:L("delivery.date.&.time"),dataIndex:"delivery_date",key:"delivery_date",render:(e,d)=>`${d.delivery_date} ${(null===d||void 0===d?void 0:d.delivery_time)||""}`},{title:L("status"),dataIndex:"status",key:"status",render:e=>(0,P.jsx)(i.Z,{children:e})},{title:L("delivery.address"),dataIndex:"address",key:"address",render:e=>null===e||void 0===e?void 0:e.address}],loading:A,pagination:{pageSize:H.perPage,page:H.page,total:F.last_page*F.per_page,defaultCurrent:H.page},rowKey:e=>e.id,onChange:function(e,d,t){const{pageSize:l,current:i}=e,{field:o,order:n}=t,r=(0,w.Z)(n);D((0,I.nc)({activeMenu:R,data:{...R.data,perPage:l,page:i,column:o,sort:r}}))}})}),(0,P.jsx)(U,{id:d}),(0,P.jsx)(Y,{id:d})]})]})]})}}}]);