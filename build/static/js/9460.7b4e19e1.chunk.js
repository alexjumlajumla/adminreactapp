"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9460],{26405:(e,l,a)=>{a.d(l,{C:()=>t});const t=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]},31888:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(82371);const i={getAll:e=>t.A.get("dashboard/seller/units/paginate",{params:e}),getById:(e,l)=>t.A.get(`dashboard/seller/units/${e}`,{params:l})}},34293:(e,l,a)=>{a.d(l,{A:()=>_});var t=a(9950),i=a(3969),n=a(87094),s=a(41988),d=a(23263),r=a(55902),o=a(8724),u=a(25933),c=a(48538),v=a(47992),h=a(74827),p=a(78457),m=a(91854),x=a(67231),g=a(74623),A=a(31888),j=a(13564),b=a(70030),f=a(16254),y=a(15249),k=a(8750),I=a(72345),q=a(63672),N=a(80905),S=a(44414);const _=e=>{var l,a,_;let{next:C,action_type:$="",isRequest:w}=e;const{t:O}=(0,b.B)(),[F]=i.A.useForm(),E=(0,m.wA)(),{uuid:B}=(0,j.g)(),G=(0,j.Zp)(),{activeMenu:P}=(0,m.d4)((e=>e.menu),m.bN),{defaultLang:M,languages:R}=(0,m.d4)((e=>e.formLang),m.bN),[L,V]=(0,t.useState)(null!==(l=P.data)&&void 0!==l&&l.images?null===(a=P.data)||void 0===a?void 0:a.images:[]),[z,U]=(0,t.useState)(!1),[X,K]=(0,t.useState)(Boolean(null===(_=P.data)||void 0===_?void 0:_.kcal)),[T,W]=(0,t.useState)({kitchen:!1}),{settings:Z}=(0,m.d4)((e=>e.globalSettings));const D=()=>{E((0,g.X4)({url:"seller/category/add",id:"seller/category/add",name:O("edit.category")})),G("/seller/category/add")};return(0,S.jsxs)(i.A,{layout:"vertical",form:F,initialValues:{active:!0,vegetarian:!0,...P.data},onFinish:e=>{var l,a,t,i,n;U(!0);const s={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(a=e.category)||void 0===a?void 0:a.value)||e.category,shop_id:null===e||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.value,kitchen_id:(null===e||void 0===e||null===(i=e.kitchen)||void 0===i?void 0:i.value)||void 0,unit_id:null===(n=e.unit)||void 0===n?void 0:n.value,kcal:X?String(e.kcal):void 0,carbs:X?String(e.carbs):void 0,protein:X?String(e.protein):void 0,fats:X?String(e.fats):void 0,images:L,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0,...Object.assign({},...L.map(((e,l)=>({[`images[${l}]`]:e.name}))))};var d,r,o,u,c;if(w)return E((0,g.Ok)({activeMenu:P,data:{...P.data,...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(d=e.brand)||void 0===d?void 0:d.value,category_id:(null===(r=e.category)||void 0===r?void 0:r.value)||e.category,kitchen_id:(null===e||void 0===e||null===(o=e.kitchen)||void 0===o?void 0:o.value)||void 0,shop_id:null===(u=e.shop)||void 0===u?void 0:u.value,unit_id:null===(c=e.unit)||void 0===c?void 0:c.value,kcal:X?String(e.kcal):void 0,carbs:X?String(e.carbs):void 0,protein:X?String(e.protein):void 0,fats:X?String(e.fats):void 0,tax:e.tax||0,title:{...Object.assign({},...R.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},description:{...Object.assign({},...R.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))},...Object.assign({},...L.map(((e,l)=>({[`images[${l}]`]:e.name}))))}})),void C();let v=!1;if(Object.entries(e).forEach((e=>{var l,a;let[t,i]=e;var n,s,d,r;((t.startsWith("title")||t.startsWith("description"))&&P.data&&P.data[t]!==i&&(v=!0),"category"===t)&&((null===(n=P.data)||void 0===n||null===(s=n.category)||void 0===s?void 0:s.value)!==(null===i||void 0===i?void 0:i.value)&&(v=!0));"brand"===t&&((null===(d=P.data)||void 0===d||null===(r=d.brand)||void 0===r?void 0:r.value)!==(null===i||void 0===i?void 0:i.value)&&(v=!0));((null===L||void 0===L?void 0:L.find((e=>"done"===e.status)))||(null===L||void 0===L?void 0:L.length)!==(null===(l=P.data)||void 0===l||null===(a=l.images)||void 0===a?void 0:a.length))&&(v=!0)})),"edit"===$){const l={...s};if(l.title={...Object.assign({},...R.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},l.description={...Object.assign({},...R.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))},(0,g.Ok)({activeMenu:P,data:l}),v&&"0"===(null===Z||void 0===Z?void 0:Z.product_auto_approve))return void function(e){G(`/seller/product/${B}?step=1`,{state:e})}(l);!function(e,l){var a;l.product_id=null===(a=P.data)||void 0===a?void 0:a.product_id,x.A.update(B,l).then((()=>{E((0,g.Ok)({activeMenu:P,data:{...l,...null===P||void 0===P?void 0:P.data}})),C()})).finally((()=>U(!1)))}(0,s)}else!function(e,l){x.A.create(l).then((l=>{let{data:a}=l;E((0,g.W6)({id:`product-${a.uuid}`,url:`seller/product/${a.uuid}`,name:O("add.product"),data:e,refetch:!1})),G(`/seller/product/${a.uuid}?step=1`,{state:{create:!0}})})).finally((()=>U(!1)))}(e,s)},children:[(0,S.jsxs)(n.A,{gutter:12,children:[(0,S.jsx)(s.A,{span:16,children:(0,S.jsxs)(n.A,{children:[(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("basic.info"),children:(0,S.jsxs)(n.A,{children:[(0,S.jsx)(s.A,{span:24,children:R.map((e=>(0,S.jsx)(i.A.Item,{label:O("name"),name:`title[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===M,message:O("required")},{type:"string",min:2,max:200,message:O("min.2.max.200.chars")}],hidden:e.locale!==M,children:(0,S.jsx)(r.A,{})},"name"+e.id)))}),(0,S.jsx)(s.A,{span:24,children:R.map((e=>(0,S.jsx)(i.A.Item,{label:O("description"),name:`description[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===M,message:O("required")},{type:"string",min:2,max:200,message:O("min.2.max.200.chars")}],hidden:e.locale!==M,children:(0,S.jsx)(y.A,{rows:3})},"description"+e.id)))})]})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("pricing"),children:(0,S.jsxs)(n.A,{gutter:12,children:[(0,S.jsx)(s.A,{span:8,children:(0,S.jsx)(i.A.Item,{label:O("min.qty"),name:"min_qty",rules:[{required:!0,message:O("required")}],children:(0,S.jsx)(o.A,{min:0,className:"w-100"})})}),(0,S.jsx)(s.A,{span:8,children:(0,S.jsx)(i.A.Item,{label:O("max.qty"),name:"max_qty",rules:[{required:!0,message:O("required")}],children:(0,S.jsx)(o.A,{min:0,className:"w-100"})})}),(0,S.jsx)(s.A,{span:8,children:(0,S.jsx)(i.A.Item,{label:O("tax"),name:"tax",children:(0,S.jsx)(o.A,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("additions"),children:(0,S.jsxs)(n.A,{gutter:12,children:[(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{label:O("active"),name:"active",valuePropName:"checked",children:(0,S.jsx)(u.A,{})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{label:O("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,S.jsx)(u.A,{})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{label:O("nutrition."+(X?"on":"off")),valuePropName:"checked",children:(0,S.jsx)(u.A,{checked:X,onChange:e=>K(e)})})})]})})}),X&&(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("nutritional.value.of.food"),children:(0,S.jsxs)(n.A,{gutter:12,children:[(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{rules:[{required:!0,message:O("required")}],label:O("kcal"),name:"kcal",children:(0,S.jsx)(o.A,{className:"w-100"})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{rules:[{required:!0,message:O("required")}],label:O("carbs"),name:"carbs",children:(0,S.jsx)(o.A,{className:"w-100"})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{rules:[{required:!0,message:O("required")}],label:O("protein"),name:"protein",children:(0,S.jsx)(o.A,{className:"w-100"})})}),(0,S.jsx)(s.A,{span:6,children:(0,S.jsx)(i.A.Item,{rules:[{required:!0,message:O("required")}],label:O("fats"),name:"fats",children:(0,S.jsx)(o.A,{className:"w-100"})})})]})})})]})}),(0,S.jsx)(s.A,{span:8,children:(0,S.jsxs)(n.A,{children:[(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("organization"),children:(0,S.jsxs)(n.A,{children:[(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{label:O("category"),name:"category",rules:[{required:!0,message:O("required")}],children:(0,S.jsx)(I.v,{fetchOptions:function(e){const l={search:null!==e&&void 0!==e&&e.length?e:void 0,type:"main","statuses[0]":"pending","statuses[1]":"published",active:1,page:1,perPage:20};return p.A.paginateSelect(l).then((e=>e.data.map((e=>{var l,a,t;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0,children:null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))))},refetch:!0,dropdownRender:e=>(0,S.jsxs)(S.Fragment,{children:[e,(0,S.jsx)("div",{className:"p-1",children:(0,S.jsx)(c.A,{icon:(0,S.jsx)(k.A,{}),className:"w-100",onClick:D,children:O("add.category")})})]})})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{label:O("kitchen"),name:"kitchen",children:(0,S.jsx)(N.j,{allowClear:!1,fetchOptions:e=>{let{search:l,page:a=1}=e;const t={search:null!==l&&void 0!==l&&l.length?l:void 0,page:a,perPage:20,active:1};return q.A.getAll(t).then((e=>{var l,a,t;return W({...T,kitchen:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.last_page)}),null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:T.kitchen})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{label:O("brand"),name:"brand",rules:[{required:!1,message:O("required")}],children:(0,S.jsx)(v.G,{fetchOptions:function(e){const l={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return h.A.getAll(l).then((e=>e.data.map((e=>({label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{label:O("unit"),name:"unit",rules:[{required:!0,message:O("required")}],children:(0,S.jsx)(v.G,{fetchOptions:function(e){const l={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return A.A.getAll(l).then((e=>{let{data:l}=e;return function(e){return e.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||O("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}(l)}))}})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{label:O("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:O("required")},{type:"number",min:1,message:O("should.be.more.than.1")}],children:(0,S.jsx)(o.A,{className:"w-100"})})})]})})}),(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(d.A,{title:O("media"),children:(0,S.jsx)(n.A,{children:(0,S.jsx)(s.A,{span:24,children:(0,S.jsx)(i.A.Item,{name:"images",children:(0,S.jsx)(f.A,{type:"products",imageList:L,setImageList:V,form:F,multiple:!0})})})})})})]})})]}),(0,S.jsx)(c.A,{type:"primary",htmlType:"submit",loading:z,children:O("next")})]})}},50860:(e,l,a)=>{a.d(l,{A:()=>g});var t=a(9950),i=a(3969),n=a(32645),s=a(48538),d=a(55902),r=a(70030),o=a(71999),u=a(91854),c=a(59621),v=a(12449),h=a(88149),p=a(31281),m=a(81446),x=a(44414);function g(e){let{modal:l,handleCancel:a,onSuccess:g}=e;const[A]=i.A.useForm(),{t:j}=(0,r.B)(),b=(0,u.wA)(),[f,y]=(0,t.useState)(!1),[k,I]=(0,t.useState)(!1),{languages:q,defaultLang:N}=(0,u.d4)((e=>e.formLang),u.bN);(0,t.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),c.A.getGroupById(e).then((e=>{const l=e.data;A.setFieldsValue({...l,...S(l)})})).finally((()=>I(!1))))}),[l]);function S(e){if(!e)return{};const{translations:l}=e,a=q.map((e=>{var a;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,x.jsx)(n.A,{title:null!==l&&void 0!==l&&l.id?j("edit.extra.group"):j("add.extra.group"),visible:!!l,onCancel:a,footer:[(0,x.jsx)(s.A,{type:"primary",onClick:()=>A.submit(),loading:f,children:j("save")},"save-button-group"),(0,x.jsx)(s.A,{type:"default",onClick:a,children:j("cancel")},"cancel-button-group")],children:k?(0,x.jsx)(m.A,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(o.A,{})}),(0,x.jsx)(i.A,{layout:"vertical",name:"extra-group",form:A,onFinish:e=>{const t={title:(0,p.A)(q,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){y(!0),c.A.updateGroup(e,l).then((()=>{v.oR.success(j("successfully.updated")),b((0,h.kN)()),a()})).finally((()=>y(!1)))}(null===l||void 0===l?void 0:l.id,t):function(e){y(!0),c.A.createGroup(e).then((()=>{v.oR.success(j("successfully.created")),a(),b((0,h.kN)()),g&&g()})).finally((()=>y(!1)))}(t)},children:q.map((e=>(0,x.jsx)(i.A.Item,{rules:[{required:e.locale===N,message:j("required")}],name:`title[${e.locale}]`,label:j("title"),hidden:e.locale!==N,children:(0,x.jsx)(d.A,{placeholder:j("title")})},"title"+e.locale)))})]})})}},62425:(e,l,a)=>{a.d(l,{A:()=>y});var t=a(9950),i=a(23263),n=a(91524),s=a(87094),d=a(41988),r=a(98412),o=a(80737),u=a(48538),c=a(90650),v=a(91854),h=a(13564),p=a(74623),m=a(92979),x=a(70030),g=a(67231),A=a(63620),j=a(8228),b=a(12449),f=a(44414);const y=e=>{var l,a,y,k,I,q,N,S,_,C,$,w,O;let{prev:F,isRequest:E,mode:B}=e;const{t:G}=(0,x.B)(),{activeMenu:P}=(0,v.d4)((e=>e.menu),v.bN),{defaultLang:M,languages:R}=(0,v.d4)((e=>e.formLang),v.bN),L=(0,h.Zp)(),{state:V}=(0,h.zy)(),z=(0,v.wA)(),[U,X]=(0,t.useState)({}),[K,T]=(0,t.useState)(null),{uuid:W}=(0,h.g)(),{params:Z}=(0,v.d4)((e=>e.product),v.bN),[D,H]=(0,t.useState)(!1),{settings:J}=(0,v.d4)((e=>e.globalSettings));function Q(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,a=R.map((e=>{var a,t;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.description}}));return Object.assign({},...a)}const Y=(0,t.useCallback)((e=>{T(!0),g.A.getById(e).then((e=>{const l={...e.data,...Q(e.data),properties:e.data.properties.map(((e,l)=>({id:l,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};X(l)})).finally((()=>T(!1)))}),[W]);(0,t.useEffect)((()=>{E||Y(W)}),[E,W]);const ee=E?P.data:V;return K?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(c.A,{size:"large",className:"py-5"})}):(0,f.jsxs)(i.A,{children:[V||E?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(n.A,{title:G("product.info"),bordered:!0,children:[(0,f.jsx)(n.A.Item,{label:`${G("title")} (${M})`,span:3,children:ee[`title[${M}]`]}),(0,f.jsx)(n.A.Item,{label:`${G("description")} (${M})`,span:3,children:ee[`description[${M}]`]}),(0,f.jsx)(n.A.Item,{label:G("shop"),span:1.5,children:null===ee||void 0===ee||null===(l=ee.shop)||void 0===l?void 0:l.translation.title}),(0,f.jsx)(n.A.Item,{label:G("category"),span:1.5,children:null===ee||void 0===ee||null===(a=ee.category)||void 0===a?void 0:a.label}),(0,f.jsx)(n.A.Item,{label:G("brand"),span:1.5,children:null===ee||void 0===ee||null===(y=ee.brand)||void 0===y?void 0:y.label}),(0,f.jsx)(n.A.Item,{label:G("unit"),span:1.5,children:null===ee||void 0===ee||null===(k=ee.unit)||void 0===k?void 0:k.label}),(0,f.jsx)(n.A.Item,{label:G("images"),span:3,children:(0,f.jsx)(s.A,{gutter:12,children:null===ee||void 0===ee||null===(I=ee.images)||void 0===I?void 0:I.map(((e,l)=>(0,f.jsx)(d.A,{children:(0,f.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,f.jsx)(n.A.Item,{label:G("tax"),children:null===ee||void 0===ee?void 0:ee.tax}),(0,f.jsx)(n.A.Item,{label:G("min.quantity"),children:null===ee||void 0===ee?void 0:ee.min_qty}),(0,f.jsx)(n.A.Item,{label:G("max.quantity"),children:null===ee||void 0===ee?void 0:ee.max_qty})]}),!(null===ee||void 0===ee||null===(q=ee.stocks)||void 0===q||!q.length)&&(0,f.jsx)(r.A,{children:(0,f.jsx)(r.A.Panel,{header:G("stocks"),children:null===ee||void 0===ee?void 0:ee.stocks.map(((e,l)=>{var a;return(0,f.jsx)(r.A,{className:"mt-4",children:(0,f.jsx)(r.A.Panel,{header:G("stocks"),children:(0,f.jsxs)(n.A,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(n.A.Item,{label:G("price"),span:2,children:e.price}),(0,f.jsx)(n.A.Item,{label:G("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(a=e.ids)||void 0===a?void 0:a.map(((e,l)=>(0,f.jsx)(n.A.Item,{label:null===ee||void 0===ee?void 0:ee.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l)},"seller-stocks")})}))},"seller-stocks")})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(n.A,{title:G("product.info"),bordered:!0,children:[(0,f.jsx)(n.A.Item,{label:`${G("title")} (${M})`,span:3,children:U[`title[${M}]`]}),(0,f.jsx)(n.A.Item,{label:`${G("description")} (${M})`,span:3,children:U[`description[${M}]`]}),(0,f.jsx)(n.A.Item,{label:G("shop"),span:1.5,children:null===(N=U.shop)||void 0===N?void 0:N.translation.title}),(0,f.jsx)(n.A.Item,{label:G("category"),span:1.5,children:null===(S=U.category)||void 0===S?void 0:S.translation.title}),(0,f.jsx)(n.A.Item,{label:G("brand"),span:1.5,children:null===(_=U.brand)||void 0===_?void 0:_.title}),(0,f.jsx)(n.A.Item,{label:G("unit"),span:1.5,children:null===(C=U.unit)||void 0===C?void 0:C.translation.title}),(0,f.jsx)(n.A.Item,{label:G("images"),span:3,children:(0,f.jsx)(s.A,{gutter:12,children:null===U||void 0===U||null===($=U.galleries)||void 0===$?void 0:$.map(((e,l)=>(0,f.jsx)(d.A,{children:(0,f.jsx)("img",{width:80,alt:"product",src:A.sE+e.path})},"image"+l)))})}),(0,f.jsx)(n.A.Item,{label:G("tax"),children:U.tax}),(0,f.jsx)(n.A.Item,{label:G("min.quantity"),children:U.min_qty}),(0,f.jsx)(n.A.Item,{label:G("max.quantity"),children:U.max_qty})]}),!(null===(w=U.stocks)||void 0===w||!w.length)&&(0,f.jsx)(r.A,{className:"mt-4",children:(0,f.jsx)(r.A.Panel,{header:G("stocks"),children:null===(O=U.stocks)||void 0===O?void 0:O.map(((e,l)=>(0,f.jsxs)(n.A,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(n.A.Item,{label:G("price"),span:2,children:e.price}),(0,f.jsx)(n.A.Item,{label:G("quantity"),span:2,children:e.quantity}),e.extras.map(((e,l)=>{var a,t;return(0,f.jsx)(n.A.Item,{label:null===e||void 0===e||null===(a=e.group)||void 0===a||null===(t=a.translation)||void 0===t?void 0:t.title,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l)))},"seller-stocks")})]}),(0,f.jsx)("div",{className:"d-flex mt-4",children:(0,f.jsxs)(o.A,{children:[(0,f.jsx)(u.A,{onClick:F,children:G("prev")}),(0,f.jsx)(u.A,{loading:D,type:"primary",onClick:function(){const e="seller/products",l={...Z};if(E&&P.data){H(!0);const a={id:P.data.model_id,type:"product",data:P.data};j.A.requestChangeUpdate(P.data.request_id,a).then((()=>{L(`/${e}`,{state:{tab:"request"}}),b.oR.success(G("successfully.updated")),z((0,p.EK)({...P,nextUrl:e})),z((0,m.EN)(l))})).finally((()=>{H(!1)}))}else if(V&&"edit"===B&&"0"===(null===J||void 0===J?void 0:J.product_auto_approve)){H(!0);const a={type:"product",id:P.data.product_id,data:V};j.A.requestChange(a).then((()=>{b.oR.success(G("successfully.updated")),z((0,p.EK)({...P,nextUrl:e})),z((0,m.EN)(l)),L(`/${e}`,{state:{tab:"request"}})})).finally((()=>{H(!1)}))}else z((0,p.EK)({...P,nextUrl:e})),z((0,m.EN)(l)),L(`/${e}`)},children:G("finish")})]})})]})}},74827:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(82371);const i={getAll:e=>t.A.get("rest/brands/paginate",{params:e}),getById:(e,l)=>t.A.get(`rest/brands/${e}`,{params:l})}},76092:(e,l,a)=>{a.d(l,{A:()=>$});var t=a(9950),i=a(23263),n=a(3969),s=a(80737),d=a(48538),r=a(91854),o=a(67231),u=a(74623),c=a(70030),v=a(13564),h=a(32645),p=a(52765),m=a(90247),x=a(63611),g=a(59621),A=a(97434),j=a(8750),b=a(44414);const f=e=>{let{extra:l,onClose:a,onSelect:i}=e;const{t:n}=(0,c.B)(),[s,r]=(0,t.useState)(!1),[o,u]=(0,t.useState)([]),[v,f]=(0,t.useState)([]),[y,k]=(0,t.useState)(!1);function I(e){r(!0),g.A.getGroupById(e).then((e=>u(e.data.extra_values.map((e=>{var l;return{label:e.value,value:e.id,group:null===(l=e.group.translation)||void 0===l?void 0:l.title}}))))).finally((()=>{r(!1)}))}return(0,t.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(I(l.value),f((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(h.A,{visible:!!l,onCancel:a,footer:[(0,b.jsx)(d.A,{onClick:a,children:n("cancel")}),!s&&o.length>0&&(0,b.jsx)(d.A,{onClick:()=>{const e=[];o.forEach((l=>{v.forEach((a=>{l.value===a&&e.push(l)}))})),i(null===l||void 0===l?void 0:l.value,e),a()},type:"primary",children:n("save")})],children:[(0,b.jsx)(p.A.Group,{value:v,onChange:e=>{f(e)},className:"w-100",children:0!==(null===o||void 0===o?void 0:o.length)||s?(0,b.jsx)(x.Ay,{dataSource:o,loading:s,renderItem:e=>(0,b.jsx)(x.Ay.Item,{children:(0,b.jsx)(p.A,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,b.jsx)(m.A,{})}),s?null:(0,b.jsx)(d.A,{type:"link",onClick:()=>k(!0),style:{paddingLeft:0},icon:(0,b.jsx)(j.A,{}),children:n("add.new.extra")})]}),l&&(0,b.jsx)(A.A,{modal:y,handleCancel:()=>k(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>I(null===l||void 0===l?void 0:l.value)})]})};var y=a(25495),k=a(55902),I=a(12916),q=a(7785),N=a(50860),S=a(37295);const _=e=>{let{open:l,onClose:a,selectedExtras:i,onSelect:n}=e;const{t:s}=(0,c.B)(),[r,o]=(0,t.useState)([]),[u,v]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[A,f]=(0,t.useState)(""),[y,_]=(0,t.useState)(),C=(0,S.A)(A,500),$=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const a={valid:!0,perPage:10,search:e,page:l};g.A.getAllGroups(a).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));o(l),_(e.meta)})).finally((()=>v(!1)))};return(0,t.useEffect)((()=>{l&&$(C)}),[l,C]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(h.A,{visible:l,onCancel:()=>{a(),f("")},footer:u?null:(0,b.jsx)(d.A,{type:"link",onClick:()=>m(!0),style:{paddingLeft:0},icon:(0,b.jsx)(j.A,{}),children:s("add.new.extra")}),children:[(0,b.jsx)(k.A,{className:"mt-3",value:A,onChange:e=>f(e.target.value)}),(0,b.jsx)(x.Ay,{loading:u,dataSource:r.filter((e=>!(null!==i&&void 0!==i&&i.some((l=>l.id===e.id))))),renderItem:e=>(0,b.jsx)(x.Ay.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,b.jsx)(I.A,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{n(e)},children:e.label})}),(0,b.jsx)(q.A,{onChange:e=>{$(C,e)},current:null===y||void 0===y?void 0:y.current_page,total:null===y||void 0===y?void 0:y.total})]}),(0,b.jsx)(N.A,{modal:p,handleCancel:()=>m(!1),onSuccess:()=>$()})]})};var C=a(12449);const $=e=>{var l;let{next:a,prev:h,isRequest:p,mode:m}=e;const{t:x}=(0,c.B)(),g=(0,r.wA)(),{uuid:A,id:j}=(0,v.g)(),k=(0,v.Zp)(),I=(0,v.zy)(),{activeMenu:q}=(0,r.d4)((e=>e.menu),r.bN),[N,S]=(0,t.useState)(!1),[$,w]=(0,t.useState)(!1),[O,F]=(0,t.useState)((null===(l=q.data)||void 0===l?void 0:l.extras)||[]),[E,B]=(0,t.useState)(null),[G,P]=(0,t.useState)(!1),{settings:M}=(0,r.d4)((e=>e.globalSettings));return(0,b.jsx)(i.A,{children:(0,b.jsxs)(n.A,{layout:"vertical",initialValues:{...q.data},onFinish:()=>{var e;if(O.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void C.oR.error(x("please.select.at.least.1.extra.value.for.each.extra"));const l=O.map((e=>e.value));l.sort(((e,l)=>e-l));let a=I.state;return p?(g((0,u.Ok)({activeMenu:q,data:{...q.data,extras:O}})),void k(`/seller/product-request/${j}?step=2`,{state:{generate:G}})):!G&&!I.state||"edit"!==m||null!==(e=I.state)&&void 0!==e&&e.create||"0"!==(null===M||void 0===M?void 0:M.product_auto_approve)?(S(!0),void o.A.extras(A,{extras:l}).then((()=>{var e;g((0,u.Ok)({activeMenu:q,data:{...q.data,extras:O}})),k(`/seller/product/${A}?step=2`,{state:{create:null===(e=I.state)||void 0===e?void 0:e.create}})})).finally((()=>S(!1)))):(I.state?a.extras=O:a={...q.data,extras:O},g((0,u.Ok)({activeMenu:q,data:{...q.data,extras:O}})),void k(`/seller/product/${A}?step=2`,{state:a}))},children:[(0,b.jsx)(_,{open:$,onClose:()=>w(!1),selectedExtras:O,onSelect:e=>{P(!0),F((l=>[...l,e])),w(!1)}}),(0,b.jsx)(f,{extra:E,onClose:()=>B(null),onSelect:(e,l)=>{P(!0),F((a=>a.map((a=>{if(a.value===e){const e=l.map((e=>{var l,a;const t=null===(l=q.data)||void 0===l||null===(a=l.extras)||void 0===a?void 0:a.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===t||void 0===t?void 0:t.stock_id}}));return{...a,values:e}}return a}))))}}),(0,b.jsx)(s.A,{className:"w-100",size:"middle",direction:"vertical",children:O.map((e=>{var l;return(0,b.jsxs)(s.A,{className:"w-100",direction:"vertical",children:[(0,b.jsxs)(s.A,{className:"w-100",wrap:!0,children:[(0,b.jsx)(d.A,{onClick:()=>B(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,b.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,b.jsx)("button",{onClick:()=>{return a=e.value,t=l.value,P(!0),void F((e=>e.map((e=>e.value===a?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==t)))||[]}:e))));var a,t},type:"button",className:"extra-clear",children:(0,b.jsx)(y.lr4,{})})]},l.value)))]}),(0,b.jsx)(s.A,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,b.jsx)(d.A,{danger:!0,onClick:()=>{return l=e,P(!0),void F((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:x("delete")})})]},e.id)}))}),(0,b.jsx)(d.A,{onClick:()=>w(!0),className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,b.jsxs)(s.A,{className:"mt-3",children:[(0,b.jsx)(d.A,{onClick:h,children:x("prev")}),(0,b.jsx)(d.A,{type:"primary",htmlType:"submit",loading:N,children:x("next")})]})]})})}},78457:(e,l,a)=>{a.d(l,{A:()=>i});var t=a(82371);const i={getAll:e=>t.A.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>t.A.get(`dashboard/seller/categories/${e}`,{params:l}),search:e=>t.A.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>t.A.get("dashboard/seller/categories/select-paginate",{params:e})}},97434:(e,l,a)=>{a.d(l,{A:()=>A});var t=a(3969),i=a(55902),n=a(32645),s=a(48538),d=a(9950),r=a(28276),o=a(70030),u=a(91854),c=a(12449),v=a(32599),h=a(62466),p=a(43999),m=a(59621),x=a(47992),g=a(44414);function A(e){let{modal:l,handleCancel:a,onSuccess:A,groupId:j}=e;const[b]=t.A.useForm(),{t:f}=(0,o.B)(),y=(0,u.wA)(),[k,I]=(0,d.useState)(!1),[q,N]=(0,d.useState)("text"),[S,_]=(0,d.useState)(null),[C,$]=(0,d.useState)(""),{extraGroups:w}=(0,u.d4)((e=>e.extraGroup),u.bN);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,a,t;N(l.group.type);const i={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title,value:null===l||void 0===l||null===(t=l.group)||void 0===t?void 0:t.id},value:l.value};switch(l.group.type){case"color":$(l.value);break;case"image":_((0,h.A)(l.value))}b.setFieldsValue(i)}j&&b.setFieldsValue({extra_group_id:{value:j}})}),[l,j]);function O(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,g.jsx)(n.A,{title:null!==l&&void 0!==l&&l.id?f("edit.extra"):f("add.extra"),visible:!!l,onCancel:a,footer:[(0,g.jsx)(s.A,{type:"primary",onClick:()=>b.submit(),loading:k,children:f("save")}),(0,g.jsx)(s.A,{type:"default",onClick:a,children:f("cancel")})],children:(0,g.jsxs)(t.A,{name:"extra-form",layout:"vertical",form:b,onFinish:e=>{var t;console.log(e);const i={extra_group_id:null===e||void 0===e||null===(t=e.extra_group_id)||void 0===t?void 0:t.value,value:O(q,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),m.A.updateValue(e,l).then((()=>{c.oR.success(f("successfully.updated")),a(),y((0,p.Xb)())})).finally((()=>I(!1)))})(l.id,i):(e=>{I(!0),m.A.createValue(e).then((()=>{c.oR.success(f("successfully.created")),a(),y((0,p.Xb)()),A&&A()})).finally((()=>I(!1)))})(i)},children:[(0,g.jsx)(t.A.Item,{name:"extra_group_id",label:f("extra.group"),hidden:!!j,rules:[{required:!0,message:""}],children:(0,g.jsx)(x.G,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),m.A.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,g.jsx)(t.A.Item,{name:"value",label:f("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,g.jsx)(r.Xq,{onChangeComplete:e=>$(e.hex),color:C,disableAlpha:!0});case"text":return(0,g.jsx)(i.A,{placeholder:f("enter.extra.value")});case"image":return(0,g.jsx)(v.A,{type:"extras",image:S,setImage:_,form:b,name:"value"});default:return""}})(q)})]})})}}}]);