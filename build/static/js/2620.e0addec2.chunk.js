"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2620],{92620:(e,t,l)=>{l.r(t),l.d(t,{default:()=>g});var a=l(9950),s=l(13564),n=l(12449),i=l(3969),o=l(23263),c=l(90650),u=l(91854),r=l(74623),d=l(5386),v=l(5302),m=l(70030),p=l(71999),f=l(31281),h=l(82035),b=l(44414);const g=()=>{const{t:e}=(0,m.B)(),{activeMenu:t}=(0,u.d4)((e=>e.menu),u.bN),l=(0,u.wA)(),[g]=i.A.useForm(),x=(0,s.Zp)(),{id:A}=(0,s.g)(),[j,k]=(0,a.useState)(!1),{languages:_}=(0,u.d4)((e=>e.formLang),u.bN);(0,a.useEffect)((()=>()=>{const e=g.getFieldsValue(!0);l((0,r.Ok)({activeMenu:t,data:e}))}),[]);function y(e){if(!e)return{};const{translations:t}=e,l=_.map((e=>{var l,a,s;return{[`title[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.title,[`description[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.description,[`button_text[${e.locale}]`]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.button_text}}));return Object.assign({},...l)}return(0,a.useEffect)((()=>{var e;t.refetch&&(e=A,k(!0),v.A.getById(e).then((e=>{var a;let s=e.data;const n={...s,img:(i=s.galleries,i.map((e=>({uid:e.id,name:e.path,url:e.path})))),shops:null===(a=s.shops)||void 0===a?void 0:a.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}})),...y(s)};var i;g.setFieldsValue(n),l((0,r.Ok)({activeMenu:t,data:n}))})).finally((()=>{l((0,r.km)(t)),k(!1)})))}),[t.refetch]),(0,b.jsx)(o.A,{title:e("clone.banner"),className:"h-100",extra:(0,b.jsx)(p.A,{}),children:j?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsx)(c.A,{size:"large",className:"py-5"})}):(0,b.jsx)(h.A,{form:g,handleSubmit:(a,s)=>{var i;const o="banners",c={status:"published"},m={url:a.url,shops:null===(i=a.shops)||void 0===i?void 0:i.map((e=>e.value)),images:s.map((e=>e.name)),clickable:a.clickable,title:(0,f.A)(_,a,"title"),description:(0,f.A)(_,a,"description"),button_text:(0,f.A)(_,a,"button_text")};return v.A.create(m).then((()=>{n.oR.success(e("successfully.cloned")),(0,u.vA)((()=>{l((0,r.EK)({...t,nextUrl:o})),l((0,d.s)(c))})),x(`/${o}`)}))}})})}}}]);