"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9836],{8168:(e,a,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(a,{A:()=>n})},8297:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(9950),l=t(55902),s=t(41397),o=t(60767),d=t(44414);function i(e){let{handleChange:a,defaultValue:t,resetSearch:i,...r}=e;const[c,u]=(0,n.useState)(t),h=(0,n.useMemo)((()=>(0,s.debounce)((e=>{a(e)}),800)),[a]);return(0,n.useEffect)((()=>{u(t)}),[i,t]),(0,d.jsx)(l.A,{value:c,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,d.jsx)(o.A,{}),...r})}},28645:(e,a,t)=>{t.d(a,{A:()=>f});var n=t(9950),l=t(66362),s=t(69216),o=t(80737),d=t(25933),i=t(57811),r=t(81541),c=t(48538),u=t(89323),h=t(70030),m=t(44414);const{Text:v}=l.A,f=e=>{let{columns:a=[],setColumns:t,style:l,size:f="",iconOnly:p}=e;const{t:x}=(0,h.B)(),[A,y]=(0,n.useState)(!1),g=(0,m.jsx)(s.A,{children:null===a||void 0===a?void 0:a.map(((e,n)=>(0,m.jsx)(s.A.Item,{children:(0,m.jsxs)(o.A,{className:"d-flex justify-content-between",children:[(0,m.jsx)(v,{children:e.title}),(0,m.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===a||void 0===a?void 0:a.map((a=>(a.dataIndex===e.dataIndex&&(a.is_show=!(null!==a&&void 0!==a&&a.is_show)),a)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,m.jsx)(i.A,{overlay:g,trigger:["click"],onVisibleChange:e=>{y(e)},visible:A,children:(0,m.jsx)(r.A,{title:x("change.columns"),children:(0,m.jsx)(c.A,{style:{...l},size:f,icon:(0,m.jsx)(u.A,{}),children:p?null:x("Columns")})})})}},47992:(e,a,t)=>{t.d(a,{G:()=>r});var n=t(9950),l=t(95491),s=t.n(l),o=t(99674),d=t(90650),i=t(44414);const r=e=>{let{fetchOptions:a,debounceTimeout:t=400,onClear:l,...r}=e;const[c,u]=(0,n.useState)(!1),[h,m]=(0,n.useState)([]),v=(0,n.useMemo)((()=>s()((e=>{m([]),u(!0),a(e).then((e=>{m(e),u(!1)}))}),t)),[a,t]);return(0,i.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:v,onClear:()=>{v(""),l&&l()},notFoundContent:c?(0,i.jsx)(d.A,{size:"small"}):"no results",...r,options:h,onFocus:()=>{v("")}})}},53774:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(83291);function l(){var e,a;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const o=null===(e=n.M.getState())||void 0===e||null===(a=e.currency)||void 0===a?void 0:a.defaultCurrency,d=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),i=l||(null===o||void 0===o?void 0:o.symbol)||"$";return"after"===(s||(null===o||void 0===o?void 0:o.position)||"before")?`${d} ${i}`:`${i} ${d}`}},79836:(e,a,t)=>{t.r(a),t.d(a,{default:()=>V});var n=t(9950),l=t(12916),s=t(23263),o=t(80737),d=t(48538),i=t(12203),r=t(91854),c=t(74623),u=t(70030),h=t(8168),m=t(88986),v=t(40613),f=t(28645),p=t(8297),x=t(53774),A=t(59051),y=t.n(A),g=t(3969),j=t(32645),b=t(8724),w=t(99674),_=t(29530),C=t(12449),k=t(47992),S=t(44414);function z(e){let{visible:a,onCancel:t,onSuccess:l}=e;const{t:s}=(0,u.B)(),[o]=g.A.useForm(),[d,i]=(0,n.useState)(!1),{loans:c}=(0,r.d4)((e=>e.loans));return(0,S.jsx)(j.A,{visible:a,title:s("add_repayment"),onCancel:t,onOk:()=>{o.validateFields().then((async e=>{i(!0);try{await _.A.createRepayment({...e}),C.oR.success(s("success")),l&&l(),t()}finally{i(!1)}}))},confirmLoading:d,destroyOnClose:!0,children:(0,S.jsxs)(g.A,{form:o,layout:"vertical",children:[(0,S.jsx)(g.A.Item,{name:"loan_id",label:s("loan"),rules:[{required:!0,message:s("required")}],children:(0,S.jsx)(k.G,{fetchOptions:async function(e){return c.filter((a=>"active"===a.status&&`${a.id}`.includes(e))).map((e=>{var a,t;return{label:`#${e.id} - ${null!==(a=null===(t=e.user)||void 0===t?void 0:t.firstname)&&void 0!==a?a:""}`,value:e.id}}))},placeholder:s("select.loan"),style:{width:"100%"}})}),(0,S.jsx)(g.A.Item,{name:"amount",label:s("amount"),rules:[{required:!0,message:s("required")}],children:(0,S.jsx)(b.A,{min:1,style:{width:"100%"}})}),(0,S.jsx)(g.A.Item,{name:"payment_method",label:s("payment_method"),rules:[{required:!0,message:s("required")}],children:(0,S.jsx)(w.A,{options:[{value:"wallet",label:s("wallet")},{value:"cash",label:s("cash")},{value:"card",label:"Card"}]})})]})})}function V(){var e,a;const{t:t}=(0,u.B)(),A=(0,r.wA)(),{activeMenu:g}=(0,r.d4)((e=>e.menu),r.bN),{repayments:j,loading:b,meta:w,params:_}=(0,r.d4)((e=>e.loans),r.bN),{defaultCurrency:C}=(0,r.d4)((e=>e.currency),r.bN),[k,V]=(0,n.useState)([{title:t("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:t("loan_id"),dataIndex:"loan_id",key:"loan_id",is_show:!0},{title:t("seller"),dataIndex:"user",key:"user",is_show:!0,render:e=>`${null===e||void 0===e?void 0:e.firstname} ${null===e||void 0===e?void 0:e.lastname}`},{title:t("amount"),dataIndex:"amount",key:"amount",is_show:!0,render:e=>(0,x.A)(e,null===C||void 0===C?void 0:C.symbol,null===C||void 0===C?void 0:C.position)},{title:t("payment_method"),dataIndex:"payment_method",key:"payment_method",is_show:!0,render:e=>(0,S.jsx)(l.A,{children:e})},{title:t("created_at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>y()(e).format("YYYY-MM-DD")}]),[I,$]=(0,n.useState)(!1);(0,n.useEffect)((()=>{g.refetch&&(A((0,v.Rm)()),A((0,c.km)(g)))}),[g.refetch]),(0,m.A)((()=>{const e=g.data,a={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};A((0,v.Rm)(a))}),[g.data]);return(0,S.jsxs)(s.A,{title:t("loan_repayments"),extra:(0,S.jsxs)(o.A,{wrap:!0,children:[(0,S.jsx)(d.A,{type:"primary",onClick:()=>$(!0),children:t("add")}),(0,S.jsx)(p.A,{placeholder:t("search"),handleChange:e=>((e,a)=>{const t=g.data;A((0,c.Ok)({activeMenu:g,data:{...t,[a]:e}}))})(e,"search"),defaultValue:null===(e=g.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(a=g.data)&&void 0!==a&&a.search)}),(0,S.jsx)(f.A,{columns:k,setColumns:V})]}),children:[(0,S.jsx)(i.A,{scroll:{x:!0},columns:k.filter((e=>e.is_show)),dataSource:j,loading:b,pagination:{pageSize:_.perPage,page:_.page,total:null===w||void 0===w?void 0:w.total},rowKey:e=>e.id,onChange:function(e,a,t){const{pageSize:n,current:l}=e,{field:s,order:o}=t,d=(0,h.A)(o);A((0,c.Ok)({activeMenu:g,data:{perPage:n,page:l,column:s,sort:d}}))}}),I&&(0,S.jsx)(z,{visible:I,onCancel:()=>$(!1),onSuccess:()=>A((0,v.Rm)())})]})}},89323:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(89379),l=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var o=t(25085),d=function(e,a){return l.createElement(o.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:s}))};d.displayName="TableOutlined";const i=l.forwardRef(d)}}]);