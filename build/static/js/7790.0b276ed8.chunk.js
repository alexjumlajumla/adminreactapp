"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[7790],{8168:(e,t,n)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{A:()=>a})},28645:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(9950),s=n(66362),l=n(69216),i=n(80737),d=n(25933),r=n(57811),o=n(81541),u=n(48538),c=n(89323),v=n(70030),h=n(44414);const{Text:p}=s.A,m=e=>{let{columns:t=[],setColumns:n,style:s,size:m="",iconOnly:y}=e;const{t:x}=(0,v.B)(),[A,g]=(0,a.useState)(!1),j=(0,h.jsx)(l.A,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,h.jsx)(l.A.Item,{children:(0,h.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(p,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(r.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:A,children:(0,h.jsx)(o.A,{title:x("change.columns"),children:(0,h.jsx)(u.A,{style:{...s},size:m,icon:(0,h.jsx)(c.A,{}),children:y?null:x("Columns")})})})}},53774:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(83291);function s(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0;const i=null===(e=a.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,d=Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=s||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(l||(null===i||void 0===i?void 0:i.position)||"before")?`${d} ${r}`:`${r} ${d}`}},89323:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(89379),s=n(9950);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=n(25085),d=function(e,t){return s.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:l}))};d.displayName="TableOutlined";const r=s.forwardRef(d)},97790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var a=n(9950),s=n(54909),l=n(12916),i=n(80737),d=n(48538),r=n(23263),o=n(1007),u=n(12203),c=n(91854),v=n(74623),h=n(88986),p=n(8168),m=n(70030),y=n(73676),x=n(53774),A=n(32645),g=n(91524),j=n(64977),b=n(44414);function f(e){var t,n,s;let{data:l,handleCancel:i}=e;const{t:r}=(0,m.B)(),{activeMenu:o}=(0,c.d4)((e=>e.menu),c.bN),{defaultCurrency:u}=(0,c.d4)((e=>e.currency),c.bN),h=(0,c.wA)(),[p,y]=(0,a.useState)(!1),[f,k]=(0,a.useState)(!1);return(0,b.jsx)(A.A,{visible:!!l,title:r("pay.to.seller"),onCancel:i,footer:[(0,b.jsx)(d.A,{type:"primary",onClick:()=>{y(!0);j.A.statusChange(l.uuid,{status:"paid"}).then((()=>{i(),h((0,v.Ms)(o))})).finally((()=>y(!1)))},loading:p,children:r("pay")},"pay-btn"),(0,b.jsx)(d.A,{type:"danger",onClick:()=>{k(!0);j.A.statusChange(l.uuid,{status:"rejected"}).then((()=>{i(),h((0,v.Ms)(o))})).finally((()=>k(!1)))},loading:f,children:r("reject")},"reject-btn")],children:(0,b.jsxs)(g.A,{bordered:!0,children:[(0,b.jsxs)(g.A.Item,{label:r("seller"),span:3,children:[null===(t=l.user)||void 0===t?void 0:t.firstname," ",null===(n=l.user)||void 0===n?void 0:n.lastname]}),(0,b.jsx)(g.A.Item,{label:r("phone"),span:3,children:null===(s=l.user)||void 0===s?void 0:s.phone}),(0,b.jsx)(g.A.Item,{label:r("requested.amount"),span:3,children:(0,x.A)(l.price,null===u||void 0===u?void 0:u.symbol,null===u||void 0===u?void 0:u.position)}),(0,b.jsx)(g.A.Item,{label:r("note"),span:3,children:l.note}),(0,b.jsx)(g.A.Item,{label:r("created.at"),span:3,children:l.created_at})]})})}var k=n(28645),C=n(13564),w=n(59051),_=n.n(w);const{TabPane:I}=s.A,z=[{key:"pending",label:"pending",backend:"processed"},{key:"history",label:"history",backend:void 0}];function N(){var e;const{t:t}=(0,m.B)(),n=(0,c.wA)(),A=(0,C.Zp)(),{activeMenu:g}=(0,c.d4)((e=>e.menu),c.bN),[j,w]=(0,a.useState)("pending"),N=(null===(e=g.data)||void 0===e?void 0:e.viewKey)||j,H=g.data,M={sort:null===H||void 0===H?void 0:H.sort,column:null===H||void 0===H?void 0:H.column,perPage:null===H||void 0===H?void 0:H.perPage,page:null===H||void 0===H?void 0:H.page,status:"history"===N?void 0:"processed"},{payoutRequests:V,meta:S,loading:$,params:P}=(0,c.d4)((e=>e.payoutRequests),c.bN),{defaultCurrency:q}=(0,c.d4)((e=>e.currency),c.bN),[B,K]=(0,a.useState)(null),O=null===V||void 0===V?void 0:V.filter((e=>"processed"===e.status)).reduce(((e,t)=>e+Number(t.price||0)),0),[Y,R]=(0,a.useState)([{title:t("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:t("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,b.jsx)("div",{className:"text-hover",onClick:()=>{return a=e,n((0,v.X4)({url:`/users/user/${a.uuid}`,id:"user_info",name:t("user.info")})),void A(`/users/user/${a.uuid}`,{state:{user_id:a.id}});var a},children:e.firstname+" "+e.lastname})},{title:t("price"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,x.A)(e,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position)},{title:t("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>(0,b.jsx)(l.A,{color:{processed:"blue",paid:"green",rejected:"red",canceled:"default"}[e]||"default",children:t(e)})},{title:t("note"),dataIndex:"note",key:"note",is_show:!0},{title:t("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:(e,t)=>_()(null===t||void 0===t?void 0:t.created_at).format("YYYY-MM-DD HH:mm")},{title:t("actions"),dataIndex:"uuid",key:"uuid",is_show:!0,render:(e,n)=>(0,b.jsx)(i.A,{children:"processed"===n.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.A,{type:"primary",onClick:()=>K({...n,action:"pay"}),children:t("pay")}),(0,b.jsx)(d.A,{danger:!0,onClick:()=>K({...n,action:"reject"}),children:t("reject")})]})})}]);(0,a.useEffect)((()=>{g.refetch&&(n((0,y.N)(M)),n((0,v.km)(g)))}),[g.refetch]),(0,h.A)((()=>{n((0,y.N)(M))}),[g.data]);return(0,b.jsxs)(r.A,{title:t("payout.requests"),extra:(0,b.jsx)(i.A,{children:(0,b.jsx)(k.A,{columns:Y,setColumns:R})}),children:["pending"===N&&(0,b.jsx)(o.A,{title:t("total.pending"),value:(0,x.A)(O,null===q||void 0===q?void 0:q.symbol,null===q||void 0===q?void 0:q.position),className:"mb-4"}),(0,b.jsx)(s.A,{className:"mt-3",activeKey:N,onChange:e=>{(e=>{const t=g.data;n((0,v.Ok)({activeMenu:g,data:{...t,...e}}))})({viewKey:e,page:1}),w(e)},type:"card",children:z.map((e=>(0,b.jsx)(I,{tab:t(e.label)},e.key)))}),(0,b.jsx)(u.A,{scroll:{x:!0},columns:null===Y||void 0===Y?void 0:Y.filter((e=>e.is_show)),dataSource:V,pagination:{pageSize:P.perPage,page:P.page,total:S.total,defaultCurrent:P.page},rowKey:e=>e.id,onChange:function(e,t,a){const{pageSize:s,current:l}=e,{field:i,order:d}=a,r=(0,p.A)(d);n((0,v.Ok)({activeMenu:g,data:{perPage:s,page:l,column:i,sort:r}}))},loading:$}),B&&(0,b.jsx)(f,{data:B,handleCancel:()=>K(null)})]})}}}]);