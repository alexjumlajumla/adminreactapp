"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4628],{8168:(e,t,a)=>{function s(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(t,{A:()=>s})},8297:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(9950),r=a(55902),n=a(41397),i=a(60767),l=a(44414);function d(e){let{handleChange:t,defaultValue:a,resetSearch:d,...c}=e;const[o,u]=(0,s.useState)(a),h=(0,s.useMemo)((()=>(0,n.debounce)((e=>{t(e)}),800)),[t]);return(0,s.useEffect)((()=>{u(a)}),[d,a]),(0,l.jsx)(r.A,{value:o,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,l.jsx)(i.A,{}),...c})}},28645:(e,t,a)=>{a.d(t,{A:()=>p});var s=a(9950),r=a(66362),n=a(69216),i=a(80737),l=a(25933),d=a(57811),c=a(81541),o=a(48538),u=a(89323),h=a(70030),m=a(44414);const{Text:v}=r.A,p=e=>{let{columns:t=[],setColumns:a,style:r,size:p="",iconOnly:x}=e;const{t:A}=(0,h.B)(),[g,j]=(0,s.useState)(!1),f=(0,m.jsx)(n.A,{children:null===t||void 0===t?void 0:t.map(((e,s)=>(0,m.jsx)(n.A.Item,{children:(0,m.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,m.jsx)(v,{children:e.title}),(0,m.jsx)(l.A,{defaultChecked:!0,onClick:()=>function(e){const s=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(s)}(e),disabled:1===s})]})},e+s)))});return(0,m.jsx)(d.A,{overlay:f,trigger:["click"],onVisibleChange:e=>{j(e)},visible:g,children:(0,m.jsx)(c.A,{title:A("change.columns"),children:(0,m.jsx)(o.A,{style:{...r},size:p,icon:(0,m.jsx)(u.A,{}),children:x?null:A("Columns")})})})}},84628:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var s=a(9950),r=a(12916),n=a(23263),i=a(80737),l=a(48538),d=a(12203),c=a(91854),o=a(74623),u=a(70030),h=a(8168),m=a(88986),v=a(42112),p=a(8297),x=a(28645),A=a(8750),g=a(99674),j=a(3969),f=a(32645),b=a(55902),_=a(44414);const{Option:y}=g.A;function w(e){let{visible:t,handleCancel:a}=e;const[s]=j.A.useForm(),{t:r}=(0,u.B)(),n=(0,c.wA)(),{loading:i}=(0,c.d4)((e=>e.vfd),c.bN);return(0,_.jsx)(f.A,{visible:t,title:r("generate_vfd_receipt"),onCancel:a,footer:[(0,_.jsx)(l.A,{onClick:a,children:r("cancel")},"cancel"),(0,_.jsx)(l.A,{type:"primary",loading:i,onClick:()=>s.submit(),children:r("generate")},"submit")],children:(0,_.jsxs)(j.A,{form:s,layout:"vertical",onFinish:e=>{n((0,v.si)(e)).then((()=>{a(),n((0,o.Ms)(!0))}))},initialValues:{receipt_type:"delivery"},children:[(0,_.jsx)(j.A.Item,{label:r("receipt_type"),name:"receipt_type",rules:[{required:!0,message:r("required")}],children:(0,_.jsxs)(g.A,{children:[(0,_.jsx)(y,{value:"delivery",children:r("delivery")}),(0,_.jsx)(y,{value:"subscription",children:r("subscription")})]})}),(0,_.jsx)(j.A.Item,{label:r("amount"),name:"amount",rules:[{required:!0,message:r("required")}],children:(0,_.jsx)(b.A,{type:"number",min:0})}),(0,_.jsx)(j.A.Item,{label:r("customer_name"),name:"customer_name",rules:[{required:!0,message:r("required")}],children:(0,_.jsx)(b.A,{})}),(0,_.jsx)(j.A.Item,{label:r("customer_phone"),name:"customer_phone",rules:[{required:!0,message:r("required")}],children:(0,_.jsx)(b.A,{})}),(0,_.jsx)(j.A.Item,{label:r("customer_address"),name:"customer_address",rules:[{required:!0,message:r("required")}],children:(0,_.jsx)(b.A.TextArea,{rows:4})})]})})}var k=a(59051),C=a.n(k);function z(){var e,t;const{t:a}=(0,u.B)(),g=(0,c.wA)(),{activeMenu:j}=(0,c.d4)((e=>e.menu),c.bN),{receipts:f,loading:b,meta:y,params:k}=(0,c.d4)((e=>e.vfd),c.bN),[z,I]=(0,s.useState)(!1),[V,H]=(0,s.useState)([{title:a("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:a("receipt_number"),dataIndex:"receipt_number",key:"receipt_number",is_show:!0},{title:a("type"),dataIndex:"receipt_type",key:"receipt_type",is_show:!0,render:e=>(0,_.jsx)(r.A,{color:"delivery"===e?"blue":"green",children:e})},{title:a("amount"),dataIndex:"amount",key:"amount",is_show:!0,render:e=>`TZS ${e}`},{title:a("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>(0,_.jsx)(r.A,{color:"pending"===e?"orange":"success"===e?"green":"red",children:e})},{title:a("created_at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>C()(e).format("DD-MM-YYYY HH:mm:ss")}]);(0,s.useEffect)((()=>{j.refetch&&(g((0,v.eU)()),g((0,o.km)(j)))}),[j.refetch]),(0,m.A)((()=>{const e=j.data,t={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};g((0,v.eU)(t))}),[j.data]);return(0,_.jsxs)(n.A,{title:a("vfd_receipts"),extra:(0,_.jsxs)(i.A,{wrap:!0,children:[(0,_.jsx)(l.A,{type:"primary",icon:(0,_.jsx)(A.A,{}),onClick:()=>I(!0),children:a("generate_receipt")}),(0,_.jsx)(p.A,{placeholder:a("search"),handleChange:e=>((e,t)=>{const a=j.data;g((0,o.Ok)({activeMenu:j,data:{...a,[t]:e}}))})(e,"search"),defaultValue:null===(e=j.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(t=j.data)&&void 0!==t&&t.search)}),(0,_.jsx)(x.A,{columns:V,setColumns:H})]}),children:[(0,_.jsx)(d.A,{scroll:{x:!0},columns:null===V||void 0===V?void 0:V.filter((e=>e.is_show)),dataSource:f,loading:b,pagination:{pageSize:k.perPage,page:k.page,total:y.total,defaultCurrent:k.page},rowKey:e=>e.id,onChange:function(e,t,a){const{pageSize:s,current:r}=e,{field:n,order:i}=a,l=(0,h.A)(i);g((0,o.Ok)({activeMenu:j,data:{perPage:s,page:r,column:n,sort:l}}))}}),z&&(0,_.jsx)(w,{visible:z,handleCancel:()=>I(!1)})]})}},89323:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(89379),r=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),l=function(e,t){return r.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:n}))};l.displayName="TableOutlined";const d=r.forwardRef(l)}}]);