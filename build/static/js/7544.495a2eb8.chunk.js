"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7544],{41481:(e,n,l)=>{l.d(n,{Z:()=>d});var t=l(47313),i=l(66672),a=l(16031),o=l(40765),s=l(46417);function d(e){let{handleChange:n,defaultValue:l,resetSearch:d,...r}=e;const[c,u]=(0,t.useState)(l),v=(0,t.useMemo)((()=>(0,a.debounce)((e=>{n(e)}),800)),[n]);return(0,t.useEffect)((()=>{u(l)}),[d,l]),(0,s.jsx)(i.Z,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,s.jsx)(o.Z,{}),...r})}},89281:(e,n,l)=>{l.d(n,{h:()=>r});var t=l(47313),i=l(12279),a=l.n(i),o=l(74294),s=l(72652),d=l(46417);const r=e=>{let{fetchOptions:n,debounceTimeout:l=400,onClear:i,...r}=e;const[c,u]=(0,t.useState)(!1),[v,h]=(0,t.useState)([]),m=(0,t.useMemo)((()=>a()((e=>{h([]),u(!0),n(e).then((e=>{h(e),u(!1)}))}),l)),[n,l]);return(0,d.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),i&&i()},notFoundContent:c?(0,d.jsx)(s.Z,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},98501:(e,n,l)=>{l.d(n,{CM:()=>a,Km:()=>r,OT:()=>s,Q1:()=>t,Sp:()=>d,a5:()=>c,gN:()=>i,qO:()=>o});const t={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},i=["progress","paid","canceled","rejected","refund"],a=["before","after"],o=["blue","red","gold","volcano","cyan","lime"],s=["new","accepted","cooking","ready","ended"],d=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],c=["male","female"]},17649:(e,n,l)=>{l.d(n,{Z:()=>t});l(97421);function t(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const n=e.location.split(", ");return{lat:Number(null===n||void 0===n?void 0:n[0]),lng:Number(null===n||void 0===n?void 0:n[1])}}},84017:(e,n,l)=>{l.d(n,{Z:()=>i});var t=l(67968);function i(){var e,n;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const o=null===(e=t.h.getState())||void 0===e||null===(n=e.currency)||void 0===n?void 0:n.defaultCurrency,s=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=i||(null===o||void 0===o?void 0:o.symbol)||"$",r=a||(null===o||void 0===o?void 0:o.position)||"before";return"after"===r?`${s} ${d}`:`${d} ${s}`}},36311:(e,n,l)=>{l.d(n,{Z:()=>i});var t=l(34344);const i={orderExport:(e,n)=>t.Z.get(`dashboard/user/export/order/${e}/pdf`,{params:n,responseType:"blob"})}},24391:(e,n,l)=>{l.d(n,{Z:()=>Z});var t=l(47313),i=l(36311),a=l(83334),o=l.n(a),s=l(51282),d=l(77181),r=l(9274),c=l(59491),u=l(68197),v=l(59624),h=l(24511),m=l(59713),p=l(69965),x=l(97890),j=l(46417);const g=d.Z.Meta,Z=e=>{let{id:n,handleCancel:l}=e;const[a,Z]=(0,t.useState)(null),{t:y}=(0,h.$)(),f=(0,x.s0)();return(0,j.jsx)(j.Fragment,{children:a?(0,j.jsx)(s.Z,{}):(0,j.jsx)(r.Z,{visible:!!n,title:y("selected.download"),closable:!1,handleCancel:l,footer:[(0,j.jsx)(c.Z,{type:"default",onClick:l,children:y("cancel")},"cancelBtn")],children:(0,j.jsxs)(u.Z,{children:[(0,j.jsx)(v.Z,{span:12,children:(0,j.jsx)(d.Z,{title:y("download.pdf"),onClick:()=>function(e){Z(!0),i.Z.orderExport(e).then((n=>{o()(n,`invoice_${e}.pdf`,"application/pdf"),l()})).finally((()=>Z(!1)))}(n),className:"text-center cursor-pointer",children:(0,j.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(m._JY,{size:80})})})}),(0,j.jsx)(v.Z,{span:12,children:(0,j.jsx)(d.Z,{title:y("download.check"),onClick:()=>(e=>{f(`/orders/generate-invoice/${e}`)})(n),className:"text-center cursor-pointer",children:(0,j.jsx)(g,{className:"d-flex align-items-center justify-content-center",title:(0,j.jsx)(p.ih9,{size:85})})})})]})})})}},24077:(e,n,l)=>{l.d(n,{Z:()=>g});var t=l(47313),i=l(10976),a=l(9274),o=l(59491),s=l(68197),d=l(59624),r=l(74294),c=l(2717),u=l(7370),v=l(90954),h=l(24511),m=l(49986),p=l(89281),x=l(98501),j=l(46417);function g(e){var n,l,g,Z;let{orderDetails:y,handleCancel:f}=e;const{t:b}=(0,h.$)(),{activeMenu:_}=(0,c.v9)((e=>e.menu),c.wU),[w]=i.Z.useForm(),C=(0,c.I0)(),[k,S]=(0,t.useState)(!1),$=x.gN.map((e=>({label:b(e),value:e,key:e})));return(0,j.jsx)(a.Z,{visible:!!y,onCancel:f,footer:[(0,j.jsx)(o.Z,{type:"primary",onClick:()=>w.submit(),loading:k,children:b("save")},"saveBtn"),(0,j.jsx)(o.Z,{type:"default",onClick:f,children:b("cancel")},"cancelBtn")],children:(0,j.jsx)(i.Z,{form:w,layout:"vertical",onFinish:e=>{var n,l;const t={deliveryman:null===e||void 0===e||null===(n=e.deliveryman)||void 0===n?void 0:n.value,transaction_status:(null===e||void 0===e||null===(l=e.transaction_status)||void 0===l?void 0:l.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};S(!0),u.Z.updateDelivery(y.id,t).then((()=>{f(),C((0,v.xo)(_))})).finally((()=>S(!1)))},initialValues:{deliveryman:null!==y&&void 0!==y&&y.deliveryman?{label:`${(null===y||void 0===y||null===(n=y.deliveryman)||void 0===n?void 0:n.firstname)||""} ${(null===y||void 0===y||null===(l=y.deliveryman)||void 0===l?void 0:l.lastname)||""}`,value:null===y||void 0===y||null===(g=y.deliveryman)||void 0===g?void 0:g.id}:void 0,transaction_status:null===y||void 0===y||null===(Z=y.transaction)||void 0===Z?void 0:Z.status},children:(0,j.jsxs)(s.Z,{gutter:12,children:[(0,j.jsx)(d.Z,{span:24,children:(0,j.jsx)(i.Z.Item,{label:b("deliveryman"),name:"deliveryman",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(p.h,{className:"w-100",debounceTimeout:500,placeholder:b("select.deliveryman"),fetchOptions:async e=>{var n,l;const t={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",shop_id:y.shop.id,exist_token:1,"address[latitude]":(null===y||void 0===y||null===(n=y.location)||void 0===n?void 0:n.latitude)||void 0,"address[longitude]":(null===y||void 0===y||null===(l=y.location)||void 0===l?void 0:l.longitude)||void 0};return m.Z.getAll(t).then((e=>{let{data:n}=e;return n.map((e=>({label:e.firstname+" "+e.lastname||"no name",value:e.id})))}))},allowClear:!0})})}),(null===y||void 0===y?void 0:y.transaction)&&(0,j.jsx)(d.Z,{span:24,children:(0,j.jsx)(i.Z.Item,{label:b("transaction.status"),name:"transaction_status",children:(0,j.jsx)(r.Z,{options:$,labelInValue:!0})})})]})})})}},7920:(e,n,l)=>{l.d(n,{Z:()=>j});var t=l(47313),i=l(10976),a=l(9274),o=l(59491),s=l(68197),d=l(59624),r=l(74294),c=l(2717),u=l(24511),v=l(7370),h=l(90954),m=l(98501),p=l(97890),x=l(46417);function j(e){var n;let{orderDetails:l,handleCancel:j,status:g}=e;const{t:Z}=(0,u.$)(),y=(0,c.I0)(),f=(0,p.s0)(),[b]=i.Z.useForm(),{activeMenu:_}=(0,c.v9)((e=>e.menu),c.wU),w=(0,c.v9)((e=>e.globalSettings.settings),c.wU),[C,k]=(0,t.useState)(!1),[S,$]=(0,t.useState)(g),N=m.gN.map((e=>({label:Z(e),value:e,key:e})));(0,t.useEffect)((()=>{const e=g.findIndex((e=>e.name===l.status));let n=[g[e],g[e+1],{name:"canceled",id:null===g||void 0===g?void 0:g.length,active:!0}];e<0&&(n=[g[e+1],"canceled"]),$(n)}),[l]);return(0,x.jsx)(a.Z,{visible:!!l,title:l.title,onCancel:j,footer:[(0,x.jsx)(o.Z,{type:"primary",onClick:()=>b.submit(),loading:C,children:Z("save")},"save-form"),(0,x.jsx)(o.Z,{type:"default",onClick:j,children:Z("cancel")},"cansel-modal")],children:(0,x.jsx)(i.Z,{form:b,layout:"vertical",onFinish:e=>{var n,t;const i={status:(null===e||void 0===e||null===(n=e.status)||void 0===n?void 0:n.value)||(null===e||void 0===e?void 0:e.status),transaction_status:(null===e||void 0===e||null===(t=e.transaction_status)||void 0===t?void 0:t.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};k(!0),v.Z.updateStatus(l.id,i).then((e=>{var n,l;"accepted"===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.status)&&"1"===(null===w||void 0===w?void 0:w.auto_print_order)?(e=>{const n=`orders/generate-invoice/${e}`;y((0,h.bL)({url:n,id:"generate-invoice ",name:Z("generate.invoice")})),f(`/${n}?print=true`)})(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.id):(j(),y((0,h.xo)(_)))})).finally((()=>k(!1)))},initialValues:{status:null===l||void 0===l?void 0:l.status,transaction_status:null===l||void 0===l||null===(n=l.transaction)||void 0===n?void 0:n.status},children:(0,x.jsxs)(s.Z,{gutter:12,children:[(0,x.jsx)(d.Z,{span:24,children:(0,x.jsx)(i.Z.Item,{label:Z("status"),name:"status",rules:[{required:!0,message:Z("required")}],children:(0,x.jsx)(r.Z,{labelInValue:!0,children:null===S||void 0===S?void 0:S.map((e=>(0,x.jsx)(r.Z.Option,{value:null===e||void 0===e?void 0:e.name,children:Z(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})}),(null===l||void 0===l?void 0:l.transaction)&&(0,x.jsx)(d.Z,{span:24,children:(0,x.jsx)(i.Z.Item,{label:Z("transaction.status"),name:"transaction_status",children:(0,x.jsx)(r.Z,{options:N})})})]})})})}},80355:(e,n,l)=>{l.d(n,{Z:()=>M});var t=l(84697),i=l(83999),a=l(9274),o=l(59491),s=l(77181),d=l(68197),r=l(59624),c=l(66204),u=l(47313),v=l(24511),h=l(7370),m=l(51282),p=l(59713),x=l(2717),j=l(97421),g=l(18478),Z=l(84618),y=l(17649),f=l(66461),b=l(94443),_=l(12258),w=l(69965),C=l(70816),k=l.n(C),S=l(46417);const{Step:$}=i.Z,N=()=>(0,S.jsx)("img",{src:g,width:"50",alt:"Pin"}),I=()=>(0,S.jsx)("img",{src:Z,width:"50",alt:"Pin"}),F=["blue","red","gold","volcano","cyan","lime"],M=e=>{var n,l,g,Z,C,M;let{id:B,handleCancel:U}=e;const{t:V}=(0,v.$)(),[D,O]=(0,u.useState)(null),[T,q]=(0,u.useState)(null),[E,L]=(0,u.useState)(null),{settings:Y}=(0,x.v9)((e=>e.globalSettings),x.wU),A=(0,y.Z)(Y),[P,z]=(0,u.useState)(0),[G,H]=(0,u.useState)((0,y.Z)(Y)),[K,Q]=(0,u.useState)((0,y.Z)(Y)),[W,J]=(0,u.useState)([{id:0,name:"new",icon:(0,S.jsx)(f.Z,{})},{id:1,name:"accepted",icon:(0,S.jsx)(p.IQF,{})},{id:2,name:"ready",icon:(0,S.jsx)(b.TkG,{})},{id:3,name:"on_a_way",icon:(0,S.jsx)(_.Akc,{})},{id:4,name:"delivered",icon:(0,S.jsx)(_.kme,{})}]);const{google_map_key:R}=(0,x.v9)((e=>e.globalSettings.settings),x.wU);(0,u.useEffect)((()=>{O(!0),h.Z.getById(B).then((e=>{var n;let{data:l}=e;J("canceled"===l.status?[{id:1,name:"new",icon:(0,S.jsx)(f.Z,{})},{id:5,name:"canceled",icon:(0,S.jsx)(w.SV5,{})}]:W),z("canceled"===l.status?1:null===(n=W.find((e=>e.name===l.status)))||void 0===n?void 0:n.id),L("canceled"===l.status?"error":"success"),q(l),Q({lat:l.location.latitude,lng:l.location.longitude}),H({lat:l.shop.location.latitude,lng:l.shop.location.longitude})})).finally((()=>{O(!1)}))}),[]);return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(a.Z,{visible:!!B,title:V("show.locations"),onCancel:()=>U(),style:{minWidth:"80vw"},footer:[(0,S.jsx)(o.Z,{type:"default",onClick:U,children:V("cancel")},"cancelBtn")],children:D?(0,S.jsx)(m.Z,{}):(0,S.jsxs)(s.Z,{children:[(0,S.jsx)(i.Z,{current:P,status:E,className:"mb-5",children:null===W||void 0===W?void 0:W.map(((e,n)=>(0,S.jsx)($,{title:V(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+n)))}),(0,S.jsxs)(d.Z,{gutter:12,children:[(0,S.jsxs)(r.Z,{span:12,children:[(0,S.jsxs)("h3",{children:[V("order.id")," #",null===T||void 0===T?void 0:T.id]}),(0,S.jsxs)("p",{children:[(0,S.jsx)(p.D73,{})," ",k()(null===T||void 0===T?void 0:T.created_at).format("YYYY-MM-DD HH:mm")]}),(0,S.jsxs)("p",{children:[V("schedulet.at")," ",null===T||void 0===T?void 0:T.delivery_date]}),(0,S.jsxs)("span",{children:[(0,S.jsx)("strong",{children:null===T||void 0===T||null===(n=T.shop)||void 0===n||null===(l=n.translation)||void 0===l?void 0:l.title})," ",null===T||void 0===T||null===(g=T.details)||void 0===g?void 0:g.map(((e,n)=>{var l,t,i;return(0,S.jsx)(c.Z,{color:F[n],children:null===e||void 0===e||null===(l=e.stock)||void 0===l||null===(t=l.product)||void 0===t||null===(i=t.translation)||void 0===i?void 0:i.title})}))]})]}),(0,S.jsxs)(r.Z,{span:12,children:[(0,S.jsxs)("p",{children:[V("status")," ","new"===(null===T||void 0===T?void 0:T.status)?(0,S.jsx)(c.Z,{color:"blue",children:V(null===T||void 0===T?void 0:T.status)}):"canceled"===(null===T||void 0===T?void 0:T.status)?(0,S.jsx)(c.Z,{color:"error",children:V(null===T||void 0===T?void 0:T.status)}):(0,S.jsx)(c.Z,{color:"cyan",children:V(null===T||void 0===T?void 0:T.status)})]}),(0,S.jsxs)("p",{children:[V("payment.method")," ",(0,S.jsx)("strong",{children:null===T||void 0===T||null===(Z=T.transaction)||void 0===Z||null===(C=Z.payment_system)||void 0===C?void 0:C.tag})]}),(0,S.jsxs)("p",{children:[V("order.type")," ",(0,S.jsx)("strong",{children:null===T||void 0===T?void 0:T.delivery_type})]}),(0,S.jsxs)("p",{children:[V("payment.type")," ",(0,S.jsx)("strong",{children:null===T||void 0===T||null===(M=T.transaction)||void 0===M?void 0:M.status})]})]}),(0,S.jsxs)(r.Z,{span:24,className:"mt-5",children:[(0,S.jsx)("h4",{children:V("map")}),(0,S.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,S.jsxs)(t.ZP,{bootstrapURLKeys:{key:j.kr||R},defaultZoom:15,center:A,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:n,maps:l}=e;const t=[G,K].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let i=new l.LatLngBounds;for(var a=0;a<t.length;a++)i.extend(t[a]);n.fitBounds(i)},children:[(0,S.jsx)(I,{lat:null===G||void 0===G?void 0:G.lat,lng:null===G||void 0===G?void 0:G.lng}),(0,S.jsx)(N,{lat:null===K||void 0===K?void 0:K.lat,lng:null===K||void 0===K?void 0:K.lng})]})})]})]})]})})})}},84618:(e,n,l)=>{e.exports=l.p+"static/media/shop.46d7a94ca800c711764a.png"},18478:(e,n,l)=>{e.exports=l.p+"static/media/user.fbe7078c52acde79652d.jpg"}}]);