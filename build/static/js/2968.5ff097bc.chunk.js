"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2968],{8168:(e,a,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(a,{A:()=>n})},8297:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(9950),l=t(55902),s=t(41397),o=t(60767),i=t(44414);function d(e){let{handleChange:a,defaultValue:t,resetSearch:d,...r}=e;const[u,c]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,s.debounce)((e=>{a(e)}),800)),[a]);return(0,n.useEffect)((()=>{c(t)}),[d,t]),(0,i.jsx)(l.A,{value:u,onChange:e=>{c(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(o.A,{}),...r})}},28645:(e,a,t)=>{t.d(a,{A:()=>p});var n=t(9950),l=t(66362),s=t(69216),o=t(80737),i=t(25933),d=t(57811),r=t(81541),u=t(48538),c=t(89323),v=t(70030),h=t(44414);const{Text:m}=l.A,p=e=>{let{columns:a=[],setColumns:t,style:l,size:p="",iconOnly:A}=e;const{t:x}=(0,v.B)(),[f,g]=(0,n.useState)(!1),j=(0,h.jsx)(s.A,{children:null===a||void 0===a?void 0:a.map(((e,n)=>(0,h.jsx)(s.A.Item,{children:(0,h.jsxs)(o.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(i.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===a||void 0===a?void 0:a.map((a=>(a.dataIndex===e.dataIndex&&(a.is_show=!(null!==a&&void 0!==a&&a.is_show)),a)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(d.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:f,children:(0,h.jsx)(r.A,{title:x("change.columns"),children:(0,h.jsx)(u.A,{style:{...l},size:p,icon:(0,h.jsx)(c.A,{}),children:A?null:x("Columns")})})})}},41901:(e,a,t)=>{t.d(a,{A:()=>h});var n=t(9950),l=t(3969),s=t(32645),o=t(8724),i=t(99674),d=t(70030),r=t(91854),u=t(47992),c=t(69184),v=t(44414);function h(e){let{visible:a,onCancel:t,onSuccess:h}=e;const{t:m}=(0,d.B)(),[p]=l.A.useForm(),A=(0,r.wA)(),{loans:x}=(0,r.d4)((e=>e.sellerLoans)),[f,g]=(0,n.useState)(!1);return(0,v.jsx)(s.A,{visible:a,title:m("repay_loan"),onCancel:t,onOk:()=>{p.validateFields().then((async e=>{g(!0);try{var a,n;const l={...e,loan_id:null!==(a=null===(n=e.loan_id)||void 0===n?void 0:n.value)&&void 0!==a?a:e.loan_id};await A((0,c.xf)(l)).unwrap(),h&&h(),t()}finally{g(!1)}}))},confirmLoading:f,destroyOnClose:!0,children:(0,v.jsxs)(l.A,{form:p,layout:"vertical",children:[(0,v.jsx)(l.A.Item,{name:"loan_id",label:m("loan"),rules:[{required:!0,message:m("required")}],children:(0,v.jsx)(u.G,{fetchOptions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x.filter((a=>"active"===a.status&&`${a.id}`.includes(e))).map((e=>({label:`#${e.id} - ${m("balance")}: ${e.remaining_amount}`,value:e.id})))},placeholder:m("select.loan"),style:{width:"100%"}})}),(0,v.jsx)(l.A.Item,{name:"amount",label:m("amount"),rules:[{required:!0,message:m("required")}],children:(0,v.jsx)(o.A,{min:1,style:{width:"100%"}})}),(0,v.jsx)(l.A.Item,{name:"payment_method",label:m("payment_method"),initialValue:"wallet",rules:[{required:!0,message:m("required")}],children:(0,v.jsx)(i.A,{options:[{value:"wallet",label:m("wallet")}],disabled:!0})})]})})}},47992:(e,a,t)=>{t.d(a,{G:()=>r});var n=t(9950),l=t(95491),s=t.n(l),o=t(99674),i=t(90650),d=t(44414);const r=e=>{let{fetchOptions:a,debounceTimeout:t=400,onClear:l,...r}=e;const[u,c]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),m=(0,n.useMemo)((()=>s()((e=>{h([]),c(!0),a(e).then((e=>{h(e),c(!1)}))}),t)),[a,t]);return(0,d.jsx)(o.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:u?(0,d.jsx)(i.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},53774:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(83291);function l(){var e,a;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const o=null===(e=n.M.getState())||void 0===e||null===(a=e.currency)||void 0===a?void 0:a.defaultCurrency,i=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=l||(null===o||void 0===o?void 0:o.symbol)||"$";return"after"===(s||(null===o||void 0===o?void 0:o.position)||"before")?`${i} ${d}`:`${d} ${i}`}},82968:(e,a,t)=>{t.r(a),t.d(a,{default:()=>S});var n=t(9950),l=t(12916),s=t(23263),o=t(80737),i=t(48538),d=t(12203),r=t(87094),u=t(41988),c=t(1007),v=t(91854),h=t(74623),m=t(70030),p=t(8168),A=t(88986),x=t(69184),f=t(8297),g=t(28645),j=t(53774),y=t(59051),b=t.n(y),_=t(41901),w=t(7189),C=t(44414);function S(){var e,a;const{t:t}=(0,m.B)(),y=(0,v.wA)(),{defaultCurrency:S}=(0,v.d4)((e=>e.currency),v.bN),{activeMenu:k}=(0,v.d4)((e=>e.menu),v.bN),{loans:z,loading:V,meta:I,params:H}=(0,v.d4)((e=>e.sellerLoans),v.bN),[M,$]=(0,n.useState)([{title:t("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:t("amount"),dataIndex:"amount",key:"amount",is_show:!0,render:e=>(0,j.A)(e,null===S||void 0===S?void 0:S.symbol,null===S||void 0===S?void 0:S.position)},{title:t("repayment_amount"),dataIndex:"repayment_amount",key:"repayment_amount",is_show:!0,render:e=>(0,j.A)(e,null===S||void 0===S?void 0:S.symbol,null===S||void 0===S?void 0:S.position)},{title:t("remaining_amount"),dataIndex:"remaining_amount",key:"remaining_amount",is_show:!0,render:e=>(0,j.A)(e,null===S||void 0===S?void 0:S.symbol,null===S||void 0===S?void 0:S.position)},{title:t("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>(0,C.jsx)(l.A,{color:"active"===e?"gold":"repaid"===e?"green":"red",children:e})},{title:t("disbursed_at"),dataIndex:"disbursed_at",key:"disbursed_at",is_show:!0,render:e=>b()(e).format("YYYY-MM-DD")}]),[O,N]=(0,n.useState)(null),[q,F]=(0,n.useState)(!1),B=()=>{w.A.getStatistics().then(N)};(0,n.useEffect)((()=>{B()}),[]),(0,n.useEffect)((()=>{k.refetch&&(y((0,x.pv)()),y((0,h.km)(k)),B())}),[k.refetch]),(0,A.A)((()=>{const e=k.data,a={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};y((0,x.pv)(a))}),[k.data]);return(0,C.jsxs)(s.A,{title:t("my_loans"),extra:(0,C.jsxs)(o.A,{wrap:!0,children:[(0,C.jsx)(i.A,{type:"primary",onClick:()=>F(!0),children:t("repay_loan")}),(0,C.jsx)(f.A,{placeholder:t("search"),handleChange:e=>((e,a)=>{const t=k.data;y((0,h.Ok)({activeMenu:k,data:{...t,[a]:e}}))})(e,"search"),defaultValue:null===(e=k.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(a=k.data)&&void 0!==a&&a.search)}),(0,C.jsx)(g.A,{columns:M,setColumns:$})]}),children:[(0,C.jsx)(d.A,{scroll:{x:!0},columns:M.filter((e=>e.is_show)),dataSource:z,loading:V,pagination:{pageSize:H.perPage,page:H.page,total:null===I||void 0===I?void 0:I.total},rowKey:e=>e.id,onChange:function(e,a,t){const{pageSize:n,current:l}=e,{field:s,order:o}=t,i=(0,p.A)(o);y((0,h.Ok)({activeMenu:k,data:{perPage:n,page:l,column:s,sort:i}}))}}),q&&(0,C.jsx)(_.A,{visible:q,onCancel:()=>F(!1),onSuccess:()=>{y((0,x.pv)()),B()}}),O&&(0,C.jsxs)(r.A,{gutter:16,className:"mt-4",children:[(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{title:t("total_loans"),value:O.total_loans})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{title:t("active_loans"),value:O.active_loans})}),(0,C.jsx)(u.A,{span:8,children:(0,C.jsx)(c.A,{title:t("repaid_loans"),value:O.repaid_loans})})]})]})}},89323:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(89379),l=t(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var o=t(25085),i=function(e,a){return l.createElement(o.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:s}))};i.displayName="TableOutlined";const d=l.forwardRef(i)}}]);