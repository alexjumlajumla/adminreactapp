"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[8491],{8168:(e,l,t)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>a})},8297:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(9950),s=t(55902),n=t(41397),i=t(60767),d=t(44414);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,a.useState)(t),h=(0,a.useMemo)((()=>(0,n.debounce)((e=>{l(e)}),800)),[l]);return(0,a.useEffect)((()=>{u(t)}),[o,t]),(0,d.jsx)(s.A,{value:c,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,d.jsx)(i.A,{}),...r})}},12970:(e,l,t)=>{function a(e){var l,t;let a=null===e||void 0===e?void 0:e.slice(0,1),s=null===e||void 0===e?void 0:e.lastIndexOf("@"),n=null===e||void 0===e?void 0:e.slice(1,s-1);n=null===(l=n)||void 0===l?void 0:l.replace(/./g,"*");let i=null===e||void 0===e?void 0:e.slice(s-1,e.length);return null===a||void 0===a||null===(t=a.concat(n))||void 0===t?void 0:t.concat(i)}t.d(l,{A:()=>a})},21777:(e,l,t)=>{t.d(l,{A:()=>o});t(9950);var a=t(32645),s=t(32312),n=t(48538),i=t(70030),d=t(44414);const o=e=>{let{open:l,handleCancel:t,text:o,click:r,loading:c,subTitle:u}=e;const{t:h}=(0,i.B)();return(0,d.jsxs)(a.A,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,d.jsx)(s.Ay,{status:"warning",title:o,subTitle:u}),(0,d.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,d.jsx)(n.A,{type:"primary",className:"mr-2",onClick:r,loading:c,children:h("yes")}),(0,d.jsx)(n.A,{onClick:()=>t(),children:h("no")})]})]})}},28645:(e,l,t)=>{t.d(l,{A:()=>A});var a=t(9950),s=t(66362),n=t(69216),i=t(80737),d=t(25933),o=t(57811),r=t(81541),c=t(48538),u=t(89323),h=t(70030),v=t(44414);const{Text:m}=s.A,A=e=>{let{columns:l=[],setColumns:t,style:s,size:A="",iconOnly:p}=e;const{t:x}=(0,h.B)(),[j,f]=(0,a.useState)(!1),g=(0,v.jsx)(n.A,{children:null===l||void 0===l?void 0:l.map(((e,a)=>(0,v.jsx)(n.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(a)}(e),disabled:1===a})]})},e+a)))});return(0,v.jsx)(o.A,{overlay:g,trigger:["click"],onVisibleChange:e=>{f(e)},visible:j,children:(0,v.jsx)(r.A,{title:x("change.columns"),children:(0,v.jsx)(c.A,{style:{...s},size:A,icon:(0,v.jsx)(u.A,{}),children:p?null:x("Columns")})})})}},29190:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(89379),s=t(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm578 576h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z"}}]},name:"expand",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:n}))};d.displayName="ExpandOutlined";const o=s.forwardRef(d)},35116:(e,l,t)=>{t.d(l,{A:()=>r});t(9950);var a=t(48538),s=t(44070),n=t(12449),i=t(70030),d=t(13311),o=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,i.B)(),{isDemo:h}=(0,d.A)();return(0,o.jsx)(a.A,{size:l,icon:(0,o.jsx)(s.A,{}),onClick:e=>{h?n.oR.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},47992:(e,l,t)=>{t.d(l,{G:()=>r});var a=t(9950),s=t(95491),n=t.n(s),i=t(99674),d=t(90650),o=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:s,...r}=e;const[c,u]=(0,a.useState)(!1),[h,v]=(0,a.useState)([]),m=(0,a.useMemo)((()=>n()((e=>{v([]),u(!0),l(e).then((e=>{v(e),u(!1)}))}),t)),[l,t]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),s&&s()},notFoundContent:c?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:h,onFocus:()=>{m("")}})}},48491:(e,l,t)=>{t.r(l),t.d(l,{default:()=>E});var a=t(9950),s=t(12678),n=t(29190),i=t(24513),d=t(44070),o=t(53387),r=t(54909),c=t(80737),u=t(48538),h=t(81541),v=t(23263),m=t(12203),A=t(13564),p=t(22875),x=t(91854),j=t(74623),f=t(70030),g=t(8168),b=t(88986),y=t(69398),C=t(54318),k=t(3855),w=t(8297),I=t(28645),_=t(35116),S=t(12449),z=t(55386),V=t(76083),N=t(64272),$=t(21777),H=t(53271),M=t(13311),B=t(12970),O=t(44414);const{TabPane:R}=r.A,T=["published","deleted_at"],E=()=>{var e,l,t,E,P,F,q;const{t:D}=(0,f.B)(),K=(0,x.wA)(),X=(0,A.Zp)(),[G,U]=(0,a.useState)(null),[Q,Z]=(0,a.useState)(null),{setIsModalVisible:J}=(0,a.useContext)(z.o),[L,W]=(0,a.useState)(!1),{activeMenu:Y}=(0,x.d4)((e=>e.menu),x.bN),{clients:ee,loading:le,meta:te,params:ae}=(0,x.d4)((e=>e.client),x.bN),{isDemo:se}=(0,M.A)(),[ne,ie]=(0,a.useState)(null),[de,oe]=(0,a.useState)(null),[re,ce]=(0,a.useState)(null),[ue,he]=(0,a.useState)("published"),ve=(null===(e=Y.data)||void 0===e?void 0:e.role)||ue,me=Y.data,Ae={sort:null===me||void 0===me?void 0:me.sort,column:null===me||void 0===me?void 0:me.column,perPage:null===me||void 0===me?void 0:me.perPage,page:null===me||void 0===me?void 0:me.page,search:null===me||void 0===me?void 0:me.search,status:"deleted_at"===ve?null:ve||"published",deleted_at:"deleted_at"===ve?ve:null},[pe,xe]=(0,a.useState)([{title:D("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:D("firstname"),dataIndex:"firstname",key:"firstname",is_show:!0},{title:D("lastname"),dataIndex:"lastname",key:"lastname",is_show:!0},{title:D("email"),dataIndex:"email",key:"email",is_show:!0,render:e=>(0,O.jsx)("div",{children:se?(0,B.A)(e):e})},{title:D("role"),dataIndex:"role",key:"role",is_show:!0},{title:D("options"),dataIndex:"options",key:"options",is_show:!0,render:(e,l)=>(0,O.jsxs)(c.A,{children:[(0,O.jsx)(u.A,{disabled:l.deleted_at,icon:(0,O.jsx)(s.A,{}),onClick:()=>(e=>{K((0,j.X4)({url:`users/user/${e.uuid}`,id:"user_info",name:D("user.info")})),X(`/users/user/${e.uuid}`,{state:{user_id:e.id}})})(l)}),(0,O.jsx)(u.A,{icon:(0,O.jsx)(n.A,{}),onClick:()=>ie(l.uuid),disabled:l.deleted_at}),(0,O.jsx)(u.A,{type:"primary",icon:(0,O.jsx)(i.A,{}),onClick:()=>(e=>{K((0,j.X4)({url:`user/${e.uuid}`,id:"user_edit",name:"User edit"})),X(`/user/${e.uuid}`,{state:"user"})})(l),disabled:l.deleted_at}),(0,O.jsx)(h.A,{title:D("change.user.role"),children:(0,O.jsx)(u.A,{disabled:l.deleted_at,onClick:()=>oe(l),icon:(0,O.jsx)(p.aBc,{})})}),(0,O.jsx)(_.A,{disabled:l.deleted_at,icon:(0,O.jsx)(d.A,{}),onClick:()=>{U([l.id]),J(!0),Z(!0)}})]})}]);(0,a.useEffect)((()=>{Y.refetch&&(K((0,k.$3)(Ae)),K((0,j.km)(Y)))}),[Y.refetch]),(0,b.A)((()=>{K((0,k.$3)(Ae))}),[Y.data]);const je=e=>{const l=Y.data;K((0,j.Ok)({activeMenu:Y,data:{...l,...e}}))},fe={selectedRowKeys:G,onChange:e=>{U(e)}};return(0,O.jsxs)(v.A,{title:D("clients"),extra:(0,O.jsxs)(c.A,{wrap:!0,children:["deleted_at"!==(null===(l=Y.data)||void 0===l?void 0:l.role)?(0,O.jsxs)(c.A,{children:[(0,O.jsx)(u.A,{type:"primary",icon:(0,O.jsx)(o.A,{}),onClick:()=>{K((0,j.X4)({id:"user-add",url:"user/add",name:D("add.client")})),X("/user/add")},children:D("add.client")}),(0,O.jsx)(_.A,{size:"",onClick:()=>{null===G||0===G.length?S.oR.warning(D("select.the.product")):(J(!0),Z(!1))},children:D("delete.selected")}),(0,O.jsx)(_.A,{onClick:()=>ce({delete:!0}),children:D("delete.all")})]}):(0,O.jsx)(_.A,{icon:(0,O.jsx)(p.DQ9,{className:"mr-2"}),onClick:()=>ce({restore:!0}),children:D("restore.all")}),(0,O.jsx)(I.A,{columns:pe,setColumns:xe})]}),children:[(0,O.jsx)("div",{className:"d-flex justify-content-between",children:(0,O.jsx)(w.A,{placeholder:D("search"),className:"w-25",handleChange:e=>je({search:e}),defaultValue:null===(t=Y.data)||void 0===t?void 0:t.search,resetSearch:!(null!==(E=Y.data)&&void 0!==E&&E.search)})}),(0,O.jsx)(r.A,{className:"mt-3",scroll:{x:!0},activeKey:ve,onChange:e=>{je({role:e,page:1}),he(e)},type:"card",children:T.map((e=>(0,O.jsx)(R,{tab:D(e)},e)))}),(0,O.jsx)(m.A,{scroll:{x:!0},rowSelection:fe,columns:null===pe||void 0===pe?void 0:pe.filter((e=>e.is_show)),dataSource:ee,loading:le,pagination:{pageSize:ae.perPage,page:(null===(P=Y.data)||void 0===P?void 0:P.page)||1,total:te.total,defaultCurrent:null===(F=Y.data)||void 0===F?void 0:F.page,current:null===(q=Y.data)||void 0===q?void 0:q.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:a,current:s}=e,{field:n,order:i}=t,d=(0,g.A)(i);K((0,j.Ok)({activeMenu:Y,data:{...Y.data,perPage:a,page:s,column:n,sort:d}}))}}),(0,O.jsx)(V.A,{click:()=>{W(!0);const e={...Object.assign({},...G.map(((e,l)=>({[`ids[${l}]`]:e}))))};N.A.delete(e).then((()=>{S.oR.success(D("successfully.deleted")),K((0,k.$3)(Ae)),J(!1),Z([])})).finally((()=>{U(null),W(!1)}))},text:D(Q?"delete":"all.delete"),loading:L,setText:U}),ne&&(0,O.jsx)(y.A,{uuid:ne,handleCancel:()=>ie(null)}),de&&(0,O.jsx)(C.A,{data:de,handleCancel:()=>oe(null)}),re&&(0,O.jsx)($.A,{open:re,handleCancel:()=>ce(null),click:re.restore?()=>{W(!0),H.A.restoreAll().then((()=>{S.oR.success(D("successfully.restored")),K((0,k.$3)(Ae)),ce(null)})).finally((()=>W(!1)))}:()=>{W(!0),H.A.dropAll().then((()=>{S.oR.success(D("successfully.deleted")),K((0,k.$3)()),ce(null)})).finally((()=>W(!1)))},text:re.restore?D("restore.modal.text"):D("read.carefully"),subTitle:re.restore?"":D("confirm.deletion"),loading:L,setText:Z})]})}},53387:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(89379),s=t(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:n}))};d.displayName="PlusCircleOutlined";const o=s.forwardRef(d)},53774:(e,l,t)=>{t.d(l,{A:()=>s});var a=t(83291);function s(){var e,l;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const i=null===(e=a.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,d=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=s||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(n||(null===i||void 0===i?void 0:i.position)||"before")?`${d} ${o}`:`${o} ${d}`}},54318:(e,l,t)=>{t.d(l,{A:()=>x});var a=t(9950),s=t(3969),n=t(32645),i=t(48538),d=t(99674),o=t(53271),r=t(91854),c=t(39539),u=t(12449),h=t(70030),v=t(3855),m=t(47992),A=t(58547),p=t(44414);function x(e){let{data:l,handleCancel:t}=e;const{t:x}=(0,h.B)(),[j]=s.A.useForm(),f=(0,r.wA)(),[g,b]=(0,a.useState)(!1),[y,C]=(0,a.useState)(l.role),{user:k}=(0,r.d4)((e=>e.auth),r.bN),w=[{label:x("user"),value:"user",key:1},{label:x("manager"),value:"manager",key:2},{label:x("moderator"),value:"moderator",key:3}],I=[{label:x("user"),value:"user",key:4},{label:x("moderator"),value:"moderator",key:5}];return(0,p.jsx)(n.A,{visible:!!l,title:x("change.user.role"),onCancel:t,footer:[(0,p.jsx)(i.A,{type:"primary",onClick:()=>j.submit(),loading:g,children:x("save")}),(0,p.jsx)(i.A,{type:"default",onClick:t,children:x("cancel")})],children:(0,p.jsxs)(s.A,{layout:"vertical",name:"user-role",form:j,onFinish:e=>{!function(e,a){b(!0),o.A.updateRole(e,{role:a}).then((()=>{u.oR.success(x("successfully.updated")),"user"===l.role?f((0,v.$3)()):f((0,c.hU)({role:l.role})),t()})).finally((()=>b(!1)))}(l.uuid,e.role)},initialValues:l,children:[(0,p.jsx)(s.A.Item,{name:"role",label:x("role"),rules:[{required:!0,message:x("required")}],children:(0,p.jsx)(d.A,{className:"w-100",options:"manager"===k.role?I:w,onChange:e=>C(e)})}),"manager"!==y&&"user"!==y?(0,p.jsx)(s.A.Item,{label:x("shop"),name:"shop_id",rules:[{required:!0,message:x("required")}],children:(0,p.jsx)(m.G,{className:"w-100",placeholder:x("select.shop"),fetchOptions:async function(e){const l={search:e,status:"approved"};return A.A.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))},allowClear:!1})}):void 0]})})}},69398:(e,l,t)=>{t.d(l,{A:()=>f});var a=t(9950),s=t(32645),n=t(48538),i=t(87094),d=t(41988),o=t(91524),r=t(20978),c=t(53271),u=t(69554),h=t(70030),v=t(81446),m=t(91854),A=t(53774),p=t(13311),x=t(12970),j=t(44414);function f(e){var l,t,f;let{uuid:g,handleCancel:b}=e;const[y,C]=(0,a.useState)({}),[k,w]=(0,a.useState)(!1),{t:I}=(0,h.B)(),{defaultCurrency:_}=(0,m.d4)((e=>e.currency),m.bN),{isDemo:S}=(0,p.A)();return(0,a.useEffect)((()=>{!function(e){w(!0),c.A.getById(e).then((e=>C(e.data))).finally((()=>w(!1)))}(g)}),[g]),(0,j.jsx)(s.A,{visible:!!g,title:I("user"),onCancel:b,footer:[(0,j.jsx)(n.A,{type:"default",onClick:b,children:I("cancel")},"cancel")],className:y.shop?"large-modal":"",children:k?(0,j.jsx)(v.A,{}):(0,j.jsxs)(i.A,{gutter:24,children:[(0,j.jsx)(d.A,{span:y.shop?12:24,children:(0,j.jsxs)(o.A,{bordered:!0,children:[(0,j.jsx)(o.A.Item,{span:3,label:I("avatar"),children:(0,j.jsx)(r.A,{src:(0,u.A)(y.img),alt:y.firstname,width:80,className:"rounded"})}),(0,j.jsx)(o.A.Item,{span:3,label:I("user.id"),children:y.id}),(0,j.jsxs)(o.A.Item,{span:3,label:I("name"),children:[y.firstname," ",y.lastname||""]}),(0,j.jsx)(o.A.Item,{span:3,label:I("gender"),children:y.gender}),(0,j.jsx)(o.A.Item,{span:3,label:I("birthday"),children:y.birthday}),(0,j.jsx)(o.A.Item,{span:3,label:I("email"),children:S?(0,x.A)(null===y||void 0===y?void 0:y.email):null===y||void 0===y?void 0:y.email}),(0,j.jsx)(o.A.Item,{span:3,label:I("phone"),children:S?"":y.phone}),(0,j.jsx)(o.A.Item,{span:3,label:I("role"),children:y.role}),(0,j.jsx)(o.A.Item,{span:3,label:I("wallet"),children:(0,A.A)(null===(l=y.wallet)||void 0===l?void 0:l.price,null===_||void 0===_?void 0:_.symbol)})]})}),y.shop?(0,j.jsx)(d.A,{span:12,children:(0,j.jsxs)(o.A,{bordered:!0,children:[(0,j.jsx)(o.A.Item,{span:3,label:I("shop.id"),children:y.shop.id}),(0,j.jsx)(o.A.Item,{span:3,label:I("shop.name"),children:null===(t=y.shop.translation)||void 0===t?void 0:t.title}),(0,j.jsx)(o.A.Item,{span:3,label:I("shop.logo"),children:(0,j.jsx)("img",{src:(0,u.A)(y.shop.logo_img),alt:null===(f=y.shop.translation)||void 0===f?void 0:f.title,width:100,className:"rounded"})}),(0,j.jsx)(o.A.Item,{span:3,label:I("shop.phone"),children:y.shop.phone}),(0,j.jsxs)(o.A.Item,{span:3,label:I("shop.open_close.time"),children:[y.shop.open_time," - ",y.shop.close_time]}),(0,j.jsx)(o.A.Item,{span:3,label:I("delivery.range"),children:y.shop.delivery_range})]})}):""]})})}},89323:(e,l,t)=>{t.d(l,{A:()=>o});var a=t(89379),s=t(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,a.A)((0,a.A)({},e),{},{ref:l,icon:n}))};d.displayName="TableOutlined";const o=s.forwardRef(d)}}]);