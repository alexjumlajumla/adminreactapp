"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[1734],{1201:(e,t,l)=>{l.d(t,{A:()=>r});l(9950);var a=l(70030),n=l(88542);const i=l.p+"static/media/noproductsfound.1cec73868b5fd048b865.riv",s=l.p+"static/media/noresult.ac4af107751f94856a9c.riv",d=l.p+"static/media/nosell.32cb2c2cc548a15c820d.riv";var o=l(44414);const r=function(e){let{id:t="noresult",text:l=""}=e;const{t:r}=(0,a.B)(),c={src:{noproductsfound:i,noresult:s,nosell:d}[t],artboard:"New Artboard",autoplay:!0},{RiveComponent:u}=(0,n.useRive)(c);return(0,o.jsxs)("div",{className:"animation-canvas",children:[(0,o.jsx)("div",{style:{width:"100%",height:200},children:(0,o.jsx)(u,{})}),(0,o.jsx)("div",{className:"text text-center",children:r(l)})]})}},8168:(e,t,l)=>{function a(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}l.d(t,{A:()=>a})},8297:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(9950),n=l(55902),i=l(41397),s=l(60767),d=l(44414);function o(e){let{handleChange:t,defaultValue:l,resetSearch:o,...r}=e;const[c,u]=(0,a.useState)(l),v=(0,a.useMemo)((()=>(0,i.debounce)((e=>{t(e)}),800)),[t]);return(0,a.useEffect)((()=>{u(l)}),[o,l]),(0,d.jsx)(n.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(s.A,{}),...r})}},13700:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(89379),n=l(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var s=l(25085),d=function(e,t){return n.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:i}))};d.displayName="ClearOutlined";const o=n.forwardRef(d)},28645:(e,t,l)=>{l.d(t,{A:()=>x});var a=l(9950),n=l(66362),i=l(69216),s=l(80737),d=l(25933),o=l(57811),r=l(81541),c=l(48538),u=l(89323),v=l(70030),h=l(44414);const{Text:m}=n.A,x=e=>{let{columns:t=[],setColumns:l,style:n,size:x="",iconOnly:p}=e;const{t:A}=(0,v.B)(),[f,g]=(0,a.useState)(!1),j=(0,h.jsx)(i.A,{children:null===t||void 0===t?void 0:t.map(((e,a)=>(0,h.jsx)(i.A.Item,{children:(0,h.jsxs)(s.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const a=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));l(a)}(e),disabled:1===a})]})},e+a)))});return(0,h.jsx)(o.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:f,children:(0,h.jsx)(r.A,{title:A("change.columns"),children:(0,h.jsx)(c.A,{style:{...n},size:x,icon:(0,h.jsx)(u.A,{}),children:p?null:A("Columns")})})})}},47992:(e,t,l)=>{l.d(t,{G:()=>r});var a=l(9950),n=l(95491),i=l.n(n),s=l(99674),d=l(90650),o=l(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:l=400,onClear:n,...r}=e;const[c,u]=(0,a.useState)(!1),[v,h]=(0,a.useState)([]),m=(0,a.useMemo)((()=>i()((e=>{h([]),u(!0),t(e).then((e=>{h(e),u(!1)}))}),l)),[t,l]);return(0,o.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),n&&n()},notFoundContent:c?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},53774:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(83291);function n(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const s=null===(e=a.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,d=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=n||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(i||(null===s||void 0===s?void 0:s.position)||"before")?`${d} ${o}`:`${o} ${d}`}},58127:(e,t,l)=>{l.d(t,{A:()=>x});var a=l(9950),n=l(3969),i=l(32645),s=l(48538),d=l(87094),o=l(41988),r=l(99674),c=l(91854),u=l(82249),v=l(74623),h=l(70030),m=l(44414);function x(e){var t;let{orderDetails:l,handleCancel:x}=e;const{t:p}=(0,h.B)(),{activeMenu:A}=(0,c.d4)((e=>e.menu),c.bN),{deliverymans:f}=(0,c.d4)((e=>e.deliveryman),c.bN),[g]=n.A.useForm(),j=(0,c.wA)(),[b,y]=(0,a.useState)(!1);return(0,m.jsx)(i.A,{visible:!!l,title:l.title,onCancel:x,footer:[(0,m.jsx)(s.A,{type:"primary",onClick:()=>g.submit(),loading:b,children:p("save")}),(0,m.jsx)(s.A,{type:"default",onClick:x,children:p("cancel")})],children:(0,m.jsx)(n.A,{form:g,layout:"vertical",onFinish:e=>{const t={...e};y(!0),u.A.updateDelivery(l.id,t).then((()=>{x(),j((0,v.Ms)(A))})).finally((()=>y(!1)))},initialValues:{deliveryman:null===(t=l.deliveryman)||void 0===t?void 0:t.id},children:(0,m.jsx)(d.A,{gutter:12,children:(0,m.jsx)(o.A,{span:24,children:(0,m.jsx)(n.A.Item,{label:p("deliveryman"),name:"deliveryman",rules:[{required:!0,message:p("required")}],children:(0,m.jsx)(r.A,{children:f.map(((e,t)=>(0,m.jsxs)(r.A.Option,{value:e.id,className:"d-block",children:[e.firstname," ",e.lastname||""]},e.id)))})})})})})})}},59337:(e,t,l)=>{l.r(t),l.d(t,{default:()=>I});var a=l(9950),n=l(12916),i=l(80737),s=l(48538),d=l(81541),o=l(23263),r=l(12203),c=l(13564),u=l(12678),v=l(8750),h=l(13700),m=l(91854),x=l(74623),p=l(55386),A=l(12449),f=l(70030),g=l(14928),j=l(88986),b=l(8168),y=l(8297),w=l(53774),_=l(28645),C=l(76083),k=l(82249),V=l(58127),S=l(1201),H=l(47992),z=l(82371);const M={getAllRestTables:e=>z.A.get("rest/booking/tables",{params:e})};var N=l(44414);function I(){var e,t,l,z,I,O;const $=(0,m.wA)(),R=(0,c.Zp)(),{t:T}=(0,f.B)(),[G,B]=(0,a.useState)(null),[F,P]=(0,a.useState)(null),{setIsModalVisible:D}=(0,a.useContext)(p.o),[E,q]=(0,a.useState)(!1),[K,W]=(0,a.useState)(!1),{defaultCurrency:X}=(0,m.d4)((e=>e.currency),m.bN),[Z,J]=(0,a.useState)(null),[L,Q]=(0,a.useState)([{title:T("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:T("table"),dataIndex:"table",key:"table",is_show:!0,render:e=>(0,N.jsx)("div",{children:null===e||void 0===e?void 0:e.name})},{title:T("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,N.jsx)("div",{children:"new"===e?(0,N.jsx)(n.A,{color:"blue",children:T(e)}):"canceled"===e?(0,N.jsx)(n.A,{color:"error",children:T(e)}):(0,N.jsx)(n.A,{color:"cyan",children:T(e)})})},{title:T("products"),dataIndex:"order_details_count",key:"order_details_count",is_show:!0,render:e=>(0,N.jsxs)("div",{className:"text-lowercase",children:[e||0," ",T("products")]})},{title:T("amount"),dataIndex:"total_price",key:"total_price",is_show:!0,render:e=>(0,w.A)(e,null===X||void 0===X?void 0:X.symbol)},{title:T("payment.type"),dataIndex:"transaction",key:"transaction",is_show:!0,render:e=>{var t;return T(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:T("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:T("options"),key:"options",is_show:!0,render:(e,t)=>(0,N.jsxs)(i.A,{children:[(0,N.jsx)(s.A,{icon:(0,N.jsx)(u.A,{}),onClick:()=>(e=>{$((0,x.X4)({url:`waiter/order/details/${e.id}`,id:"order_details",name:T("order.details")})),R(`/waiter/order/details/${e.id}`)})(t)}),(0,N.jsx)(d.A,{title:T("assign.to.me"),children:(0,N.jsx)(s.A,{onClick:()=>(e=>{q(!0),k.A.attachToMe(e).then((()=>{$((0,g.Gb)(ne))})).finally((()=>{q(!1)}))})(t.id),type:"primary",icon:(0,N.jsx)(v.A,{})})})]})}]),{activeMenu:U}=(0,m.d4)((e=>e.menu),m.bN),{orders:Y,meta:ee,loading:te,params:le}=(0,m.d4)((e=>e.waiterOrder),m.bN),ae=null===U||void 0===U?void 0:U.data,ne={search:null===ae||void 0===ae?void 0:ae.search,sort:null===ae||void 0===ae?void 0:ae.sort,column:null===ae||void 0===ae?void 0:ae.column,perPage:null===ae||void 0===ae?void 0:ae.perPage,page:null===ae||void 0===ae?void 0:ae.page,user_id:null===ae||void 0===ae?void 0:ae.user_id,table_id:null===ae||void 0===ae?void 0:ae.table_id,shop_id:null!==(null===(e=U.data)||void 0===e?void 0:e.shop_id)?null===(t=U.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"dine_in","empty-waiter":1,status:"new"};(0,j.A)((()=>{$((0,g.Gb)(ne))}),[null===U||void 0===U?void 0:U.data]),(0,a.useEffect)((()=>{null!==U&&void 0!==U&&U.refetch&&($((0,g.Gb)(ne)),$((0,x.km)(U)))}),[null===U||void 0===U?void 0:U.refetch]);const ie=(e,t)=>{$((0,x.Ok)({activeMenu:U,data:{...ae,[t]:e}}))},se={selectedRowKeys:G,onChange:e=>{B(e)}};return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(o.A,{children:(0,N.jsxs)(i.A,{wrap:!0,className:"p-0 mb-0",children:[(0,N.jsx)(y.A,{placeholder:T("search"),handleChange:e=>ie(e,"search"),defaultValue:null===(l=U.data)||void 0===l?void 0:l.search}),(0,N.jsx)(H.G,{placeholder:T("select.table"),fetchOptions:async function(e){const t={search:e,perPage:10};return M.getAllRestTables(t).then((e=>{let{data:t}=e;return t.map((e=>({label:e.name,value:e.id})))}))},onSelect:e=>ie(e.value,"table_id"),onDeselect:()=>ie(null,"table_id"),style:{minWidth:200}}),(0,N.jsx)(s.A,{icon:(0,N.jsx)(h.A,{}),onClick:()=>{(0,m.vA)((()=>{$((0,g.gw)()),$((0,x.Ok)({activeMenu:U,data:null}))})),$((0,g.Gb)({status:"all",page:null===ae||void 0===ae?void 0:ae.page,perPage:10}))},children:T("clear")}),(0,N.jsx)(_.A,{columns:L,setColumns:Q})]})}),(0,N.jsxs)(o.A,{children:[(0,N.jsx)(r.A,{locale:{emptyText:(0,N.jsx)(S.A,{})},scroll:{x:!0},rowSelection:se,columns:null===L||void 0===L?void 0:L.filter((e=>e.is_show)),dataSource:Y,loading:te||E,pagination:{pageSize:le.perPage,page:(null===(z=U.data)||void 0===z?void 0:z.page)||1,total:null===ee||void 0===ee?void 0:ee.total,defaultCurrent:null===(I=U.data)||void 0===I?void 0:I.page,current:null===(O=U.data)||void 0===O?void 0:O.page},rowKey:e=>e.id,onChange:function(e,t,l){const{pageSize:a,current:n}=e,{field:i,order:s}=l,d=(0,b.A)(s);$((0,x.Ok)({activeMenu:U,data:{...ae,perPage:a,page:n,column:i,sort:d}}))}}),(0,N.jsx)(C.A,{click:()=>{W(!0);const e={...Object.assign({},...G.map(((e,t)=>({[`ids[${t}]`]:e}))))};k.A.delete(e).then((()=>{A.oR.success(T("successfully.deleted")),D(!1),$((0,g.Gb)(ne)),P(null)})).finally((()=>W(!1)))},text:T(F?"delete":"all.delete"),loading:K,setText:B})]}),Z&&(0,N.jsx)(V.A,{orderDetails:Z,handleCancel:()=>{J(null)}})]})}},89323:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(89379),n=l(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var s=l(25085),d=function(e,t){return n.createElement(s.A,(0,a.A)((0,a.A)({},e),{},{ref:t,icon:i}))};d.displayName="TableOutlined";const o=n.forwardRef(d)}}]);