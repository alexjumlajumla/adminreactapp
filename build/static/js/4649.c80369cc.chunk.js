(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4649],{8168:(e,l,t)=>{"use strict";function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(l,{A:()=>n})},8297:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});var n=t(9950),s=t(55902),a=t(41397),i=t(60767),d=t(44414);function o(e){let{handleChange:l,defaultValue:t,resetSearch:o,...r}=e;const[c,u]=(0,n.useState)(t),v=(0,n.useMemo)((()=>(0,a.debounce)((e=>{l(e)}),800)),[l]);return(0,n.useEffect)((()=>{u(t)}),[o,t]),(0,d.jsx)(s.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,d.jsx)(i.A,{}),...r})}},13700:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});var n=t(89379),s=t(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:a}))};d.displayName="ClearOutlined";const o=s.forwardRef(d)},21777:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});t(9950);var n=t(32645),s=t(32312),a=t(48538),i=t(70030),d=t(44414);const o=e=>{let{open:l,handleCancel:t,text:o,click:r,loading:c,subTitle:u}=e;const{t:v}=(0,i.B)();return(0,d.jsxs)(n.A,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,d.jsx)(s.Ay,{status:"warning",title:o,subTitle:u}),(0,d.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,d.jsx)(a.A,{type:"primary",className:"mr-2",onClick:r,loading:c,children:v("yes")}),(0,d.jsx)(a.A,{onClick:()=>t(),children:v("no")})]})]})}},25860:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>Ie});var n=t(9950),s=t(54909),a=t(87864),i=t(12916),d=t(48538),o=t(80737),r=t(69216),c=t(23263),u=t(81541),v=t(57811),h=t(12203),m=t(13564),x=t(24513),p=t(12678),j=t(44070),A=t(53387),f=t(13700),g=t(91854),y=t(74623),b=t(70030),_=t(88986),C=t(53177),w=t(33824),k=t(8168),S=t(8297),I=t(51242),M=t(47992),z=t(53271),H=t(28645),N=t(12449),V=t(35116),D=t(19689),B=t(55386),Y=t(76083),$=t(59051),O=t.n($),P=t(63620),R=t(52423),F=t(22875),T=t(14382),E=t(21777),G=t(65820),L=t(13311);function q(e){return e?O()(e).format("DD-MM-YYYY, HH:mm"):""}function K(e){return e?O()(e).format("DD-MM-YYYY"):""}var U=t(3969),Z=t(32645),W=t(87094),X=t(41988),Q=t(99674),J=t(44414);function ee(e){let{orderDetails:l,handleCancel:t,status:s}=e;const{activeMenu:a}=(0,g.d4)((e=>e.menu),g.bN),[i]=U.A.useForm(),o=(0,g.wA)(),{t:r}=(0,b.B)(),[c,u]=(0,n.useState)(!1),[v,h]=(0,n.useState)(s);(0,n.useEffect)((()=>{const e=s.findIndex((e=>e.name===l.status));let t=[s[e],s[e+1],{name:"canceled",id:8,active:!0}];e<0&&(t=[s[e+1],"canceled"]),h(t)}),[l]);return(0,J.jsx)(Z.A,{visible:!!l,title:l.title,onCancel:t,footer:[(0,J.jsx)(d.A,{type:"primary",onClick:()=>i.submit(),loading:c,children:r("save")},"save-form"),(0,J.jsx)(d.A,{type:"default",onClick:t,children:r("cancel")},"cansel-modal")],children:(0,J.jsx)(U.A,{form:i,layout:"vertical",onFinish:e=>{u(!0);const n={...e};D.A.updateStatus(l.id,n).then((()=>{t(),o((0,y.Ms)(a))})).finally((()=>u(!1)))},initialValues:{status:l.status},children:(0,J.jsx)(W.A,{gutter:12,children:(0,J.jsx)(X.A,{span:24,children:(0,J.jsx)(U.A.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,J.jsx)(Q.A,{children:null===v||void 0===v?void 0:v.map((e=>(0,J.jsx)(Q.A.Option,{value:null===e||void 0===e?void 0:e.name,children:r(null===e||void 0===e?void 0:e.name)},null===e||void 0===e?void 0:e.name)))})})})})})})}const le=[{name:"new",id:"1",active:!0},{name:"accepted",id:"2",active:!0},{name:"ready",id:"3",active:!0},{name:"on_a_way",id:"4",active:!0},{name:"delivered",id:"5",active:!0},{name:"canceled",id:"6",active:!0}];var te=t(86366),ne=t(12403),se=t(81446),ae=t(29949),ie=t(41478),de=t(73631),oe=t(29597),re=t(47965),ce=t(89379);const ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm376 116c-119.3 0-216 96.7-216 216s96.7 216 216 216 216-96.7 216-216-96.7-216-216-216zm107.5 323.5C750.8 868.2 712.6 884 672 884s-78.8-15.8-107.5-44.5C535.8 810.8 520 772.6 520 732s15.8-78.8 44.5-107.5C593.2 595.8 631.4 580 672 580s78.8 15.8 107.5 44.5C808.2 653.2 824 691.4 824 732s-15.8 78.8-44.5 107.5zM761 656h-44.3c-2.6 0-5 1.2-6.5 3.3l-63.5 87.8-23.1-31.9a7.92 7.92 0 00-6.5-3.3H573c-6.5 0-10.3 7.4-6.5 12.7l73.8 102.1c3.2 4.4 9.7 4.4 12.9 0l114.2-158c3.9-5.3.1-12.7-6.4-12.7zM440 852H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"file-done",theme:"outlined"};var ve=t(25085),he=function(e,l){return n.createElement(ve.A,(0,ce.A)((0,ce.A)({},e),{},{ref:l,icon:ue}))};he.displayName="FileDoneOutlined";const me=n.forwardRef(he);var xe=t(25495),pe=t(38310);const{Step:je}=te.A,Ae=()=>(0,J.jsx)("img",{src:ie,width:"50",alt:"Pin"}),fe=()=>(0,J.jsx)("img",{src:de,width:"50",alt:"Pin"}),ge=["blue","red","gold","volcano","cyan","lime"],ye=e=>{var l,t,s,a,o,r;let{id:u,handleCancel:v}=e;const{t:h}=(0,b.B)(),[m,x]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),[A,f]=(0,n.useState)(null),{settings:y}=(0,g.d4)((e=>e.globalSettings),g.bN),_=(0,oe.A)(y),[C,w]=(0,n.useState)(0),[k,S]=(0,n.useState)((0,oe.A)(y)),[I,M]=(0,n.useState)((0,oe.A)(y)),[z,H]=(0,n.useState)([{id:0,name:"new",icon:(0,J.jsx)(re.A,{})},{id:1,name:"accepted",icon:(0,J.jsx)(me,{})},{id:3,name:"ready",icon:(0,J.jsx)(ae.LW,{})},{id:4,name:"on_a_way",icon:(0,J.jsx)(ae.vBC,{})},{id:5,name:"delivered",icon:(0,J.jsx)(xe.eDZ,{})}]);const{google_map_key:N}=(0,g.d4)((e=>e.globalSettings.settings),g.bN);(0,n.useEffect)((()=>{x(!0),D.A.getById(u).then((e=>{var l;let{data:t}=e;H("canceled"===t.status?[{id:1,name:"new",icon:(0,J.jsx)(re.A,{})},{id:5,name:"canceled",icon:(0,J.jsx)(pe.XfH,{})}]:z),w("canceled"===t.status?1:null===(l=z.find((e=>e.name===t.status)))||void 0===l?void 0:l.id),f("canceled"===t.status?"error":"success"),j(t),M({lat:t.address_from.latitude,lng:t.address_from.longitude}),S({lat:t.address_to.latitude,lng:t.address_to.longitude})})).finally((()=>{x(!1)}))}),[]);return(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(Z.A,{visible:!!u,title:h("show.locations"),onCancel:()=>v(),style:{minWidth:"80vw"},footer:[(0,J.jsx)(d.A,{type:"default",onClick:v,children:h("cancel")},"cancelBtn")],children:m?(0,J.jsx)(se.A,{}):(0,J.jsxs)(c.A,{children:[(0,J.jsx)(te.A,{current:C,status:A,className:"mb-5",children:null===z||void 0===z?void 0:z.map(((e,l)=>(0,J.jsx)(je,{title:h(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+l)))}),(0,J.jsxs)(W.A,{gutter:12,children:[(0,J.jsxs)(X.A,{span:12,children:[(0,J.jsxs)("h3",{children:[h("order.id")," #",null===p||void 0===p?void 0:p.id]}),(0,J.jsxs)("p",{children:[(0,J.jsx)(ae.A5h,{})," ",q(null===p||void 0===p?void 0:p.created_at)]}),(0,J.jsxs)("p",{children:[h("schedulet.at")," ",K(null===p||void 0===p?void 0:p.delivery_date)]}),(0,J.jsxs)("span",{children:[(0,J.jsx)("strong",{children:null===p||void 0===p||null===(l=p.shop)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title})," ",null===p||void 0===p||null===(s=p.details)||void 0===s?void 0:s.map(((e,l)=>{var t;return(0,J.jsx)(i.A,{color:ge[l],children:null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.product.translation.title})}))]})]}),(0,J.jsxs)(X.A,{span:12,children:[(0,J.jsxs)("p",{children:[h("status"),": ","new"===(null===p||void 0===p?void 0:p.status)?(0,J.jsx)(i.A,{color:"blue",children:h(null===p||void 0===p?void 0:p.status)}):"canceled"===(null===p||void 0===p?void 0:p.status)?(0,J.jsx)(i.A,{color:"error",children:h(null===p||void 0===p?void 0:p.status)}):(0,J.jsx)(i.A,{color:"cyan",children:h(null===p||void 0===p?void 0:p.status)})]}),(0,J.jsxs)("p",{children:[h("order.type"),": ",(0,J.jsx)("strong",{children:h("parcel")})]}),(0,J.jsxs)("p",{children:[h("payment.method"),": ",(0,J.jsx)("strong",{children:null===p||void 0===p||null===(a=p.transaction)||void 0===a||null===(o=a.payment_system)||void 0===o?void 0:o.tag})]}),(0,J.jsxs)("p",{children:[h("payment.status"),": ",(0,J.jsx)("strong",{children:null===p||void 0===p||null===(r=p.transaction)||void 0===r?void 0:r.status})]})]}),(0,J.jsxs)(X.A,{span:24,className:"mt-5",children:[(0,J.jsx)("h4",{children:h("map")}),(0,J.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,J.jsxs)(ne.Ay,{bootstrapURLKeys:{key:P.CJ||N},defaultZoom:15,center:_,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:l,maps:t}=e;const n=[k,I].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let s=new t.LatLngBounds;for(var a=0;a<n.length;a++)s.extend(n[a]);l.fitBounds(s)},children:[(0,J.jsx)(fe,{lat:null===k||void 0===k?void 0:k.lat,lng:null===k||void 0===k?void 0:k.lng}),(0,J.jsx)(Ae,{lat:null===I||void 0===I?void 0:I.lat,lng:null===I||void 0===I?void 0:I.lng})]})})]})]})]})})})};var be=t(91524),_e=t(53774);const Ce=e=>{var l,t,s,a,i,o,r,c,u,v;let{id:h,handleCancel:m}=e;const{t:x}=(0,b.B)(),[p,j]=(0,n.useState)(null),[A,f]=(0,n.useState)(null);return(0,n.useEffect)((()=>{j(!0),D.A.getById(h).then((e=>{let{data:l}=e;f(l)})).finally((()=>{j(!1)}))}),[]),(0,J.jsx)(J.Fragment,{children:(0,J.jsx)(Z.A,{visible:!!h,title:`${x("parcel.id")} #${h}`,onCancel:()=>m(),footer:[(0,J.jsx)(d.A,{type:"default",onClick:m,children:x("cancel")},"cancelBtn")],className:"large-modal",children:p?(0,J.jsx)(se.A,{}):(0,J.jsxs)(W.A,{gutter:24,children:[(0,J.jsx)(X.A,{span:12,children:(0,J.jsxs)(be.A,{title:x("sender.details"),bordered:!0,children:[(0,J.jsx)(be.A.Item,{label:x("username"),span:3,children:null===A||void 0===A?void 0:A.username_from}),(0,J.jsx)(be.A.Item,{label:x("phone"),span:3,children:null===A||void 0===A?void 0:A.phone_from}),(0,J.jsx)(be.A.Item,{label:x("address"),span:3,children:null===A||void 0===A||null===(l=A.address_from)||void 0===l?void 0:l.address}),(0,J.jsx)(be.A.Item,{label:x("house"),span:3,children:null===A||void 0===A||null===(t=A.address_from)||void 0===t?void 0:t.house}),(0,J.jsx)(be.A.Item,{label:x("stage"),span:3,children:null===A||void 0===A||null===(s=A.address_from)||void 0===s?void 0:s.stage}),(0,J.jsx)(be.A.Item,{label:x("room"),span:3,children:null===A||void 0===A||null===(a=A.address_from)||void 0===a?void 0:a.room})]})}),(0,J.jsx)(X.A,{span:12,children:(0,J.jsxs)(be.A,{title:x("receiver.details"),bordered:!0,children:[(0,J.jsx)(be.A.Item,{label:x("username"),span:3,children:null===A||void 0===A?void 0:A.username_to}),(0,J.jsx)(be.A.Item,{label:x("phone"),span:3,children:null===A||void 0===A?void 0:A.phone_to}),(0,J.jsx)(be.A.Item,{label:x("address"),span:3,children:null===A||void 0===A||null===(i=A.address_to)||void 0===i?void 0:i.address}),(0,J.jsx)(be.A.Item,{label:x("house"),span:3,children:null===A||void 0===A||null===(o=A.address_to)||void 0===o?void 0:o.house}),(0,J.jsx)(be.A.Item,{label:x("stage"),span:3,children:null===A||void 0===A||null===(r=A.address_to)||void 0===r?void 0:r.stage}),(0,J.jsx)(be.A.Item,{label:x("room"),span:3,children:null===A||void 0===A||null===(c=A.address_to)||void 0===c?void 0:c.room})]})}),(0,J.jsx)(X.A,{span:24,children:(0,J.jsxs)(be.A,{bordered:!0,className:"mt-4",children:[(0,J.jsxs)(be.A.Item,{label:x("client"),span:3,children:[null===A||void 0===A||null===(u=A.user)||void 0===u?void 0:u.firstname," ",null===A||void 0===A||null===(v=A.user)||void 0===v?void 0:v.lastname]}),(0,J.jsx)(be.A.Item,{label:x("delivery.date.&.time"),span:3,children:q(`${null===A||void 0===A?void 0:A.delivery_date} ${null===A||void 0===A?void 0:A.delivery_time}`)}),(0,J.jsx)(be.A.Item,{label:x("price"),span:3,children:(0,_e.A)(null===A||void 0===A?void 0:A.total_price)}),(0,J.jsx)(be.A.Item,{label:x("created.at"),span:3,children:q(null===A||void 0===A?void 0:A.createdAt)}),(0,J.jsx)(be.A.Item,{label:x("note"),span:3,children:null===A||void 0===A?void 0:A.note})]})})]})})})};function we(e){var l,t,s;let{orderDetails:a,handleCancel:i}=e;const{t:o}=(0,b.B)(),{activeMenu:r}=(0,g.d4)((e=>e.menu),g.bN),[c]=U.A.useForm(),u=(0,g.wA)(),[v,h]=(0,n.useState)(!1);return(0,J.jsx)(Z.A,{visible:!!a,onCancel:i,footer:[(0,J.jsx)(d.A,{type:"primary",onClick:()=>c.submit(),loading:v,children:o("save")},"saveBtn"),(0,J.jsx)(d.A,{type:"default",onClick:i,children:o("cancel")},"cancelBtn")],children:(0,J.jsx)(U.A,{form:c,layout:"vertical",onFinish:e=>{const l={deliveryman_id:e.deliveryman.value};h(!0),D.A.updateDelivery(a.id,l).then((()=>{i(),u((0,y.Ms)(r))})).finally((()=>h(!1)))},initialValues:{deliveryman:{label:a.deliveryman?(null===a||void 0===a||null===(l=a.deliveryman)||void 0===l?void 0:l.firstname)+" "+(null===a||void 0===a||null===(t=a.deliveryman)||void 0===t?void 0:t.lastname):null,value:a.deliveryman?null===a||void 0===a||null===(s=a.deliveryman)||void 0===s?void 0:s.id:null}},children:(0,J.jsx)(W.A,{gutter:12,children:(0,J.jsx)(X.A,{span:24,children:(0,J.jsx)(U.A.Item,{label:o("deliveryman"),name:"deliveryman",rules:[{required:!0,message:o("required")}],children:(0,J.jsx)(M.G,{className:"w-100",debounceTimeout:500,placeholder:o("select.shop"),fetchOptions:async function(e){const l={search:e.length?e:void 0,page:1,perPage:10,role:"deliveryman",exist_token:1};return z.A.getAll(l).then((e=>{let{data:l}=e;return l.map((e=>({label:[e.firstname,e.lastname].join(" "),value:e.id})))}))},allowClear:!0})})})})})})}const{TabPane:ke}=s.A,{RangePicker:Se}=a.A;function Ie(){var e,l,t,a,$,U,Z,W;const{type:X}=(0,m.g)(),Q=(0,g.wA)(),te=(0,m.Zp)(),{t:ne}=(0,b.B)(),{isDemo:se}=(0,L.A)(),[ae,ie]=(0,n.useState)(null),[de,oe]=(0,n.useState)(null),[re,ce]=(0,n.useState)(null),[ue,ve]=(0,n.useState)(null),he=[{name:"all",id:"7",active:!0},...le,{name:"deleted_at",id:"8",active:!0}],[me,xe]=(0,n.useState)(null),[pe,je]=(0,n.useState)([{title:ne("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:ne("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:ne("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,l)=>(0,J.jsxs)("div",{className:"cursor-pointer",children:["new"===e?(0,J.jsx)(i.A,{color:"blue",children:ne(e)}):"canceled"===e?(0,J.jsx)(i.A,{color:"error",children:ne(e)}):(0,J.jsx)(i.A,{color:"cyan",children:ne(e)}),"delivered"===e||"canceled"===e||l.deleted_at?"":(0,J.jsx)(x.A,{onClick:e=>{e.stopPropagation(),ie(l)},disabled:l.deleted_at})]})},{title:ne("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,l)=>(0,J.jsx)("div",{children:"ready"===l.status&&"pickup"!==l.delivery_type?(0,J.jsx)(d.A,{disabled:l.deleted_at,type:"link",onClick:()=>ce(l),children:(0,J.jsxs)(o.A,{children:[e?`${e.firstname} ${e.lastname}`:ne("add.deliveryman"),(0,J.jsx)(x.A,{})]})}):(0,J.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:ne("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return ne(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:ne("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at",render:e=>q(e)},{title:ne("delivery.date"),is_show:!0,dataIndex:"delivery_date",key:"delivery_date",render:e=>K(e)},{title:ne("options"),is_show:!0,key:"options",render:(e,l)=>(0,J.jsxs)(o.A,{children:[(0,J.jsx)(d.A,{disabled:l.deleted_at,icon:(0,J.jsx)(R.kMs,{}),onClick:e=>{e.stopPropagation(),oe(l.id)}}),(0,J.jsx)(d.A,{disabled:l.deleted_at,icon:(0,J.jsx)(p.A,{}),onClick:e=>{e.stopPropagation(),(e=>{ve(e.id)})(l)}}),(0,J.jsx)(d.A,{type:"primary",icon:(0,J.jsx)(x.A,{}),onClick:e=>{e.stopPropagation(),(e=>{Q((0,I.Uy)()),Q((0,y.X4)({url:`parcel-orders/${e.id}`,id:"edit_parcel_order",name:ne("edit.parcel.order")})),te(`/parcel-orders/${e.id}`)})(l)},disabled:"delivered"===l.status||"canceled"===l.status||l.deleted_at}),(0,J.jsx)(V.A,{disabled:l.deleted_at,icon:(0,J.jsx)(j.A,{}),onClick:e=>{e.stopPropagation(),Ve([l.id]),Ae(!0),Be(!0)}})]})}]),{setIsModalVisible:Ae}=(0,n.useContext)(B.o),[fe,ge]=(0,n.useState)(!1),{activeMenu:be}=(0,g.d4)((e=>e.menu),g.bN),_e=(0,G.s)(),[Ie,Me]=(0,n.useState)(_e.values.status||"all"),ze=(null===(e=be.data)||void 0===e?void 0:e.role)||Ie,He=be.data,[Ne,Ve]=(0,n.useState)(null),[De,Be]=(0,n.useState)(null),[Ye,$e]=(0,n.useState)(!1),[Oe,Pe]=(0,n.useState)(O()().subtract(1,"months"),O()()),{data:Re,loading:Fe,params:Te,meta:Ee}=(0,g.d4)((e=>e.parcelOrders),g.bN),Ge={search:null===He||void 0===He?void 0:He.search,sort:null===He||void 0===He?void 0:He.sort,column:null===He||void 0===He?void 0:He.column,perPage:null===He||void 0===He?void 0:He.perPage,page:null===He||void 0===He?void 0:He.page,user_id:null===He||void 0===He?void 0:He.user_id,status:"deleted_at"===ze||"all"===ze?void 0:ze,deleted_at:"deleted_at"===ze?"deleted_at":void 0,shop_id:null!==(null===(l=be.data)||void 0===l?void 0:l.shop_id)?null===(t=be.data)||void 0===t?void 0:t.shop_id:null,delivery_type:"scheduled"!==X?X:void 0,delivery_date_from:"scheduled"===X?O()().add(1,"day").format("YYYY-MM-DD"):void 0,date_from:Oe?null===(a=Oe[0])||void 0===a?void 0:a.format("YYYY-MM-DD"):null,date_to:Oe?null===($=Oe[1])||void 0===$?void 0:$.format("YYYY-MM-DD"):null};(0,_.A)((()=>{Q((0,w.xj)(Ge))}),[He,Oe,X]);const Le=(e,l)=>{Q((0,y.Ok)({activeMenu:be,data:{...He,[l]:e}}))};const qe=()=>{ie(null),ce(null),oe(null),ve(null)};(0,n.useEffect)((()=>{null!==be&&void 0!==be&&be.refetch&&(Q((0,w.xj)(Ge)),Q((0,y.km)(be)))}),[null===be||void 0===be?void 0:be.refetch]);const Ke={selectedRowKeys:Ne,onChange:e=>{Ve(e)}},Ue=(0,J.jsx)(r.A,{children:"deleted_at"!==Ie?(0,J.jsx)(r.A.Item,{onClick:()=>{se?N.oR.warning(ne("cannot.work.demo")):xe({delete:!0})},children:(0,J.jsxs)(o.A,{children:[(0,J.jsx)(j.A,{}),ne("delete.all")]})}):(0,J.jsx)(r.A.Item,{onClick:()=>{se?N.oR.warning(ne("cannot.work.demo")):xe({restore:!0})},children:(0,J.jsxs)(o.A,{children:[(0,J.jsx)(F.DQ9,{}),ne("restore.all")]})})});return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(o.A,{className:"justify-content-end w-100 mb-3",children:(0,J.jsx)(d.A,{type:"primary",icon:(0,J.jsx)(A.A,{}),onClick:()=>{Q((0,I.Uy)()),Q((0,y.X4)({id:"parcel-orders/add",url:"parcel-orders/add",name:"add.parcel.order"})),te("/parcel-orders/add")},style:{width:"100%"},children:ne("add.parcel.order")})}),(0,J.jsx)(c.A,{children:(0,J.jsxs)(o.A,{wrap:!0,className:"order-filter",children:[(0,J.jsx)(S.A,{defaultValue:null===He||void 0===He?void 0:He.search,resetSearch:!(null!==He&&void 0!==He&&He.search),placeholder:ne("search"),handleChange:e=>Le(e,"search")}),(0,J.jsx)(M.G,{placeholder:ne("select.client"),fetchOptions:async function(e){const l={search:e,perPage:10};return z.A.search(l).then((e=>{let{data:l}=e;return l.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id})))}))},onSelect:e=>Le(e.value,"user_id"),onDeselect:()=>Le(null,"user_id"),style:{width:"100%"},value:null===He||void 0===He?void 0:He.user_id}),(0,J.jsx)(Se,{value:Oe,onChange:e=>Pe(e),disabledDate:e=>e&&e>O()().endOf("day"),style:{width:"100%"}}),"deleted_at"!==Ie&&(0,J.jsxs)(d.A,{onClick:()=>{ge(!0);const e="all"!==Ie?{status:Ie}:null;D.A.export(e).then((e=>{const l=P.bb+e.data.file_name;window.location.href=l})).finally((()=>ge(!1)))},loading:fe,style:{width:"100%"},children:[(0,J.jsx)(T.$tV,{className:"mr-2"}),ne("export")]}),(0,J.jsx)(d.A,{onClick:()=>{(0,g.vA)((()=>{Q((0,C.gw)()),Q((0,y.Ok)({activeMenu:be,data:null})),Q((0,w.xj)({status:void 0,page:null===He||void 0===He?void 0:He.page,perPage:20}))})),Pe(void 0)},style:{width:"100%"},icon:(0,J.jsx)(f.A,{}),children:ne("clear")})]})}),(0,J.jsxs)(c.A,{children:[(0,J.jsxs)(o.A,{className:"justify-content-between align-items-start w-100",children:[(0,J.jsx)(s.A,{onChange:e=>{var l;const t=null===(l=he.find((l=>l.id===e)))||void 0===l?void 0:l.name;Q((0,y.Ok)({activeMenu:be,data:{role:t,page:1}})),Me(t),te(`?status=${t}`)},type:"card",activeKey:ze,children:he.map((e=>(0,J.jsx)(ke,{tab:ne(e.name)},e.id)))}),(0,J.jsxs)(o.A,{children:[null!==Ne&&0!==Ne.length&&(0,J.jsx)(u.A,{title:ne("delete.selected"),children:(0,J.jsx)(V.A,{type:"primary",onClick:()=>{null===Ne||0===Ne.length?N.oR.warning(ne("select.the.product")):(Ae(!0),Be(!1))},danger:!0})}),(0,J.jsx)(H.A,{setColumns:je,columns:pe,iconOnly:!0}),(0,J.jsx)(v.A,{overlay:Ue,children:(0,J.jsx)(d.A,{children:ne("options")})})]})]}),(0,J.jsx)(h.A,{scroll:{x:!0},rowSelection:Ke,columns:null===pe||void 0===pe?void 0:pe.filter((e=>e.is_show)),dataSource:Re,loading:Fe,pagination:{pageSize:Te.perPage,page:(null===(U=be.data)||void 0===U?void 0:U.page)||1,total:Ee.total,defaultCurrent:null===(Z=be.data)||void 0===Z?void 0:Z.page,current:null===(W=be.data)||void 0===W?void 0:W.page},rowKey:e=>e.id,onChange:function(e,l,t){const{pageSize:n,current:s}=e,{field:a,order:i}=t,d=(0,k.A)(i);Q((0,y.Ok)({activeMenu:be,data:{...He,perPage:n,page:s,column:a,sort:d}}))}})]}),ae&&(0,J.jsx)(ee,{orderDetails:ae,handleCancel:qe,status:le}),re&&(0,J.jsx)(we,{orderDetails:re,handleCancel:qe}),de&&(0,J.jsx)(ye,{id:de,handleCancel:qe}),!!ue&&(0,J.jsx)(Ce,{id:ue,handleCancel:qe}),(0,J.jsx)(Y.A,{click:()=>{$e(!0);const e={...Object.assign({},...Ne.map(((e,l)=>({[`ids[${l}]`]:e}))))};D.A.delete(e).then((()=>{N.oR.success(ne("successfully.deleted")),Ae(!1),Q((0,w.xj)(Ge)),Be(null)})).finally((()=>{Ve(null),$e(!1)}))},text:ne(De?"delete":"all.delete"),loading:Ye,setText:Ve}),me&&(0,J.jsx)(E.A,{open:me,handleCancel:()=>xe(null),click:me.restore?()=>{$e(!0),D.A.restoreAll().then((()=>{N.oR.success(ne("it.will.take.some.time.to.return.the.files")),Q((0,w.xj)(Ge)),xe(null)})).finally((()=>$e(!1)))}:()=>{$e(!0),D.A.dropAll().then((()=>{N.oR.success(ne("successfully.deleted")),Q((0,w.xj)(Ge)),xe(null)})).finally((()=>$e(!1)))},text:me.restore?ne("restore.modal.text"):ne("read.carefully"),subTitle:me.restore?"":ne("confirm.deletion"),loading:Ye,setText:Ve})]})}},28645:(e,l,t)=>{"use strict";t.d(l,{A:()=>x});var n=t(9950),s=t(66362),a=t(69216),i=t(80737),d=t(25933),o=t(57811),r=t(81541),c=t(48538),u=t(89323),v=t(70030),h=t(44414);const{Text:m}=s.A,x=e=>{let{columns:l=[],setColumns:t,style:s,size:x="",iconOnly:p}=e;const{t:j}=(0,v.B)(),[A,f]=(0,n.useState)(!1),g=(0,h.jsx)(a.A,{children:null===l||void 0===l?void 0:l.map(((e,n)=>(0,h.jsx)(a.A.Item,{children:(0,h.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,h.jsx)(o.A,{overlay:g,trigger:["click"],onVisibleChange:e=>{f(e)},visible:A,children:(0,h.jsx)(r.A,{title:j("change.columns"),children:(0,h.jsx)(c.A,{style:{...s},size:x,icon:(0,h.jsx)(u.A,{}),children:p?null:j("Columns")})})})}},29597:(e,l,t)=>{"use strict";t.d(l,{A:()=>n});t(63620);function n(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},35116:(e,l,t)=>{"use strict";t.d(l,{A:()=>r});t(9950);var n=t(48538),s=t(44070),a=t(12449),i=t(70030),d=t(13311),o=t(44414);function r(e){let{size:l="",onClick:t,type:r="default",...c}=e;const{t:u}=(0,i.B)(),{isDemo:v}=(0,d.A)();return(0,o.jsx)(n.A,{size:l,icon:(0,o.jsx)(s.A,{}),onClick:e=>{v?a.oR.warning(u("cannot.work.demo")):t(e)},type:r,...c})}},41478:(e,l,t)=>{"use strict";e.exports=t.p+"static/media/user.fbe7078c52acde79652d.jpg"},42634:()=>{},47992:(e,l,t)=>{"use strict";t.d(l,{G:()=>r});var n=t(9950),s=t(95491),a=t.n(s),i=t(99674),d=t(90650),o=t(44414);const r=e=>{let{fetchOptions:l,debounceTimeout:t=400,onClear:s,...r}=e;const[c,u]=(0,n.useState)(!1),[v,h]=(0,n.useState)([]),m=(0,n.useMemo)((()=>a()((e=>{h([]),u(!0),l(e).then((e=>{h(e),u(!1)}))}),t)),[l,t]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),s&&s()},notFoundContent:c?(0,o.jsx)(d.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{m("")}})}},53387:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});var n=t(89379),s=t(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:a}))};d.displayName="PlusCircleOutlined";const o=s.forwardRef(d)},53774:(e,l,t)=>{"use strict";t.d(l,{A:()=>s});var n=t(83291);function s(){var e,l;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,s=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0;const i=null===(e=n.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,d=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=s||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(a||(null===i||void 0===i?void 0:i.position)||"before")?`${d} ${o}`:`${o} ${d}`}},65820:(e,l,t)=>{"use strict";t.d(l,{s:()=>i});var n=t(13564),s=t(21215),a=t.n(s);const i=()=>{const e=(0,n.Zp)(),l=(0,n.zy)(),t=a().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,n)=>e({search:a().stringify({...t,[l]:n})}),reset:l=>{const n={...t};n[l]&&delete n[l],e({search:a().stringify({...n})})},clear:()=>e({search:a().stringify({})}),merge:l=>e({search:a().stringify({...t,...l})}),get:e=>t[e],setMultiple:l=>{const n={...t,...l};e({search:a().stringify(n)})},resetMultiple:l=>{const n={...t};l.forEach((e=>{n[e]&&delete n[e]})),e({search:a().stringify(n)})}}}},73631:(e,l,t)=>{"use strict";e.exports=t.p+"static/media/shop.46d7a94ca800c711764a.png"},89323:(e,l,t)=>{"use strict";t.d(l,{A:()=>o});var n=t(89379),s=t(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=t(25085),d=function(e,l){return s.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:l,icon:a}))};d.displayName="TableOutlined";const o=s.forwardRef(d)}}]);