"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[6885],{4399:(e,t,n)=>{n.d(t,{A:()=>d});var l=n(89379),a=n(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M117 368h231v64H117zm559 0h241v64H676zm-264 0h200v64H412zm0 224h200v64H412zm264 0h241v64H676zm-559 0h231v64H117zm295-160V179h-64v666h64V592zm264-64V179h-64v666h64V432z"}}]},name:"borderless-table",theme:"outlined"};var s=n(25085),i=function(e,t){return a.createElement(s.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:o}))};i.displayName="BorderlessTableOutlined";const d=a.forwardRef(i)},8297:(e,t,n)=>{n.d(t,{A:()=>d});var l=n(9950),a=n(55902),o=n(41397),s=n(60767),i=n(44414);function d(e){let{handleChange:t,defaultValue:n,resetSearch:d,...r}=e;const[c,u]=(0,l.useState)(n),v=(0,l.useMemo)((()=>(0,o.debounce)((e=>{t(e)}),800)),[t]);return(0,l.useEffect)((()=>{u(n)}),[d,n]),(0,i.jsx)(a.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,i.jsx)(s.A,{}),...r})}},10156:(e,t,n)=>{n.d(t,{A:()=>f});var l=n(9950),a=n(3969),o=n(32645),s=n(48538),i=n(87094),d=n(41988),r=n(99674),c=n(91854),u=n(57056),v=n(74623),p=n(70030),h=n(29514),m=n(47992),x=n(66209),y=n(80415),g=n(44414);function f(e){var t,n,f,A;let{orderDetails:j,handleCancel:b}=e;const{t:C}=(0,p.B)(),{activeMenu:k}=(0,c.d4)((e=>e.menu),c.bN),[w]=a.A.useForm(),_=(0,c.wA)(),[M,S]=(0,l.useState)(!1),N=y.HF.map((e=>({label:C(e),value:e,key:e})));(0,l.useEffect)((()=>{_((0,h.d8)({}))}),[]);return(0,g.jsx)(o.A,{visible:!!j,title:j.title,onCancel:b,footer:[(0,g.jsx)(s.A,{type:"primary",onClick:()=>w.submit(),loading:M,children:C("save")}),(0,g.jsx)(s.A,{type:"default",onClick:b,children:C("cancel")})],children:(0,g.jsx)(a.A,{form:w,layout:"vertical",onFinish:e=>{var t,n;const l={deliveryman:null===e||void 0===e||null===(t=e.deliveryman)||void 0===t?void 0:t.value,transaction_status:(null===e||void 0===e||null===(n=e.transaction_status)||void 0===n?void 0:n.value)||(null===e||void 0===e?void 0:e.transaction_status)||void 0};S(!0),u.A.updateDelivery(j.id,l).then((()=>{b(),_((0,v.Ms)(k))})).finally((()=>S(!1)))},initialValues:{deliveryman:{label:null===j||void 0===j||null===(t=j.deliveryman)||void 0===t?void 0:t.firstname,value:null===(n=j.deliveryman)||void 0===n?void 0:n.id,key:null===(f=j.deliveryman)||void 0===f?void 0:f.id},transaction_status:null===j||void 0===j||null===(A=j.transaction)||void 0===A?void 0:A.status},children:(0,g.jsxs)(i.A,{gutter:12,children:[(0,g.jsx)(d.A,{span:24,children:(0,g.jsx)(a.A.Item,{label:C("deliveryman"),name:"deliveryman",rules:[{required:!0,message:C("required")}],children:(0,g.jsx)(m.G,{fetchOptions:e=>{var t,n;const l={perPage:10,page:1,search:null!==e&&void 0!==e&&e.length?e:void 0,"address[latitude]":(null===j||void 0===j||null===(t=j.location)||void 0===t?void 0:t.latitude)||void 0,"address[longitude]":(null===j||void 0===j||null===(n=j.location)||void 0===n?void 0:n.longitude)||void 0};return x.A.getDeliverymans(l).then((e=>e.data.map((e=>({label:null===e||void 0===e?void 0:e.firstname,value:null===e||void 0===e?void 0:e.id})))))}})})}),(null===j||void 0===j?void 0:j.transaction)&&(0,g.jsx)(d.A,{span:24,children:(0,g.jsx)(a.A.Item,{label:C("transaction.status"),name:"transaction_status",children:(0,g.jsx)(r.A,{options:N})})})]})})})}},14691:(e,t,n)=>{n.d(t,{A:()=>m});var l=n(58168),a=n(64467),o=n(80045),s=n(89379),i=n(23029),d=n(92901),r=n(85501),c=n(29426),u=n(9950),v=n(48383),p=n.n(v),h=function(e){(0,r.A)(n,e);var t=(0,c.A)(n);function n(e){var l;(0,i.A)(this,n),(l=t.call(this,e)).handleChange=function(e){var t=l.props,n=t.disabled,a=t.onChange;n||("checked"in l.props||l.setState({checked:e.target.checked}),a&&a({target:(0,s.A)((0,s.A)({},l.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},l.saveInput=function(e){l.input=e};var a="checked"in e?e.checked:e.defaultChecked;return l.state={checked:a},l}return(0,d.A)(n,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,n=t.prefixCls,s=t.className,i=t.style,d=t.name,r=t.id,c=t.type,v=t.disabled,h=t.readOnly,m=t.tabIndex,x=t.onClick,y=t.onFocus,g=t.onBlur,f=t.onKeyDown,A=t.onKeyPress,j=t.onKeyUp,b=t.autoFocus,C=t.value,k=t.required,w=(0,o.A)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),_=Object.keys(w).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=w[t]),e}),{}),M=this.state.checked,S=p()(n,s,(e={},(0,a.A)(e,"".concat(n,"-checked"),M),(0,a.A)(e,"".concat(n,"-disabled"),v),e));return u.createElement("span",{className:S,style:i},u.createElement("input",(0,l.A)({name:d,id:r,type:c,required:k,readOnly:h,disabled:v,tabIndex:m,className:"".concat(n,"-input"),checked:!!M,onClick:x,onFocus:y,onBlur:g,onKeyUp:j,onKeyDown:f,onKeyPress:A,onChange:this.handleChange,autoFocus:b,ref:this.saveInput,value:C},_)),u.createElement("span",{className:"".concat(n,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,s.A)((0,s.A)({},t),{},{checked:e.checked}):null}}]),n}(u.Component);h.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const m=h},16503:(e,t,n)=>{n.d(t,{A:()=>y});var l=n(3969),a=n(87094),o=n(41988),s=n(99674),i=n(40895),d=n(80737),r=n(48538),c=n(70030),u=n(80415),v=n(9950),p=n(57056),h=n(91854),m=n(74623),x=n(44414);const y=e=>{let{data:t,onCancel:n,refreshOrders:y}=e;const[g]=l.A.useForm(),{t:f}=(0,c.B)(),A=(0,h.wA)(),{activeMenu:j}=(0,h.d4)((e=>e.menu),h.bN),[b,C]=(0,v.useState)(!1),k=u.HF.map((e=>({label:f(e),value:e,key:e})));return(0,x.jsx)(l.A,{form:g,layout:"vertical",initialValues:{status:t.status},onFinish:e=>{var l;const a={status:null===e||void 0===e||null===(l=e.status)||void 0===l?void 0:l.value,transaction_id:t.id};C(!0),p.A.updateTransactionStatus(t.payable_id,a).finally((()=>{C(!1),n(),y?y():A((0,m.Ms)(j))}))},children:(0,x.jsxs)(a.A,{gutter:12,children:[(0,x.jsx)(o.A,{span:24,children:(0,x.jsx)(l.A.Item,{label:f("status"),name:"status",rules:[{required:!0,message:f("required")}],children:(0,x.jsx)(s.A,{options:k,labelInValue:!0})})}),(0,x.jsx)(i.A,{}),(0,x.jsx)(o.A,{span:24,children:(0,x.jsxs)(d.A,{style:{display:"flex",justifyContent:"end"},children:[(0,x.jsx)(r.A,{onClick:n,children:f("cancel")}),(0,x.jsx)(r.A,{type:"primary",htmlType:"submit",loading:b,children:f("save")})]})})]})})}},17811:(e,t,n)=>{n.d(t,{Ay:()=>I});var l=n(64467),a=n(58168),o=n(9950),s=n(14691),i=n(48383),d=n.n(i),r=n(41929),c=n(77643),u=n(12578),v=o.createContext(null),p=v.Provider;const h=v;var m=o.createContext(null),x=m.Provider,y=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},g=function(e,t){var n,i=o.useContext(h),v=o.useContext(m),p=o.useContext(u.QO),x=p.getPrefixCls,g=p.direction,f=o.useRef(),A=(0,r.K4)(t,f),j=(0,o.useContext)(c.$W).isFormItemInput,b=e.prefixCls,C=e.className,k=e.children,w=e.style,_=y(e,["prefixCls","className","children","style"]),M=x("radio",b),S="button"===((null===i||void 0===i?void 0:i.optionType)||v)?"".concat(M,"-button"):M,N=(0,a.A)({},_);i&&(N.name=i.name,N.onChange=function(t){var n,l;null===(n=e.onChange)||void 0===n||n.call(e,t),null===(l=null===i||void 0===i?void 0:i.onChange)||void 0===l||l.call(i,t)},N.checked=e.value===i.value,N.disabled=e.disabled||i.disabled);var O=d()("".concat(S,"-wrapper"),(n={},(0,l.A)(n,"".concat(S,"-wrapper-checked"),N.checked),(0,l.A)(n,"".concat(S,"-wrapper-disabled"),N.disabled),(0,l.A)(n,"".concat(S,"-wrapper-rtl"),"rtl"===g),(0,l.A)(n,"".concat(S,"-wrapper-in-form-item"),j),n),C);return o.createElement("label",{className:O,style:w,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},o.createElement(s.A,(0,a.A)({},N,{type:"radio",prefixCls:S,ref:A})),void 0!==k?o.createElement("span",null,k):null)},f=o.forwardRef(g);f.displayName="Radio";const A=f;var j=n(5544),b=n(71207),C=n(87126),k=n(27373),w=o.forwardRef((function(e,t){var n=o.useContext(u.QO),s=n.getPrefixCls,i=n.direction,r=o.useContext(C.A),c=(0,b.A)(e.defaultValue,{value:e.value}),v=(0,j.A)(c,2),h=v[0],m=v[1];return o.createElement(p,{value:{onChange:function(t){var n=h,l=t.target.value;"value"in e||m(l);var a=e.onChange;a&&l!==n&&a(t)},value:h,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var n,c=e.prefixCls,u=e.className,v=void 0===u?"":u,p=e.options,m=e.buttonStyle,x=void 0===m?"outline":m,y=e.disabled,g=e.children,f=e.size,j=e.style,b=e.id,C=e.onMouseEnter,w=e.onMouseLeave,_=s("radio",c),M="".concat(_,"-group"),S=g;p&&p.length>0&&(S=p.map((function(e){return"string"===typeof e||"number"===typeof e?o.createElement(A,{key:e.toString(),prefixCls:_,disabled:y,value:e,checked:h===e},e):o.createElement(A,{key:"radio-group-value-options-".concat(e.value),prefixCls:_,disabled:e.disabled||y,value:e.value,checked:h===e.value,style:e.style},e.label)})));var N=f||r,O=d()(M,"".concat(M,"-").concat(x),(n={},(0,l.A)(n,"".concat(M,"-").concat(N),N),(0,l.A)(n,"".concat(M,"-rtl"),"rtl"===i),n),v);return o.createElement("div",(0,a.A)({},(0,k.A)(e),{className:O,style:j,onMouseEnter:C,onMouseLeave:w,id:b,ref:t}),S)}())}));const _=o.memo(w);var M=function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(l=Object.getOwnPropertySymbols(e);a<l.length;a++)t.indexOf(l[a])<0&&Object.prototype.propertyIsEnumerable.call(e,l[a])&&(n[l[a]]=e[l[a]])}return n},S=function(e,t){var n=o.useContext(u.QO).getPrefixCls,l=e.prefixCls,s=M(e,["prefixCls"]),i=n("radio",l);return o.createElement(x,{value:"button"},o.createElement(A,(0,a.A)({prefixCls:i},s,{type:"radio",ref:t})))};const N=o.forwardRef(S);var O=A;O.Button=N,O.Group=_;const I=O},29597:(e,t,n)=>{n.d(t,{A:()=>l});n(63620);function l(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const t=e.location.split(", ");return{lat:Number(null===t||void 0===t?void 0:t[0]),lng:Number(null===t||void 0===t?void 0:t[1])}}},36885:(e,t,n)=>{n.r(t),n.d(t,{default:()=>be});var l=n(9950),a=n(87864),o=n(80737),s=n(48538),i=n(23263),d=n(32645),r=n(13564),c=n(53387),u=n(13700),v=n(91854),p=n(74623),h=n(70030),m=n(88986),x=n(8297),y=n(47992),g=n(66209),f=n(90352),A=n(55386),j=n(12449),b=n(57056),C=n(20626),k=n(51242),w=n(76083),_=n(59051),M=n.n(_),S=n(53177),N=n(10156),O=n(36059),I=n(90650),D=n(69466),T=n(2260),P=n(80415),E=n(73041),$=n(79378),H=n(50198),Y=n(76074),z=n(18411),B=n(46809),F=n(4399),V=n(24513),L=n(19826),K=n(12678),R=n(44070),q=n(98114),G=n(74522),U=n(14936),Z=n(63611),W=n(63620),Q=n(53774),X=n(52423),J=n(13311),ee=n(44414);const{Meta:te}=i.A,ne=e=>{var t,n,l,a,s,d,r,c,u,v,p,m;let{data:x,goToShow:y,loading:g,setLocationsMap:f,setId:A,setIsModalVisible:j,setText:b,setDowloadModal:C,setType:k,orderType:w,setIsTransactionModalOpen:_}=e;const{isDemo:S,demoFunc:N}=(0,J.A)(),{t:O}=(0,h.B)(),I=(null===(t=x.transactions)||void 0===t?void 0:t.at(-1))||{},D=[{title:"Client",icon:(0,ee.jsx)($.A,{}),data:null!==x&&void 0!==x&&x.user?`${(null===(n=x.user)||void 0===n?void 0:n.firstname)||"-"} ${(null===(l=x.user)||void 0===l?void 0:l.lastname)||"-"}`:O("deleted.user")},{title:"Number of products",icon:(0,ee.jsx)(H.A,{}),data:null===x||void 0===x?void 0:x.order_details_count},{title:w?"Table":"Deliveryman",icon:(0,ee.jsx)(Y.A,{}),data:w?`${(null===x||void 0===x||null===(a=x.table)||void 0===a?void 0:a.name)||"-"}`:`${(null===(s=x.deliveryman)||void 0===s?void 0:s.firstname)||"-"} ${(null===(d=x.deliveryman)||void 0===d?void 0:d.lastname)||"-"}`},{title:"Amount",icon:(0,ee.jsx)(z.A,{}),data:(0,Q.A)(x.total_price,null===(r=x.currency)||void 0===r?void 0:r.symbol,null===(c=x.currency)||void 0===c?void 0:c.position)},{title:"Last Payment type",icon:(0,ee.jsx)(B.A,{}),data:(null===I||void 0===I||null===(u=I.payment_system)||void 0===u?void 0:u.tag)||"-"},{title:"Last Payment status",icon:(0,ee.jsx)(F.A,{}),data:null!==I&&void 0!==I&&I.status?(0,ee.jsxs)("div",{style:{cursor:"pointer"},onClick:e=>{e.stopPropagation(),_(I)},children:[null===I||void 0===I?void 0:I.status," ",(0,ee.jsx)(V.A,{disabled:null===x||void 0===x?void 0:x.deleted_at})]}):"-"},{title:O("delivery.type"),icon:(0,ee.jsx)(L.A,{}),data:(null===x||void 0===x?void 0:x.delivery_type)||"-"},{title:"Delivery date",icon:(0,ee.jsx)(L.A,{}),data:M()(null===x||void 0===x?void 0:x.delivery_date).format("YYYY-MM-DD")||"-"},{title:"Created at",icon:(0,ee.jsx)(L.A,{}),data:M()(null===x||void 0===x?void 0:x.created_at).format("YYYY-MM-DD")||"-"}];return(0,ee.jsx)(i.A,{actions:[(0,ee.jsx)(X.kMs,{size:20,onClick:e=>{e.stopPropagation(),f(x.id)}}),(0,ee.jsx)(K.A,{onClick:()=>y(x)},"setting"),(0,ee.jsx)(R.A,{onClick:e=>{S?N():(e.stopPropagation(),A([x.id]),j(!0),b(!0),k(x.status))}}),(0,ee.jsx)(q.A,{onClick:()=>C(x.id)},"ellipsis")],className:"order-card",children:(0,ee.jsxs)(G.A,{loading:g,avatar:!0,active:!0,children:[(0,ee.jsx)(te,{avatar:(0,ee.jsx)(U.A,{src:W.sE+(null===(v=x.user)||void 0===v?void 0:v.img),icon:(0,ee.jsx)($.A,{})}),description:`#${x.id}`,title:`${(null===(p=x.user)||void 0===p?void 0:p.firstname)||"-"} ${(null===(m=x.user)||void 0===m?void 0:m.lastname)||"-"}`}),(0,ee.jsx)(Z.Ay,{itemLayout:"horizontal",dataSource:D,renderItem:(e,t)=>(0,ee.jsx)(Z.Ay.Item,{children:(0,ee.jsxs)(o.A,{children:[null===e||void 0===e?void 0:e.icon,(0,ee.jsxs)("span",{children:[`${null===e||void 0===e?void 0:e.title}:`,null===e||void 0===e?void 0:e.data]})]})},t)})]})})};var le=n(81446),ae=n(54209),oe=n(99985),se=n(12916);const ie=e=>{let{children:t,title:n,name:l,isDropDisabled:a,total:s=0,loading:i=!1,reloadOrder:d}=e;const{t:r}=(0,h.B)();return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsx)(oe.A,{message:(0,ee.jsxs)(o.A,{children:[(0,ee.jsx)(ae.A,{size:20,style:{cursor:"pointer"},spin:i,onClick:d}),r(n),(0,ee.jsx)(se.A,{children:i?(0,ee.jsx)(ae.A,{spin:!0}):s})]}),className:`mb-4 ${l}`,style:{textAlign:"center",fontSize:16,textTransform:"capitalize"}}),(0,ee.jsx)(O.gL,{droppableId:l,isDropDisabled:a,children:e=>(0,ee.jsx)("div",{ref:e.innerRef,className:"h-screen",style:{opacity:a?.6:1},children:(0,ee.jsxs)(ee.Fragment,{children:[t,e.placeholder]})})})]})},de=e=>{let{goToEdit:t,goToShow:n,fetchOrderAllItem:a,fetchOrders:o,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:u,type:m,setType:x,orderType:y,setIsTransactionModalOpen:g}=e;const{t:f}=(0,h.B)(),A=(0,v.wA)(),k=(0,r.Zp)(),{statusList:w,loading:_}=(0,v.d4)((e=>e.orderStatus),v.bN),M=(0,v.d4)((e=>e.globalSettings.settings),v.bN),{items:S}=(0,v.d4)((e=>e.sellerOrders),v.bN),N=(0,v.d4)((e=>e.sellerOrders),v.bN),[$,H]=(0,l.useState)(""),[Y,z]=(0,l.useState)({}),[B,F]=(0,l.useState)({}),V=null===w||void 0===w?void 0:w.map((e=>null===e||void 0===e?void 0:e.name)),L=(e,t)=>{b.A.updateStatus(e,t).then((t=>{var n;A((0,C.gw)()),a(),"1"===(null===M||void 0===M?void 0:M.auto_print_order)&&"accepted"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.status)&&(e=>{const t=`seller/generate-invoice/${e}`;A((0,p.X4)({url:t,id:"seller-generate-invoice ",name:f("generate.invoice")})),k(`/${t}?print=true`)})(e),j.oR.success(`#${e} ${f("order.status.changed")}`)}))},K=e=>{if(!e.destination)return;e.destination&&Y.source.droppableId!==e.destination.droppableId&&L(e.draggableId,{status:e.destination.droppableId});const t={...S},n=t[e.source.droppableId],[l,a]=((e,t)=>{const n=Array.from(e),[l]=n.splice(t,1);return[l,n]})(n,e.source.index);t[e.source.droppableId]=a;const o=t[e.destination.droppableId];t[e.destination.droppableId]=((e,t,n)=>{const l=Array.from(e);return l.splice(t,0,n),l})(o,e.destination.index,l),A((0,C.jb)(t)),F(null)},R=e=>(0!==e||B!==V.length-1)&&!!Boolean(B>e);(0,l.useEffect)((()=>{A((0,C.gw)()),a()}),[]);return(0,ee.jsx)(ee.Fragment,{children:_?(0,ee.jsx)("div",{children:(0,ee.jsx)(le.A,{})}):(0,ee.jsx)(O.JY,{onDragEnd:K,onDragStart:e=>{const t=V.findIndex((t=>t===e.source.droppableId));z(e),F(t)},children:(0,ee.jsx)("div",{className:"order-board",children:null===V||void 0===V?void 0:V.map(((e,l)=>{var a,r,v,p;return(0,ee.jsx)("div",{className:"dnd-column",children:(0,ee.jsx)(ie,{title:e,onDragEnd:K,name:e,isDropDisabled:R(l),total:null===(a=S[e])||void 0===a?void 0:a.length,loading:N[e].loading,reloadOrder:()=>(e=>{A((0,C.yT)(e)),o({status:e})})(e),children:(0,ee.jsxs)(D.Ay,{onScroll:t=>((e,t)=>{const n=e.target.lastChild,l=e.target.clientHeight+e.target.scrollTop;n&&l>n.offsetTop+n.clientHeight+19.9&&N[t].meta.last_page>N[t].meta.current_page&&!N[t].loading&&(H(t),o({page:N[t].meta.current_page+1,perPage:5,status:t}))})(t,e),autoHeight:!0,autoHeightMin:"75vh",autoHeightMax:"75vh",autoHide:!0,id:e,children:[Boolean(N[e].loading&&!(null!==(r=S[e])&&void 0!==r&&r.length))?null===(p=P.LH[e])||void 0===p?void 0:p.map((()=>(0,ee.jsx)(E.A,{loading:!0}))):null===(v=S[e])||void 0===v?void 0:v.map(((e,l)=>(0,ee.jsx)(ee.Fragment,{children:(0,ee.jsx)(O.sx,{draggableId:e.id.toString(),index:l,children:(l,a)=>(0,ee.jsx)("div",{ref:l.innerRef,...l.draggableProps,...l.dragHandleProps,children:(0,ee.jsx)(ne,{data:e,goToEdit:t,goToShow:n,setLocationsMap:s,setId:i,setIsModalVisible:d,setText:c,setDowloadModal:u,setType:x,orderType:y,setIsTransactionModalOpen:g})})},e.id)}))),N[e].loading&&e===$&&(0,ee.jsx)(I.A,{indicator:(0,ee.jsx)(T.A,{style:{fontSize:24},spin:!0})})]})})},e)}))})})})};var re=n(58891),ce=n(42220),ue=n(48946),ve=n(39362),pe=n.n(ve),he=n(87094),me=n(41988),xe=n(29949),ye=n(38310);const ge=i.A.Meta,fe=e=>{let{id:t,handleCancel:n}=e;const[a,o]=(0,l.useState)(null),{t:c}=(0,h.B)(),u=(0,r.Zp)();return(0,ee.jsx)(ee.Fragment,{children:a?(0,ee.jsx)(le.A,{}):(0,ee.jsx)(d.A,{visible:!!t,title:c("selected.download"),closable:!1,handleCancel:n,footer:[(0,ee.jsx)(s.A,{type:"default",onClick:n,children:c("cancel")},"cancelBtn")],children:(0,ee.jsxs)(he.A,{children:[(0,ee.jsx)(me.A,{span:12,children:(0,ee.jsx)(i.A,{title:c("download.pdf"),onClick:()=>function(e){o(!0),ue.A.orderExport(e).then((t=>{pe()(t,`invoice_${e}.pdf`,"application/pdf"),n()})).finally((()=>o(!1)))}(t),className:"text-center cursor-pointer",children:(0,ee.jsx)(ge,{className:"d-flex align-items-center justify-content-center",title:(0,ee.jsx)(xe.yos,{size:80})})})}),(0,ee.jsx)(me.A,{span:12,children:(0,ee.jsx)(i.A,{title:c("download.check"),onClick:()=>(e=>{u(`/seller/generate-invoice/${e}`)})(t),className:"text-center cursor-pointer",children:(0,ee.jsx)(ge,{className:"d-flex align-items-center justify-content-center",title:(0,ee.jsx)(ye.TBA,{size:85})})})})]})})})};var Ae=n(16503);const{RangePicker:je}=a.A;function be(){var e,t,n;const a=(0,v.wA)(),_=(0,r.Zp)(),{t:O}=(0,h.B)(),[I,D]=(0,l.useState)(null),{setIsModalVisible:T}=(0,l.useContext)(A.o),[P,E]=(0,l.useState)(null),[$,H]=(0,l.useState)(!1),[Y,z]=(0,l.useState)(null),[B,F]=(0,l.useState)(null),[V,L]=(0,l.useState)(null),[K,R]=(0,l.useState)(null),[q,G]=(0,l.useState)(null),[U,Z]=(0,l.useState)(null),{activeMenu:W}=(0,v.d4)((e=>e.menu),v.bN),Q=(0,r.g)(),X=null===Q||void 0===Q?void 0:Q.type,J=null===W||void 0===W?void 0:W.data,te={search:null!==J&&void 0!==J&&J.search?J.search:void 0,perPage:(null===J||void 0===J?void 0:J.perPage)||5,page:(null===J||void 0===J?void 0:J.page)||1,user_id:null===J||void 0===J?void 0:J.client_id,date_from:(null===U||void 0===U||null===(e=U[0])||void 0===e?void 0:e.format("YYYY-MM-DD"))||void 0,date_to:(null===U||void 0===U||null===(t=U[1])||void 0===t?void 0:t.format("YYYY-MM-DD"))||void 0,delivery_type:X};(0,m.A)((()=>{a((0,C.gw)()),ae()}),[J,U]),(0,l.useEffect)((()=>{null!==W&&void 0!==W&&W.refetch&&(a((0,S.PL)(te)),a((0,f.nr)({})),a((0,p.km)(W)))}),[null===W||void 0===W?void 0:W.refetch]);const ne=(e,t)=>{(0,v.vA)((()=>{a((0,C.gw)()),a((0,p.Ok)({activeMenu:W,data:{...J,[t]:e}}))}))};const le=e=>{var t,n,l,o;const s={...e,delivery_type:X,delivery_date_from:"scheduled"===q?M()().add(1,"day").format("YYYY-MM-DD"):void 0,search:null!==J&&void 0!==J&&J.search?J.search:void 0,user_id:null===J||void 0===J?void 0:J.client_id,status:null===e||void 0===e?void 0:e.status,shop_id:null!==(null===(t=W.data)||void 0===t?void 0:t.shop_id)?null===(n=W.data)||void 0===n?void 0:n.shop_id:null,date_from:(null===U||void 0===U||null===(l=U[0])||void 0===l?void 0:l.format("YYYY-MM-DD"))||void 0,date_to:(null===U||void 0===U||null===(o=U[1])||void 0===o?void 0:o.format("YYYY-MM-DD"))||void 0};switch(null===e||void 0===e?void 0:e.status){case"new":a((0,C.wy)(s));break;case"accepted":a((0,C.tB)(s));break;case"ready":a((0,C.xR)(s));break;case"on_a_way":a((0,C.n7)(s));break;case"delivered":a((0,C.Cg)(s));break;case"canceled":a((0,C.xm)(s));break;case"cooking":a((0,C.yC)(s));break;default:console.log("Sorry, we are out of")}},ae=()=>{a((0,C.gw)()),le({status:"new"}),le({status:"accepted"}),le({status:"ready"}),le({status:"on_a_way"}),le({status:"delivered"}),le({status:"canceled"}),le({status:"cooking"})},oe=()=>{(0,v.vA)((()=>{a((0,C.gw)()),a((0,p.Ok)({activeMenu:W,data:null}))})),ae()},se=()=>{L(null),z(null),F(null)};return(0,ee.jsxs)(ee.Fragment,{children:[(0,ee.jsxs)(o.A,{className:"justify-content-end w-100 mb-3",children:[(0,ee.jsx)(re.A,{listType:"seller/orders-board"}),(0,ee.jsx)(s.A,{type:"primary",icon:(0,ee.jsx)(c.A,{}),onClick:()=>{a((0,k.Uy)()),a((0,p.X4)({id:"pos.system",url:"seller/pos-system",name:O("add.order")})),_("/seller/pos-system",{state:{delivery_type:X}})},style:{width:"100%"},children:O("add.order")})]}),(0,ee.jsx)(i.A,{children:(0,ee.jsxs)(o.A,{wrap:!0,children:[(0,ee.jsx)(x.A,{placeholder:O("search"),handleChange:e=>ne(e,"search"),defaultValue:null===(n=W.data)||void 0===n?void 0:n.search,resetSearch:!(null!==J&&void 0!==J&&J.search)}),(0,ee.jsx)(y.G,{placeholder:O("select.client"),fetchOptions:async function(e){const t={search:e,perPage:10};return g.A.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>({label:`${e.firstname} ${e.lastname||""}`,value:e.id})))}))},onSelect:e=>ne(e.value,"client_id"),onDeselect:()=>ne(null,"client_id"),style:{minWidth:200},onClear:oe,value:null===J||void 0===J?void 0:J.client_id}),(0,ee.jsx)(je,{defaultValue:U,onChange:e=>{ne(JSON.stringify(e),"data_time"),Z(e)},allowClear:!0,style:{width:"100%"},onClear:()=>{a((0,C.gw)()),Z(null)}}),(0,ee.jsx)(s.A,{icon:(0,ee.jsx)(u.A,{}),onClick:oe,children:O("clear")})]})}),(0,ee.jsx)(de,{goToShow:e=>{a((0,p.X4)({url:`seller/order/details/${e.id}`,id:"order_details",name:O("order.details")})),_(`/seller/order/details/${e.id}`)},fetchOrderAllItem:ae,fetchOrders:le,setLocationsMap:z,setId:D,setIsModalVisible:T,setText:E,setDowloadModal:F,type:q,setType:G,orderType:X,setIsTransactionModalOpen:R}),(0,ee.jsx)(w.A,{click:()=>{H(!0);const e={...Object.assign({},...I.map(((e,t)=>({[`ids[${t}]`]:e}))))};b.A.delete(e).then((()=>{a((0,C.gw)()),j.oR.success(O("successfully.deleted")),T(!1),ae({status:q}),E(null)})).finally((()=>{D(null),H(!1)}))},text:O(P?"delete":"all.delete"),loading:$,setText:D,setActive:D}),V&&(0,ee.jsx)(N.A,{orderDetails:V,handleCancel:se}),!!K&&(0,ee.jsx)(d.A,{visible:!!K,footer:!1,onCancel:()=>R(null),children:(0,ee.jsx)(Ae.A,{data:K,onCancel:()=>R(null),refreshOrders:ae})}),Y&&(0,ee.jsx)(ce.A,{id:Y,handleCancel:se}),B&&(0,ee.jsx)(fe,{id:B,handleCancel:se})]})}},41478:(e,t,n)=>{e.exports=n.p+"static/media/user.fbe7078c52acde79652d.jpg"},42220:(e,t,n)=>{n.d(t,{A:()=>O});var l=n(12403),a=n(86366),o=n(32645),s=n(48538),i=n(23263),d=n(87094),r=n(41988),c=n(12916),u=n(9950),v=n(70030),p=n(57056),h=n(81446),m=n(29949),x=n(91854),y=n(63620),g=n(41478),f=n(73631),A=n(29597),j=n(47965),b=n(50327),C=n(25495),k=n(38310),w=n(44414);const{Step:_}=a.A,M=()=>(0,w.jsx)("img",{src:g,width:"50",alt:"Pin"}),S=()=>(0,w.jsx)("img",{src:f,width:"50",alt:"Pin"}),N=["blue","red","gold","volcano","cyan","lime"],O=e=>{var t,n,g,f,O,I;let{id:D,handleCancel:T}=e;const{t:P}=(0,v.B)(),[E,$]=(0,u.useState)(null),[H,Y]=(0,u.useState)(null),[z,B]=(0,u.useState)(null),{settings:F}=(0,x.d4)((e=>e.globalSettings),x.bN),V=(0,A.A)(F),[L,K]=(0,u.useState)(0),[R,q]=(0,u.useState)((0,A.A)(F)),[G,U]=(0,u.useState)((0,A.A)(F)),[Z,W]=(0,u.useState)([{id:0,name:"new",icon:(0,w.jsx)(j.A,{})},{id:1,name:"accepted",icon:(0,w.jsx)(m.LW,{})},{id:2,name:"ready",icon:(0,w.jsx)(b.NtI,{})},{id:3,name:"on_a_way",icon:(0,w.jsx)(C.o2P,{})},{id:4,name:"delivered",icon:(0,w.jsx)(C.eDZ,{})}]);const{google_map_key:Q}=(0,x.d4)((e=>e.globalSettings.settings),x.bN);(0,u.useEffect)((()=>{$(!0),p.A.getById(D).then((e=>{var t;let{data:n}=e;W("canceled"===n.status?[{id:1,name:"new",icon:(0,w.jsx)(j.A,{})},{id:5,name:"canceled",icon:(0,w.jsx)(k.XfH,{})}]:Z),K("canceled"===n.status?1:null===(t=Z.find((e=>e.name===n.status)))||void 0===t?void 0:t.id),B("canceled"===n.status?"error":"success"),Y(n),U({lat:n.location.latitude,lng:n.location.longitude}),q({lat:n.shop.location.latitude,lng:n.shop.location.longitude})})).finally((()=>{$(!1)}))}),[]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(o.A,{visible:!!D,title:P("show.locations"),closable:!0,onCancel:T,style:{minWidth:"80vw"},footer:[(0,w.jsx)(s.A,{type:"default",onClick:T,children:P("cancel")},"cancelBtn")],children:E?(0,w.jsx)(h.A,{}):(0,w.jsxs)(i.A,{children:[(0,w.jsx)(a.A,{current:L,status:z,className:"mb-5",children:null===Z||void 0===Z?void 0:Z.map(((e,t)=>(0,w.jsx)(_,{title:P(e.name),icon:null===e||void 0===e?void 0:e.icon},e.id+t)))}),(0,w.jsxs)(d.A,{gutter:12,children:[(0,w.jsxs)(r.A,{span:12,children:[(0,w.jsxs)("h3",{children:[P("order.id")," #",null===H||void 0===H?void 0:H.id]}),(0,w.jsxs)("p",{children:[(0,w.jsx)(m.A5h,{})," ",null===H||void 0===H?void 0:H.created_at]}),(0,w.jsxs)("p",{children:[P("schedulet.at")," ",null===H||void 0===H?void 0:H.delivery_date]}),(0,w.jsxs)("span",{children:[(0,w.jsx)("strong",{children:null===H||void 0===H||null===(t=H.shop)||void 0===t||null===(n=t.translation)||void 0===n?void 0:n.title})," ",null===H||void 0===H||null===(g=H.details)||void 0===g?void 0:g.map(((e,t)=>{var n;return(0,w.jsx)(c.A,{className:"mb-2",color:N[t],children:null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.product.translation.title})}))]})]}),(0,w.jsxs)(r.A,{span:12,children:[(0,w.jsxs)("p",{children:[P("status")," ","new"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.A,{color:"blue",children:P(null===H||void 0===H?void 0:H.status)}):"canceled"===(null===H||void 0===H?void 0:H.status)?(0,w.jsx)(c.A,{color:"error",children:P(null===H||void 0===H?void 0:H.status)}):(0,w.jsx)(c.A,{color:"cyan",children:P(null===H||void 0===H?void 0:H.status)})]}),(0,w.jsxs)("p",{children:[P("payment.method")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(f=H.transaction)||void 0===f||null===(O=f.payment_system)||void 0===O?void 0:O.tag})]}),(0,w.jsxs)("p",{children:[P("order.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H?void 0:H.delivery_type})]}),(0,w.jsxs)("p",{children:[P("payment.type")," ",(0,w.jsx)("strong",{children:null===H||void 0===H||null===(I=H.transaction)||void 0===I?void 0:I.status})]})]}),(0,w.jsxs)(r.A,{span:24,className:"mt-5",children:[(0,w.jsx)("h4",{children:P("map")}),(0,w.jsx)("div",{className:"map-container",style:{height:400,width:"100%"},children:(0,w.jsxs)(l.Ay,{bootstrapURLKeys:{key:y.CJ||Q},defaultZoom:15,center:V,yesIWantToUseGoogleMapApiInternals:!0,options:{fullscreenControl:!1},onGoogleApiLoaded:e=>{let{map:t,maps:n}=e;const l=[R,G].map((e=>({lat:Number(e.lat||"0"),lng:Number(e.lng||"0")})));let a=new n.LatLngBounds;for(var o=0;o<l.length;o++)a.extend(l[o]);t.fitBounds(a)},children:[(0,w.jsx)(S,{lat:null===R||void 0===R?void 0:R.lat,lng:null===R||void 0===R?void 0:R.lng}),(0,w.jsx)(M,{lat:null===G||void 0===G?void 0:G.lat,lng:null===G||void 0===G?void 0:G.lng})]})})]})]})]})})})}},47992:(e,t,n)=>{n.d(t,{G:()=>r});var l=n(9950),a=n(95491),o=n.n(a),s=n(99674),i=n(90650),d=n(44414);const r=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:a,...r}=e;const[c,u]=(0,l.useState)(!1),[v,p]=(0,l.useState)([]),h=(0,l.useMemo)((()=>o()((e=>{p([]),u(!0),t(e).then((e=>{p(e),u(!1)}))}),n)),[t,n]);return(0,d.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),a&&a()},notFoundContent:c?(0,d.jsx)(i.A,{size:"small"}):"no results",...r,options:v,onFocus:()=>{h("")}})}},48946:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(82371);const a={orderExport:(e,t)=>l.A.get(`dashboard/user/export/order/${e}/pdf`,{params:t,responseType:"blob"})}},50198:(e,t,n)=>{n.d(t,{A:()=>d});var l=n(89379),a=n(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"};var s=n(25085),i=function(e,t){return a.createElement(s.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:o}))};i.displayName="ContainerOutlined";const d=a.forwardRef(i)},53387:(e,t,n)=>{n.d(t,{A:()=>d});var l=n(89379),a=n(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var s=n(25085),i=function(e,t){return a.createElement(s.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:o}))};i.displayName="PlusCircleOutlined";const d=a.forwardRef(i)},53774:(e,t,n)=>{n.d(t,{A:()=>a});var l=n(83291);function a(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const s=null===(e=l.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,i=Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=a||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(o||(null===s||void 0===s?void 0:s.position)||"before")?`${i} ${d}`:`${d} ${i}`}},58891:(e,t,n)=>{n.d(t,{A:()=>r});var l=n(17811),a=(n(9950),n(29949)),o=n(42935),s=n(13564),i=n(44414);const d=[{value:"seller/orders-board",title:"Board",icon:(0,i.jsx)(o.oeo,{size:20})},{value:"seller/orders",title:"List",icon:(0,i.jsx)(a.AyK,{size:20})}],r=e=>{let{listType:t}=e;const{type:n}=(0,s.g)(),a=(0,s.Zp)();return(0,i.jsx)(l.Ay.Group,{value:t,onChange:e=>{a(`/${e.target.value}${n?`/${n}`:""}`)},className:"float-right",buttonStyle:"solid",children:null===d||void 0===d?void 0:d.map((e=>(0,i.jsx)(l.Ay.Button,{value:e.value,children:(0,i.jsxs)("div",{className:"d-flex align-items-center",style:{gap:"10px"},children:[e.icon,e.title]})},e.value)))})}},73041:(e,t,n)=>{n.d(t,{A:()=>s});var l=n(23263),a=n(74522),o=(n(9950),n(44414));const s=e=>{let{loading:t}=e;return(0,o.jsx)(l.A,{className:"order-card",children:(0,o.jsx)(a.A,{loading:t,avatar:!0,active:!0})})}},73631:(e,t,n)=>{e.exports=n.p+"static/media/shop.46d7a94ca800c711764a.png"},80415:(e,t,n)=>{n.d(t,{Av:()=>c,HF:()=>a,HV:()=>d,LH:()=>l,No:()=>i,Qt:()=>s,fz:()=>r,g$:()=>o});const l={new:[1,2,3,4,5],accepted:[1,2,3,4,5],ready:[1,2,3,4,5],on_a_way:[1,2,3,4,5],delivered:[1,2,3,4,5],canceled:[1,2,3,4,5],cooking:[1,2,3,4,5]},a=["progress","paid","canceled","rejected","refund"],o=["before","after"],s=["blue","red","gold","volcano","cyan","lime"],i=["new","accepted","cooking","ready","ended"],d=["new","accepted","cooking","ready","on_a_way","delivered","canceled"],r=["dine_in","delivery","pickup"],c=["male","female"]}}]);