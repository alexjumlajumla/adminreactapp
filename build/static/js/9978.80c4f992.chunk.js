(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9978],{4587:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var r=i(9950),l=i(23263),o=i(39452),s=i(94116),n=i(53439),a=i(44414);const d={position:"absolute",zIndex:"1"},c={position:"absolute",zIndex:"1",right:"0",top:"-2px"},u=e=>{let{title:t,series:i,width:u,height:p,xAxis:h,customOptions:v,card:x,type:g,extra:f,direction:m,bodyClass:y}=e,A=JSON.parse(JSON.stringify((e=>{switch(e){case"line":default:return n.V3;case"bar":return n.ck;case"area":return n.cZ;case"pie":return n.vX}})(g)));const j=window.innerWidth<768,b=()=>{if(_.current){var e;const t=_.current.querySelectorAll("div.apexcharts-legend")[0];t.style.marginRight=`${j?0:null===(e=w.current)||void 0===e?void 0:e.offsetWidth}px`,"rtl"===m&&(t.style.right="auto",t.style.left="0"),j&&(t.style.position="relative",t.style.top=0,t.style.justifyContent="start",t.style.padding=0)}};(0,r.useEffect)((()=>{b()}),[]);const w=(0,r.useRef)(null),_=(0,r.useRef)();A.xaxis={categories:h,labels:{formatter:function(e){return e},rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,style:{fontFamily:"inherit"}},tickAmount:Math.min(null===h||void 0===h?void 0:h.length,6),axisBorder:{show:!0},axisTicks:{show:!0}},v&&(A={...A,...v});const z=()=>(0,a.jsx)(s.Ay,{onResize:void setTimeout((()=>{b()}),600),children:(0,a.jsx)("div",{style:"rtl"===m?{direction:"ltr"}:{},className:"chartRef",ref:_,children:(0,a.jsx)(o.A,{options:A,type:g,series:i,width:u,height:p})})});return(0,a.jsx)(a.Fragment,{children:x?(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:`position-relative ${y}`,children:[(0,a.jsx)("div",{style:j?{}:d,children:t})&&(0,a.jsx)("h4",{className:"font-weight-bold",style:j?{}:d,children:t}),f&&(0,a.jsx)("div",{ref:w,style:j?{}:c,children:f}),z()]})}):z()})};u.defaultProps={series:[],height:300,width:"100%",card:!0,type:"line"};const p=u},27109:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var r=i(89379),l=i(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888 792H200V168c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v688c0 4.4 3.6 8 8 8h752c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM305.8 637.7c3.1 3.1 8.1 3.1 11.3 0l138.3-137.6L583 628.5c3.1 3.1 8.2 3.1 11.3 0l275.4-275.3c3.1-3.1 3.1-8.2 0-11.3l-39.6-39.6a8.03 8.03 0 00-11.3 0l-230 229.9L461.4 404a8.03 8.03 0 00-11.3 0L266.3 586.7a8.03 8.03 0 000 11.3l39.5 39.7z"}}]},name:"line-chart",theme:"outlined"};var s=i(25085),n=function(e,t){return l.createElement(s.A,(0,r.A)((0,r.A)({},e),{},{ref:t,icon:o}))};n.displayName="LineChartOutlined";const a=l.forwardRef(n)},42634:()=>{},53439:(e,t,i)=>{"use strict";i.d(t,{V3:()=>l,cZ:()=>o,ck:()=>s,lm:()=>r,vX:()=>n});const r=["#3e82f7","#04d182","#ff6b72","#ffc107","#a461d8","#fa8c16","#17bcff"],l={chart:{zoom:{enabled:!1},toolbar:{show:!1}},colors:[...r],dataLabels:{enabled:!1},stroke:{width:3,curve:"smooth",lineCap:"round"},legend:{position:"top",horizontalAlign:"right",offsetY:-15,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[],labels:{hideOverlappingLabels:!0,rotate:0,style:{fontSize:"12px"},showDuplicates:!1,trim:!1},tickAmount:void 0,tickPlacement:"on",axisBorder:{show:!0},axisTicks:{show:!0}},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}}},o={...l},s={chart:{zoom:{enabled:!1},toolbar:{show:!1}},plotOptions:{bar:{horizontal:!1,columnWidth:"25px",startingShapre:"rounded",endingShape:"rounded"}},colors:[...r],dataLabels:{enabled:!1},stroke:{show:!0,width:6,curve:"smooth",colors:["transparent"]},legend:{position:"top",horizontalAlign:"right",offsetY:-15,inverseOrder:!0,itemMargin:{vertical:20},tooltipHoverFormatter:function(e,t){return e+" - "+t.w.globals.series[t.seriesIndex][t.dataPointIndex]}},xaxis:{categories:[]},fill:{opacity:1},tooltip:{y:{formatter:e=>`${e}`}}},n={colors:[...r],plotOptions:{pie:{size:200,donut:{labels:{show:!0,total:{show:!1,showAlways:!0,label:"",fontSize:"18px",fontFamily:"Roboto",fontWeight:"bold",color:"#1a3353",formatter:function(e){return e.globals.seriesTotals.reduce(((e,t)=>e+t),0)+"Orders count"}}},size:"100%"}}},labels:[],dataLabels:{enabled:!0},legend:{show:!0}}},53774:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(83291);function l(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const s=null===(e=r.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,n=Number(i).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a=l||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(o||(null===s||void 0===s?void 0:s.position)||"before")?`${n} ${a}`:`${a} ${n}`}},98673:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>L});var r=i(66362),l=i(87864),o=i(90650),s=i(87094),n=i(41988),a=i(80737),d=i(40895),c=i(23263),u=i(99674),p=i(12203),h=i(9950),v=i(4587),x=i(27109),g=i(31598),f=i(91854),m=i(13564),y=i(26689),A=i(21215),j=i.n(A),b=i(71795),w=i(50122),_=i(74623),z=i(88986),k=i(59051),C=i.n(k),S=i(53774),N=i(70030),O=i(44414);const{Text:T,Title:q}=r.A,{RangePicker:I}=l.A,L=()=>{var e,t,i,r;const{t:l}=(0,N.B)(),A=(0,m.zy)(),k=j().parse(A.search,[])["?category_id"],L=j().parse(A.search,[])["?product_id"],{date_from:R,date_to:P,by_time:$,chart:M,handleDateRange:F,options:B,handleByTime:V,chart_type:D,setChartType:W}=(0,h.useContext)(b.M),{loading:E,carts:H,products:J,categories:X}=(0,f.d4)((e=>e.overviewReport),f.bN),{defaultCurrency:Y}=(0,f.d4)((e=>e.currency),f.bN),{activeMenu:Z}=(0,f.d4)((e=>e.menu),f.bN),G=(0,f.wA)(),K=[{title:l("title"),dataIndex:"title",key:"title"},{title:l("item.sold"),dataIndex:"quantity",key:"quantity"},{title:l("net.sales"),dataIndex:"total_price",key:"total_price",render:e=>(0,S.A)(e,null===Y||void 0===Y?void 0:Y.symbol,null===Y||void 0===Y?void 0:Y.position)},{title:l("orders"),dataIndex:"count",key:"count"}],Q=[{title:"Total sales",qty:"delivered_sum",percent:"5",price:!0},{title:"Orders",qty:"count",percent:"5",price:!1},{title:"Canceled orders price",qty:"canceled_sum",percent:"5",price:!0},{title:"Total tax",qty:"tax",percent:"5",price:!0},{title:"Delivered avg",qty:"delivered_avg",percent:"5",price:!0},{title:"Delivery fee",qty:"delivery_fee",percent:"5",price:!0}],U=(e,t)=>{const i={date_from:R,date_to:P,type:$,page:e,perPage:t};G((0,w.u1)(i))},ee=(e,t)=>{const i={date_from:R,date_to:P,type:$,page:e,perPage:t};G((0,w.Aw)(i))},te=(e,t)=>{const i={date_from:R,date_to:P,type:$,page:e,perPage:t};k&&(i.categories=[k]),L&&(i.products=[L]),G((0,w.mc)(i))};return(0,h.useEffect)((()=>{Z.refetch&&(te(),U(),ee(),G((0,_.km)(Z)))}),[Z.refetch]),(0,z.A)((()=>{te()}),[P,$,M,k,L,R]),(0,z.A)((()=>{U()}),[P,$,R]),(0,z.A)((()=>{ee()}),[P,$,R]),(0,O.jsxs)(o.A,{size:"large",spinning:E,children:[(0,O.jsx)(s.A,{gutter:24,className:"mb-4",children:(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(a.A,{size:"large",children:(0,O.jsx)(I,{defaultValue:[C()(R),C()(P)],onChange:F})})})}),(0,O.jsx)(d.A,{orientation:"left",children:"Performance"}),(0,O.jsx)(s.A,{gutter:24,children:null===Q||void 0===Q?void 0:Q.map(((e,t)=>(0,O.jsx)(n.A,{span:6,children:(0,O.jsx)(y.N_,{to:"/report/revenue",children:(0,O.jsxs)(c.A,{children:[(0,O.jsx)(s.A,{className:"mb-5",children:(0,O.jsx)(n.A,{children:(0,O.jsx)(T,{children:e.title})})}),(0,O.jsx)(s.A,{gutter:24,children:(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(q,{level:2,children:e.price?(0,S.A)(H[e.qty],null===Y||void 0===Y?void 0:Y.symbol,null===Y||void 0===Y?void 0:Y.position):H[e.qty]})})})]})},e.title)})))}),(0,O.jsxs)(s.A,{gutter:24,className:"mb-2",children:[(0,O.jsx)(n.A,{span:20,children:(0,O.jsx)(d.A,{orientation:"left",children:"Charts"})}),(0,O.jsx)(n.A,{span:4,children:(0,O.jsxs)("div",{className:"d-flex",children:[(0,O.jsx)(u.A,{style:{width:100},onChange:V,options:B,defaultValue:$}),(0,O.jsx)(d.A,{type:"vertical",style:{height:"100%"}}),(0,O.jsxs)(a.A,{children:[(0,O.jsx)(x.A,{style:{fontSize:"22px",cursor:"pointer",color:"line"===D?"green":""},onClick:()=>W("line")}),(0,O.jsx)(g.A,{style:{fontSize:"22px",cursor:"pointer",color:"bar"===D?"green":""},onClick:()=>W("bar")})]})]})})]}),(0,O.jsxs)(s.A,{gutter:24,children:[(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(c.A,{title:"Net Sales",children:(0,O.jsx)(v.A,{type:D,series:[{name:"Orders",data:null===H||void 0===H||null===(e=H.chart_price)||void 0===e?void 0:e.map((e=>e.delivered_sum))}],xAxis:null===H||void 0===H||null===(t=H.chart_price)||void 0===t?void 0:t.map((e=>e.time))})})}),(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(c.A,{title:"Orders",children:(0,O.jsx)(v.A,{type:D,series:[{name:"Orders",data:null===H||void 0===H||null===(i=H.chart_count)||void 0===i?void 0:i.map((e=>e.count))}],xAxis:null===H||void 0===H||null===(r=H.chart_price)||void 0===r?void 0:r.map((e=>e.time))})})})]}),(0,O.jsx)(d.A,{orientation:"left",children:"Leaderboards"}),(0,O.jsxs)(s.A,{gutter:24,children:[(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(c.A,{title:"Top categories",children:(0,O.jsx)(p.A,{scroll:{x:!0},onChange:e=>{const{pageSize:t,current:i}=e;U(i,t)},pagination:{pageSize:null===X||void 0===X?void 0:X.per_page,page:(null===X||void 0===X?void 0:X.current_page)||1,total:null===X||void 0===X?void 0:X.total,defaultCurrent:1},columns:K,dataSource:null===X||void 0===X?void 0:X.data})})}),(0,O.jsx)(n.A,{span:12,children:(0,O.jsx)(c.A,{title:"Top products",children:(0,O.jsx)(p.A,{scroll:{x:!0},onChange:e=>{const{pageSize:t,current:i}=e;U(i,t)},pagination:{pageSize:null===J||void 0===J?void 0:J.per_page,page:(null===J||void 0===J?void 0:J.current_page)||1,total:null===J||void 0===J?void 0:J.total,defaultCurrent:1},columns:K,dataSource:null===J||void 0===J?void 0:J.data})})})]})]})}}}]);