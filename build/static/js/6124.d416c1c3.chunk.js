"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6124],{89281:(e,t,s)=>{s.d(t,{h:()=>o});var l=s(47313),a=s(12279),i=s.n(a),n=s(74294),u=s(72652),r=s(46417);const o=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:a,...o}=e;const[d,c]=(0,l.useState)(!1),[m,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>i()((e=>{h([]),c(!0),t(e).then((e=>{h(e),c(!1)}))}),s)),[t,s]);return(0,r.jsx)(n.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),a&&a()},notFoundContent:d?(0,r.jsx)(u.Z,{size:"small"}):"no results",...o,options:m,onFocus:()=>{p("")}})}},72161:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var l=s(47313),a=s(97890),i=s(23560),n=s(10976),u=s(77181),r=s(2717),o=s(90954),d=s(24511),c=s(4446),m=s(84980),h=s(51282),p=s(51051),v=s(46417);const f=()=>{const{t:e}=(0,d.$)(),{activeMenu:t}=(0,r.v9)((e=>e.menu),r.wU),s=(0,r.I0)(),[f]=n.Z.useForm(),x=(0,a.s0)(),{id:b}=(0,a.UO)(),{myShop:g}=(0,r.v9)((e=>e.myShop),r.wU),[j,Z]=(0,l.useState)(!1);(0,l.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);s((0,o.nc)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=b,Z(!0),c.Z.getById(e).then((e=>{var l,a,i;let{data:n}=e;const u={...n,image:(r=null===n||void 0===n?void 0:n.file_urls,r.map((e=>({name:e,url:e})))),products:{label:null===n||void 0===n||null===(l=n.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title,value:null===n||void 0===n||null===(i=n.product)||void 0===i?void 0:i.id}};var r;s((0,o.nc)({activeMenu:t,data:u})),f.setFieldsValue({...u})})).finally((()=>{Z(!1),s((0,o.A_)(t))})))}),[t.refetch]),(0,v.jsx)(u.Z,{title:e("edit.story"),className:"h-100",children:j?(0,v.jsx)(h.Z,{}):(0,v.jsx)(p.Z,{form:f,handleSubmit:(l,a)=>{const n={...Object.assign({},...a.map(((e,t)=>({[`file_urls[${t}]`]:e.name})))),product_id:l.products.value},u="seller/stories";return c.Z.update(b,n).then((()=>{const l={shop_id:g.id};i.Am.success(e("successfully.updated")),(0,r.dC)((()=>{s((0,o.ph)({...t,nextUrl:u})),s((0,m.U7)(l))})),x(`/${u}`)}))}})})}},51051:(e,t,s)=>{s.d(t,{Z:()=>p});var l=s(47313),a=s(10976),i=s(68197),n=s(59624),u=s(59491),r=s(89281),o=s(24511),d=s(2717),c=s(18333),m=s(75868),h=s(46417);function p(e){var t,s;let{form:p,handleSubmit:v}=e;const{t:f}=(0,o.$)(),{activeMenu:x}=(0,d.v9)((e=>e.menu),d.wU),{myShop:b}=(0,d.v9)((e=>e.myShop),d.wU),[g,j]=(0,l.useState)(null!==(t=null===(s=x.data)||void 0===s?void 0:s.image)&&void 0!==t?t:[]),[Z,y]=(0,l.useState)(!1);return(0,h.jsxs)(a.Z,{name:"story-form",layout:"vertical",onFinish:e=>{y(!0),v(e,g).finally((()=>y(!1)))},form:p,initialValues:{active:!0,...x.data},className:"d-flex flex-column h-100",children:[(0,h.jsxs)(i.Z,{gutter:12,children:[(0,h.jsx)(n.Z,{span:24,children:(0,h.jsx)(a.Z.Item,{label:f("image"),name:"images",rules:[{required:0===g.length,message:f("required")}],children:(0,h.jsx)(m.Z,{type:"categories",imageList:g,setImageList:j,form:p,multiple:!1})})}),(0,h.jsx)(n.Z,{span:24,children:(0,h.jsx)(a.Z.Item,{label:f("products"),name:"products",rules:[{required:!0,message:f("required")}],children:(0,h.jsx)(r.h,{fetchOptions:function(e){const t={search:e,shop_id:b.id,status:"published",active:1,rest:1};return c.Z.getAll(t).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id,key:e.id})))))},debounceTimeout:200})})})]}),(0,h.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,h.jsx)("div",{className:"pb-5",children:(0,h.jsx)(u.Z,{type:"primary",htmlType:"submit",loading:Z,children:f("submit")})})})]})}}}]);