"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[6321],{6321:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var n=s(9950),l=s(12916),a=s(48538),i=s(80737),d=s(23263),o=s(12203),r=s(24513),c=s(44070),u=s(91854),h=s(60355),v=s(55386),p=s(70030),x=s(12449),A=s(28645),m=s(74623),j=s(88986),g=s(35116),f=s(13564),_=s(76083),w=s(3969),y=s(32645),b=s(87094),k=s(41988),z=s(99674),C=s(39487),S=s(44414);const V=["new","approved","canceled"];function H(e){let{data:t,handleCancel:s,paramsData:l}=e;const{activeMenu:i}=(0,u.d4)((e=>e.menu),u.bN),[d]=w.A.useForm(),o=(0,u.wA)(),{t:r}=(0,p.B)(),[c,v]=(0,n.useState)(null),[A,j]=(0,n.useState)(!1),[g,f]=(0,n.useState)(!1);(0,n.useEffect)((()=>{f(!0),C.A.getById(null===t||void 0===t?void 0:t.id).then((e=>{let t=e.data;const s={ads_package_id:null===t||void 0===t?void 0:t.ads_package_id,banner_id:null===t||void 0===t?void 0:t.banner_id,active:null===t||void 0===t?void 0:t.active,position_page:null===t||void 0===t?void 0:t.position_page};v(s)})).catch((e=>x.oR.error(e.message))).finally((()=>f(!1)))}),[null===t||void 0===t?void 0:t.id]);return(0,S.jsx)(y.A,{visible:!!t,title:t.title,onCancel:s,footer:[(0,S.jsx)(a.A,{type:"primary",onClick:()=>d.submit(),loading:A,children:r("save")}),(0,S.jsx)(a.A,{type:"default",onClick:s,children:r("cancel")})],children:(0,S.jsx)(w.A,{form:d,layout:"vertical",onFinish:e=>{j(!0);const n={...e};console.log("shopAdData => ",c),!g&&C.A.update(t.id,{...c,status:null===n||void 0===n?void 0:n.status}).then((()=>{s(),o((0,h.z)(l)),o((0,m.km)(i))})).finally((()=>j(!1)))},initialValues:{status:t.status},children:(0,S.jsx)(b.A,{gutter:12,children:(0,S.jsx)(k.A,{span:24,children:(0,S.jsx)(w.A.Item,{label:r("status"),name:"status",rules:[{required:!0,message:r("required")}],children:(0,S.jsx)(z.A,{children:V.map((e=>(0,S.jsx)(z.A.Option,{children:r(e)},e)))})})})})})})}var I=s(8168),M=s(59051),R=s.n(M);function B(){const{t:e}=(0,p.B)(),t=(0,u.wA)(),s=(0,f.Zp)(),{activeMenu:w}=(0,u.d4)((e=>e.menu),u.bN),{shopAdsList:y,loading:b,meta:k}=(0,u.d4)((e=>e.shopAds),u.bN),{setIsModalVisible:z}=(0,n.useContext)(v.o),[V,M]=(0,n.useState)(null),[B,D]=(0,n.useState)(null),[N,F]=(0,n.useState)(null),[O,Y]=(0,n.useState)(!1),[E,P]=(0,n.useState)(null),T=w.data,$={search:null===T||void 0===T?void 0:T.serach,perPage:null===T||void 0===T?void 0:T.perPage,page:null===T||void 0===T?void 0:T.page,sort:null===T||void 0===T?void 0:T.sort};(0,n.useEffect)((()=>{w.refetch&&(t((0,h.z)($)),t((0,m.km)(w)))}),[w.refetch]),(0,j.A)((()=>{t((0,h.z)($))}),[w.data]);const q=()=>{t((0,m.X4)({id:"transactions",url:"transactions",name:e("transactions")})),s("/transactions")},K={selectedRowKeys:V,onChange:e=>{M(e)}},[X,L]=(0,n.useState)([{title:e("id"),dataIndex:"id",is_show:!0,sorter:(e,t)=>e.id-t.id},{title:e("shop"),dataIndex:"title",is_show:!0,render:(e,t)=>{var s,n;return(0,S.jsx)("span",{children:null===t||void 0===t||null===(s=t.shop)||void 0===s||null===(n=s.translation)||void 0===n?void 0:n.title})}},{title:e("expire.at"),dataIndex:"expire_at",is_show:!0,render:(t,s)=>(0,S.jsx)(S.Fragment,{children:null!==s&&void 0!==s&&s.expired_at?R()(null===s||void 0===s?void 0:s.expired_at).format("YYYY-MM-DD HH:mm"):(0,S.jsx)("span",{children:e("not.expired")})})},{title:e("status"),is_show:!0,dataIndex:"status",key:"status",render:(t,s)=>(0,S.jsxs)("div",{children:["new"===t?(0,S.jsx)(l.A,{color:"blue",children:e(t)}):"canceled"===t?(0,S.jsx)(l.A,{color:"error",children:e(t)}):(0,S.jsx)(l.A,{color:"cyan",children:e(t)}),s.deleted_at?"":(0,S.jsx)(r.A,{onClick:()=>P(s)})]})},{title:e("transaction"),dataIndex:"transaction",is_show:!0,render:(t,s)=>{var n;return(0,S.jsx)(S.Fragment,{children:t?(0,S.jsx)(a.A,{onClick:q,color:"cyan",children:null===s||void 0===s||null===(n=s.transaction)||void 0===n?void 0:n.status}):(0,S.jsx)(a.A,{color:"error",children:e("not.paid")})})}},{title:e("options"),dataIndex:"options",is_show:!0,render:(n,l)=>(0,S.jsxs)(i.A,{children:[(0,S.jsx)(a.A,{type:"primary",icon:(0,S.jsx)(r.A,{}),onClick:()=>(n=>{t((0,m.X4)({id:"shop-ads",url:`shop-ads/${n.id}`,name:e("edit.shop.ads")})),s(`/shop-ads/${n.id}`)})(l),disabled:l.deleted_at}),(0,S.jsx)(g.A,{icon:(0,S.jsx)(c.A,{}),onClick:()=>{z(!0),M([l.id]),D(!0),F(!1)},disabled:l.deleted_at})]})}]);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(d.A,{className:"p-0",children:(0,S.jsxs)(i.A,{wrap:!0,size:[14,20],children:[(0,S.jsx)(g.A,{size:"",onClick:()=>{null===V||0===V.length?x.oR.warning(e("select.the.product")):(z(!0),D(!1))},children:e("delete.selected")}),(0,S.jsx)(A.A,{columns:X,setColumns:L})]})}),(0,S.jsx)(d.A,{children:(0,S.jsx)(o.A,{scroll:{x:!0},dataSource:y,columns:null===X||void 0===X?void 0:X.filter((e=>null===e||void 0===e?void 0:e.is_show)),rowSelection:K,rowKey:e=>e.id,loading:O||b,pagination:{pageSize:k.per_page,page:k.current_page,total:k.total},onChange:(e,s,n)=>{const{pageSize:l,current:a}=e,{field:i,order:d}=n,o=(0,I.A)(d);t((0,m.Ok)({activeMenu:w,data:{...w.data,perPage:l,page:a,column:i,sort:o}}))}})}),E&&(0,S.jsx)(H,{data:E,handleCancel:()=>P(null),paramsData:$}),(0,S.jsx)(_.A,{click:N?()=>{Y(!0),C.A.setActive(V).then((()=>{z(!1),t((0,h.z)($)),x.oR.success(e("successfully.updated")),F(!1)})).finally((()=>Y(!1)))}:()=>{Y(!0);const s={...Object.assign({},...V.map(((e,t)=>({[`ids[${t}]`]:e}))))};C.A.delete(s).then((()=>{z(!1),x.oR.success(e("successfully.deleted")),t((0,h.z)($)),D(null),F(!1)})).finally((()=>{Y(!1),M(null)}))},text:e(N?"set.active.advert":B?"delete":"all.delete"),setText:M,setActive:F})]})}},8168:(e,t,s)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}s.d(t,{A:()=>n})},28645:(e,t,s)=>{s.d(t,{A:()=>x});var n=s(9950),l=s(66362),a=s(69216),i=s(80737),d=s(25933),o=s(57811),r=s(81541),c=s(48538),u=s(89323),h=s(70030),v=s(44414);const{Text:p}=l.A,x=e=>{let{columns:t=[],setColumns:s,style:l,size:x="",iconOnly:A}=e;const{t:m}=(0,h.B)(),[j,g]=(0,n.useState)(!1),f=(0,v.jsx)(a.A,{children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,v.jsx)(a.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(p,{children:e.title}),(0,v.jsx)(d.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));s(n)}(e),disabled:1===n})]})},e+n)))});return(0,v.jsx)(o.A,{overlay:f,trigger:["click"],onVisibleChange:e=>{g(e)},visible:j,children:(0,v.jsx)(r.A,{title:m("change.columns"),children:(0,v.jsx)(c.A,{style:{...l},size:x,icon:(0,v.jsx)(u.A,{}),children:A?null:m("Columns")})})})}},35116:(e,t,s)=>{s.d(t,{A:()=>r});s(9950);var n=s(48538),l=s(44070),a=s(12449),i=s(70030),d=s(13311),o=s(44414);function r(e){let{size:t="",onClick:s,type:r="default",...c}=e;const{t:u}=(0,i.B)(),{isDemo:h}=(0,d.A)();return(0,o.jsx)(n.A,{size:t,icon:(0,o.jsx)(l.A,{}),onClick:e=>{h?a.oR.warning(u("cannot.work.demo")):s(e)},type:r,...c})}},89323:(e,t,s)=>{s.d(t,{A:()=>o});var n=s(89379),l=s(9950);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=s(25085),d=function(e,t){return l.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:a}))};d.displayName="TableOutlined";const o=l.forwardRef(d)}}]);