"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1231],{11101:(e,l,a)=>{a.d(l,{Z:()=>i});var t=a(34344);const i={getAll:e=>t.Z.get("rest/brands/paginate",{params:e}),getById:(e,l)=>t.Z.get(`rest/brands/${e}`,{params:l})}},29955:(e,l,a)=>{a.d(l,{Z:()=>i});var t=a(34344);const i={getAll:e=>t.Z.get("dashboard/seller/categories/paginate",{params:e}),getById:(e,l)=>t.Z.get(`dashboard/seller/categories/${e}`,{params:l}),search:e=>t.Z.get("dashboard/seller/categories/search",{params:e}),paginateSelect:e=>t.Z.get("dashboard/seller/categories/select-paginate",{params:e})}},33403:(e,l,a)=>{a.d(l,{Z:()=>i});var t=a(34344);const i={getAll:e=>t.Z.get("dashboard/seller/units/paginate",{params:e}),getById:(e,l)=>t.Z.get(`dashboard/seller/units/${e}`,{params:l})}},16137:(e,l,a)=>{a.d(l,{Z:()=>g});var t=a(47313),i=a(10976),n=a(9274),s=a(59491),d=a(66672),r=a(24511),o=a(73431),c=a(2717),u=a(22307),v=a(23560),h=a(97340),p=a(75336),m=a(51282),x=a(46417);function g(e){let{modal:l,handleCancel:a,onSuccess:g}=e;const[Z]=i.Z.useForm(),{t:j}=(0,r.$)(),b=(0,c.I0)(),[f,y]=(0,t.useState)(!1),[k,I]=(0,t.useState)(!1),{languages:S,defaultLang:q}=(0,c.v9)((e=>e.formLang),c.wU);(0,t.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),u.Z.getGroupById(e).then((e=>{const l=e.data;Z.setFieldsValue({...l,..._(l)})})).finally((()=>I(!1))))}),[l]);function _(e){if(!e)return{};const{translations:l}=e,a=S.map((e=>{var a;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title}}));return Object.assign({},...a)}return(0,x.jsx)(n.Z,{title:null!==l&&void 0!==l&&l.id?j("edit.extra.group"):j("add.extra.group"),visible:!!l,onCancel:a,footer:[(0,x.jsx)(s.Z,{type:"primary",onClick:()=>Z.submit(),loading:f,children:j("save")},"save-button-group"),(0,x.jsx)(s.Z,{type:"default",onClick:a,children:j("cancel")},"cancel-button-group")],children:k?(0,x.jsx)(m.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(o.Z,{})}),(0,x.jsx)(i.Z,{layout:"vertical",name:"extra-group",form:Z,onFinish:e=>{const t={title:(0,p.Z)(S,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){y(!0),u.Z.updateGroup(e,l).then((()=>{v.Am.success(j("successfully.updated")),b((0,h.Vy)()),a()})).finally((()=>y(!1)))}(null===l||void 0===l?void 0:l.id,t):function(e){y(!0),u.Z.createGroup(e).then((()=>{v.Am.success(j("successfully.created")),a(),b((0,h.Vy)()),g&&g()})).finally((()=>y(!1)))}(t)},children:S.map((e=>(0,x.jsx)(i.Z.Item,{rules:[{required:e.locale===q,message:j("required")}],name:`title[${e.locale}]`,label:j("title"),hidden:e.locale!==q,children:(0,x.jsx)(d.Z,{placeholder:j("title")})},"title"+e.locale)))})]})})}},84963:(e,l,a)=>{a.d(l,{Z:()=>Z});var t=a(10976),i=a(66672),n=a(9274),s=a(59491),d=a(47313),r=a(8922),o=a(24511),c=a(2717),u=a(23560),v=a(20503),h=a(8550),p=a(34319),m=a(22307),x=a(89281),g=a(46417);function Z(e){let{modal:l,handleCancel:a,onSuccess:Z,groupId:j}=e;const[b]=t.Z.useForm(),{t:f}=(0,o.$)(),y=(0,c.I0)(),[k,I]=(0,d.useState)(!1),[S,q]=(0,d.useState)("text"),[_,$]=(0,d.useState)(null),[C,N]=(0,d.useState)(""),{extraGroups:w}=(0,c.v9)((e=>e.extraGroup),c.wU);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,a,t;q(l.group.type);const i={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(a=e.translation)||void 0===a?void 0:a.title,value:null===l||void 0===l||null===(t=l.group)||void 0===t?void 0:t.id},value:l.value};switch(l.group.type){case"color":N(l.value);break;case"image":$((0,h.Z)(l.value))}b.setFieldsValue(i)}j&&b.setFieldsValue({extra_group_id:{value:j}})}),[l,j]);function A(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,g.jsx)(n.Z,{title:null!==l&&void 0!==l&&l.id?f("edit.extra"):f("add.extra"),visible:!!l,onCancel:a,footer:[(0,g.jsx)(s.Z,{type:"primary",onClick:()=>b.submit(),loading:k,children:f("save")}),(0,g.jsx)(s.Z,{type:"default",onClick:a,children:f("cancel")})],children:(0,g.jsxs)(t.Z,{name:"extra-form",layout:"vertical",form:b,onFinish:e=>{var t;console.log(e);const i={extra_group_id:null===e||void 0===e||null===(t=e.extra_group_id)||void 0===t?void 0:t.value,value:A(S,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),m.Z.updateValue(e,l).then((()=>{u.Am.success(f("successfully.updated")),a(),y((0,p.is)())})).finally((()=>I(!1)))})(l.id,i):(e=>{I(!0),m.Z.createValue(e).then((()=>{u.Am.success(f("successfully.created")),a(),y((0,p.is)()),Z&&Z()})).finally((()=>I(!1)))})(i)},children:[(0,g.jsx)(t.Z.Item,{name:"extra_group_id",label:f("extra.group"),hidden:!!j,rules:[{required:!0,message:""}],children:(0,g.jsx)(x.h,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),m.Z.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,g.jsx)(t.Z.Item,{name:"value",label:f("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,g.jsx)(r.xS,{onChangeComplete:e=>N(e.hex),color:C,disableAlpha:!0});case"text":return(0,g.jsx)(i.Z,{placeholder:f("enter.extra.value")});case"image":return(0,g.jsx)(v.Z,{type:"extras",image:_,setImage:$,form:b,name:"value"});default:return""}})(S)})]})})}},89904:(e,l,a)=>{a.d(l,{Z:()=>N});var t=a(47313),i=a(77181),n=a(10976),s=a(45705),d=a(59491),r=a(2717),o=a(18333),c=a(90954),u=a(24511),v=a(97890),h=a(9274),p=a(32697),m=a(98276),x=a(42346),g=a(22307),Z=a(84963),j=a(82138),b=a(46417);const f=e=>{let{extra:l,onClose:a,onSelect:i}=e;const{t:n}=(0,u.$)(),[s,r]=(0,t.useState)(!1),[o,c]=(0,t.useState)([]),[v,f]=(0,t.useState)([]),[y,k]=(0,t.useState)(!1);function I(e){r(!0),g.Z.getGroupById(e).then((e=>c(e.data.extra_values.map((e=>{var l;return{label:e.value,value:e.id,group:null===(l=e.group.translation)||void 0===l?void 0:l.title}}))))).finally((()=>{r(!1)}))}return(0,t.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(I(l.value),f((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(h.Z,{visible:!!l,onCancel:a,footer:[(0,b.jsx)(d.Z,{onClick:a,children:n("cancel")}),!s&&o.length>0&&(0,b.jsx)(d.Z,{onClick:()=>{const e=[];o.forEach((l=>{v.forEach((a=>{l.value===a&&e.push(l)}))})),i(null===l||void 0===l?void 0:l.value,e),a()},type:"primary",children:n("save")})],children:[(0,b.jsx)(p.Z.Group,{value:v,onChange:e=>{f(e)},className:"w-100",children:0!==(null===o||void 0===o?void 0:o.length)||s?(0,b.jsx)(x.ZP,{dataSource:o,loading:s,renderItem:e=>(0,b.jsx)(x.ZP.Item,{children:(0,b.jsx)(p.Z,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,b.jsx)(m.Z,{})}),s?null:(0,b.jsx)(d.Z,{type:"link",onClick:()=>k(!0),style:{paddingLeft:0},icon:(0,b.jsx)(j.Z,{}),children:n("add.new.extra")})]}),l&&(0,b.jsx)(Z.Z,{modal:y,handleCancel:()=>k(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>I(null===l||void 0===l?void 0:l.value)})]})};var y=a(12258),k=a(66672),I=a(66204),S=a(18074),q=a(16137),_=a(71136);const $=e=>{let{open:l,onClose:a,selectedExtras:i,onSelect:n}=e;const{t:s}=(0,u.$)(),[r,o]=(0,t.useState)([]),[c,v]=(0,t.useState)(!1),[p,m]=(0,t.useState)(!1),[Z,f]=(0,t.useState)(""),[y,$]=(0,t.useState)(),C=(0,_.Z)(Z,500),N=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const a={valid:!0,perPage:10,search:e,page:l};g.Z.getAllGroups(a).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));o(l),$(e.meta)})).finally((()=>v(!1)))};return(0,t.useEffect)((()=>{l&&N(C)}),[l,C]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(h.Z,{visible:l,onCancel:()=>{a(),f("")},footer:c?null:(0,b.jsx)(d.Z,{type:"link",onClick:()=>m(!0),style:{paddingLeft:0},icon:(0,b.jsx)(j.Z,{}),children:s("add.new.extra")}),children:[(0,b.jsx)(k.Z,{className:"mt-3",value:Z,onChange:e=>f(e.target.value)}),(0,b.jsx)(x.ZP,{loading:c,dataSource:r.filter((e=>!(null!==i&&void 0!==i&&i.some((l=>l.id===e.id))))),renderItem:e=>(0,b.jsx)(x.ZP.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,b.jsx)(I.Z,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{n(e)},children:e.label})}),(0,b.jsx)(S.Z,{onChange:e=>{N(C,e)},current:null===y||void 0===y?void 0:y.current_page,total:null===y||void 0===y?void 0:y.total})]}),(0,b.jsx)(q.Z,{modal:p,handleCancel:()=>m(!1),onSuccess:()=>N()})]})};var C=a(23560);const N=e=>{var l;let{next:a,prev:h,isRequest:p,mode:m}=e;const{t:x}=(0,u.$)(),g=(0,r.I0)(),{uuid:Z,id:j}=(0,v.UO)(),k=(0,v.s0)(),I=(0,v.TH)(),{activeMenu:S}=(0,r.v9)((e=>e.menu),r.wU),[q,_]=(0,t.useState)(!1),[N,w]=(0,t.useState)(!1),[A,F]=(0,t.useState)((null===(l=S.data)||void 0===l?void 0:l.extras)||[]),[O,P]=(0,t.useState)(null),[M,U]=(0,t.useState)(!1),{settings:L}=(0,r.v9)((e=>e.globalSettings));return(0,b.jsx)(i.Z,{children:(0,b.jsxs)(n.Z,{layout:"vertical",initialValues:{...S.data},onFinish:()=>{var e;if(A.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void C.Am.error(x("please.select.at.least.1.extra.value.for.each.extra"));const l=A.map((e=>e.value));l.sort(((e,l)=>e-l));let a=I.state;return p?(g((0,c.nc)({activeMenu:S,data:{...S.data,extras:A}})),void k(`/seller/product-request/${j}?step=2`,{state:{generate:M}})):!M&&!I.state||"edit"!==m||null!==(e=I.state)&&void 0!==e&&e.create||"0"!==(null===L||void 0===L?void 0:L.product_auto_approve)?(_(!0),void o.Z.extras(Z,{extras:l}).then((()=>{var e;g((0,c.nc)({activeMenu:S,data:{...S.data,extras:A}})),k(`/seller/product/${Z}?step=2`,{state:{create:null===(e=I.state)||void 0===e?void 0:e.create}})})).finally((()=>_(!1)))):(I.state?a.extras=A:a={...S.data,extras:A},g((0,c.nc)({activeMenu:S,data:{...S.data,extras:A}})),void k(`/seller/product/${Z}?step=2`,{state:a}))},children:[(0,b.jsx)($,{open:N,onClose:()=>w(!1),selectedExtras:A,onSelect:e=>{U(!0),F((l=>[...l,e])),w(!1)}}),(0,b.jsx)(f,{extra:O,onClose:()=>P(null),onSelect:(e,l)=>{U(!0),F((a=>a.map((a=>{if(a.value===e){const e=l.map((e=>{var l,a;const t=null===(l=S.data)||void 0===l||null===(a=l.extras)||void 0===a?void 0:a.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===t||void 0===t?void 0:t.stock_id}}));return{...a,values:e}}return a}))))}}),(0,b.jsx)(s.Z,{className:"w-100",size:"middle",direction:"vertical",children:A.map((e=>{var l;return(0,b.jsxs)(s.Z,{className:"w-100",direction:"vertical",children:[(0,b.jsxs)(s.Z,{className:"w-100",wrap:!0,children:[(0,b.jsx)(d.Z,{onClick:()=>P(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,b.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,b.jsx)("button",{onClick:()=>{return a=e.value,t=l.value,U(!0),void F((e=>e.map((e=>e.value===a?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==t)))||[]}:e))));var a,t},type:"button",className:"extra-clear",children:(0,b.jsx)(y.IOM,{})})]},l.value)))]}),(0,b.jsx)(s.Z,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,b.jsx)(d.Z,{danger:!0,onClick:()=>{return l=e,U(!0),void F((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:x("delete")})})]},e.id)}))}),(0,b.jsx)(d.Z,{onClick:()=>w(!0),className:"w-100 my-3",type:"dashed",children:x("add.extra")}),(0,b.jsxs)(s.Z,{className:"mt-3",children:[(0,b.jsx)(d.Z,{onClick:h,children:x("prev")}),(0,b.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:q,children:x("next")})]})]})})}},44902:(e,l,a)=>{a.d(l,{Z:()=>y});var t=a(47313),i=a(77181),n=a(83371),s=a(68197),d=a(59624),r=a(35432),o=a(45705),c=a(59491),u=a(72652),v=a(2717),h=a(97890),p=a(90954),m=a(95882),x=a(24511),g=a(18333),Z=a(97421),j=a(81218),b=a(23560),f=a(46417);const y=e=>{var l,a,y,k,I,S,q,_,$,C,N,w,A;let{prev:F,isRequest:O,mode:P}=e;const{t:M}=(0,x.$)(),{activeMenu:U}=(0,v.v9)((e=>e.menu),v.wU),{defaultLang:L,languages:E}=(0,v.v9)((e=>e.formLang),v.wU),V=(0,h.s0)(),{state:G}=(0,h.TH)(),B=(0,v.I0)(),[T,W]=(0,t.useState)({}),[R,z]=(0,t.useState)(null),{uuid:H}=(0,h.UO)(),{params:D}=(0,v.v9)((e=>e.product),v.wU),[J,K]=(0,t.useState)(!1),{settings:Q}=(0,v.v9)((e=>e.globalSettings));function X(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,a=E.map((e=>{var a,t;return{[`title[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(t=l.find((l=>l.locale===e.locale)))||void 0===t?void 0:t.description}}));return Object.assign({},...a)}const Y=(0,t.useCallback)((e=>{z(!0),g.Z.getById(e).then((e=>{const l={...e.data,...X(e.data),properties:e.data.properties.map(((e,l)=>({id:l,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};W(l)})).finally((()=>z(!1)))}),[H]);(0,t.useEffect)((()=>{O||Y(H)}),[O,H]);const ee=O?U.data:G;return R?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(u.Z,{size:"large",className:"py-5"})}):(0,f.jsxs)(i.Z,{children:[G||O?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(n.Z,{title:M("product.info"),bordered:!0,children:[(0,f.jsx)(n.Z.Item,{label:`${M("title")} (${L})`,span:3,children:ee[`title[${L}]`]}),(0,f.jsx)(n.Z.Item,{label:`${M("description")} (${L})`,span:3,children:ee[`description[${L}]`]}),(0,f.jsx)(n.Z.Item,{label:M("shop"),span:1.5,children:null===ee||void 0===ee||null===(l=ee.shop)||void 0===l?void 0:l.translation.title}),(0,f.jsx)(n.Z.Item,{label:M("category"),span:1.5,children:null===ee||void 0===ee||null===(a=ee.category)||void 0===a?void 0:a.label}),(0,f.jsx)(n.Z.Item,{label:M("brand"),span:1.5,children:null===ee||void 0===ee||null===(y=ee.brand)||void 0===y?void 0:y.label}),(0,f.jsx)(n.Z.Item,{label:M("unit"),span:1.5,children:null===ee||void 0===ee||null===(k=ee.unit)||void 0===k?void 0:k.label}),(0,f.jsx)(n.Z.Item,{label:M("images"),span:3,children:(0,f.jsx)(s.Z,{gutter:12,children:null===ee||void 0===ee||null===(I=ee.images)||void 0===I?void 0:I.map(((e,l)=>(0,f.jsx)(d.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,f.jsx)(n.Z.Item,{label:M("tax"),children:null===ee||void 0===ee?void 0:ee.tax}),(0,f.jsx)(n.Z.Item,{label:M("min.quantity"),children:null===ee||void 0===ee?void 0:ee.min_qty}),(0,f.jsx)(n.Z.Item,{label:M("max.quantity"),children:null===ee||void 0===ee?void 0:ee.max_qty})]}),!(null===ee||void 0===ee||null===(S=ee.stocks)||void 0===S||!S.length)&&(0,f.jsx)(r.Z,{children:(0,f.jsx)(r.Z.Panel,{header:M("stocks"),children:null===ee||void 0===ee?void 0:ee.stocks.map(((e,l)=>{var a;return(0,f.jsx)(r.Z,{className:"mt-4",children:(0,f.jsx)(r.Z.Panel,{header:M("stocks"),children:(0,f.jsxs)(n.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(n.Z.Item,{label:M("price"),span:2,children:e.price}),(0,f.jsx)(n.Z.Item,{label:M("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(a=e.ids)||void 0===a?void 0:a.map(((e,l)=>(0,f.jsx)(n.Z.Item,{label:null===ee||void 0===ee?void 0:ee.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l)},"seller-stocks")})}))},"seller-stocks")})]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(n.Z,{title:M("product.info"),bordered:!0,children:[(0,f.jsx)(n.Z.Item,{label:`${M("title")} (${L})`,span:3,children:T[`title[${L}]`]}),(0,f.jsx)(n.Z.Item,{label:`${M("description")} (${L})`,span:3,children:T[`description[${L}]`]}),(0,f.jsx)(n.Z.Item,{label:M("shop"),span:1.5,children:null===(q=T.shop)||void 0===q?void 0:q.translation.title}),(0,f.jsx)(n.Z.Item,{label:M("category"),span:1.5,children:null===(_=T.category)||void 0===_?void 0:_.translation.title}),(0,f.jsx)(n.Z.Item,{label:M("brand"),span:1.5,children:null===($=T.brand)||void 0===$?void 0:$.title}),(0,f.jsx)(n.Z.Item,{label:M("unit"),span:1.5,children:null===(C=T.unit)||void 0===C?void 0:C.translation.title}),(0,f.jsx)(n.Z.Item,{label:M("images"),span:3,children:(0,f.jsx)(s.Z,{gutter:12,children:null===T||void 0===T||null===(N=T.galleries)||void 0===N?void 0:N.map(((e,l)=>(0,f.jsx)(d.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:Z.bV+e.path})},"image"+l)))})}),(0,f.jsx)(n.Z.Item,{label:M("tax"),children:T.tax}),(0,f.jsx)(n.Z.Item,{label:M("min.quantity"),children:T.min_qty}),(0,f.jsx)(n.Z.Item,{label:M("max.quantity"),children:T.max_qty})]}),!(null===(w=T.stocks)||void 0===w||!w.length)&&(0,f.jsx)(r.Z,{className:"mt-4",children:(0,f.jsx)(r.Z.Panel,{header:M("stocks"),children:null===(A=T.stocks)||void 0===A?void 0:A.map(((e,l)=>(0,f.jsxs)(n.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(n.Z.Item,{label:M("price"),span:2,children:e.price}),(0,f.jsx)(n.Z.Item,{label:M("quantity"),span:2,children:e.quantity}),e.extras.map(((e,l)=>{var a,t;return(0,f.jsx)(n.Z.Item,{label:null===e||void 0===e||null===(a=e.group)||void 0===a||null===(t=a.translation)||void 0===t?void 0:t.title,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l)))},"seller-stocks")})]}),(0,f.jsx)("div",{className:"d-flex mt-4",children:(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(c.Z,{onClick:F,children:M("prev")}),(0,f.jsx)(c.Z,{loading:J,type:"primary",onClick:function(){const e="seller/products",l={...D};if(O&&U.data){K(!0);const a={id:U.data.model_id,type:"product",data:U.data};j.Z.requestChangeUpdate(U.data.request_id,a).then((()=>{V(`/${e}`,{state:{tab:"request"}}),b.Am.success(M("successfully.updated")),B((0,p.ph)({...U,nextUrl:e})),B((0,m.MW)(l))})).finally((()=>{K(!1)}))}else if(G&&"edit"===P&&"0"===(null===Q||void 0===Q?void 0:Q.product_auto_approve)){K(!0);const a={type:"product",id:U.data.product_id,data:G};j.Z.requestChange(a).then((()=>{b.Am.success(M("successfully.updated")),B((0,p.ph)({...U,nextUrl:e})),B((0,m.MW)(l)),V(`/${e}`,{state:{tab:"request"}})})).finally((()=>{K(!1)}))}else B((0,p.ph)({...U,nextUrl:e})),B((0,m.MW)(l)),V(`/${e}`)},children:M("finish")})]})})]})}},32937:(e,l,a)=>{a.d(l,{Z:()=>$});var t=a(47313),i=a(10976),n=a(68197),s=a(59624),d=a(77181),r=a(66672),o=a(16124),c=a(86345),u=a(59491),v=a(89281),h=a(11101),p=a(29955),m=a(2717),x=a(18333),g=a(90954),Z=a(33403),j=a(97890),b=a(24511),f=a(75868),y=a(49080),k=a(82138),I=a(20776),S=a(4067),q=a(49655),_=a(46417);const $=e=>{var l,a,$;let{next:C,action_type:N="",isRequest:w}=e;const{t:A}=(0,b.$)(),[F]=i.Z.useForm(),O=(0,m.I0)(),{uuid:P}=(0,j.UO)(),M=(0,j.s0)(),{activeMenu:U}=(0,m.v9)((e=>e.menu),m.wU),{defaultLang:L,languages:E}=(0,m.v9)((e=>e.formLang),m.wU),[V,G]=(0,t.useState)(null!==(l=U.data)&&void 0!==l&&l.images?null===(a=U.data)||void 0===a?void 0:a.images:[]),[B,T]=(0,t.useState)(!1),[W,R]=(0,t.useState)(Boolean(null===($=U.data)||void 0===$?void 0:$.kcal)),[z,H]=(0,t.useState)({kitchen:!1}),{settings:D}=(0,m.v9)((e=>e.globalSettings));const J=()=>{O((0,g.bL)({url:"seller/category/add",id:"seller/category/add",name:A("edit.category")})),M("/seller/category/add")};return(0,_.jsxs)(i.Z,{layout:"vertical",form:F,initialValues:{active:!0,vegetarian:!0,...U.data},onFinish:e=>{var l,a,t,i,n;T(!0);const s={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(a=e.category)||void 0===a?void 0:a.value)||e.category,shop_id:null===e||void 0===e||null===(t=e.shop)||void 0===t?void 0:t.value,kitchen_id:(null===e||void 0===e||null===(i=e.kitchen)||void 0===i?void 0:i.value)||void 0,unit_id:null===(n=e.unit)||void 0===n?void 0:n.value,kcal:W?String(e.kcal):void 0,carbs:W?String(e.carbs):void 0,protein:W?String(e.protein):void 0,fats:W?String(e.fats):void 0,images:V,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0,...Object.assign({},...V.map(((e,l)=>({[`images[${l}]`]:e.name}))))};var d,r,o,c,u;if(w)return O((0,g.nc)({activeMenu:U,data:{...U.data,...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(d=e.brand)||void 0===d?void 0:d.value,category_id:(null===(r=e.category)||void 0===r?void 0:r.value)||e.category,kitchen_id:(null===e||void 0===e||null===(o=e.kitchen)||void 0===o?void 0:o.value)||void 0,shop_id:null===(c=e.shop)||void 0===c?void 0:c.value,unit_id:null===(u=e.unit)||void 0===u?void 0:u.value,kcal:W?String(e.kcal):void 0,carbs:W?String(e.carbs):void 0,protein:W?String(e.protein):void 0,fats:W?String(e.fats):void 0,tax:e.tax||0,title:{...Object.assign({},...E.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},description:{...Object.assign({},...E.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))},...Object.assign({},...V.map(((e,l)=>({[`images[${l}]`]:e.name}))))}})),void C();let v=!1;if(Object.entries(e).forEach((e=>{var l,a;let[t,i]=e;var n,s,d,r;((t.startsWith("title")||t.startsWith("description"))&&U.data&&U.data[t]!==i&&(v=!0),"category"===t)&&((null===(n=U.data)||void 0===n||null===(s=n.category)||void 0===s?void 0:s.value)!==(null===i||void 0===i?void 0:i.value)&&(v=!0));"brand"===t&&((null===(d=U.data)||void 0===d||null===(r=d.brand)||void 0===r?void 0:r.value)!==(null===i||void 0===i?void 0:i.value)&&(v=!0));((null===V||void 0===V?void 0:V.find((e=>"done"===e.status)))||(null===V||void 0===V?void 0:V.length)!==(null===(l=U.data)||void 0===l||null===(a=l.images)||void 0===a?void 0:a.length))&&(v=!0)})),"edit"===N){const l={...s};if(l.title={...Object.assign({},...E.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},l.description={...Object.assign({},...E.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))},(0,g.nc)({activeMenu:U,data:l}),v&&"0"===(null===D||void 0===D?void 0:D.product_auto_approve))return void function(e){M(`/seller/product/${P}?step=1`,{state:e})}(l);!function(e,l){var a;l.product_id=null===(a=U.data)||void 0===a?void 0:a.product_id,x.Z.update(P,l).then((()=>{O((0,g.nc)({activeMenu:U,data:{...l,...null===U||void 0===U?void 0:U.data}})),C()})).finally((()=>T(!1)))}(0,s)}else!function(e,l){x.Z.create(l).then((l=>{let{data:a}=l;O((0,g.SS)({id:`product-${a.uuid}`,url:`seller/product/${a.uuid}`,name:A("add.product"),data:e,refetch:!1})),M(`/seller/product/${a.uuid}?step=1`,{state:{create:!0}})})).finally((()=>T(!1)))}(e,s)},children:[(0,_.jsxs)(n.Z,{gutter:12,children:[(0,_.jsx)(s.Z,{span:16,children:(0,_.jsxs)(n.Z,{children:[(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("basic.info"),children:(0,_.jsxs)(n.Z,{children:[(0,_.jsx)(s.Z,{span:24,children:E.map((e=>(0,_.jsx)(i.Z.Item,{label:A("name"),name:`title[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===L,message:A("required")},{type:"string",min:2,max:200,message:A("min.2.max.200.chars")}],hidden:e.locale!==L,children:(0,_.jsx)(r.Z,{})},"name"+e.id)))}),(0,_.jsx)(s.Z,{span:24,children:E.map((e=>(0,_.jsx)(i.Z.Item,{label:A("description"),name:`description[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===L,message:A("required")},{type:"string",min:2,max:200,message:A("min.2.max.200.chars")}],hidden:e.locale!==L,children:(0,_.jsx)(y.Z,{rows:3})},"description"+e.id)))})]})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("pricing"),children:(0,_.jsxs)(n.Z,{gutter:12,children:[(0,_.jsx)(s.Z,{span:8,children:(0,_.jsx)(i.Z.Item,{label:A("min.qty"),name:"min_qty",rules:[{required:!0,message:A("required")}],children:(0,_.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,_.jsx)(s.Z,{span:8,children:(0,_.jsx)(i.Z.Item,{label:A("max.qty"),name:"max_qty",rules:[{required:!0,message:A("required")}],children:(0,_.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,_.jsx)(s.Z,{span:8,children:(0,_.jsx)(i.Z.Item,{label:A("tax"),name:"tax",children:(0,_.jsx)(o.Z,{min:0,className:"w-100",addonAfter:"%"})})})]})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("additions"),children:(0,_.jsxs)(n.Z,{gutter:12,children:[(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{label:A("active"),name:"active",valuePropName:"checked",children:(0,_.jsx)(c.Z,{})})}),(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{label:A("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,_.jsx)(c.Z,{})})}),(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{label:A("nutrition."+(W?"on":"off")),valuePropName:"checked",children:(0,_.jsx)(c.Z,{checked:W,onChange:e=>R(e)})})})]})})}),W&&(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("nutritional.value.of.food"),children:(0,_.jsxs)(n.Z,{gutter:12,children:[(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("kcal"),name:"kcal",children:(0,_.jsx)(o.Z,{className:"w-100"})})}),(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("carbs"),name:"carbs",children:(0,_.jsx)(o.Z,{className:"w-100"})})}),(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("protein"),name:"protein",children:(0,_.jsx)(o.Z,{className:"w-100"})})}),(0,_.jsx)(s.Z,{span:6,children:(0,_.jsx)(i.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("fats"),name:"fats",children:(0,_.jsx)(o.Z,{className:"w-100"})})})]})})})]})}),(0,_.jsx)(s.Z,{span:8,children:(0,_.jsxs)(n.Z,{children:[(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("organization"),children:(0,_.jsxs)(n.Z,{children:[(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{label:A("category"),name:"category",rules:[{required:!0,message:A("required")}],children:(0,_.jsx)(I.o,{fetchOptions:function(e){const l={search:null!==e&&void 0!==e&&e.length?e:void 0,type:"main","statuses[0]":"pending","statuses[1]":"published",active:1,page:1,perPage:20};return p.Z.paginateSelect(l).then((e=>e.data.map((e=>{var l,a,t;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.length)>0,children:null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))))},refetch:!0,dropdownRender:e=>(0,_.jsxs)(_.Fragment,{children:[e,(0,_.jsx)("div",{className:"p-1",children:(0,_.jsx)(u.Z,{icon:(0,_.jsx)(k.Z,{}),className:"w-100",onClick:J,children:A("add.category")})})]})})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{label:A("kitchen"),name:"kitchen",children:(0,_.jsx)(q._,{allowClear:!1,fetchOptions:e=>{let{search:l,page:a=1}=e;const t={search:null!==l&&void 0!==l&&l.length?l:void 0,page:a,perPage:20,active:1};return S.Z.getAll(t).then((e=>{var l,a,t;return H({...z,kitchen:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.last_page)}),null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:z.kitchen})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{label:A("brand"),name:"brand",rules:[{required:!1,message:A("required")}],children:(0,_.jsx)(v.h,{fetchOptions:function(e){const l={page:1,perPage:20,search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return h.Z.getAll(l).then((e=>e.data.map((e=>({label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{label:A("unit"),name:"unit",rules:[{required:!0,message:A("required")}],children:(0,_.jsx)(v.h,{fetchOptions:function(e){const l={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return Z.Z.getAll(l).then((e=>{let{data:l}=e;return function(e){return e.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}(l)}))}})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{label:A("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:A("required")},{type:"number",min:1,message:A("should.be.more.than.1")}],children:(0,_.jsx)(o.Z,{className:"w-100"})})})]})})}),(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(d.Z,{title:A("media"),children:(0,_.jsx)(n.Z,{children:(0,_.jsx)(s.Z,{span:24,children:(0,_.jsx)(i.Z.Item,{name:"images",children:(0,_.jsx)(f.Z,{type:"products",imageList:V,setImageList:G,form:F,multiple:!0})})})})})})]})})]}),(0,_.jsx)(u.Z,{type:"primary",htmlType:"submit",loading:B,children:A("next")})]})}},16848:(e,l,a)=>{a.d(l,{S:()=>t});const t=[{title:"food",content:"First-content"},{title:"food.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);