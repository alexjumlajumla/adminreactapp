"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2470],{92470:(t,e,a)=>{a.r(e),a.d(e,{default:()=>j});var i=a(9950),l=a(13564),s=a(12449),n=a(86366),d=a(3969),o=a(23263),u=a(91854),c=a(74623),r=a(70030),v=a(71999),m=a(96210),p=a(5742),g=a(63620),h=a(44414);const{Step:_}=n.A,j=()=>{var t,e,a,j,k,x,S,f,A;const{t:y}=(0,r.B)(),{activeMenu:b}=(0,u.d4)((t=>t.menu),u.bN),w=(0,u.wA)(),[C]=d.A.useForm(),F=(0,l.Zp)(),E=t=>({name:t,url:g.sE+t}),[q,B]=(0,i.useState)(null!==(t=b.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[E(null===(a=b.data)||void 0===a||null===(j=a.galleries)||void 0===j?void 0:j[0].path)]:[]),[M,N]=(0,i.useState)(null!==(k=b.data)&&void 0!==k&&null!==(x=k.galleries)&&void 0!==x&&x[1]?[E(null===(S=b.data)||void 0===S||null===(f=S.galleries)||void 0===f?void 0:f[1].path)]:[]),V=[...q,...M],[$,I]=(0,i.useState)((null===(A=b.data)||void 0===A?void 0:A.step)||0),K=()=>{I($+1)},O=()=>{I($-1)},[R,U]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const t=C.getFieldsValue(!0);w((0,c.Ok)({activeMenu:b,data:t}))}),[]);return(0,h.jsx)(o.A,{title:y("add.recepe"),extra:(0,h.jsx)(v.A,{}),children:(0,h.jsxs)(d.A,{layout:"vertical",onFinish:t=>{var e;C.validateFields();const a={...t,images:V.map((t=>t.name)),category_id:t.category_id.value,shop_id:t.shop_id.value,active_time:t.active_time.toString(),total_time:t.total_time.toString(),nutrition:t.nutrition.map((t=>({...t,percentage:String(t.percentage),weight:String(t.weight)}))),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((t=>({min_quantity:t.min_quantity,stock_id:t.stock_id.value})))};U(!0);const i="catalog/recept";p.A.create(a).then((()=>{s.oR.success(y("successfully.created")),F(`/${i}`),w((0,c.EK)({...b,nextUrl:i}))})).finally((()=>U(!1)))},form:C,initialValues:{active:!0,...b.data},children:[(0,h.jsx)(n.A,{current:$,children:m.C.map((t=>(0,h.jsx)(_,{title:y(t.title)},t.title)))}),m.C.map((t=>{const e=t.content;return(0,h.jsx)("div",{className:`steps-content ${t.step!==$+1&&"hidden"}`,children:(0,h.jsx)(e,{next:K,prev:O,loading:R,image:q,setImage:B,back:M,setBack:N})},t.title)}))]})})}}}]);