"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1539],{81449:(e,l,i)=>{i.d(l,{Z:()=>t});i(47313);var s=i(84697),n=i(2717),a=i(97421),d=i(46417);function t(e){let{center:l,handleLoadMap:i,children:t}=e;const{google_map_key:o}=(0,n.v9)((e=>e.globalSettings.settings),n.wU);return(0,d.jsx)(s.ZP,{bootstrapURLKeys:{key:o||a.kr},defaultZoom:12,center:l,options:{fullscreenControl:!1},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:e=>{let{map:l,maps:s}=e;return i(l,s)},children:t})}},17649:(e,l,i)=>{i.d(l,{Z:()=>s});i(97421);function s(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},29242:(e,l,i)=>{function s(e,l){var i=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(l){return e>=l.value}));return i?"$"+(e/i.value).toFixed(l).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+i.symbol:"0"}i.d(l,{p:()=>s})},33118:(e,l,i)=>{i.d(l,{Z:()=>d});var s=i(70816),n=i.n(s),a=i(24511);function d(e){const{t:l}=(0,a.$)();let i=n()(),s=n()(e),d=i.diff(s,"hours"),t=i.diff(s,"minutes");return d>23?n()(e).format("Do MMM, H:mm"):d>0?d+" "+l("hours.ago"):t+" "+l("minutes.ago")}},81539:(e,l,i)=>{i.r(l),i.d(l,{default:()=>U});var s=i(47313),n=i(45334),a=i(77181),d=i(74294),t=i(68197),o=i(59624),r=i(24511),v=i(2717),u=i(17649),c=i(97421),m=i(81566),h=i(90954),x=i(51282),g=i(80314),p=i(11829),j=i(55613),_=i(29242),y=i(33118),b=i(46417);const f=e=>{var l;let{data:i,handleClose:s}=e;const{t:a}=(0,r.$)(),d=(0,y.Z)(null===i||void 0===i||null===(l=i.delivery_man_setting)||void 0===l?void 0:l.updated_at),v=null===i||void 0===i?void 0:i.assign_reviews_avg_rating,u=null===i||void 0===i?void 0:i.phone,m=null===i||void 0===i?void 0:i.delivery_man_orders_count,h=null===i||void 0===i?void 0:i.delivery_man_orders_sum_total_price;return(0,b.jsxs)(t.Z,{gutter:12,align:"middle",children:[(0,b.jsx)(o.Z,{span:7,children:(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)(n.C,{src:c.bV+(null===i||void 0===i?void 0:i.img)}),(0,b.jsxs)("div",{className:"ml-2",children:[(0,b.jsx)("div",{className:"title",children:(null===i||void 0===i?void 0:i.firstname)+" "+(null===i||void 0===i?void 0:i.lastname)}),(0,b.jsx)(j.Z,{disabled:!0,allowHalf:!0,value:v||0})]})]})}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:u}),(0,b.jsx)("div",{className:"label",children:a("phone")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:d}),(0,b.jsx)("div",{className:"label",children:a("last.activity")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:m}),(0,b.jsx)("div",{className:"label",children:a("total.orders")})]}),(0,b.jsxs)(o.Z,{span:4,children:[(0,b.jsx)("div",{className:"title",children:(0,_.p)(h)}),(0,b.jsxs)("div",{className:"label",children:[" ",a("total.earning")]})]}),(0,b.jsx)(o.Z,{span:1,children:(0,b.jsx)("button",{type:"button",className:"close-btn",onClick:s,children:(0,b.jsx)(p.Z,{})})})]})};var Z=i(45705),N=i(97890),k=i(39548);function w(e){var l,i,s,d;let{data:t}=e;const{t:o}=(0,r.$)(),u=(0,N.s0)(),m=(0,v.I0)(),{menuItems:x}=(0,v.v9)((e=>e.menu),v.wU),g=(null===t||void 0===t?void 0:t.deliveryman_orders)||[],p=(0,y.Z)(null===t||void 0===t||null===(l=t.delivery_man_setting)||void 0===l?void 0:l.updated_at);return(0,b.jsxs)(a.Z,{className:"user-card",onClick:()=>(e=>{!!x.find((e=>"delivery_map_orders"===e.id))&&m((0,h.ph)({id:"delivery_map_orders",nextUrl:"deliveries/map"})),m((0,h.bL)({url:`deliveries/map/${e.id}`,id:"delivery_map_orders",name:o("delivery.orders"),data:{list:g,item:g[0],deliveryman:t}})),u(`/deliveries/map/${e.id}`)})(t),children:[(0,b.jsxs)(Z.Z,{children:[(0,b.jsx)(n.C,{src:c.bV+(null===t||void 0===t?void 0:t.img),icon:(0,b.jsx)(k.Z,{}),style:{color:"#1a3353"}}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"title",children:[null===t||void 0===t?void 0:t.firstname," ",null===t||void 0===t||null===(i=t.lastname)||void 0===i?void 0:i.charAt(0),"."]}),(0,b.jsx)("div",{className:"last-seen "+(null!==t&&void 0!==t&&null!==(s=t.delivery_man_setting)&&void 0!==s&&s.online?"online":"text-muted"),children:null!==t&&void 0!==t&&null!==(d=t.delivery_man_setting)&&void 0!==d&&d.online?o("online"):p})]})]}),(0,b.jsx)("div",{className:"mt-2"}),(0,b.jsxs)(Z.Z,{children:[(0,b.jsxs)("div",{children:[o("active_orders"),":"]}),(0,b.jsx)("div",{children:g.length})]})]})}var C=i(81449);const $=[{label:"All",value:"all",key:1},{label:"Online",value:"1",key:2},{label:"Offline",value:"0",key:3}],M=e=>(0,b.jsx)(n.C,{src:e.url,icon:(0,b.jsx)(k.Z,{}),style:{color:"#1a3353"},onClick:e.onClick});function U(){const{t:e}=(0,r.$)(),{activeMenu:l}=(0,v.v9)((e=>e.menu),v.wU),i=(0,v.I0)(),[n,p]=(0,s.useState)(void 0),[j,_]=(0,s.useState)(null),{settings:y}=(0,v.v9)((e=>e.globalSettings),v.wU),Z=(0,u.Z)(y),{delivery:N,loading:k}=(0,v.v9)((e=>e.deliveries),v.wU);(0,g.Z)((()=>{const e={page:1,perPage:100,online:"all"===n?void 0:n,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"};i((0,m.W)(e))}),[n]);return(0,s.useEffect)((()=>{null!==l&&void 0!==l&&l.refetch&&(i((0,m.W)({perPage:100,"statuses[0]":"new","statuses[1]":"accepted","statuses[2]":"ready","statuses[3]":"on_a_way"})),i((0,h.A_)(l)))}),[null===l||void 0===l?void 0:l.refetch]),(0,b.jsx)(a.Z,{title:e("deliveries"),className:"delivery",extra:(0,b.jsx)(d.Z,{options:$,defaultValue:"all",loading:k,onChange:e=>p(e),style:{width:"200px"}}),children:k?(0,b.jsx)(x.Z,{}):(0,b.jsxs)(t.Z,{gutter:8,children:[(0,b.jsx)(o.Z,{span:18,children:(0,b.jsxs)("div",{className:"map-container",style:{height:"73vh",width:"100%"},children:[!!j&&(0,b.jsx)(a.Z,{className:"map-user-card",children:(0,b.jsx)(f,{data:j,handleClose:()=>{_(null)}})}),(0,b.jsx)(C.Z,{center:Z,handleLoadMap:(e,l)=>{const i=N.map((e=>{var l,i;return{lat:Number((null===(l=e.delivery_man_setting)||void 0===l?void 0:l.location.latitude)||"0"),lng:Number((null===(i=e.delivery_man_setting)||void 0===i?void 0:i.location.longitude)||"0")}}));let s=new l.LatLngBounds;for(var n=0;n<i.length;n++)s.extend(i[n]);e.fitBounds(s)},children:N.map((e=>{var l,i,s,n;return(0,b.jsx)(M,{lat:Number((null===e||void 0===e||null===(l=e.delivery_man_setting)||void 0===l||null===(i=l.location)||void 0===i?void 0:i.latitude)||"0"),lng:Number((null===e||void 0===e||null===(s=e.delivery_man_setting)||void 0===s||null===(n=s.location)||void 0===n?void 0:n.longitude)||"0"),url:c.bV+e.img,onClick:()=>{_(e)}},e.id)}))})]})}),(0,b.jsx)(o.Z,{span:6,children:(0,b.jsx)("div",{className:"order-list",style:{height:"75vh"},children:N.map(((e,l)=>(0,b.jsx)(w,{data:e},e.id+l)))})})]})})}}}]);