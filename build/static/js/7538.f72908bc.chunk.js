"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7538],{47538:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(47313),s=a(10976),i=a(77181),c=a(72652),n=a(23560),r=a(97890),d=a(73431),o=a(2717),u=a(90954),v=a(57481),f=a(24511),g=a(85191),h=a(75336),p=a(16747),m=a(46417);const y=()=>{const{t:e}=(0,f.$)(),t=(0,r.s0)(),a=(0,o.I0)(),{activeMenu:y}=(0,o.v9)((e=>e.menu),o.wU),[Z,b]=(0,l.useState)(!1),[x]=s.Z.useForm(),{id:j}=(0,r.UO)(),{params:_}=(0,o.v9)((e=>e.career),o.wU),{languages:w}=(0,o.v9)((e=>e.formLang),o.wU);function U(e){if(!e)return{};const{translations:t}=e,a=w.map((e=>{var a,l,s;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description,[`address[${e.locale}]`]:null===(s=t.find((t=>t.locale===e.locale)))||void 0===s?void 0:s.address}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=x.getFieldsValue(!0);a((0,u.nc)({activeMenu:y,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;y.refetch&&(e=j,b(!0),v.Z.getById(e).then((e=>{var t,l,s;let i=e.data;const c={...i,...U(i),category_id:{label:null===i||void 0===i||null===(t=i.category)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title,value:null===i||void 0===i||null===(s=i.category)||void 0===s?void 0:s.id}};x.setFieldsValue(c),a((0,u.nc)({activeMenu:y,data:c}))})).finally((()=>{b(!1),a((0,u.A_)(y))})))}),[y.refetch]),(0,m.jsx)(i.Z,{title:e("clone.career"),extra:(0,m.jsx)(d.Z,{}),children:Z?(0,m.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,m.jsx)(c.Z,{size:"large",className:"mt-5 pt-5"})}):(0,m.jsx)(p.Z,{form:x,handleSubmit:l=>{const s={...l,title:(0,h.Z)(w,l,"title"),description:(0,h.Z)(w,l,"description"),address:(0,h.Z)(w,l,"address"),active:l.active?1:0,category_id:l.category_id.value},i="catalog/career";return v.Z.create(s).then((()=>{n.Am.success(e("successfully.updated")),(0,o.dC)((()=>{a((0,u.ph)({...y,nextUrl:i})),a((0,g.a)(_))})),t(`/${i}`)})).catch((e=>console.error(e.response.data.params)))}})})}}}]);