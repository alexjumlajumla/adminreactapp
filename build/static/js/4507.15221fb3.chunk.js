"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4507],{8168:(e,a,t)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}t.d(a,{A:()=>n})},8297:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(9950),l=t(55902),o=t(41397),s=t(60767),i=t(44414);function d(e){let{handleChange:a,defaultValue:t,resetSearch:d,...r}=e;const[c,u]=(0,n.useState)(t),h=(0,n.useMemo)((()=>(0,o.debounce)((e=>{a(e)}),800)),[a]);return(0,n.useEffect)((()=>{u(t)}),[d,t]),(0,i.jsx)(l.A,{value:c,onChange:e=>{u(e.target.value),h(e.target.value)},prefix:(0,i.jsx)(s.A,{}),...r})}},24507:(e,a,t)=>{t.r(a),t.d(a,{default:()=>b});var n=t(9950),l=t(12916),o=t(23263),s=t(80737),i=t(48538),d=t(12203),r=t(91854),c=t(74623),u=t(70030),h=t(8168),v=t(88986),m=t(69184),p=t(28645),f=t(8297),x=t(53774),A=t(59051),g=t.n(A),y=t(41901),j=t(44414);function b(){var e,a;const{t:t}=(0,u.B)(),A=(0,r.wA)(),{activeMenu:b}=(0,r.d4)((e=>e.menu),r.bN),{repayments:_,loading:w,meta:C,params:k}=(0,r.d4)((e=>e.sellerLoans),r.bN),{defaultCurrency:S}=(0,r.d4)((e=>e.currency),r.bN),[z,V]=(0,n.useState)([{title:t("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:t("loan_id"),dataIndex:"loan_id",key:"loan_id",is_show:!0},{title:t("amount"),dataIndex:"amount",key:"amount",is_show:!0,render:e=>(0,x.A)(e,null===S||void 0===S?void 0:S.symbol,null===S||void 0===S?void 0:S.position)},{title:t("payment_method"),dataIndex:"payment_method",key:"payment_method",is_show:!0,render:e=>(0,j.jsx)(l.A,{children:e})},{title:t("created_at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>g()(e).format("YYYY-MM-DD")}]),[I,H]=(0,n.useState)(!1);(0,n.useEffect)((()=>{b.refetch&&(A((0,m.Q0)()),A((0,c.km)(b)))}),[b.refetch]),(0,v.A)((()=>{const e=b.data,a={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};A((0,m.Q0)(a))}),[b.data]);return(0,j.jsxs)(o.A,{title:t("loan_repayments"),extra:(0,j.jsxs)(s.A,{wrap:!0,children:[(0,j.jsx)(i.A,{type:"primary",onClick:()=>H(!0),children:t("repay_loan")}),(0,j.jsx)(f.A,{placeholder:t("search"),handleChange:e=>((e,a)=>{const t=b.data;A((0,c.Ok)({activeMenu:b,data:{...t,[a]:e}}))})(e,"search"),defaultValue:null===(e=b.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(a=b.data)&&void 0!==a&&a.search)}),(0,j.jsx)(p.A,{columns:z,setColumns:V})]}),children:[(0,j.jsx)(d.A,{scroll:{x:!0},columns:z.filter((e=>e.is_show)),dataSource:_,loading:w,pagination:{pageSize:k.perPage,page:k.page,total:null===C||void 0===C?void 0:C.total},rowKey:e=>e.id,onChange:function(e,a,t){const{pageSize:n,current:l}=e,{field:o,order:s}=t,i=(0,h.A)(s);A((0,c.Ok)({activeMenu:b,data:{perPage:n,page:l,column:o,sort:i}}))}}),I&&(0,j.jsx)(y.A,{visible:I,onCancel:()=>H(!1),onSuccess:()=>A((0,m.Q0)())})]})}},28645:(e,a,t)=>{t.d(a,{A:()=>p});var n=t(9950),l=t(66362),o=t(69216),s=t(80737),i=t(25933),d=t(57811),r=t(81541),c=t(48538),u=t(89323),h=t(70030),v=t(44414);const{Text:m}=l.A,p=e=>{let{columns:a=[],setColumns:t,style:l,size:p="",iconOnly:f}=e;const{t:x}=(0,h.B)(),[A,g]=(0,n.useState)(!1),y=(0,v.jsx)(o.A,{children:null===a||void 0===a?void 0:a.map(((e,n)=>(0,v.jsx)(o.A.Item,{children:(0,v.jsxs)(s.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(i.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===a||void 0===a?void 0:a.map((a=>(a.dataIndex===e.dataIndex&&(a.is_show=!(null!==a&&void 0!==a&&a.is_show)),a)));t(n)}(e),disabled:1===n})]})},e+n)))});return(0,v.jsx)(d.A,{overlay:y,trigger:["click"],onVisibleChange:e=>{g(e)},visible:A,children:(0,v.jsx)(r.A,{title:x("change.columns"),children:(0,v.jsx)(c.A,{style:{...l},size:p,icon:(0,v.jsx)(u.A,{}),children:f?null:x("Columns")})})})}},41901:(e,a,t)=>{t.d(a,{A:()=>v});var n=t(9950),l=t(3969),o=t(32645),s=t(8724),i=t(99674),d=t(70030),r=t(91854),c=t(47992),u=t(69184),h=t(44414);function v(e){let{visible:a,onCancel:t,onSuccess:v}=e;const{t:m}=(0,d.B)(),[p]=l.A.useForm(),f=(0,r.wA)(),{loans:x}=(0,r.d4)((e=>e.sellerLoans)),[A,g]=(0,n.useState)(!1);return(0,h.jsx)(o.A,{visible:a,title:m("repay_loan"),onCancel:t,onOk:()=>{p.validateFields().then((async e=>{g(!0);try{var a,n;const l={...e,loan_id:null!==(a=null===(n=e.loan_id)||void 0===n?void 0:n.value)&&void 0!==a?a:e.loan_id};await f((0,u.xf)(l)).unwrap(),v&&v(),t()}finally{g(!1)}}))},confirmLoading:A,destroyOnClose:!0,children:(0,h.jsxs)(l.A,{form:p,layout:"vertical",children:[(0,h.jsx)(l.A.Item,{name:"loan_id",label:m("loan"),rules:[{required:!0,message:m("required")}],children:(0,h.jsx)(c.G,{fetchOptions:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x.filter((a=>"active"===a.status&&`${a.id}`.includes(e))).map((e=>({label:`#${e.id} - ${m("balance")}: ${e.remaining_amount}`,value:e.id})))},placeholder:m("select.loan"),style:{width:"100%"}})}),(0,h.jsx)(l.A.Item,{name:"amount",label:m("amount"),rules:[{required:!0,message:m("required")}],children:(0,h.jsx)(s.A,{min:1,style:{width:"100%"}})}),(0,h.jsx)(l.A.Item,{name:"payment_method",label:m("payment_method"),initialValue:"wallet",rules:[{required:!0,message:m("required")}],children:(0,h.jsx)(i.A,{options:[{value:"wallet",label:m("wallet")}],disabled:!0})})]})})}},47992:(e,a,t)=>{t.d(a,{G:()=>r});var n=t(9950),l=t(95491),o=t.n(l),s=t(99674),i=t(90650),d=t(44414);const r=e=>{let{fetchOptions:a,debounceTimeout:t=400,onClear:l,...r}=e;const[c,u]=(0,n.useState)(!1),[h,v]=(0,n.useState)([]),m=(0,n.useMemo)((()=>o()((e=>{v([]),u(!0),a(e).then((e=>{v(e),u(!1)}))}),t)),[a,t]);return(0,d.jsx)(s.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:c?(0,d.jsx)(i.A,{size:"small"}):"no results",...r,options:h,onFocus:()=>{m("")}})}},53774:(e,a,t)=>{t.d(a,{A:()=>l});var n=t(83291);function l(){var e,a;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;const s=null===(e=n.M.getState())||void 0===e||null===(a=e.currency)||void 0===a?void 0:a.defaultCurrency,i=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),d=l||(null===s||void 0===s?void 0:s.symbol)||"$";return"after"===(o||(null===s||void 0===s?void 0:s.position)||"before")?`${i} ${d}`:`${d} ${i}`}},89323:(e,a,t)=>{t.d(a,{A:()=>d});var n=t(89379),l=t(9950);const o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var s=t(25085),i=function(e,a){return l.createElement(s.A,(0,n.A)((0,n.A)({},e),{},{ref:a,icon:o}))};i.displayName="TableOutlined";const d=l.forwardRef(i)}}]);