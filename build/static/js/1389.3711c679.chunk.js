"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[1389],{21777:(e,l,n)=>{n.d(l,{A:()=>a});n(9950);var t=n(32645),r=n(32312),s=n(48538),d=n(70030),i=n(44414);const a=e=>{let{open:l,handleCancel:n,text:a,click:o,loading:c,subTitle:u}=e;const{t:v}=(0,d.B)();return(0,i.jsxs)(t.A,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,i.jsx)(r.Ay,{status:"warning",title:a,subTitle:u}),(0,i.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,i.jsx)(s.A,{type:"primary",className:"mr-2",onClick:o,loading:c,children:v("yes")}),(0,i.jsx)(s.A,{onClick:()=>n(),children:v("no")})]})]})}},31389:(e,l,n)=>{n.r(l),n.d(l,{default:()=>$});var t=n(9950),r=n(12678),s=n(44070),d=n(29633),i=n(80737),a=n(48538),o=n(23263),c=n(12203),u=n(12449),v=n(76083),m=n(55386),h=n(91854),p=n(74623),x=n(88986),f=n(8168),j=n(70030),A=n(12408),g=n(68389),y=(n(18583),n(59051)),_=n.n(y),b=n(13564),k=n(35116),C=n(28645),w=n(21777),I=n(32645),S=n(91524),Y=n(81446),M=n(44414);function N(e){var l,n,r,s,d,i,o,c,u;let{id:v,handleCancel:m}=e;const[h,p]=(0,t.useState)({}),[x,f]=(0,t.useState)(!1),{t:g}=(0,j.B)();return(0,t.useEffect)((()=>{!function(e){f(!0),A.A.getById(e).then((e=>p(e.data))).finally((()=>f(!1)))}(v)}),[v]),(0,M.jsx)(I.A,{visible:!!v,title:g("order.review"),onCancel:m,footer:(0,M.jsx)(a.A,{type:"default",onClick:m,children:g("cancel")}),children:x?(0,M.jsx)(Y.A,{}):(0,M.jsxs)(S.A,{bordered:!0,children:[(0,M.jsx)(S.A.Item,{span:3,label:g("id"),children:h.id}),(0,M.jsxs)(S.A.Item,{span:3,label:g("user"),children:[null===h||void 0===h||null===(l=h.parcel_order)||void 0===l?void 0:l.username_from," ",(0,M.jsx)("a",{href:`tel:${null===h||void 0===h||null===(n=h.parcel_order)||void 0===n?void 0:n.phone_from}`,children:null===h||void 0===h||null===(r=h.parcel_order)||void 0===r?void 0:r.phone_from})]}),(0,M.jsxs)(S.A.Item,{span:3,label:g("receiver"),children:[null===h||void 0===h||null===(s=h.parcel_order)||void 0===s?void 0:s.username_to," ",(0,M.jsxs)("a",{href:`tel:${null===h||void 0===h||null===(d=h.parcel_order)||void 0===d?void 0:d.phone_to}`,children:[null===h||void 0===h||null===(i=h.parcel_order)||void 0===i?void 0:i.phone_to," "]})]}),(0,M.jsxs)(S.A.Item,{span:3,label:g("deliveryman"),children:[null===(o=h.deliveryman)||void 0===o?void 0:o.firstname," ",(null===(c=h.deliveryman)||void 0===c?void 0:c.lastname)||""]}),(0,M.jsx)(S.A.Item,{span:3,label:g("rating"),children:h.rating}),(0,M.jsx)(S.A.Item,{span:3,label:g("comment"),children:h.comment}),(0,M.jsx)(S.A.Item,{span:3,label:g("parcel.order.id"),children:null===h||void 0===h||null===(u=h.parcel_order)||void 0===u?void 0:u.id}),(0,M.jsx)(S.A.Item,{span:3,label:g("created.at"),children:_()(null===h||void 0===h?void 0:h.created_at).format("YYYY-MM-DD HH:mm")})]})})}function $(){const{t:e}=(0,j.B)(),l=(0,h.wA)(),n=(0,b.Zp)(),y=t=>{l((0,p.X4)({url:`/users/user/${t.uuid}`,id:"user_info",name:e("user.info")})),n(`/users/user/${t.uuid}`,{state:{user_id:t.id}})},[I,S]=(0,t.useState)([{title:e("order.id"),dataIndex:"parcel_order",key:"parcel_order",render:t=>(0,M.jsxs)("div",{className:"text-hover",onClick:()=>(t=>{l((0,p.X4)({id:"order_details",url:`order/details/${t}`,name:e("order.details")})),n(`/order/details/${t}`)})(t.id),children:["#",t.id]}),sorter:!0,is_show:!0},{title:e("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,M.jsxs)("div",{className:"text-hover",onClick:()=>y(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("deliveryman"),dataIndex:"deliveryman",key:"deliveryman",is_show:!0,render:e=>(0,M.jsxs)("div",{className:"text-hover",onClick:()=>y(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("rating"),dataIndex:"rating",key:"rating",is_show:!0,render:e=>(0,M.jsx)(d.A,{disabled:!0,defaultValue:e})},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>_()(e).format("YYYY-MM-DD HH:mm")},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,l)=>(0,M.jsxs)(i.A,{children:[(0,M.jsx)(a.A,{type:"primary",icon:(0,M.jsx)(r.A,{}),onClick:()=>T(l.id)}),(0,M.jsx)(k.A,{icon:(0,M.jsx)(s.A,{}),onClick:()=>{J([l.id]),Y(!0),P(!0)}})]})}]),{setIsModalVisible:Y}=(0,t.useContext)(m.o),[$,J]=(0,t.useState)(null),[R,T]=(0,t.useState)(null),[B,D]=(0,t.useState)(!1),[H,P]=(0,t.useState)(null),[z,E]=(0,t.useState)(null),{activeMenu:O}=(0,h.d4)((e=>e.menu),h.bN),{reviews:V,meta:X,loading:K,params:Z}=(0,h.d4)((e=>e.parcelReview),h.bN);console.log("reviews => ",V);(0,t.useEffect)((()=>{O.refetch&&(l((0,g.J)()),l((0,p.km)(O)))}),[O.refetch]),(0,x.A)((()=>{const e=O.data,n={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page};l((0,g.J)(n))}),[O.data]);const q={id:$,onChange:e=>{J(e)}};return(0,M.jsxs)(o.A,{title:e("parcel.reviews"),extra:(0,M.jsxs)(i.A,{wrap:!0,children:[(0,M.jsx)(k.A,{size:"",onClick:()=>{null===$||0===$.length?u.oR.warning(e("select.the.product")):(Y(!0),P(!1))},children:e("delete.selected")}),(0,M.jsx)(C.A,{columns:I,setColumns:S})]}),children:[(0,M.jsx)(c.A,{scroll:{x:!0},rowSelection:q,columns:null===I||void 0===I?void 0:I.filter((e=>e.is_show)),dataSource:V,pagination:{pageSize:Z.perPage,page:Z.page,total:X.total,defaultCurrent:Z.page},rowKey:e=>e.id,onChange:function(e,n,t){const{pageSize:r,current:s}=e,{field:d,order:i}=t,a=(0,f.A)(i);l((0,p.Ok)({activeMenu:O,data:{perPage:r,page:s,column:d,sort:a}}))},loading:K}),(0,M.jsx)(v.A,{click:()=>{D(!0);const n={...Object.assign({},...$.map(((e,l)=>({[`ids[${l}]`]:e}))))};A.A.delete(n).then((()=>{u.oR.success(e("successfully.deleted")),l((0,g.J)()),Y(!1)})).finally((()=>D(!1)))},text:e(H?"delete":"all.delete"),setText:J,loading:B}),R&&(0,M.jsx)(N,{id:R,handleCancel:()=>T(null)}),z&&(0,M.jsx)(w.A,{open:z,handleCancel:()=>E(null),click:z.restore?()=>{D(!0),A.A.restoreAll().then((()=>{u.oR.success(e("successfully.restored")),l((0,g.J)()),E(null)})).finally((()=>D(!1)))}:()=>{D(!0),A.A.dropAll().then((()=>{u.oR.success(e("successfully.deleted")),l((0,g.J)()),E(null)})).finally((()=>D(!1)))},text:z.restore?e("restore.modal.text"):e("read.carefully"),subTitle:z.restore?"":e("confirm.deletion"),loading:B,setText:J})]})}}}]);