"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[7028],{48008:(e,l,n)=>{n.d(l,{Z:()=>a});n(47313);var t=n(9274),i=n(87569),r=n(59491),s=n(24511),d=n(46417);const a=e=>{let{open:l,handleCancel:n,text:a,click:o,loading:c,subTitle:u}=e;const{t:v}=(0,s.$)();return(0,d.jsxs)(t.Z,{closable:!1,visible:l,footer:null,centered:!0,children:[(0,d.jsx)(i.ZP,{status:"warning",title:a,subTitle:u}),(0,d.jsxs)("div",{className:"d-flex justify-content-end",children:[(0,d.jsx)(r.Z,{type:"primary",className:"mr-2",onClick:o,loading:c,children:v("yes")}),(0,d.jsx)(r.Z,{onClick:()=>n(),children:v("no")})]})]})}},67028:(e,l,n)=>{n.r(l),n.d(l,{default:()=>A});var t=n(47313),i=n(31741),r=n(47515),s=n(55613),d=n(45705),a=n(59491),o=n(77181),c=n(78508),u=n(23560),v=n(69658),h=n(74580),m=n(2717),p=n(90954),x=n(80314),f=n(13945),j=n(24511),Z=n(94765),g=n(28835),_=(n(27266),n(70816)),y=n.n(_),b=n(97890),k=n(55940),w=n(53233),C=n(48008),I=n(9274),S=n(83371),T=n(51282),$=n(46417);function Y(e){var l,n,i,r,s,d,o,c,u;let{id:v,handleCancel:h}=e;const[m,p]=(0,t.useState)({}),[x,f]=(0,t.useState)(!1),{t:g}=(0,j.$)();return(0,t.useEffect)((()=>{!function(e){f(!0),Z.Z.getById(e).then((e=>p(e.data))).finally((()=>f(!1)))}(v)}),[v]),(0,$.jsx)(I.Z,{visible:!!v,title:g("order.review"),onCancel:h,footer:(0,$.jsx)(a.Z,{type:"default",onClick:h,children:g("cancel")}),children:x?(0,$.jsx)(T.Z,{}):(0,$.jsxs)(S.Z,{bordered:!0,children:[(0,$.jsx)(S.Z.Item,{span:3,label:g("id"),children:m.id}),(0,$.jsxs)(S.Z.Item,{span:3,label:g("user"),children:[null===m||void 0===m||null===(l=m.parcel_order)||void 0===l?void 0:l.username_from," ",(0,$.jsx)("a",{href:`tel:${null===m||void 0===m||null===(n=m.parcel_order)||void 0===n?void 0:n.phone_from}`,children:null===m||void 0===m||null===(i=m.parcel_order)||void 0===i?void 0:i.phone_from})]}),(0,$.jsxs)(S.Z.Item,{span:3,label:g("receiver"),children:[null===m||void 0===m||null===(r=m.parcel_order)||void 0===r?void 0:r.username_to," ",(0,$.jsxs)("a",{href:`tel:${null===m||void 0===m||null===(s=m.parcel_order)||void 0===s?void 0:s.phone_to}`,children:[null===m||void 0===m||null===(d=m.parcel_order)||void 0===d?void 0:d.phone_to," "]})]}),(0,$.jsxs)(S.Z.Item,{span:3,label:g("deliveryman"),children:[null===(o=m.deliveryman)||void 0===o?void 0:o.firstname," ",(null===(c=m.deliveryman)||void 0===c?void 0:c.lastname)||""]}),(0,$.jsx)(S.Z.Item,{span:3,label:g("rating"),children:m.rating}),(0,$.jsx)(S.Z.Item,{span:3,label:g("comment"),children:m.comment}),(0,$.jsx)(S.Z.Item,{span:3,label:g("parcel.order.id"),children:null===m||void 0===m||null===(u=m.parcel_order)||void 0===u?void 0:u.id}),(0,$.jsx)(S.Z.Item,{span:3,label:g("created.at"),children:y()(null===m||void 0===m?void 0:m.created_at).format("YYYY-MM-DD HH:mm")})]})})}function A(){const{t:e}=(0,j.$)(),l=(0,m.I0)(),n=(0,b.s0)(),_=t=>{l((0,p.bL)({url:`/users/user/${t.uuid}`,id:"user_info",name:e("user.info")})),n(`/users/user/${t.uuid}`,{state:{user_id:t.id}})},[I,S]=(0,t.useState)([{title:e("order.id"),dataIndex:"parcel_order",key:"parcel_order",render:t=>(0,$.jsxs)("div",{className:"text-hover",onClick:()=>(t=>{l((0,p.bL)({id:"order_details",url:`order/details/${t}`,name:e("order.details")})),n(`/order/details/${t}`)})(t.id),children:["#",t.id]}),sorter:!0,is_show:!0},{title:e("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,$.jsxs)("div",{className:"text-hover",onClick:()=>_(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("deliveryman"),dataIndex:"deliveryman",key:"deliveryman",is_show:!0,render:e=>(0,$.jsxs)("div",{className:"text-hover",onClick:()=>_(e),children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:e("rating"),dataIndex:"rating",key:"rating",is_show:!0,render:e=>(0,$.jsx)(s.Z,{disabled:!0,defaultValue:e})},{title:e("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>y()(e).format("YYYY-MM-DD HH:mm")},{title:e("options"),key:"options",dataIndex:"options",is_show:!0,render:(e,l)=>(0,$.jsxs)(d.Z,{children:[(0,$.jsx)(a.Z,{type:"primary",icon:(0,$.jsx)(i.Z,{}),onClick:()=>P(l.id)}),(0,$.jsx)(k.Z,{icon:(0,$.jsx)(r.Z,{}),onClick:()=>{M([l.id]),T(!0),E(!0)}})]})}]),{setIsModalVisible:T}=(0,t.useContext)(h._),[A,M]=(0,t.useState)(null),[N,P]=(0,t.useState)(null),[D,H]=(0,t.useState)(!1),[z,E]=(0,t.useState)(null),[L,U]=(0,t.useState)(null),{activeMenu:V}=(0,m.v9)((e=>e.menu),m.wU),{reviews:B,meta:K,loading:O,params:R}=(0,m.v9)((e=>e.parcelReview),m.wU);console.log("reviews => ",B);(0,t.useEffect)((()=>{V.refetch&&(l((0,g.T)()),l((0,p.A_)(V)))}),[V.refetch]),(0,x.Z)((()=>{const e=V.data,n={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page};l((0,g.T)(n))}),[V.data]);const q={id:A,onChange:e=>{M(e)}};return(0,$.jsxs)(o.Z,{title:e("parcel.reviews"),extra:(0,$.jsxs)(d.Z,{wrap:!0,children:[(0,$.jsx)(k.Z,{size:"",onClick:()=>{null===A||0===A.length?u.Am.warning(e("select.the.product")):(T(!0),E(!1))},children:e("delete.selected")}),(0,$.jsx)(w.Z,{columns:I,setColumns:S})]}),children:[(0,$.jsx)(c.Z,{scroll:{x:!0},rowSelection:q,columns:null===I||void 0===I?void 0:I.filter((e=>e.is_show)),dataSource:B,pagination:{pageSize:R.perPage,page:R.page,total:K.total,defaultCurrent:R.page},rowKey:e=>e.id,onChange:function(e,n,t){const{pageSize:i,current:r}=e,{field:s,order:d}=t,a=(0,f.Z)(d);l((0,p.nc)({activeMenu:V,data:{perPage:i,page:r,column:s,sort:a}}))},loading:O}),(0,$.jsx)(v.Z,{click:()=>{H(!0);const n={...Object.assign({},...A.map(((e,l)=>({[`ids[${l}]`]:e}))))};Z.Z.delete(n).then((()=>{u.Am.success(e("successfully.deleted")),l((0,g.T)()),T(!1)})).finally((()=>H(!1)))},text:e(z?"delete":"all.delete"),setText:M,loading:D}),N&&(0,$.jsx)(Y,{id:N,handleCancel:()=>P(null)}),L&&(0,$.jsx)(C.Z,{open:L,handleCancel:()=>U(null),click:L.restore?()=>{H(!0),Z.Z.restoreAll().then((()=>{u.Am.success(e("successfully.restored")),l((0,g.T)()),U(null)})).finally((()=>H(!1)))}:()=>{H(!0),Z.Z.dropAll().then((()=>{u.Am.success(e("successfully.deleted")),l((0,g.T)()),U(null)})).finally((()=>H(!1)))},text:L.restore?e("restore.modal.text"):e("read.carefully"),subTitle:L.restore?"":e("confirm.deletion"),loading:D,setText:M})]})}}}]);