(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[3406],{8168:(e,t,n)=>{"use strict";function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{A:()=>l})},8297:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var l=n(9950),a=n(55902),s=n(41397),i=n(60767),o=n(44414);function d(e){let{handleChange:t,defaultValue:n,resetSearch:d,...r}=e;const[c,u]=(0,l.useState)(n),v=(0,l.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[t]);return(0,l.useEffect)((()=>{u(n)}),[d,n]),(0,o.jsx)(a.A,{value:c,onChange:e=>{u(e.target.value),v(e.target.value)},prefix:(0,o.jsx)(i.A,{}),...r})}},26714:(e,t,n)=>{"use strict";n.d(t,{A:()=>j});var l=n(9950),a=n(48946),s=n(39362),i=n.n(s),o=n(81446),d=n(23263),r=n(32645),c=n(48538),u=n(87094),v=n(41988),h=n(70030),m=n(29949),x=n(38310),p=n(13564),f=n(44414);const A=d.A.Meta,j=e=>{let{id:t,handleCancel:n}=e;const[s,j]=(0,l.useState)(null),{t:y}=(0,h.B)(),g=(0,p.Zp)();return(0,f.jsx)(f.Fragment,{children:s?(0,f.jsx)(o.A,{}):(0,f.jsx)(r.A,{visible:!!t,title:y("selected.download"),closable:!1,handleCancel:n,footer:[(0,f.jsx)(c.A,{type:"default",onClick:n,children:y("cancel")},"cancelBtn")],children:(0,f.jsxs)(u.A,{children:[(0,f.jsx)(v.A,{span:12,children:(0,f.jsx)(d.A,{title:y("download.pdf"),onClick:()=>function(e){j(!0),a.A.orderExport(e).then((t=>{i()(t,`invoice_${e}.pdf`,"application/pdf"),n()})).finally((()=>j(!1)))}(t),className:"text-center cursor-pointer",children:(0,f.jsx)(A,{className:"d-flex align-items-center justify-content-center",title:(0,f.jsx)(m.yos,{size:80})})})}),(0,f.jsx)(v.A,{span:12,children:(0,f.jsx)(d.A,{title:y("download.check"),onClick:()=>(e=>{g(`/orders/generate-invoice/${e}`)})(t),className:"text-center cursor-pointer",children:(0,f.jsx)(A,{className:"d-flex align-items-center justify-content-center",title:(0,f.jsx)(x.TBA,{size:85})})})})]})})})}},28645:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var l=n(9950),a=n(66362),s=n(69216),i=n(80737),o=n(25933),d=n(57811),r=n(81541),c=n(48538),u=n(89323),v=n(70030),h=n(44414);const{Text:m}=a.A,x=e=>{let{columns:t=[],setColumns:n,style:a,size:x="",iconOnly:p}=e;const{t:f}=(0,v.B)(),[A,j]=(0,l.useState)(!1),y=(0,h.jsx)(s.A,{children:null===t||void 0===t?void 0:t.map(((e,l)=>(0,h.jsx)(s.A.Item,{children:(0,h.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,h.jsx)(m,{children:e.title}),(0,h.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const l=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(l)}(e),disabled:1===l})]})},e+l)))});return(0,h.jsx)(d.A,{overlay:y,trigger:["click"],onVisibleChange:e=>{j(e)},visible:A,children:(0,h.jsx)(r.A,{title:f("change.columns"),children:(0,h.jsx)(c.A,{style:{...a},size:x,icon:(0,h.jsx)(u.A,{}),children:p?null:f("Columns")})})})}},35116:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});n(9950);var l=n(48538),a=n(44070),s=n(12449),i=n(70030),o=n(13311),d=n(44414);function r(e){let{size:t="",onClick:n,type:r="default",...c}=e;const{t:u}=(0,i.B)(),{isDemo:v}=(0,o.A)();return(0,d.jsx)(l.A,{size:t,icon:(0,d.jsx)(a.A,{}),onClick:e=>{v?s.oR.warning(u("cannot.work.demo")):n(e)},type:r,...c})}},39362:function(e,t){var n,l,a;l=[],void 0===(a="function"===typeof(n=function(){return function e(t,n,l){var a,s,i=window,o="application/octet-stream",d=l||o,r=t,c=!n&&!l&&r,u=document.createElement("a"),v=function(e){return String(e)},h=i.Blob||i.MozBlob||i.WebKitBlob||v,m=n||"download";if(h=h.call?h.bind(i):Blob,"true"===String(this)&&(d=(r=[r,d])[0],r=r[1]),c&&c.length<2048&&(m=c.split("/").pop().split("?")[0],u.href=c,-1!==u.href.indexOf(c))){var x=new XMLHttpRequest;return x.open("GET",c,!0),x.responseType="blob",x.onload=function(t){e(t.target.response,m,o)},setTimeout((function(){x.send()}),0),x}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(r)){if(!(r.length>2096103.424&&h!==v))return navigator.msSaveBlob?navigator.msSaveBlob(j(r),m):y(r);d=(r=j(r)).type||o}else if(/([\x80-\xff])/.test(r)){for(var p=0,f=new Uint8Array(r.length),A=f.length;p<A;++p)f[p]=r.charCodeAt(p);r=new h([f],{type:d})}function j(e){for(var t=e.split(/[:;,]/),n=t[1],l=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),a=l.length,s=0,i=new Uint8Array(a);s<a;++s)i[s]=l.charCodeAt(s);return new h([i],{type:n})}function y(e,t){if("download"in u)return u.href=e,u.setAttribute("download",m),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout((function(){u.click(),document.body.removeChild(u),!0===t&&setTimeout((function(){i.URL.revokeObjectURL(u.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var n=document.createElement("iframe");document.body.appendChild(n),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,o)),n.src=e,setTimeout((function(){document.body.removeChild(n)}),333)}if(a=r instanceof h?r:new h([r],{type:d}),navigator.msSaveBlob)return navigator.msSaveBlob(a,m);if(i.URL)y(i.URL.createObjectURL(a),!0);else{if("string"===typeof a||a.constructor===v)try{return y("data:"+d+";base64,"+i.btoa(a))}catch(g){return y("data:"+d+","+encodeURIComponent(a))}(s=new FileReader).onload=function(e){y(this.result)},s.readAsDataURL(a)}return!0}})?n.apply(t,l):n)||(e.exports=a)},48946:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var l=n(82371);const a={orderExport:(e,t)=>l.A.get(`dashboard/user/export/order/${e}/pdf`,{params:t,responseType:"blob"})}},53406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var l=n(9950),a=n(87864),s=n(54909),i=n(12916),o=n(48538),d=n(80737),r=n(90650),c=n(23263),u=n(12203),v=n(13564),h=n(24513),m=n(12678),x=n(44070),p=n(98114),f=n(91854),A=n(74623),j=n(70030),y=n(88986),g=n(53177),b=n(8168),w=n(8297),_=n(53774),k=n(56592),C=n(23283),S=n(28645),N=n(52423),M=n(38635),z=n(26714),B=n(12449),R=n(35116),V=n(23758),I=n(55386),T=n(76083),$=n(63620),D=n(69091),H=n(59051),Y=n.n(H),O=n(44414);const{RangePicker:U}=a.A,{TabPane:E}=s.A;function L(){var e,t;const n=(0,f.wA)(),a=(0,v.Zp)(),{t:H}=(0,j.B)(),{defaultCurrency:L}=(0,f.d4)((e=>e.currency),f.bN),[P,G]=(0,l.useState)(null),[K,F]=(0,l.useState)(null),[X,Z]=(0,l.useState)(null),[q,W]=(0,l.useState)(null),{id:J}=(0,v.g)(),Q=[{id:7,name:"all"},{id:3,name:"ready"},{id:4,name:"on_a_way"},{id:5,name:"delivered"},{id:6,name:"canceled"}],[ee,te]=(0,l.useState)([{title:H("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:H("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,O.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})},{title:H("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,O.jsxs)("div",{className:"text-lowercase",children:[e||0," ",H("products")]})},{title:H("status"),is_show:!0,dataIndex:"status",key:"status",render:(e,t)=>(0,O.jsxs)("div",{children:["new"===e?(0,O.jsx)(i.A,{color:"blue",children:H(e)}):"canceled"===e?(0,O.jsx)(i.A,{color:"error",children:H(e)}):(0,O.jsx)(i.A,{color:"cyan",children:H(e)}),"delivered"!==e&&"canceled"!==e?(0,O.jsx)(h.A,{onClick:()=>G(t)}):""]})},{title:H("deliveryman"),is_show:!0,dataIndex:"deliveryman",key:"deliveryman",render:(e,t)=>(0,O.jsx)("div",{children:"ready"===t.status&&"pickup"!==t.delivery_type?(0,O.jsx)(o.A,{type:"link",onClick:()=>W(t),children:(0,O.jsxs)(d.A,{children:[e?`${e.firstname} ${e.lastname}`:H("add.deliveryman"),(0,O.jsx)(h.A,{})]})}):(0,O.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",null===e||void 0===e?void 0:e.lastname]})})},{title:H("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,_.A)(e,L.symbol)},{title:H("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var t;return H(null===e||void 0===e||null===(t=e.payment_system)||void 0===t?void 0:t.tag)||"-"}},{title:H("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:H("options"),is_show:!0,key:"options",render:(e,t)=>(0,O.jsxs)(d.A,{children:[(0,O.jsx)(o.A,{icon:(0,O.jsx)(N.kMs,{}),onClick:()=>F(t.id)}),(0,O.jsx)(o.A,{icon:(0,O.jsx)(m.A,{}),onClick:()=>(e=>{n((0,A.X4)({url:`order/details/${e.id}`,id:"order_details",name:H("order.details")})),a(`/order/details/${e.id}`)})(t)}),(0,O.jsx)(R.A,{icon:(0,O.jsx)(x.A,{}),onClick:()=>{oe([t.id]),ne(!0),re(!0)}}),(0,O.jsx)(o.A,{icon:(0,O.jsx)(p.A,{}),onClick:()=>Z(t.id)})]})}]),{setIsModalVisible:ne}=(0,l.useContext)(I.o),[le,ae]=(0,l.useState)(!1),{activeMenu:se}=(0,f.d4)((e=>e.menu),f.bN),[ie,oe]=(0,l.useState)(null),[de,re]=(0,l.useState)(null),[ce,ue]=(0,l.useState)(!1),{orders:ve,meta:he,loading:me,params:xe,statistic:pe}=(0,f.d4)((e=>e.orders),f.bN),fe=null===se||void 0===se?void 0:se.data;(0,y.A)((()=>{const e={search:null===fe||void 0===fe?void 0:fe.search,sort:null===fe||void 0===fe?void 0:fe.sort,column:null===fe||void 0===fe?void 0:fe.column,perPage:null===fe||void 0===fe?void 0:fe.perPage,page:null===fe||void 0===fe?void 0:fe.page,deliveryman:J,date_from:null===fe||void 0===fe?void 0:fe.date_from,date_to:null===fe||void 0===fe?void 0:fe.date_to,status:"all"===(null===fe||void 0===fe?void 0:fe.status)||null===fe||void 0===fe?void 0:fe.status};n((0,g.Gb)(e))}),[null===se||void 0===se?void 0:se.data]);const Ae=()=>{G(null),W(null),F(null),Z(null)};(0,l.useEffect)((()=>{if(null!==se&&void 0!==se&&se.refetch){const e={status:null===fe||void 0===fe?void 0:fe.status,page:null===fe||void 0===fe?void 0:fe.page,perPage:10,type:"delivery",deliveryman:J};n((0,g.Gb)(e)),n((0,A.km)(se))}}),[null===se||void 0===se?void 0:se.refetch]);const je={selectedRowKeys:ie,onChange:e=>{oe(e)}};return(0,O.jsxs)("div",{children:[(0,O.jsx)(r.A,{spinning:me,children:(0,O.jsx)(D.A,{data:pe})}),(0,O.jsxs)(c.A,{title:H("orders"),extra:(0,O.jsxs)(d.A,{wrap:!0,children:[(0,O.jsx)(U,{format:"YYYY-MM-DD",onChange:e=>{return t=e,void n((0,A.Ok)({activeMenu:se,data:{...fe,date_from:t?Y()(null===t||void 0===t?void 0:t[0]).format("YYYY-MM-DD").toString():void 0,date_to:t?Y()(null===t||void 0===t?void 0:t[1]).format("YYYY-MM-DD").toString():void 0}}));var t}}),(0,O.jsx)(R.A,{type:"danger",onClick:()=>{null===ie||0===ie.length?B.oR.warning(H("select.the.product")):(ne(!0),re(!1))},children:H("delete.all")}),(0,O.jsx)(o.A,{onClick:()=>{ae(!0),V.A.export({type:"delivery",deliveryman:J,date_from:null===fe||void 0===fe?void 0:fe.date_from,date_to:null===fe||void 0===fe?void 0:fe.date_to,status:"all"===(null===fe||void 0===fe?void 0:fe.status)||null===fe||void 0===fe?void 0:fe.status}).then((e=>{const t=$.bb+e.data.file_name;window.location.href=t})).finally((()=>ae(!1)))},loading:le,children:H("export")}),(0,O.jsx)(S.A,{setColumns:te,columns:ee})]}),children:[(0,O.jsx)("div",{className:"mt-2 mb-4",children:(0,O.jsx)(w.A,{placeholder:H("search"),width:480,handleChange:e=>{return t=e,l="search",void n((0,A.Ok)({activeMenu:se,data:{...fe,[l]:t}}));var t,l},defaultValue:null===(e=se.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(t=se.data)&&void 0!==t&&t.search)})}),(0,O.jsx)(s.A,{onChange:e=>{const t=e;n((0,A.Ok)({activeMenu:se,data:{...fe,status:t}}))},type:"card",activeKey:null===fe||void 0===fe?void 0:fe.status,children:Q.map((e=>(0,O.jsx)(E,{tab:H(e.name)},e.name)))}),(0,O.jsx)(u.A,{scroll:{x:!0},rowSelection:je,columns:null===ee||void 0===ee?void 0:ee.filter((e=>e.is_show)),dataSource:ve,loading:me,pagination:{pageSize:xe.perPage,page:xe.page,total:he.total,defaultCurrent:xe.page},rowKey:e=>e.id,onChange:function(e,t,l){const{pageSize:a,current:s}=e,{field:i,order:o}=l,d=(0,b.A)(o);n((0,A.Ok)({activeMenu:se,data:{...se.data,perPage:a,page:s,column:i,sort:d}}))}}),P&&(0,O.jsx)(k.A,{orderDetails:P,handleCancel:Ae,status:Q}),q&&(0,O.jsx)(C.A,{orderDetails:q,handleCancel:Ae}),K&&(0,O.jsx)(M.A,{id:K,handleCancel:Ae}),X&&(0,O.jsx)(z.A,{id:X,handleCancel:Ae}),(0,O.jsx)(T.A,{click:()=>{ue(!0);const e={...Object.assign({},...ie.map(((e,t)=>({[`ids[${t}]`]:e}))))};V.A.delete(e).then((()=>{B.oR.success(H("successfully.deleted")),ne(!1),n((0,g.Gb)()),re(null),oe(null)})).finally((()=>ue(!1)))},text:H(de?"delete":"all.delete"),loading:ce,setText:oe})]})]})}},69091:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(9950);var l=n(87094),a=n(41988),s=n(91854),i=n(70030),o=n(74704),d=n(89627),r=n(44414);const c=e=>{let{data:t}=e;const{t:n}=(0,i.B)(),{defaultCurrency:c}=(0,s.d4)((e=>e.currency),s.bN);return(0,r.jsxs)(l.A,{gutter:16,className:"mt-3",children:[(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("all.orders"),value:null===t||void 0===t?void 0:t.orders_count})}),(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("ready.orders"),value:null===t||void 0===t?void 0:t.ready_orders_count})}),(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("on.a.way.orders"),value:null===t||void 0===t?void 0:t.on_a_way_orders_count})}),(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("cancelled.orders"),value:null===t||void 0===t?void 0:t.cancel_orders_count})}),(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("delivered.orders"),value:null===t||void 0===t?void 0:t.delivered_orders_count})}),(0,r.jsx)(a.A,{flex:"0 0 16.6%",children:(0,r.jsx)(o.A,{title:n("total.price"),value:(0,d.r)(null===t||void 0===t?void 0:t.total_price,null===c||void 0===c?void 0:c.symbol)})})]})}},74704:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(9950);var l=n(23263),a=n(44414);function s(e){let{title:t="Orders",value:n=0,color:s="grey",onClick:i}=e;return(0,a.jsx)(l.A,{className:"statistics-card",hoverable:!!i,onClick:i,children:(0,a.jsxs)("div",{className:"card-wrapper",children:[(0,a.jsx)("div",{className:"space"}),(0,a.jsx)("div",{className:"content",children:(0,a.jsx)("h1",{className:"number",children:n})}),(0,a.jsx)("span",{className:`highlighter ${s}`}),t&&(0,a.jsx)("h4",{className:"title",children:t})]})})}},89323:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var l=n(89379),a=n(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=n(25085),o=function(e,t){return a.createElement(i.A,(0,l.A)((0,l.A)({},e),{},{ref:t,icon:s}))};o.displayName="TableOutlined";const d=a.forwardRef(o)},89627:(e,t,n)=>{"use strict";function l(e,t){var n=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}].slice().reverse().find((function(t){return e>=t.value}));return n?"$"+(e/n.value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+n.symbol:"0"}n.d(t,{r:()=>l})}}]);