"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[5353],{35353:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var l=a(9950),n=a(13564),i=a(12449),s=a(3969),o=a(23263),r=a(90650),u=a(91854),d=a(74623),c=a(60926),v=a(95709),p=a(70030),m=a(71999),g=a(63620),f=a(96011),h=a.n(f),b=a(31281),_=a(37702),k=a(44414);const j=()=>{const{t:e}=(0,p.B)(),{activeMenu:t}=(0,u.d4)((e=>e.menu),u.bN),a=(0,u.wA)(),[f]=s.A.useForm(),j=(0,n.Zp)(),{id:A}=(0,n.g)(),[y,x]=(0,l.useState)(!1),{languages:N}=(0,u.d4)((e=>e.formLang),u.bN);function $(e){if(!e)return{};const{translations:t}=e,a=N.map((e=>{var a,l;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);a((0,d.Ok)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=A,x(!0),v.A.getById(e).then((e=>{var l;let n=e.data;const i={...n,...$(n),...null===n||void 0===n?void 0:n.buttons,active:!(null===n||void 0===n||!n.active),image:[(s=null===n||void 0===n||null===(l=n.galleries[0])||void 0===l?void 0:l.path,{name:s,url:g.sE+s})]};var s;f.setFieldsValue(i),a((0,d.Ok)({activeMenu:t,data:i}))})).finally((()=>{a((0,d.km)(t)),x(!1)})))}),[t.refetch]),(0,k.jsx)(o.A,{title:e("edit.page"),className:"h-100",extra:(0,k.jsx)(m.A,{}),children:y?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(r.A,{size:"large",className:"py-5"})}):(0,k.jsx)(_.A,{form:f,handleSubmit:(l,n)=>{const s={images:n.map((e=>e.name)),active:Number(l.active),type:l.type,title:(0,b.A)(N,l,"title"),description:(0,b.A)(N,l,"description"),buttons:{google_play_button_link:null===l||void 0===l?void 0:l.google_play_button_link,app_store_button_link:null===l||void 0===l?void 0:l.app_store_button_link}},o="pages";return h()({method:"put",url:`${g.TT}dashboard/admin/pages/${A}`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:s,params:{}}).then((()=>{i.oR.success(e("successfully.updated")),(0,u.vA)((()=>{a((0,d.EK)({...t,nextUrl:o})),a((0,c.f)({}))})),j(`/${o}`)})).catch((e=>{var t,a;return i.oR.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}})})}}}]);