"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1499],{61499:(t,e,a)=>{a.r(e),a.d(e,{default:()=>S});var i=a(47313),l=a(97890),s=a(23560),n=a(83999),d=a(10976),c=a(77181),o=a(2717),u=a(90954),r=a(24511),v=a(73431),g=a(10596),p=a(12545),h=a(97421),m=a(46417);const{Step:_}=n.Z,S=()=>{var t,e,a,S,k,x,b,f,j;const{t:y}=(0,r.$)(),{activeMenu:Z}=(0,o.v9)((t=>t.menu),o.wU),w=(0,o.I0)(),[F]=d.Z.useForm(),V=(0,l.s0)(),$=t=>({name:t,url:h.bV+t}),[q,C]=(0,i.useState)(null!==(t=Z.data)&&void 0!==t&&null!==(e=t.galleries)&&void 0!==e&&e[0]?[$(null===(a=Z.data)||void 0===a||null===(S=a.galleries)||void 0===S?void 0:S[0].path)]:[]),[I,M]=(0,i.useState)(null!==(k=Z.data)&&void 0!==k&&null!==(x=k.galleries)&&void 0!==x&&x[1]?[$(null===(b=Z.data)||void 0===b||null===(f=b.galleries)||void 0===f?void 0:f[1].path)]:[]),U=[...q,...I],[A,B]=(0,i.useState)((null===(j=Z.data)||void 0===j?void 0:j.step)||0),E=()=>{B(A+1)},N=()=>{B(A-1)},[z,D]=(0,i.useState)(!1);(0,i.useEffect)((()=>()=>{const t=F.getFieldsValue(!0);w((0,u.nc)({activeMenu:Z,data:t}))}),[]);return(0,m.jsx)(c.Z,{title:y("add.recepe"),extra:(0,m.jsx)(v.Z,{}),children:(0,m.jsxs)(d.Z,{layout:"vertical",onFinish:t=>{var e;F.validateFields();const a={...t,images:U.map((t=>t.name)),category_id:t.category_id.value,shop_id:t.shop_id.value,active_time:t.active_time.toString(),total_time:t.total_time.toString(),nutrition:t.nutrition.map((t=>({...t,percentage:String(t.percentage),weight:String(t.weight)}))),stocks:null===(e=t.stocks)||void 0===e?void 0:e.map((t=>({min_quantity:t.min_quantity,stock_id:t.stock_id.value})))};D(!0);const i="catalog/recept";p.Z.create(a).then((()=>{s.Am.success(y("successfully.created")),V(`/${i}`),w((0,u.ph)({...Z,nextUrl:i}))})).finally((()=>D(!1)))},form:F,initialValues:{active:!0,...Z.data},children:[(0,m.jsx)(n.Z,{current:A,children:g.S.map((t=>(0,m.jsx)(_,{title:y(t.title)},t.title)))}),g.S.map((t=>{const e=t.content;return(0,m.jsx)("div",{className:`steps-content ${t.step!==A+1&&"hidden"}`,children:(0,m.jsx)(e,{next:E,prev:N,loading:z,image:q,setImage:C,back:I,setBack:M})},t.title)}))]})})}}}]);