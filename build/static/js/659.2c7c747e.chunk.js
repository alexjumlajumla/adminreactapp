"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[659],{62019:(e,t,i)=>{function l(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["title"];if(null===t||void 0===t||!t.translations)return{};const{translations:l}=t,a=(e,t)=>{const i=null===l||void 0===l?void 0:l.find((t=>(null===t||void 0===t?void 0:t.locale)===(null===e||void 0===e?void 0:e.locale)));return i||{[t]:""}},n=e.flatMap((e=>i.flatMap((t=>({[`${t}[${null===e||void 0===e?void 0:e.locale}]`]:a(e,t)[t]})))));return Object.assign({},...n)}i.d(t,{Z:()=>l})},659:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Z});var l=i(47313),a=i(10976),n=i(77181),o=i(72652),d=i(23560),s=i(97890),u=i(73431),r=i(2717),v=i(90954),c=i(30763),p=i(97421),h=i(49991),f=i(24511),g=i(62019),m=i(75336),y=i(71740),b=i(46417);const Z=()=>{const{t:e}=(0,f.$)(),t=(0,s.s0)(),i=(0,r.I0)(),{activeMenu:Z}=(0,r.v9)((e=>e.menu),r.wU),{params:_}=(0,r.v9)((e=>e.shopCategory),r.wU),[k,w]=(0,l.useState)(!1),[j]=a.Z.useForm(),[x,M]=(0,l.useState)(null),{uuid:U}=(0,s.UO)(),{languages:C}=(0,r.v9)((e=>e.formLang),r.wU);(0,l.useEffect)((()=>()=>{const e=j.getFieldsValue(!0);i((0,v.nc)({activeMenu:Z,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;Z.refetch&&(e=U,w(!0),c.Z.getById(e).then((e=>{var t,l,a;let n=e.data;const o={...(0,g.Z)(C,n,["title","description"]),image:[(d=null===n||void 0===n?void 0:n.img,{name:d,url:p.bV+d})],keywords:null===n||void 0===n?void 0:n.keywords.split(","),parent_id:{label:null===n||void 0===n||null===(t=n.parent)||void 0===t||null===(l=t.translation)||void 0===l?void 0:l.title,value:null===n||void 0===n?void 0:n.parent_id,key:null===n||void 0===n?void 0:n.parent_id},input:null!==(a=null===n||void 0===n?void 0:n.input)&&void 0!==a?a:32767,active:!(null===n||void 0===n||!n.active)};var d;j.setFieldsValue(o),i((0,v.nc)({activeMenu:Z,data:o}))})).finally((()=>{w(!1),i((0,v.A_)(Z))})))}),[Z.refetch]),(0,b.jsx)(n.Z,{title:e("edit.category"),extra:(0,b.jsx)(u.Z,{}),children:k?(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,b.jsx)(o.Z,{size:"large",className:"mt-5 pt-5"})}):(0,b.jsx)(y.Z,{form:j,handleSubmit:(l,a)=>{var n,o,s;const u={title:(0,m.Z)(C,l),description:(0,m.Z)(C,l,"description"),type:null!==(n=l.parent_id)&&void 0!==n&&n.value?"sub_shop":"shop",active:Number(null===l||void 0===l?void 0:l.active),keywords:null===l||void 0===l||null===(o=l.keywords)||void 0===o?void 0:o.join(","),parent_id:null===l||void 0===l||null===(s=l.parent_id)||void 0===s?void 0:s.value,images:null===a||void 0===a?void 0:a.map((e=>null===e||void 0===e?void 0:e.name)),input:null===l||void 0===l?void 0:l.input};return c.Z.update(U,u).then((()=>{d.Am.success(e("successfully.updated")),(0,r.dC)((()=>{i((0,v.ph)({...Z,nextUrl:"catalog/shop/categories"})),i((0,h.a)(_))})),t("/catalog/shop/categories")})).catch((e=>M(e.response.data.params)))},error:x})})}}}]);