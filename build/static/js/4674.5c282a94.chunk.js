"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[4674],{14691:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(58168),l=o(64467),a=o(80045),i=o(89379),r=o(23029),d=o(92901),s=o(85501),u=o(29426),c=o(9950),v=o(48383),m=o.n(v),p=function(e){(0,s.A)(o,e);var t=(0,u.A)(o);function o(e){var n;(0,r.A)(this,o),(n=t.call(this,e)).handleChange=function(e){var t=n.props,o=t.disabled,l=t.onChange;o||("checked"in n.props||n.setState({checked:e.target.checked}),l&&l({target:(0,i.A)((0,i.A)({},n.props),{},{checked:e.target.checked}),stopPropagation:function(){e.stopPropagation()},preventDefault:function(){e.preventDefault()},nativeEvent:e.nativeEvent}))},n.saveInput=function(e){n.input=e};var l="checked"in e?e.checked:e.defaultChecked;return n.state={checked:l},n}return(0,d.A)(o,[{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"render",value:function(){var e,t=this.props,o=t.prefixCls,i=t.className,r=t.style,d=t.name,s=t.id,u=t.type,v=t.disabled,p=t.readOnly,f=t.tabIndex,y=t.onClick,h=t.onFocus,g=t.onBlur,_=t.onKeyDown,b=t.onKeyPress,x=t.onKeyUp,A=t.autoFocus,C=t.value,k=t.required,j=(0,a.A)(t,["prefixCls","className","style","name","id","type","disabled","readOnly","tabIndex","onClick","onFocus","onBlur","onKeyDown","onKeyPress","onKeyUp","autoFocus","value","required"]),O=Object.keys(j).reduce((function(e,t){return"aria-"!==t.substr(0,5)&&"data-"!==t.substr(0,5)&&"role"!==t||(e[t]=j[t]),e}),{}),E=this.state.checked,N=m()(o,i,(e={},(0,l.A)(e,"".concat(o,"-checked"),E),(0,l.A)(e,"".concat(o,"-disabled"),v),e));return c.createElement("span",{className:N,style:r},c.createElement("input",(0,n.A)({name:d,id:s,type:u,required:k,readOnly:p,disabled:v,tabIndex:f,className:"".concat(o,"-input"),checked:!!E,onClick:y,onFocus:h,onBlur:g,onKeyUp:x,onKeyDown:_,onKeyPress:b,onChange:this.handleChange,autoFocus:A,ref:this.saveInput,value:C},O)),c.createElement("span",{className:"".concat(o,"-inner")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"checked"in e?(0,i.A)((0,i.A)({},t),{},{checked:e.checked}):null}}]),o}(c.Component);p.defaultProps={prefixCls:"rc-checkbox",className:"",style:{},type:"checkbox",defaultChecked:!1,onFocus:function(){},onBlur:function(){},onChange:function(){},onKeyDown:function(){},onKeyPress:function(){},onKeyUp:function(){}};const f=p},17811:(e,t,o)=>{o.d(t,{Ay:()=>S});var n=o(64467),l=o(58168),a=o(9950),i=o(14691),r=o(48383),d=o.n(r),s=o(41929),u=o(77643),c=o(12578),v=a.createContext(null),m=v.Provider;const p=v;var f=a.createContext(null),y=f.Provider,h=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},g=function(e,t){var o,r=a.useContext(p),v=a.useContext(f),m=a.useContext(c.QO),y=m.getPrefixCls,g=m.direction,_=a.useRef(),b=(0,s.K4)(t,_),x=(0,a.useContext)(u.$W).isFormItemInput,A=e.prefixCls,C=e.className,k=e.children,j=e.style,O=h(e,["prefixCls","className","children","style"]),E=y("radio",A),N="button"===((null===r||void 0===r?void 0:r.optionType)||v)?"".concat(E,"-button"):E,F=(0,l.A)({},O);r&&(F.name=r.name,F.onChange=function(t){var o,n;null===(o=e.onChange)||void 0===o||o.call(e,t),null===(n=null===r||void 0===r?void 0:r.onChange)||void 0===n||n.call(r,t)},F.checked=e.value===r.value,F.disabled=e.disabled||r.disabled);var w=d()("".concat(N,"-wrapper"),(o={},(0,n.A)(o,"".concat(N,"-wrapper-checked"),F.checked),(0,n.A)(o,"".concat(N,"-wrapper-disabled"),F.disabled),(0,n.A)(o,"".concat(N,"-wrapper-rtl"),"rtl"===g),(0,n.A)(o,"".concat(N,"-wrapper-in-form-item"),x),o),C);return a.createElement("label",{className:w,style:j,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave},a.createElement(i.A,(0,l.A)({},F,{type:"radio",prefixCls:N,ref:b})),void 0!==k?a.createElement("span",null,k):null)},_=a.forwardRef(g);_.displayName="Radio";const b=_;var x=o(5544),A=o(71207),C=o(87126),k=o(27373),j=a.forwardRef((function(e,t){var o=a.useContext(c.QO),i=o.getPrefixCls,r=o.direction,s=a.useContext(C.A),u=(0,A.A)(e.defaultValue,{value:e.value}),v=(0,x.A)(u,2),p=v[0],f=v[1];return a.createElement(m,{value:{onChange:function(t){var o=p,n=t.target.value;"value"in e||f(n);var l=e.onChange;l&&n!==o&&l(t)},value:p,disabled:e.disabled,name:e.name,optionType:e.optionType}},function(){var o,u=e.prefixCls,c=e.className,v=void 0===c?"":c,m=e.options,f=e.buttonStyle,y=void 0===f?"outline":f,h=e.disabled,g=e.children,_=e.size,x=e.style,A=e.id,C=e.onMouseEnter,j=e.onMouseLeave,O=i("radio",u),E="".concat(O,"-group"),N=g;m&&m.length>0&&(N=m.map((function(e){return"string"===typeof e||"number"===typeof e?a.createElement(b,{key:e.toString(),prefixCls:O,disabled:h,value:e,checked:p===e},e):a.createElement(b,{key:"radio-group-value-options-".concat(e.value),prefixCls:O,disabled:e.disabled||h,value:e.value,checked:p===e.value,style:e.style},e.label)})));var F=_||s,w=d()(E,"".concat(E,"-").concat(y),(o={},(0,n.A)(o,"".concat(E,"-").concat(F),F),(0,n.A)(o,"".concat(E,"-rtl"),"rtl"===r),o),v);return a.createElement("div",(0,l.A)({},(0,k.A)(e),{className:w,style:x,onMouseEnter:C,onMouseLeave:j,id:A,ref:t}),N)}())}));const O=a.memo(j);var E=function(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var l=0;for(n=Object.getOwnPropertySymbols(e);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(o[n[l]]=e[n[l]])}return o},N=function(e,t){var o=a.useContext(c.QO).getPrefixCls,n=e.prefixCls,i=E(e,["prefixCls"]),r=o("radio",n);return a.createElement(y,{value:"button"},a.createElement(b,(0,l.A)({prefixCls:r},i,{type:"radio",ref:t})))};const F=a.forwardRef(N);var w=b;w.Button=F,w.Group=O;const S=w},44674:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var n=o(9950),l=o(86366),a=o(3969),i=o(23263),r=o(13564),d=o(91854),s=o(71999),u=o(70030),c=o(75482),v=o(73364),m=o(70364),p=o(82039),f=o(65820),y=o(74623),h=o(29597),g=o(59051),_=o.n(g),b=o(19689),x=o(33824),A=o(12449),C=o(62466),k=o(81446),j=o(44414);const{Step:O}=l.A;function E(){var e,t,o,g,E,N,F,w,S,P,M,K;const{t:D}=(0,u.B)(),[I]=a.A.useForm(),{id:B}=(0,r.g)(),L=(0,f.s)(),Y=(0,d.wA)(),R=(0,r.Zp)(),{activeMenu:H}=(0,d.d4)((e=>e.menu),d.bN),{settings:q}=(0,d.d4)((e=>e.globalSettings),d.bN),{defaultCurrency:Q}=(0,d.d4)((e=>e.currency),d.bN),T=Number((null===(e=L.values)||void 0===e?void 0:e.step)||0),[U,V]=(0,n.useState)(!1),[G,J]=(0,n.useState)(!1),[$,z]=(0,n.useState)((null===H||void 0===H||null===(t=H.data)||void 0===t?void 0:t.images)||[]),[W,Z]=(0,n.useState)(null!==H&&void 0!==H&&null!==(o=H.data)&&void 0!==o&&o.location_from?{lat:parseFloat(null===H||void 0===H||null===(g=H.data)||void 0===g||null===(E=g.location_from)||void 0===E?void 0:E.latitude),lng:parseFloat(null===H||void 0===H||null===(N=H.data)||void 0===N||null===(F=N.location_from)||void 0===F?void 0:F.longitude)}:(0,h.A)(q)),[X,ee]=(0,n.useState)(null!==H&&void 0!==H&&null!==(w=H.data)&&void 0!==w&&w.location_to?{lat:parseFloat(null===H||void 0===H||null===(S=H.data)||void 0===S||null===(P=S.location_to)||void 0===P?void 0:P.latitude),lng:parseFloat(null===H||void 0===H||null===(M=H.data)||void 0===M||null===(K=M.location_to)||void 0===K?void 0:K.longitude)}:(0,h.A)(q));(0,n.useEffect)((()=>()=>{const e=I.getFieldsValue(!0),t=JSON.stringify(e.delivery_date),o=JSON.stringify(e.delivery_time),n={...e,date:t,time:o};Y((0,y.Ok)({activeMenu:H,data:n}))}),[]);const te=()=>{const e=T+1;L.set("step",e)},oe=()=>{const e=T-1;L.set("step",e)};(0,n.useEffect)((()=>{H.refetch&&B&&(e=>{V(!0),b.A.getById(e).then((e=>{var t,o,n,l,a,i,r,d,s,u,c,v,m,p,f,h,g,b,x;let A=e.data;z([(0,C.A)(A.img)]),Z({lat:null===A||void 0===A||null===(t=A.address_from)||void 0===t?void 0:t.latitude,lng:null===A||void 0===A||null===(o=A.address_from)||void 0===o?void 0:o.longitude}),ee({lat:null===A||void 0===A||null===(n=A.address_to)||void 0===n?void 0:n.latitude,lng:null===A||void 0===A||null===(l=A.address_to)||void 0===l?void 0:l.longitude});const k={...A,image:[(0,C.A)(A.img)],delivery_time:_()(null===A||void 0===A?void 0:A.delivery_time,"HH:mm:ss"),delivery_date:_()(A.delivery_date,"YYYY-MM-DD"),address_from:null===A||void 0===A||null===(a=A.address_from)||void 0===a?void 0:a.address,address_to:null===A||void 0===A||null===(i=A.address_to)||void 0===i?void 0:i.address,house_from:null===A||void 0===A||null===(r=A.address_from)||void 0===r?void 0:r.house,house_to:null===A||void 0===A||null===(d=A.address_to)||void 0===d?void 0:d.house,stage_from:null===A||void 0===A||null===(s=A.address_from)||void 0===s?void 0:s.stage,stage_to:null===A||void 0===A||null===(u=A.address_to)||void 0===u?void 0:u.stage,room_from:null===A||void 0===A||null===(c=A.address_from)||void 0===c?void 0:c.room,room_to:null===A||void 0===A||null===(v=A.address_to)||void 0===v?void 0:v.room,user_from:{label:[null===(m=A.user)||void 0===m?void 0:m.firstname,null===(p=A.user)||void 0===p?void 0:p.lastname].join(" "),value:null===(f=A.user)||void 0===f?void 0:f.id},type:{label:null===(h=A.type)||void 0===h?void 0:h.type,value:null===(g=A.type)||void 0===g?void 0:g.id},payment_type:{label:D(null===A||void 0===A||null===(b=A.transaction)||void 0===b?void 0:b.payment_system.tag),value:null===A||void 0===A||null===(x=A.transaction)||void 0===x?void 0:x.payment_system.id}};I.setFieldsValue(k),Y((0,y.Ok)({activeMenu:H,data:k}))})).finally((()=>{V(!1),Y((0,y.km)(H))}))})(B)}),[H.refetch]);return(0,j.jsxs)(i.A,{title:D("add.parcel.order"),extra:(0,j.jsx)(s.A,{}),children:[(0,j.jsx)(l.A,{current:T,onChange:e=>{L.set("step",e)},children:c.C.map((e=>(0,j.jsx)(O,{title:D(e.title)},e.title)))}),(0,j.jsx)("div",{className:"steps-content",children:U?(0,j.jsx)(k.A,{}):(0,j.jsxs)(a.A,{form:I,name:"parcel-create",layout:"vertical",onFinish:e=>{var t,o;console.log("values => ",e),J(!0);const n={user_id:null===(t=e.user_from)||void 0===t?void 0:t.value,currency_id:null===Q||void 0===Q?void 0:Q.id,type_id:null===(o=e.type)||void 0===o?void 0:o.value,rate:null===Q||void 0===Q?void 0:Q.rate,phone_from:e.phone_from.toString(),username_from:e.username_from,address_from:{longitude:null===W||void 0===W?void 0:W.lng,latitude:null===W||void 0===W?void 0:W.lat,address:e.address_from,house:e.house_from,stage:e.stage_from,room:e.room_from},phone_to:e.phone_to.toString(),username_to:e.username_to,address_to:{longitude:null===X||void 0===X?void 0:X.lng,latitude:null===X||void 0===X?void 0:X.lat,address:e.address_to,house:e.house_to,stage:e.stage_to,room:e.room_to},delivery_date:_()(e.delivery_date).format("YYYY-MM-DD"),delivery_time:_()(e.delivery_time,"HH:mm").format("HH:mm"),note:e.note,images:$.map((e=>e.name))},l="parcel-orders";b.A.update(B,n).then((()=>{Y((0,x.xj)()),A.oR.success(D("successfully.created")),Y((0,y.EK)({...H,nextUrl:l})),R(`/${l}`)})).finally((()=>J(!1)))},initialValues:{...H.data},onFinishFailed:e=>{const t=["","",""];e.errorFields.map((e=>e.name[0])).forEach((e=>{e.includes("_from")?t[0]="sender.details.invalid":e.includes("_to")?t[1]="receiver.details.invalid":t[2]="parcel.details.invalid"})),t.forEach((e=>{e&&A.oR.error(D(e))}))},children:[(0,j.jsx)("div",{className:"First-content"===c.C[T].content?"":"d-none",children:(0,j.jsx)(v.A,{form:I,next:te,location:W,setLocation:Z})}),(0,j.jsx)("div",{className:"Second-content"===c.C[T].content?"":"d-none",children:(0,j.jsx)(m.A,{form:I,next:te,prev:oe,location:X,setLocation:ee})}),(0,j.jsx)("div",{className:"Third-content"===c.C[T].content?"":"d-none",children:(0,j.jsx)(p.A,{form:I,loading:G,prev:oe,locationFrom:W,locationTo:X,image:$,setImage:z})})]})})]})}},71999:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(9950),l=o(17811),a=o(91854),i=o(82406),r=o(12437),d=o(44414);const s=()=>{const e=(0,a.wA)(),{languages:t,defaultLang:o}=(0,a.d4)((e=>e.formLang),a.bN);(0,n.useEffect)((()=>{r.A.getAllActive().then((t=>{let{data:o}=t;e((0,i.Nn)(o)),e((0,i.Qq)(o.find((e=>!(null===e||void 0===e||!e.default))).locale))}))}),[]);return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(l.Ay.Group,{value:o,onChange:t=>{let{target:{value:o}}=t;e((0,i.Qq)(o))},className:"float-right",buttonStyle:"solid",children:null===t||void 0===t?void 0:t.map((e=>(0,d.jsx)(l.Ay.Button,{value:e.locale,children:e.title},e.id)))})})}}}]);