(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[7070],{4159:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",i="minute",a="hour",o="day",u="week",l="month",d="quarter",c="year",h="date",f="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},y={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+g(s,2,"0")+":"+g(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,l),i=n-r<0,a=t.clone().add(s+(i?-1:1),l);return+(-(s+(n-r)/(i?r-a:a-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:u,d:o,D:h,h:a,m:i,s:r,ms:s,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},p="en",x={};x[p]=$;var A=function(e){return e instanceof S},_=function e(t,n,s){var r;if(!t)return p;if("string"==typeof t){var i=t.toLowerCase();x[i]&&(r=i),n&&(x[i]=n,r=i);var a=t.split("-");if(!r&&a.length>1)return e(a[0])}else{var o=t.name;x[o]=t,r=o}return!s&&r&&(p=r),r||!s&&p},M=function(e,t){if(A(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new S(n)},w=y;w.l=_,w.i=A,w.w=function(e,t){return M(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var S=function(){function $(e){this.$L=_(e.locale,null,!0),this.parse(e)}var g=$.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(w.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(v);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return w},g.isValid=function(){return!(this.$d.toString()===f)},g.isSame=function(e,t){var n=M(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return M(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<M(e)},g.$g=function(e,t,n){return w.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,s=!!w.u(t)||t,d=w.p(e),f=function(e,t){var r=w.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(o)},v=function(e,t){return w.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,$=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case c:return s?f(1,0):f(31,11);case l:return s?f(1,$):f(0,$+1);case u:var p=this.$locale().weekStart||0,x=(m<p?m+7:m)-p;return f(s?g-x:g+(6-x),$);case o:case h:return v(y+"Hours",0);case a:return v(y+"Minutes",1);case i:return v(y+"Seconds",2);case r:return v(y+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,u=w.p(e),d="set"+(this.$u?"UTC":""),f=(n={},n[o]=d+"Date",n[h]=d+"Date",n[l]=d+"Month",n[c]=d+"FullYear",n[a]=d+"Hours",n[i]=d+"Minutes",n[r]=d+"Seconds",n[s]=d+"Milliseconds",n)[u],v=u===o?this.$D+(t-this.$W):t;if(u===l||u===c){var m=this.clone().set(h,1);m.$d[f](v),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](v);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[w.p(e)]()},g.add=function(s,d){var h,f=this;s=Number(s);var v=w.p(d),m=function(e){var t=M(f);return w.w(t.date(t.date()+Math.round(e*s)),f)};if(v===l)return this.set(l,this.$M+s);if(v===c)return this.set(c,this.$y+s);if(v===o)return m(1);if(v===u)return m(7);var $=(h={},h[i]=t,h[a]=n,h[r]=e,h)[v]||1,g=this.$d.getTime()+s*$;return w.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=w.z(this),i=this.$H,a=this.$m,o=this.$M,u=n.weekdays,l=n.months,d=function(e,n,r,i){return e&&(e[n]||e(t,s))||r[n].slice(0,i)},c=function(e){return w.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s},v={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:w.s(o+1,2,"0"),MMM:d(n.monthsShort,o,l,3),MMMM:d(l,o),D:this.$D,DD:w.s(this.$D,2,"0"),d:String(this.$W),dd:d(n.weekdaysMin,this.$W,u,2),ddd:d(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:w.s(i,2,"0"),h:c(1),hh:c(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:w.s(a,2,"0"),s:String(this.$s),ss:w.s(this.$s,2,"0"),SSS:w.s(this.$ms,3,"0"),Z:r};return s.replace(m,(function(e,t){return t||v[e]||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(s,h,f){var v,m=w.p(h),$=M(s),g=($.utcOffset()-this.utcOffset())*t,y=this-$,p=w.m(this,$);return p=(v={},v[c]=p/12,v[l]=p,v[d]=p/3,v[u]=(y-g)/6048e5,v[o]=(y-g)/864e5,v[a]=y/n,v[i]=y/t,v[r]=y/e,v)[m]||y,f?p:w.a(p)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return x[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=_(e,t,!0);return s&&(n.$L=s),n},g.clone=function(){return w.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},$}(),j=S.prototype;return M.prototype=j,[["$ms",s],["$s",r],["$m",i],["$H",a],["$W",o],["$M",l],["$y",c],["$D",h]].forEach((function(e){j[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),M.extend=function(e,t){return e.$i||(e(t,S,M),e.$i=!0),M},M.locale=_,M.isDayjs=A,M.unix=function(e){return M(1e3*e)},M.en=x[p],M.Ls=x,M.p={},M}()},8168:(e,t,n)=>{"use strict";function s(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}n.d(t,{A:()=>s})},8297:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var s=n(9950),r=n(55902),i=n(41397),a=n(60767),o=n(44414);function u(e){let{handleChange:t,defaultValue:n,resetSearch:u,...l}=e;const[d,c]=(0,s.useState)(n),h=(0,s.useMemo)((()=>(0,i.debounce)((e=>{t(e)}),800)),[t]);return(0,s.useEffect)((()=>{c(n)}),[u,n]),(0,o.jsx)(r.A,{value:d,onChange:e=>{c(e.target.value),h(e.target.value)},prefix:(0,o.jsx)(a.A,{}),...l})}},28645:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var s=n(9950),r=n(66362),i=n(69216),a=n(80737),o=n(25933),u=n(57811),l=n(81541),d=n(48538),c=n(89323),h=n(70030),f=n(44414);const{Text:v}=r.A,m=e=>{let{columns:t=[],setColumns:n,style:r,size:m="",iconOnly:$}=e;const{t:g}=(0,h.B)(),[y,p]=(0,s.useState)(!1),x=(0,f.jsx)(i.A,{children:null===t||void 0===t?void 0:t.map(((e,s)=>(0,f.jsx)(i.A.Item,{children:(0,f.jsxs)(a.A,{className:"d-flex justify-content-between",children:[(0,f.jsx)(v,{children:e.title}),(0,f.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const s=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));n(s)}(e),disabled:1===s})]})},e+s)))});return(0,f.jsx)(u.A,{overlay:x,trigger:["click"],onVisibleChange:e=>{p(e)},visible:y,children:(0,f.jsx)(l.A,{title:g("change.columns"),children:(0,f.jsx)(d.A,{style:{...r},size:m,icon:(0,f.jsx)(c.A,{}),children:$?null:g("Columns")})})})}},37070:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V});var s=n(9950),r=n(12916),i=n(23263),a=n(80737),o=n(48538),u=n(12203),l=n(87094),d=n(41988),c=n(1007),h=n(91854),f=n(74623),v=n(70030),m=n(8168),$=n(88986),g=n(40613),y=n(8297),p=n(28645),x=n(53774),A=n(59051),_=n.n(A),M=n(3969),w=n(32645),S=n(8724),j=n(87864),b=n(55902),D=n(47992),C=n(53271),O=n(29530),k=n(12449),H=n(4159),I=n.n(H),Y=n(44414);function z(e){let{visible:t,onCancel:n,onSuccess:r}=e;const{t:i}=(0,v.B)(),[a]=M.A.useForm(),[o,u]=(0,s.useState)(!1);return(0,Y.jsx)(w.A,{visible:t,title:i("disburse_loan"),onCancel:n,onOk:()=>{a.validateFields().then((async e=>{u(!0);try{const t={user_id:e.user_id.value,amount:e.amount,interest_rate:e.interest_rate,due_date:e.due_date.format("YYYY-MM-DD"),note:e.note};await O.A.create(t),k.oR.success(i("success")),r&&r(),n()}catch(t){}finally{u(!1)}}))},confirmLoading:o,destroyOnClose:!0,children:(0,Y.jsxs)(M.A,{form:a,layout:"vertical",initialValues:{interest_rate:0,due_date:I()().add(30,"day")},children:[(0,Y.jsx)(M.A.Item,{name:"user_id",label:i("seller"),rules:[{required:!0,message:i("required")}],children:(0,Y.jsx)(D.G,{fetchOptions:async function(e){const t={search:e,perPage:10,role:"seller"};return(await C.A.search(t)).data.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id})))},placeholder:i("select.seller"),style:{width:"100%"}})}),(0,Y.jsx)(M.A.Item,{name:"amount",label:i("amount"),rules:[{required:!0,message:i("required")}],children:(0,Y.jsx)(S.A,{min:1,style:{width:"100%"}})}),(0,Y.jsx)(M.A.Item,{name:"interest_rate",label:i("interest_rate_%"),rules:[{required:!0,message:i("required")}],children:(0,Y.jsx)(S.A,{min:0,style:{width:"100%"}})}),(0,Y.jsx)(M.A.Item,{name:"due_date",label:i("due_date"),rules:[{required:!0,message:i("required")}],children:(0,Y.jsx)(j.A,{style:{width:"100%"}})}),(0,Y.jsx)(M.A.Item,{name:"note",label:i("note"),children:(0,Y.jsx)(b.A.TextArea,{rows:3})})]})})}function V(){var e,t;const{t:n}=(0,v.B)(),A=(0,h.wA)(),{defaultCurrency:M}=(0,h.d4)((e=>e.currency),h.bN),{activeMenu:w}=(0,h.d4)((e=>e.menu),h.bN),{loans:S,loading:j,meta:b,params:D}=(0,h.d4)((e=>e.loans),h.bN),[C,k]=(0,s.useState)([{title:n("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:n("vendor"),dataIndex:"vendor",key:"vendor",is_show:!0,render:e=>(0,Y.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:n("amount"),dataIndex:"amount",key:"amount",is_show:!0,render:e=>(0,x.A)(e,null===M||void 0===M?void 0:M.symbol,null===M||void 0===M?void 0:M.position)},{title:n("repayment_amount"),dataIndex:"repayment_amount",key:"repayment_amount",is_show:!0,render:e=>(0,x.A)(e,null===M||void 0===M?void 0:M.symbol,null===M||void 0===M?void 0:M.position)},{title:n("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>{const t="active"===e?"gold":"repaid"===e?"green":"red";return(0,Y.jsx)(r.A,{color:t,children:e})}},{title:n("disbursed_at"),dataIndex:"disbursed_at",key:"disbursed_at",is_show:!0,render:e=>_()(e).format("YYYY-MM-DD")}]),[H,I]=(0,s.useState)(null),[V,T]=(0,s.useState)(!1);const N=()=>{O.A.getStatistics().then((e=>I(e)))};(0,s.useEffect)((()=>{N()}),[]),(0,s.useEffect)((()=>{w.refetch&&(A((0,g.yN)()),A((0,f.km)(w)),N())}),[w.refetch]),(0,$.A)((()=>{const e=w.data,t={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};A((0,g.yN)(t))}),[w.data]);return(0,Y.jsxs)(i.A,{title:n("loans"),extra:(0,Y.jsxs)(a.A,{wrap:!0,children:[(0,Y.jsx)(o.A,{type:"primary",onClick:()=>T(!0),children:n("disburse_loan")}),(0,Y.jsx)(y.A,{placeholder:n("search"),handleChange:e=>((e,t)=>{const n=w.data;A((0,f.Ok)({activeMenu:w,data:{...n,[t]:e}}))})(e,"search"),defaultValue:null===(e=w.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(t=w.data)&&void 0!==t&&t.search)}),(0,Y.jsx)(p.A,{columns:C,setColumns:k})]}),children:[(0,Y.jsx)(u.A,{scroll:{x:!0},columns:null===C||void 0===C?void 0:C.filter((e=>e.is_show)),dataSource:S,loading:j,pagination:{pageSize:D.perPage,page:D.page,total:(null===b||void 0===b?void 0:b.total)||0,defaultCurrent:D.page},rowKey:e=>e.id,onChange:function(e,t,n){const{pageSize:s,current:r}=e,{field:i,order:a}=n,o=(0,m.A)(a);A((0,f.Ok)({activeMenu:w,data:{perPage:s,page:r,column:i,sort:o}}))}}),V&&(0,Y.jsx)(z,{visible:V,onCancel:()=>T(!1),onSuccess:()=>{A((0,f.Ok)({activeMenu:w,data:{...w.data,page:1}})),A((0,g.yN)()),N()}}),H&&(0,Y.jsxs)(l.A,{gutter:16,className:"mt-4",children:[(0,Y.jsx)(d.A,{span:6,children:(0,Y.jsx)(c.A,{title:n("total_loans"),value:H.total_loans})}),(0,Y.jsx)(d.A,{span:6,children:(0,Y.jsx)(c.A,{title:n("active_loans"),value:H.active_loans})}),(0,Y.jsx)(d.A,{span:6,children:(0,Y.jsx)(c.A,{title:n("repaid_loans"),value:H.repaid_loans})}),(0,Y.jsx)(d.A,{span:6,children:(0,Y.jsx)(c.A,{title:n("defaulted_loans"),value:H.defaulted_loans})})]})]})}},47992:(e,t,n)=>{"use strict";n.d(t,{G:()=>l});var s=n(9950),r=n(95491),i=n.n(r),a=n(99674),o=n(90650),u=n(44414);const l=e=>{let{fetchOptions:t,debounceTimeout:n=400,onClear:r,...l}=e;const[d,c]=(0,s.useState)(!1),[h,f]=(0,s.useState)([]),v=(0,s.useMemo)((()=>i()((e=>{f([]),c(!0),t(e).then((e=>{f(e),c(!1)}))}),n)),[t,n]);return(0,u.jsx)(a.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:v,onClear:()=>{v(""),r&&r()},notFoundContent:d?(0,u.jsx)(o.A,{size:"small"}):"no results",...l,options:h,onFocus:()=>{v("")}})}},53774:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var s=n(83291);function r(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const a=null===(e=s.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,o=Number(n).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),u=r||(null===a||void 0===a?void 0:a.symbol)||"$";return"after"===(i||(null===a||void 0===a?void 0:a.position)||"before")?`${o} ${u}`:`${u} ${o}`}},89323:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var s=n(89379),r=n(9950);const i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var a=n(25085),o=function(e,t){return r.createElement(a.A,(0,s.A)((0,s.A)({},e),{},{ref:t,icon:i}))};o.displayName="TableOutlined";const u=r.forwardRef(o)}}]);