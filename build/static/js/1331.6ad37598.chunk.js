(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1331],{33834:(l,e,i)=>{"use strict";i.d(e,{K:()=>t});var o=i(97890),d=i(74776),n=i.n(d);const t=()=>{const l=(0,o.s0)(),e=(0,o.TH)(),i=n().parse(e.search,{ignoreQueryPrefix:!0});return{values:i,set:(e,o)=>l({search:n().stringify({...i,[e]:o})}),reset:e=>{const o={...i};o[e]&&delete o[e],l({search:n().stringify({...o})})},clear:()=>l({search:n().stringify({})}),merge:e=>l({search:n().stringify({...i,...e})}),get:l=>i[l],setMultiple:e=>{const o={...i,...e};l({search:n().stringify(o)})},resetMultiple:e=>{const o={...i};e.forEach((l=>{o[l]&&delete o[l]})),l({search:n().stringify(o)})}}}},82082:(l,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>b});var o=i(47313),d=i(83999),n=i(77181),t=i(72652),a=i(73431),v=i(97890),r=i(18333),u=i(2717),s=i(90954),c=i(24511),p=i(33834),x=i(80314),m=i(8163),h=i(16848),y=i(88708),g=i(44902),j=i(89904),Z=i(32937),f=i(46417);const{Step:k}=d.Z,b=()=>{var l;const{t:e}=(0,c.$)(),{uuid:i}=(0,v.UO)(),b=(0,p.K)(),_=(0,u.I0)(),{activeMenu:S}=(0,u.v9)((l=>l.menu),u.wU),{languages:$}=(0,u.v9)((l=>l.formLang),u.wU),[q,I]=(0,o.useState)(S.refetch),w=Number((null===(l=b.values)||void 0===l?void 0:l.step)||0);(0,o.useEffect)((()=>{M(i)}),[]),(0,x.Z)((()=>{S.refetch&&M(i)}),[S.refetch]);const F=()=>{const l=w+1;b.set("step",l)},P=()=>{const l=w-1;b.set("step",l)},C=l=>{var e;return l?{label:null!==l&&void 0!==l&&l.translation?null===l||void 0===l||null===(e=l.translation)||void 0===e?void 0:e.title:null===l||void 0===l?void 0:l.title,value:null===l||void 0===l?void 0:l.id}:null},M=l=>{I(!0),r.Z.getById(l).then((l=>{var e,i,o,d,n,t,a,v,r,u,c,p;const x={};null===l||void 0===l||null===(e=l.data)||void 0===e||null===(i=e.stocks)||void 0===i||i.forEach((l=>{var e;null===l||void 0===l||null===(e=l.extras)||void 0===e||e.forEach((e=>{var i,o,d,n,t,a,v,r,u,s;(null===e||void 0===e?void 0:e.extra_group_id)in x?null!==x&&void 0!==x&&null!==(i=x[null===e||void 0===e?void 0:e.extra_group_id])&&void 0!==i&&null!==(o=i.values)&&void 0!==o&&o.some((l=>(null===l||void 0===l?void 0:l.value)===(null===e||void 0===e?void 0:e.id)))||null===x||void 0===x||null===(d=x[null===e||void 0===e?void 0:e.extra_group_id])||void 0===d||null===(n=d.values)||void 0===n||n.push({value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value,stock_id:null===l||void 0===l?void 0:l.id,group:null===e||void 0===e||null===(t=e.group)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title}):x[null===e||void 0===e?void 0:e.extra_group_id]={label:null===e||void 0===e||null===(v=e.group)||void 0===v||null===(r=v.translation)||void 0===r?void 0:r.title,value:null===e||void 0===e?void 0:e.extra_group_id,id:null===e||void 0===e?void 0:e.extra_group_id,stock_id:null===l||void 0===l?void 0:l.id,values:[{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.value,stock_id:null===l||void 0===l?void 0:l.id,group:null===e||void 0===e||null===(u=e.group)||void 0===u||null===(s=u.translation)||void 0===s?void 0:s.title}]}}))}));const m={...null===l||void 0===l?void 0:l.data,...U(null===l||void 0===l?void 0:l.data),category:C(null===l||void 0===l||null===(o=l.data)||void 0===o?void 0:o.category),brand:C(null===l||void 0===l||null===(d=l.data)||void 0===d?void 0:d.brand),kitchen:C(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.kitchen),unit:C(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.unit),images:(h=null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.galleries,h.map((l=>({uid:null===l||void 0===l?void 0:l.id,name:null===l||void 0===l?void 0:l.path,url:null===l||void 0===l?void 0:l.path})))),product_id:null===l||void 0===l||null===(v=l.data)||void 0===v?void 0:v.id,extras:Object.values(x),stocks:null===l||void 0===l||null===(r=l.data)||void 0===r||null===(u=r.stocks)||void 0===u?void 0:u.map((l=>({...l,...Object.assign({},...null===l||void 0===l?void 0:l.extras.map(((l,e)=>{var i,o;return{[`extras[${e}]`]:{label:null===l||void 0===l?void 0:l.value,value:null===l||void 0===l?void 0:l.id,group:null===l||void 0===l||null===(i=l.group)||void 0===i||null===(o=i.translation)||void 0===o?void 0:o.title}}}))),quantity:(null===l||void 0===l?void 0:l.quantity)||0,extras:void 0}))),properties:null===l||void 0===l||null===(c=l.data)||void 0===c||null===(p=c.properties)||void 0===p?void 0:p.map(((l,e)=>({id:e,[`key[${null===l||void 0===l?void 0:l.locale}]`]:null===l||void 0===l?void 0:l.key,[`value[${l.locale}]`]:null===l||void 0===l?void 0:l.value}))),translation:void 0,translations:void 0};var h;_((0,s.nc)({activeMenu:S,data:m}))})).finally((()=>{I(!1),_((0,s.A_)(S))}))},U=l=>{if(null===l||void 0===l||!l.translations)return{};const{translations:e}=l,i=null===$||void 0===$?void 0:$.map((l=>{var i,o;return{[`title[${null===l||void 0===l?void 0:l.locale}]`]:null===e||void 0===e||null===(i=e.find((e=>(null===e||void 0===e?void 0:e.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===i?void 0:i.title,[`description[${null===l||void 0===l?void 0:l.locale}]`]:null===e||void 0===e||null===(o=e.find((e=>(null===e||void 0===e?void 0:e.locale)===(null===l||void 0===l?void 0:l.locale))))||void 0===o?void 0:o.description}}));return Object.assign({},...i)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(n.Z,{title:e("edit.food"),extra:(0,f.jsx)(a.Z,{}),children:(0,f.jsx)(d.Z,{current:w,onChange:l=>{_((0,s.nc)({activeMenu:S,data:{...S.data,step:l}})),b.set("step",l)},children:h.S.map((l=>(0,f.jsx)(k,{title:e(l.title)},l.title)))})}),q?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(t.Z,{size:"large",className:"py-5"})}):(0,f.jsxs)("div",{children:["First-content"===h.S[w].content&&(0,f.jsx)(Z.Z,{next:F,action_type:"edit"}),"Second-content"===h.S[w].content&&(0,f.jsx)(j.Z,{next:F,prev:P}),"Third-content"===h.S[w].content&&(0,f.jsx)(m.Z,{next:F,prev:P,userRole:"seller"}),"Fourth-content"===h.S[w].content&&(0,f.jsx)(y.Z,{next:F,prev:P}),"Finish-content"===h.S[w].content&&(0,f.jsx)(g.Z,{prev:P})]})]})}},88708:(l,e,i)=>{"use strict";i.d(e,{Z:()=>q});var o=i(2717),d=i(47313),n=i(49873),t=i(9274),a=i(77181),v=i(45705),r=i(59491),u=i(24511),s=i(18333),c=i(23560),p=i(97890),x=i(90954),m=i(78508),h=i(12019),y=i(47515),g=i(55940),j=i(46417);const Z=l=>{let{properties:e,editSelectedProperty:i,deleteProperty:o,loading:d=!1}=l;const{t:n}=(0,u.$)(),t=[{title:n("key"),dataIndex:"key",key:"key"},{title:n("value"),dataIndex:"value",key:"value"},{title:n("options"),key:"options",render:(l,e)=>(0,j.jsxs)(v.Z,{children:[(0,j.jsx)(r.Z,{type:"primary",icon:(0,j.jsx)(h.Z,{}),onClick:()=>i(e)}),(0,j.jsx)(g.Z,{type:"primary",danger:!0,icon:(0,j.jsx)(y.Z,{}),onClick:()=>o(null===e||void 0===e?void 0:e.id)})]})}];return(0,j.jsx)(a.Z,{loading:d,children:(0,j.jsx)(m.Z,{dataSource:e,columns:t,pagination:!1})})};var f=i(10976),k=i(68197),b=i(59624),_=i(66672);const S=l=>{let{addNewProperty:e,loading:i=!1}=l;const{t:d}=(0,u.$)(),[t]=f.Z.useForm(),{defaultLang:v,languages:s}=(0,o.v9)((l=>l.formLang),o.wU);return(0,j.jsx)(a.Z,{loading:i,children:(0,j.jsx)(f.Z,{form:t,layout:"vertical",onFinish:l=>{const i={key:null===l||void 0===l?void 0:l[`key[${v}]`],value:null===l||void 0===l?void 0:l[`value[${v}]`]},o=s.map((e=>({id:(0,n.R)(),locale:null===e||void 0===e?void 0:e.locale,key:(null===l||void 0===l?void 0:l[`key[${null===e||void 0===e?void 0:e.locale}]`])||(null===i||void 0===i?void 0:i.key),value:(null===l||void 0===l?void 0:l[`value[${e.locale}]`])||(null===i||void 0===i?void 0:i.value)})));e(o),t.resetFields()},children:(0,j.jsxs)(k.Z,{gutter:12,children:[(0,j.jsx)(b.Z,{span:8,children:s.map((l=>(0,j.jsx)(f.Z.Item,{label:d("key"),name:`key[${(null===l||void 0===l?void 0:l.locale)||"en"}]`,hidden:(null===l||void 0===l?void 0:l.locale)!==v,rules:[{required:(null===l||void 0===l?void 0:l.locale)===v,message:d("required")},{type:"string",min:2,max:200,message:d("min.2.max.200.chars")}],children:(0,j.jsx)(_.Z,{})},null===l||void 0===l?void 0:l.locale)))}),(0,j.jsx)(b.Z,{span:8,children:s.map((l=>(0,j.jsx)(f.Z.Item,{label:d("value"),name:`value[${(null===l||void 0===l?void 0:l.locale)||"en"}]`,hidden:(null===l||void 0===l?void 0:l.locale)!==v,rules:[{required:(null===l||void 0===l?void 0:l.locale)===v,message:d("required")},{type:"string",min:2,max:200,message:d("min.2.max.200.chars")}],children:(0,j.jsx)(_.Z,{})},null===l||void 0===l?void 0:l.locale)))}),(0,j.jsx)(b.Z,{children:(0,j.jsx)(f.Z.Item,{label:" ",children:(0,j.jsx)(r.Z,{type:"primary",htmlType:"submit",children:d("add")})})})]})})})},$=l=>{let{property:e,editProperty:i}=l;const{t:o}=(0,u.$)(),[d]=f.Z.useForm();return(0,j.jsx)(a.Z,{children:(0,j.jsx)(f.Z,{form:d,layout:"vertical",onFinish:l=>{i({...e,...l})},initialValues:{key:null===e||void 0===e?void 0:e.key,value:null===e||void 0===e?void 0:e.value},children:(0,j.jsxs)(k.Z,{gutter:12,children:[(0,j.jsx)(b.Z,{span:24,children:(0,j.jsx)(f.Z.Item,{label:o("key"),name:"key",rules:[{required:!0,message:o("required")},{type:"string",min:2,max:200,message:o("min.2.max.200.chars")}],children:(0,j.jsx)(_.Z,{})})}),(0,j.jsx)(b.Z,{span:24,children:(0,j.jsx)(f.Z.Item,{label:o("value"),name:"value",rules:[{required:!0,message:o("required")},{type:"string",min:2,max:200,message:o("min.2.max.200.chars")}],children:(0,j.jsx)(_.Z,{})})}),(0,j.jsx)(b.Z,{span:24,children:(0,j.jsx)(r.Z,{type:"primary",htmlType:"submit",className:"w-100",children:o("edit")})})]})})})},q=l=>{var e;let{prev:i,next:m,isRequest:h=!1}=l;const{t:y}=(0,u.$)(),{uuid:g}=(0,p.UO)(),f=(0,o.I0)(),{defaultLang:k}=(0,o.v9)((l=>l.formLang),o.wU),{activeMenu:b}=(0,o.v9)((l=>l.menu),o.wU),[_,q]=(0,d.useState)(h&&(null===(e=b.data)||void 0===e?void 0:e.properties)||[]),[I,w]=(0,d.useState)(null),[F,P]=(0,d.useState)(!1),[C,M]=(0,d.useState)(!1);(0,d.useEffect)((()=>{h||U(g)}),[]);const U=l=>{P(!0),s.Z.getById(l).then((l=>{var e,i;q(null===l||void 0===l||null===(e=l.data)||void 0===e||null===(i=e.properties)||void 0===i?void 0:i.map((l=>({...l,id:(0,n.R)()}))))})).finally((()=>{P(!1)}))};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(S,{loading:F,addNewProperty:l=>{q([..._,...l])}}),(0,j.jsx)(Z,{loading:F,properties:null===_||void 0===_?void 0:_.filter((l=>(null===l||void 0===l?void 0:l.locale)===k)),editSelectedProperty:w,deleteProperty:l=>{t.Z.confirm({title:y("are.you.sure?"),okText:y("yes"),onOk:()=>{q((e=>e.filter((e=>e.id!==l))))}})}}),(0,j.jsx)(a.Z,{children:(0,j.jsxs)(v.Z,{children:[(0,j.jsx)(r.Z,{onClick:i,disabled:F,children:y("prev")}),(0,j.jsx)(r.Z,{type:"primary",onClick:()=>{const l={key:[],value:[]};if(null===_||void 0===_||_.map((e=>{l.key.push({[null===e||void 0===e?void 0:e.locale]:null===e||void 0===e?void 0:e.key}),l.value.push({[null===e||void 0===e?void 0:e.locale]:null===e||void 0===e?void 0:e.value})})),h)return f((0,x.nc)({activeMenu:b,data:{...b.data,properties:_,props:l}})),void m();M(!0),s.Z.properties(g,l).then((()=>{c.Am.success(y("successfully.updated")),m()})).finally((()=>{M(!1)}))},disabled:F,loading:C,children:y("next")})]})}),!!I&&(0,j.jsx)(t.Z,{visible:!!I,onCancel:()=>{w(null)},footer:!1,children:(0,j.jsx)($,{property:I,editProperty:l=>{q((e=>e.map((e=>e.id===l.id?l:e)))),w(null)}})})]})}},24654:()=>{}}]);