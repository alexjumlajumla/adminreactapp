"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9492],{19492:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(9950),l=s(13564),n=s(12449),i=s(3969),r=s(23263),u=s(91854),o=s(74623),d=s(70030),c=s(40337),m=s(74115),h=s(28957),p=s(44414);const f=()=>{const{t:e}=(0,d.B)(),{activeMenu:t}=(0,u.d4)((e=>e.menu),u.bN),s=(0,u.wA)(),[f]=i.A.useForm(),b=(0,l.Zp)(),{myShop:j}=(0,u.d4)((e=>e.myShop),u.bN);(0,a.useEffect)((()=>()=>{const e=f.getFieldsValue(!0);s((0,o.Ok)({activeMenu:t,data:e}))}),[]);return(0,p.jsx)(r.A,{title:e("add.story"),className:"h-100",children:(0,p.jsx)(h.A,{form:f,handleSubmit:(a,l)=>{const i={...Object.assign({},...l.map(((e,t)=>({[`file_urls[${t}]`]:e.name})))),product_id:a.products.value},r="seller/stories";return c.A.create(i).then((()=>{const a={shop_id:j.id};n.oR.success(e("successfully.created")),(0,u.vA)((()=>{s((0,o.EK)({...t,nextUrl:r})),s((0,m.I$)(a))})),b(`/${r}`)}))}})})}},28957:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(9950),l=s(3969),n=s(87094),i=s(41988),r=s(48538),u=s(47992),o=s(70030),d=s(91854),c=s(67231),m=s(16254),h=s(44414);function p(e){var t,s;let{form:p,handleSubmit:f}=e;const{t:b}=(0,o.B)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),{myShop:x}=(0,d.d4)((e=>e.myShop),d.bN),[A,v]=(0,a.useState)(null!==(t=null===(s=j.data)||void 0===s?void 0:s.image)&&void 0!==t?t:[]),[g,y]=(0,a.useState)(!1);return(0,h.jsxs)(l.A,{name:"story-form",layout:"vertical",onFinish:e=>{y(!0),f(e,A).finally((()=>y(!1)))},form:p,initialValues:{active:!0,...j.data},className:"d-flex flex-column h-100",children:[(0,h.jsxs)(n.A,{gutter:12,children:[(0,h.jsx)(i.A,{span:24,children:(0,h.jsx)(l.A.Item,{label:b("image"),name:"images",rules:[{required:0===A.length,message:b("required")}],children:(0,h.jsx)(m.A,{type:"categories",imageList:A,setImageList:v,form:p,multiple:!1})})}),(0,h.jsx)(i.A,{span:24,children:(0,h.jsx)(l.A.Item,{label:b("products"),name:"products",rules:[{required:!0,message:b("required")}],children:(0,h.jsx)(u.G,{fetchOptions:function(e){const t={search:e,shop_id:x.id,status:"published",active:1,rest:1};return c.A.getAll(t).then((e=>e.data.map((e=>({label:e.translation.title,value:e.id,key:e.id})))))},debounceTimeout:200})})})]}),(0,h.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,h.jsx)("div",{className:"pb-5",children:(0,h.jsx)(r.A,{type:"primary",htmlType:"submit",loading:g,children:b("submit")})})})]})}},47992:(e,t,s)=>{s.d(t,{G:()=>o});var a=s(9950),l=s(95491),n=s.n(l),i=s(99674),r=s(90650),u=s(44414);const o=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:l,...o}=e;const[d,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),p=(0,a.useMemo)((()=>n()((e=>{h([]),c(!0),t(e).then((e=>{h(e),c(!1)}))}),s)),[t,s]);return(0,u.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),l&&l()},notFoundContent:d?(0,u.jsx)(r.A,{size:"small"}):"no results",...o,options:m,onFocus:()=>{p("")}})}}}]);