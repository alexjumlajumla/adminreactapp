"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[8452],{1840:(e,l,a)=>{a.d(l,{A:()=>w});var s=a(3969),t=a(87094),n=a(41988),i=a(55902),r=a(99674),o=a(8724),d=a(25933),c=a(48538),u=a(9950),m=a(70030),v=a(64272),h=a(81446),p=a(91854),A=a(16254),g=a(78498),x=a(29597),j=a(12449),b=a(44414);const f=[{label:"Benzine",value:"benzine"},{label:"Diesel",value:"diesel"},{label:"Gas",value:"gas"},{label:"Motorbike",value:"motorbike"},{label:"Bike",value:"bike"},{label:"Foot",value:"foot"},{label:"Electric",value:"electric"}],w=e=>{let{id:l,data:a}=e;const{t:w}=(0,m.B)(),[y]=s.A.useForm(),[k,_]=(0,u.useState)(!1),[I,S]=(0,u.useState)(!1),[C,N]=(0,u.useState)([]),{settings:q}=(0,p.d4)((e=>e.globalSettings),p.bN),[P,z]=(0,u.useState)((0,x.A)(q)),E=e=>e.map((e=>({uid:e.id,name:e.path,url:e.path})));return(0,u.useEffect)((()=>{l&&(e=>{S(!0),v.A.getById(e).then((e=>{var l,a,s,t,n,i,r,o;const d={...e.data,user_id:{label:e.data.deliveryMan.firstname+" "+e.data.deliveryMan.firstname,value:e.data.deliveryMan.id,images:E(e.data.galleries),location:{lat:null===(l=e.data)||void 0===l||null===(a=l.location)||void 0===a?void 0:a.latitude,lng:null===(s=e.data)||void 0===s||null===(t=s.location)||void 0===t?void 0:t.longitude}}};z({lat:null===(n=e.data)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.latitude,lng:null===(r=e.data)||void 0===r||null===(o=r.location)||void 0===o?void 0:o.longitude}),N(E(e.data.galleries)),y.setFieldsValue(d)})).finally((()=>S(!1)))})(l)}),[]),(0,b.jsx)(s.A,{name:"basic",layout:"vertical",onFinish:e=>{var s;_(!0);const t={...e,user_id:a.id,images:[null===(s=C[0])||void 0===s?void 0:s.name],location:{latitude:P.lat,longitude:P.lng},online:Number(e.online)};v.A.update(l,t).then((()=>j.oR.success(w("successfully.updated")))).finally((()=>_(!1)))},form:y,children:I?(0,b.jsx)(h.A,{}):(0,b.jsxs)(t.A,{gutter:12,children:[(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("brand"),name:"brand",rules:[{required:!0,message:w("required")}],children:(0,b.jsx)(i.A,{})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("model"),name:"model",rules:[{required:!0,message:w("required")}],children:(0,b.jsx)(i.A,{})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("type.of.technique"),name:"type_of_technique",rules:[{required:!0,message:w("required")}],children:(0,b.jsx)(r.A,{options:f})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("car.number"),name:"number",rules:[{required:!0,message:w("required")}],children:(0,b.jsx)(i.A,{})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("car.color"),name:"color",rules:[{required:!0,message:w("required")}],children:(0,b.jsx)(i.A,{})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("height"),name:"height",rules:[{validator:(e,l)=>l||0===l?!l||l<1?Promise.reject(new Error(w("min.1"))):Promise.resolve():Promise.reject(new Error(w("required")))}],children:(0,b.jsx)(o.A,{className:"w-100",addonAfter:"sm"})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("weight"),name:"kg",rules:[{validator:(e,l)=>l||0===l?!l||l<1?Promise.reject(new Error(w("min.1"))):Promise.resolve():Promise.reject(new Error(w("required")))}],children:(0,b.jsx)(o.A,{className:"w-100",addonAfter:"kg"})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("length"),name:"length",rules:[{validator:(e,l)=>l||0===l?!l||l<1?Promise.reject(new Error(w("min.1"))):Promise.resolve():Promise.reject(new Error(w("required")))}],children:(0,b.jsx)(o.A,{className:"w-100",addonAfter:"sm"})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("width"),name:"width",rules:[{validator:(e,l)=>l||0===l?!l||l<1?Promise.reject(new Error(w("min.1"))):Promise.resolve():Promise.reject(new Error(w("required")))}],children:(0,b.jsx)(o.A,{className:"w-100",addonAfter:"sm"})})}),(0,b.jsx)(n.A,{span:12,children:(0,b.jsx)(s.A.Item,{label:w("image"),name:"images",children:(0,b.jsx)(A.A,{type:"deliveryman/settings",imageList:C,setImageList:N,form:y,length:"1",multiple:!0})})}),(0,b.jsx)(n.A,{span:6,children:(0,b.jsx)(s.A.Item,{label:w("online"),name:"online",valuePropName:"checked",children:(0,b.jsx)(d.A,{})})}),(0,b.jsx)(n.A,{span:24,children:(0,b.jsx)(s.A.Item,{label:w("map"),name:"location",children:(0,b.jsx)(g.A,{location:P,setLocation:z})})}),(0,b.jsx)(n.A,{span:24,children:(0,b.jsx)(c.A,{type:"primary",htmlType:"submit",loading:k,children:w("save")})})]})})}},6566:(e,l,a)=>{a.d(l,{A:()=>n});var s=a(83291),t=a(63620);const n=()=>{var e,l;const{google_map_key:a}=null===(e=s.M.getState())||void 0===e||null===(l=e.globalSettings)||void 0===l?void 0:l.settings;return a||t.CJ}},8168:(e,l,a)=>{function s(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(l,{A:()=>s})},22276:(e,l,a)=>{a.d(l,{A:()=>n});var s=a(82371);const t="dashboard/admin/tables",n={getAll:e=>s.A.get(t,{params:e}),getById:e=>s.A.get(`${t}/${e}`),create:e=>s.A.post(t,e),update:(e,l)=>s.A.put(`${t}/${e}`,l),delete:e=>s.A.delete(`${t}/delete`,{params:e})}},28645:(e,l,a)=>{a.d(l,{A:()=>p});var s=a(9950),t=a(66362),n=a(69216),i=a(80737),r=a(25933),o=a(57811),d=a(81541),c=a(48538),u=a(89323),m=a(70030),v=a(44414);const{Text:h}=t.A,p=e=>{let{columns:l=[],setColumns:a,style:t,size:p="",iconOnly:A}=e;const{t:g}=(0,m.B)(),[x,j]=(0,s.useState)(!1),b=(0,v.jsx)(n.A,{children:null===l||void 0===l?void 0:l.map(((e,s)=>(0,v.jsx)(n.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(h,{children:e.title}),(0,v.jsx)(r.A,{defaultChecked:!0,onClick:()=>function(e){const s=null===l||void 0===l?void 0:l.map((l=>(l.dataIndex===e.dataIndex&&(l.is_show=!(null!==l&&void 0!==l&&l.is_show)),l)));a(s)}(e),disabled:1===s})]})},e+s)))});return(0,v.jsx)(o.A,{overlay:b,trigger:["click"],onVisibleChange:e=>{j(e)},visible:x,children:(0,v.jsx)(d.A,{title:g("change.columns"),children:(0,v.jsx)(c.A,{style:{...t},size:p,icon:(0,v.jsx)(u.A,{}),children:A?null:g("Columns")})})})}},29597:(e,l,a)=>{a.d(l,{A:()=>s});a(63620);function s(e){if(null===e||void 0===e||!e.location)return{lat:47.4143302506288,lng:8.532059477976883};const l=e.location.split(", ");return{lat:Number(null===l||void 0===l?void 0:l[0]),lng:Number(null===l||void 0===l?void 0:l[1])}}},35116:(e,l,a)=>{a.d(l,{A:()=>d});a(9950);var s=a(48538),t=a(44070),n=a(12449),i=a(70030),r=a(13311),o=a(44414);function d(e){let{size:l="",onClick:a,type:d="default",...c}=e;const{t:u}=(0,i.B)(),{isDemo:m}=(0,r.A)();return(0,o.jsx)(s.A,{size:l,icon:(0,o.jsx)(t.A,{}),onClick:e=>{m?n.oR.warning(u("cannot.work.demo")):a(e)},type:d,...c})}},36790:(e,l,a)=>{a.d(l,{A:()=>t});var s=a(82371);const t={getAll:e=>s.A.get("dashboard/admin/kitchen",{params:e})}},47992:(e,l,a)=>{a.d(l,{G:()=>d});var s=a(9950),t=a(95491),n=a.n(t),i=a(99674),r=a(90650),o=a(44414);const d=e=>{let{fetchOptions:l,debounceTimeout:a=400,onClear:t,...d}=e;const[c,u]=(0,s.useState)(!1),[m,v]=(0,s.useState)([]),h=(0,s.useMemo)((()=>n()((e=>{v([]),u(!0),l(e).then((e=>{v(e),u(!1)}))}),a)),[l,a]);return(0,o.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:h,onClear:()=>{h(""),t&&t()},notFoundContent:c?(0,o.jsx)(r.A,{size:"small"}):"no results",...d,options:m,onFocus:()=>{h("")}})}},50273:(e,l,a)=>{a.d(l,{A:()=>q});var s=a(9950),t=a(3969),n=a(87094),i=a(41988),r=a(55902),o=a(8724),d=a(87864),c=a(99674),u=a(25933),m=a(48538),v=a(13564),h=a(91854),p=a(53271),A=a(12449),g=a(74623),x=a(39539),j=a(59051),b=a.n(j),f=a(70030),w=a(3855),y=a(16254),k=a(47992),_=a(58547),I=a(13311),S=a(36790),C=a(22276),N=a(44414);function q(e){var l,a,j;let{form:q,data:P,image:z,setImage:E,action_type:M=""}=e;const{t:V}=(0,f.B)(),$=(0,h.d4)((e=>e.menu.activeMenu),h.bN),F=(0,h.wA)(),B=(0,v.Zp)(),{uuid:H}=(0,v.g)(),O=(0,v.zy)(),[R,D]=(0,s.useState)(),[L,G]=(0,s.useState)(null),[T,Y]=(0,s.useState)(!1),K=null===$||void 0===$||null===(l=$.data)||void 0===l?void 0:l.role,W=(0,h.d4)((e=>e.user),h.bN),U=(0,h.d4)((e=>e.client),h.bN),{isDemo:X}=(0,I.A)(),[Z,J]=(0,s.useState)((null===P||void 0===P||null===(a=P.invitations)||void 0===a||null===(j=a[0])||void 0===j?void 0:j.shop_id)||void 0);async function Q(e){const l={search:e,status:"approved"};return _.A.search(l).then((e=>e.data.map((e=>({label:null!==e.translation?e.translation.title:"no name",value:e.id})))))}return(0,N.jsx)(t.A,{form:q,layout:"vertical",initialValues:{gender:"male",role:"admin",...P,birthday:null!==P&&void 0!==P&&P.birthday?b()(P.birthday):null},onFinish:e=>{var l,a,s,t;Y(!0);const n={firstname:e.firstname,lastname:e.lastname,email:X||null===e||void 0===e?void 0:e.email,phone:X||null===e||void 0===e?void 0:e.phone,birthday:b()(R).format("YYYY-MM-DD"),gender:e.gender,images:z[0]?[null===(l=z[0])||void 0===l?void 0:l.name]:void 0,shop_id:null!==e&&void 0!==e&&e.shop_id?void 0!==(null===e||void 0===e?void 0:e.shop_id.length)?null===e||void 0===e||null===(a=e.shop_id)||void 0===a?void 0:a.map((e=>e.value)):[null===e||void 0===e?void 0:e.shop_id.value]:void 0,role:K,kitchen_id:(null===e||void 0===e||null===(s=e.kitchen)||void 0===s?void 0:s.value)||void 0,isWork:"waiter"===(null===P||void 0===P?void 0:P.role)?!(null===e||void 0===e||!e.isWork):void 0,table_ids:"waiter"===(null===P||void 0===P?void 0:P.role)?null===e||void 0===e||null===(t=e.table_ids)||void 0===t?void 0:t.map((e=>e.value)):void 0},i=0===O.pathname.search("/user/delivery/")?"deliveries/list":"user"!==P.role?"users/admin":"users/user",r={...W.params,role:P.role},o={...U.params};"edit"===M?p.A.update(H,n).then((()=>{A.oR.success(V("successfully.updated")),F((0,g.EK)({...$,nextUrl:i})),B(`/${i}`),"user"===P.role?F((0,w.$3)(o)):F((0,x.hU)(r))})).catch((e=>G(e.response.data.params))).finally((()=>Y(!1))):p.A.create(n).then((()=>{A.oR.success(V("successfully.created")),F((0,g.EK)({...$,nextUrl:i})),B(`/${i}`),"user"===P.role?F((0,w.$3)(o)):F((0,x.hU)(r))})).catch((e=>G(e.response.data.params))).finally((()=>Y(!1)))},className:"px-2",children:(0,N.jsxs)(n.A,{gutter:12,children:[(0,N.jsx)(i.A,{span:24,children:(0,N.jsx)(t.A.Item,{name:"images",label:V("avatar"),rules:[{validator:()=>0===(null===z||void 0===z?void 0:z.length)?Promise.reject(new Error(V("required"))):Promise.resolve()}],children:(0,N.jsx)(y.A,{type:"restaurant/logo",imageList:z,setImageList:E,form:q,multiple:!1,name:"logo_img"})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("firstname"),name:"firstname",help:null!==L&&void 0!==L&&L.firstname?L.firstname[0]:null,validateStatus:null!==L&&void 0!==L&&L.firstname?"error":"success",rules:[{validator:(e,l)=>l?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(V("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(V("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(V("required")))}],children:(0,N.jsx)(r.A,{className:"w-100"})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("lastname"),name:"lastname",help:null!==L&&void 0!==L&&L.lastname?L.lastname[0]:null,validateStatus:null!==L&&void 0!==L&&L.lastname?"error":"success",rules:[{validator:(e,l)=>l?l&&""===(null===l||void 0===l?void 0:l.trim())?Promise.reject(new Error(V("no.empty.space"))):l&&(null===l||void 0===l?void 0:l.trim().length)<2?Promise.reject(new Error(V("must.be.at.least.2"))):Promise.resolve():Promise.reject(new Error(V("required")))}],children:(0,N.jsx)(r.A,{className:"w-100"})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("phone"),name:"phone",help:null!==L&&void 0!==L&&L.phone?L.phone[0]:null,validateStatus:null!==L&&void 0!==L&&L.phone?"error":"success",rules:[{required:!X,message:V("required")}],children:(0,N.jsx)(o.A,{min:0,className:"w-100"})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("birthday"),name:"birthday",rules:[{required:!0,message:V("required")}],children:(0,N.jsx)(d.A,{onChange:e=>D(e),className:"w-100",disabledDate:e=>b()().add(-18,"years")<=e,defaultPickerValue:b()().add(-18,"years")})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("gender"),name:"gender",rules:[{required:!0,message:V("required")}],children:(0,N.jsxs)(c.A,{picker:"dayTime",className:"w-100",children:[(0,N.jsx)(c.A.Option,{value:"male",children:V("male")}),(0,N.jsx)(c.A.Option,{value:"female",children:V("female")})]})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("email"),name:"email",help:null!==L&&void 0!==L&&L.email?L.email[0]:null,validateStatus:null!==L&&void 0!==L&&L.email?"error":"success",rules:[{required:!X,message:V("required")},{type:"email",message:V("invalid.email")}],children:(0,N.jsx)(r.A,{type:"email",className:"w-100",disabled:X})})}),"admin"!==K&&"manager"!==K&&"moderator"!==K&&"seller"!==K&&"cook"!==K&&"user"!==K&&(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("branches"),name:"shop_id",rules:[{required:!1,message:V("required")}],children:(0,N.jsx)(k.G,{mode:"multiple",fetchOptions:Q,className:"w-100",placeholder:V("select.shop"),allowClear:!1,onChange:e=>{q.setFieldsValue({table_ids:void 0})}})})}),"admin"!==K&&"manager"!==K&&"moderator"!==K&&"seller"!==K&&"cook"!==K&&"user"!==K&&"deliveryman"!==K&&(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("tables"),name:"table_ids",rules:[{required:!1,message:V("required")}],children:(0,N.jsx)(k.G,{mode:"multiple",fetchOptions:async function(e){var l;const a=q.getFieldValue("shop_id"),s={search:e,shop_ids:null!==(l=null===a||void 0===a?void 0:a.map((e=>e.value)))&&void 0!==l?l:[]};return C.A.getAll(s).then((e=>e.data.map((e=>{var l;return{label:null!==(l=e.name)&&void 0!==l?l:"no name",value:e.id}}))))},className:"w-100",placeholder:V("select.table"),allowClear:!1})})}),"cook"===K&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("shop"),name:"shop_id",rules:[{required:!1,message:V("required")}],children:(0,N.jsx)(k.G,{fetchOptions:Q,className:"w-100",placeholder:V("select.shop"),allowClear:!1,onChange:e=>{J(null===e||void 0===e?void 0:e.value),q.setFieldsValue({kitchen:void 0})}})})}),(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("kitchen"),name:"kitchen",children:(0,N.jsx)(k.G,{fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={search:null!==e&&void 0!==e&&e.length?e:void 0,shop_id:Z||void 0,active:1};return S.A.getAll(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},disabled:!Z,placeholder:V("select.kitchen")})})})]}),"moderator"===K&&(0,N.jsx)(i.A,{span:12,children:(0,N.jsx)(t.A.Item,{label:V("branches"),name:"shop_id",rules:[{required:!1,message:V("required")}],children:(0,N.jsx)(k.G,{fetchOptions:Q,className:"w-100",placeholder:V("select.shop"),allowClear:!1})})}),"waiter"===(null===P||void 0===P?void 0:P.role)&&(0,N.jsx)(i.A,{children:(0,N.jsx)(t.A.Item,{label:V("is.work"),name:"isWork",valuePropName:"checked",children:(0,N.jsx)(u.A,{})})}),(0,N.jsx)(i.A,{span:24,children:(0,N.jsx)(m.A,{type:"primary",htmlType:"submit",loading:T,children:V("save")})})]})})}},50302:(e,l,a)=>{a.d(l,{A:()=>p});var s=a(9950),t=a(3969),n=a(23263),i=a(87094),r=a(41988),o=a(55902),d=a(48538),c=a(13564),u=a(12449),m=a(53271),v=a(70030),h=a(44414);function p(){const{t:e}=(0,v.B)(),[l]=t.A.useForm(),[a,p]=(0,s.useState)(null),[A,g]=(0,s.useState)(!1),{uuid:x}=(0,c.g)();return(0,h.jsx)(n.A,{title:e("user.password.change"),children:(0,h.jsx)(t.A,{form:l,layout:"vertical",onFinish:l=>{g(!0);const a={password:l.password?l.password:void 0,password_confirmation:l.password_confirmation};m.A.updatePassword(x,a).then((()=>{u.oR.success(e("successfully.created"))})).catch((e=>p(e.response.data.params))).finally((()=>g(!1)))},children:(0,h.jsxs)(i.A,{gutter:12,children:[(0,h.jsx)(r.A,{span:12,children:(0,h.jsx)(t.A.Item,{label:e("password"),name:"password",help:null!==a&&void 0!==a&&a.password?a.password[0]:null,validateStatus:null!==a&&void 0!==a&&a.password?"error":"success",rules:[{required:!0,message:e("required")}],children:(0,h.jsx)(o.A.Password,{type:"password",className:"w-100",placeholder:"********"})})}),(0,h.jsx)(r.A,{span:12,children:(0,h.jsx)(t.A.Item,{label:e("password.confirmation"),help:null!==a&&void 0!==a&&a.password_confirmation?a.password_confirmation[0]:null,validateStatus:null!==a&&void 0!==a&&a.password_confirmation?"error":"success",name:"password_confirmation",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:e("required")},l=>{let{getFieldValue:a}=l;return{validator:(l,s)=>s&&a("password")!==s?Promise.reject(e("two.passwords.dont.match")):Promise.resolve()}}],children:(0,h.jsx)(o.A.Password,{type:"password",placeholder:"********"})})}),(0,h.jsx)(r.A,{span:24,children:(0,h.jsx)(d.A,{type:"primary",htmlType:"submit",loading:A,children:e("save")})})]})})})}},53387:(e,l,a)=>{a.d(l,{A:()=>o});var s=a(89379),t=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"plus-circle",theme:"outlined"};var i=a(25085),r=function(e,l){return t.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:l,icon:n}))};r.displayName="PlusCircleOutlined";const o=t.forwardRef(r)},53774:(e,l,a)=>{a.d(l,{A:()=>t});var s=a(83291);function t(){var e,l;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const i=null===(e=s.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,r=Number(a).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),o=t||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(n||(null===i||void 0===i?void 0:i.position)||"before")?`${r} ${o}`:`${o} ${r}`}},54766:(e,l,a)=>{a.d(l,{A:()=>y});var s=a(9950),t=a(80737),n=a(48538),i=a(12203),r=a(91854),o=a(70030),d=a(53774),c=a(53271),u=a(53387),m=a(3969),v=a(32645),h=a(8724),p=a(55902),A=a(12449),g=a(74623),x=a(44414);function j(e){let{modal:l,uuid:a,handleCancel:t}=e;const[i,d]=(0,s.useState)(!1),[u]=m.A.useForm(),{t:j}=(0,o.B)(),b=(0,r.wA)(),{activeMenu:f}=(0,r.d4)((e=>e.menu),r.bN);return(0,x.jsx)(v.A,{visible:l,title:j("topup.wallet"),onCancel:t,footer:[(0,x.jsx)(n.A,{type:"default",onClick:t,children:j("cancel")},"cancel-btn"),(0,x.jsx)(n.A,{type:"primary",onClick:()=>u.submit(),loading:i,children:j("save")},"submit-btn")],children:(0,x.jsxs)(m.A,{layout:"vertical",form:u,onFinish:e=>{d(!0),c.A.topupWallet(a,e).then((()=>{A.oR.success(j("successfully.added")),b((0,g.Ms)(f)),t()})).finally((()=>d(!1)))},children:[(0,x.jsx)(m.A.Item,{label:j("price"),name:"price",rules:[{required:!0,message:j("required")}],children:(0,x.jsx)(h.A,{min:0,className:"w-100"})}),(0,x.jsx)(m.A.Item,{label:j("note"),name:"note",children:(0,x.jsx)(p.A,{})})]})})}var b=a(28645),f=a(59051),w=a.n(f);function y(e){var l;let{data:a}=e;const{t:m}=(0,o.B)(),[v,h]=(0,s.useState)(1),[p,A]=(0,s.useState)(10),[g,f]=(0,s.useState)(1),[y,k]=(0,s.useState)(!1),[_,I]=(0,s.useState)([]),[S,C]=(0,s.useState)(!1),{defaultCurrency:N}=(0,r.d4)((e=>e.currency),r.bN),[q,P]=(0,s.useState)([{title:m("created.by"),dataIndex:"author",key:"author",is_show:!0,render:e=>(0,x.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:m("price"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,d.A)(e,null===N||void 0===N?void 0:N.symbol)},{title:m("note"),dataIndex:"note",key:"note",is_show:!0},{title:m("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>w()(e).format("YYYY-MM-DD HH:mm")}]);return(0,s.useEffect)((()=>{!function(){k(!0);const e={pageSize:10,page:v||1};c.A.walletHistory(a.uuid,e).then((e=>{I(e.data),f(e.meta.total)})).finally((()=>k(!1)))}()}),[v]),(0,x.jsxs)("div",{className:"px-2",children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsxs)(t.A,{wrap:!0,children:[(0,x.jsx)(n.A,{type:"primary",icon:(0,x.jsx)(u.A,{}),onClick:()=>C(!0),children:`${m("wallet")}: ${(0,d.A)(null===a||void 0===a||null===(l=a.wallet)||void 0===l?void 0:l.price,null===N||void 0===N?void 0:N.symbol)}`}),(0,x.jsx)(b.A,{columns:q,setColumns:P})]})}),(0,x.jsx)(i.A,{scroll:{x:!0},columns:null===q||void 0===q?void 0:q.filter((e=>e.is_show)),dataSource:_,loading:y,pagination:{pageSize:p,page:v,total:g},rowKey:e=>e.id,onChange:function(e,l,a){const{pageSize:s,current:t}=e;h(t),A(s)}}),S&&(0,x.jsx)(j,{modal:S,uuid:a.uuid,handleCancel:()=>C(!1)})]})}},78498:(e,l,a)=>{a.d(l,{A:()=>A});var s=a(9950),t=a(97239);const n=a.p+"static/media/pin.0e41858db80c699cd8a2.png";var i=a(96011),r=a.n(i),o=a(63620);async function d(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.CJ,a={latlng:`${null===e||void 0===e?void 0:e.lat},${null===e||void 0===e?void 0:e.lng}`,key:l};return r().get("https://maps.googleapis.com/maps/api/geocode/json",{params:a}).then((e=>{var l;let{data:a}=e;return null===(l=a.results[0])||void 0===l?void 0:l.formatted_address})).catch((e=>"not found"))}var c=a(52423),u=a(12449),m=a(70030),v=a(6566),h=a(44414);const p=(0,v.A)();const A=(0,t.GoogleApiWrapper)({apiKey:p,libraries:["places","geometry"]})((function(e){var l,a;const[i,r]=(0,s.useState)(),{t:o}=(0,m.B)(),v=async()=>{await navigator.geolocation.getCurrentPosition((function(e){const l={lat:e.coords.latitude,lng:e.coords.longitude};r(l)}),(function(e){u.oR.warning(o("turn.on.gps"))}))};(0,s.useEffect)((()=>{v()}),[]);const A=[{lat:Number(null===e||void 0===e||null===(l=e.location)||void 0===l?void 0:l.lat)||0,lng:Number(null===e||void 0===e||null===(a=e.location)||void 0===a?void 0:a.lng)||0}];for(var g=new e.google.maps.LatLngBounds,x=0;x<A.length;x++)g.extend(A[x]);return(0,h.jsxs)("div",{className:"map-container",style:{height:400,width:"100%"},children:[(0,h.jsx)("button",{className:"map-button",type:"button",onClick:()=>{v(),i&&(async l=>{const a={lat:null===l||void 0===l?void 0:l.lat,lng:null===l||void 0===l?void 0:l.lng};e.setLocation(a);const s=await d(a,p);e.setAddress(s)})(i)},children:(0,h.jsx)(c.uFi,{})}),(0,h.jsx)(t.Map,{cursor:"pointer",onClick:async(l,a,s)=>{const{latLng:t}=s,n={lat:t.lat(),lng:t.lng()};e.setLocation(n);const i=await d(n,p);e.setAddress(i)},google:e.google,defaultZoom:12,zoom:10,className:"clickable",initialCenter:e.location,center:e.location,children:(0,h.jsx)(t.Marker,{position:e.location,icon:{url:n,scaledSize:new e.google.maps.Size(32,32)},className:"marker"})})]})}))},89323:(e,l,a)=>{a.d(l,{A:()=>o});var s=a(89379),t=a(9950);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),r=function(e,l){return t.createElement(i.A,(0,s.A)((0,s.A)({},e),{},{ref:l,icon:n}))};r.displayName="TableOutlined";const o=t.forwardRef(r)},90150:(e,l,a)=>{a.d(l,{A:()=>k});var s=a(9950),t=a(80737),n=a(48538),i=a(23263),r=a(12203),o=a(13564),d=a(12678),c=a(44070),u=a(91854),m=a(74623),v=a(70030),h=a(53774),p=a(53177),A=a(8168),g=a(55386),x=a(12449),j=a(35116),b=a(76083),f=a(23758),w=a(28645),y=a(44414);function k(e){let{data:l}=e;const a=(0,u.wA)(),k=(0,o.Zp)(),{t:_}=(0,v.B)(),[I,S]=(0,s.useState)(null),[C,N]=(0,s.useState)(null),{setIsModalVisible:q}=(0,s.useContext)(g.o),[P,z]=(0,s.useState)(!1),{activeMenu:E}=(0,u.d4)((e=>e.menu),u.bN),{orders:M,meta:V,loading:$,params:F}=(0,u.d4)((e=>e.orders),u.bN),{defaultCurrency:B}=(0,u.d4)((e=>e.currency),u.bN),[H,O]=(0,s.useState)([{title:_("id"),is_show:!0,dataIndex:"id",key:"id",sorter:!0},{title:_("client"),is_show:!0,dataIndex:"user",key:"user",render:e=>(0,y.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:_("number.of.products"),is_show:!0,dataIndex:"order_details_count",key:"order_details_count",render:e=>(0,y.jsxs)("div",{className:"text-lowercase",children:[e||0," ",_("products")]})},{title:_("amount"),is_show:!0,dataIndex:"total_price",key:"total_price",render:e=>(0,h.A)(e,null===B||void 0===B?void 0:B.symbol)},{title:_("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var l;return _(null===e||void 0===e||null===(l=e.payment_system)||void 0===l?void 0:l.tag)||"-"}},{title:_("created.at"),is_show:!0,dataIndex:"created_at",key:"created_at"},{title:_("options"),is_show:!0,key:"options",render:(e,l)=>(0,y.jsxs)(t.A,{children:[(0,y.jsx)(n.A,{icon:(0,y.jsx)(d.A,{}),onClick:()=>(e=>{a((0,m.X4)({url:`order/details/${e.id}`,id:"order_details",name:_("order.details")})),k(`/order/details/${e.id}`)})(l)}),(0,y.jsx)(j.A,{icon:(0,y.jsx)(c.A,{}),onClick:()=>{S([l.id]),q(!0),N(!0)}})]})}]);(0,s.useEffect)((()=>{const e={user_id:null===l||void 0===l?void 0:l.uuid,page:1,perPage:10};a((0,p.DX)(e))}),[]);const R={selectedRowKeys:I,onChange:e=>{S(e)}};return(0,y.jsx)("div",{children:(0,y.jsxs)(i.A,{title:_("orders"),extra:(0,y.jsxs)(t.A,{wrap:!0,children:[(0,y.jsx)(j.A,{type:"danger",onClick:()=>{null===I||0===I.length?x.oR.warning(_("select.the.product")):(q(!0),N(!1))},children:_("delete.all")}),(0,y.jsx)(w.A,{setColumns:O,columns:H})]}),children:[(0,y.jsx)(r.A,{scroll:{x:!0},rowSelection:R,columns:null===H||void 0===H?void 0:H.filter((e=>e.is_show)),dataSource:M,loading:$,pagination:{pageSize:F.perPage,page:F.page,total:V.total,defaultCurrent:F.page},rowKey:e=>e.id,onChange:function(e,l,s){const{pageSize:t,current:n}=e,{field:i,order:r}=s,o=(0,A.A)(r);a((0,m.Ok)({activeMenu:E,data:{...E.data,perPage:t,page:n,column:i,sort:o}}))}}),(0,y.jsx)(b.A,{click:()=>{z(!0);const e={...Object.assign({},...I.map(((e,l)=>({[`ids[${l}]`]:e}))))};f.A.delete(e).then((()=>{x.oR.success(_("successfully.deleted")),q(!1),a((0,p.DX)()),N(null)})).finally((()=>z(!1)))},text:_(C?"delete":"all.delete"),loading:P,setText:S})]})})}}}]);