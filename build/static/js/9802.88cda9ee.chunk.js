"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[9802],{8168:(e,t,a)=>{function n(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}a.d(t,{A:()=>n})},8297:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(9950),l=a(55902),s=a(41397),i=a(60767),o=a(44414);function r(e){let{handleChange:t,defaultValue:a,resetSearch:r,...d}=e;const[u,c]=(0,n.useState)(a),h=(0,n.useMemo)((()=>(0,s.debounce)((e=>{t(e)}),800)),[t]);return(0,n.useEffect)((()=>{c(a)}),[r,a]),(0,o.jsx)(l.A,{value:u,onChange:e=>{c(e.target.value),h(e.target.value)},prefix:(0,o.jsx)(i.A,{}),...d})}},9802:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var n=a(9950),l=a(12916),s=a(23263),i=a(80737),o=a(48538),r=a(12203),d=a(91854),u=a(74623),c=a(70030),h=a(8168),v=a(88986),m=a(73562),p=a(8297),x=a(28645),f=a(53774),A=a(59051),g=a.n(A),j=a(3969),y=a(32645),b=a(8724),w=a(53271),C=a(47992),_=a(12449),k=a(44414);function S(e){let{visible:t,onCancel:a,onSuccess:l}=e;const{t:s}=(0,c.B)(),[i]=j.A.useForm(),[r,d]=(0,n.useState)(!1);return(0,k.jsx)(y.A,{visible:t,title:s("top_up_wallet"),onCancel:a,footer:null,destroyOnClose:!0,children:(0,k.jsxs)(j.A,{form:i,layout:"vertical",children:[(0,k.jsx)(j.A.Item,{name:"user_uuid",label:s("user"),rules:[{required:!0,message:s("required")}],children:(0,k.jsx)(C.G,{fetchOptions:async function(e){const t={search:e,perPage:10};return(await w.A.search(t)).data.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.uuid})))},placeholder:s("select.user"),style:{width:"100%"}})}),(0,k.jsx)(j.A.Item,{name:"amount",label:s("amount"),rules:[{required:!0,message:s("required")}],children:(0,k.jsx)(b.A,{style:{width:"100%"},min:0})}),(0,k.jsx)(j.A.Item,{children:(0,k.jsx)(o.A,{type:"primary",loading:r,onClick:()=>{i.validateFields().then((async e=>{const t="object"===typeof e.user_uuid?e.user_uuid.value:e.user_uuid;d(!0);try{await w.A.topupWallet(t,{price:e.amount}),_.oR.success(s("success")),l&&l(),a()}catch(n){}finally{d(!1)}}))},block:!0,children:s("submit")})})]})})}function z(){var e,t;const{t:a}=(0,c.B)(),A=(0,d.wA)(),{activeMenu:j}=(0,d.d4)((e=>e.menu),d.bN),{histories:y,loading:b,meta:w,params:C}=(0,d.d4)((e=>e.walletAdmin),d.bN),{defaultCurrency:_}=(0,d.d4)((e=>e.currency),d.bN),[z,I]=(0,n.useState)([{title:a("id"),dataIndex:"id",key:"id",sorter:!0,is_show:!0},{title:a("created.by"),dataIndex:"author",key:"author",is_show:!0,render:e=>(0,k.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:a("user"),dataIndex:"user",key:"user",is_show:!0,render:e=>(0,k.jsxs)("div",{children:[null===e||void 0===e?void 0:e.firstname," ",(null===e||void 0===e?void 0:e.lastname)||""]})},{title:a("type"),dataIndex:"type",key:"type",is_show:!0,render:e=>(0,k.jsx)(l.A,{color:"blue",children:e})},{title:a("price"),dataIndex:"price",key:"price",is_show:!0,render:e=>(0,f.A)(e,null===_||void 0===_?void 0:_.symbol,null===_||void 0===_?void 0:_.position)},{title:a("note"),dataIndex:"note",key:"note",is_show:!0},{title:a("status"),dataIndex:"status",key:"status",is_show:!0,render:e=>(0,k.jsx)(l.A,{color:"paid"===e?"green":"pending"===e?"orange":"red",children:e})},{title:a("created.at"),dataIndex:"created_at",key:"created_at",is_show:!0,render:e=>g()(e).format("YYYY-MM-DD HH:mm")}]),[V,H]=(0,n.useState)(!1);(0,n.useEffect)((()=>{j.refetch&&(A((0,m.Wl)()),A((0,u.km)(j)))}),[j.refetch]),(0,v.A)((()=>{const e=j.data,t={sort:null===e||void 0===e?void 0:e.sort,column:null===e||void 0===e?void 0:e.column,perPage:null===e||void 0===e?void 0:e.perPage,page:null===e||void 0===e?void 0:e.page,search:null===e||void 0===e?void 0:e.search};A((0,m.Wl)(t))}),[j.data]);return(0,k.jsxs)(s.A,{title:a("wallet_histories"),extra:(0,k.jsxs)(i.A,{wrap:!0,children:[(0,k.jsx)(o.A,{type:"primary",onClick:()=>H(!0),children:a("top_up_wallet")}),(0,k.jsx)(p.A,{placeholder:a("search"),handleChange:e=>((e,t)=>{const a=j.data;A((0,u.Ok)({activeMenu:j,data:{...a,[t]:e}}))})(e,"search"),defaultValue:null===(e=j.data)||void 0===e?void 0:e.search,resetSearch:!(null!==(t=j.data)&&void 0!==t&&t.search)}),(0,k.jsx)(x.A,{columns:z,setColumns:I})]}),children:[(0,k.jsx)(r.A,{scroll:{x:!0},columns:null===z||void 0===z?void 0:z.filter((e=>e.is_show)),dataSource:y,loading:b,pagination:{pageSize:C.perPage,page:C.page,total:null===w||void 0===w?void 0:w.total,defaultCurrent:C.page},rowKey:e=>e.id,onChange:function(e,t,a){const{pageSize:n,current:l}=e,{field:s,order:i}=a,o=(0,h.A)(i);A((0,u.Ok)({activeMenu:j,data:{perPage:n,page:l,column:s,sort:o}}))}}),V&&(0,k.jsx)(S,{visible:V,onCancel:()=>H(!1),onSuccess:()=>A((0,m.Wl)())})]})}},28645:(e,t,a)=>{a.d(t,{A:()=>p});var n=a(9950),l=a(66362),s=a(69216),i=a(80737),o=a(25933),r=a(57811),d=a(81541),u=a(48538),c=a(89323),h=a(70030),v=a(44414);const{Text:m}=l.A,p=e=>{let{columns:t=[],setColumns:a,style:l,size:p="",iconOnly:x}=e;const{t:f}=(0,h.B)(),[A,g]=(0,n.useState)(!1),j=(0,v.jsx)(s.A,{children:null===t||void 0===t?void 0:t.map(((e,n)=>(0,v.jsx)(s.A.Item,{children:(0,v.jsxs)(i.A,{className:"d-flex justify-content-between",children:[(0,v.jsx)(m,{children:e.title}),(0,v.jsx)(o.A,{defaultChecked:!0,onClick:()=>function(e){const n=null===t||void 0===t?void 0:t.map((t=>(t.dataIndex===e.dataIndex&&(t.is_show=!(null!==t&&void 0!==t&&t.is_show)),t)));a(n)}(e),disabled:1===n})]})},e+n)))});return(0,v.jsx)(r.A,{overlay:j,trigger:["click"],onVisibleChange:e=>{g(e)},visible:A,children:(0,v.jsx)(d.A,{title:f("change.columns"),children:(0,v.jsx)(u.A,{style:{...l},size:p,icon:(0,v.jsx)(c.A,{}),children:x?null:f("Columns")})})})}},47992:(e,t,a)=>{a.d(t,{G:()=>d});var n=a(9950),l=a(95491),s=a.n(l),i=a(99674),o=a(90650),r=a(44414);const d=e=>{let{fetchOptions:t,debounceTimeout:a=400,onClear:l,...d}=e;const[u,c]=(0,n.useState)(!1),[h,v]=(0,n.useState)([]),m=(0,n.useMemo)((()=>s()((e=>{v([]),c(!0),t(e).then((e=>{v(e),c(!1)}))}),a)),[t,a]);return(0,r.jsx)(i.A,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:m,onClear:()=>{m(""),l&&l()},notFoundContent:u?(0,r.jsx)(o.A,{size:"small"}):"no results",...d,options:h,onFocus:()=>{m("")}})}},53774:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(83291);function l(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;const i=null===(e=n.M.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,o=Number(a).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=l||(null===i||void 0===i?void 0:i.symbol)||"$";return"after"===(s||(null===i||void 0===i?void 0:i.position)||"before")?`${o} ${r}`:`${r} ${o}`}},89323:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(89379),l=a(9950);const s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"};var i=a(25085),o=function(e,t){return l.createElement(i.A,(0,n.A)((0,n.A)({},e),{},{ref:t,icon:s}))};o.displayName="TableOutlined";const r=l.forwardRef(o)}}]);