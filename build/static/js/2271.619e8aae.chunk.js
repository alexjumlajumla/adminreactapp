"use strict";(self.webpackChunkjumlajumla_dashboard=self.webpackChunkjumlajumla_dashboard||[]).push([[2271],{17456:(e,l,t)=>{t.d(l,{A:()=>a});t(9950);const a=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},42271:(e,l,t)=>{t.r(l),t.d(l,{default:()=>M});var a=t(12916),n=t(23263),i=t(48538),d=t(66362),s=t(12203),r=t(53774),o=t(59051),c=t.n(o),u=t(9950),p=t(70030),m=t(91854),h=t(74623),v=t(53271),y=t(3969),b=t(32645),x=t(87094),j=t(41988),g=t(8724),A=t(53496),f=t(81446),w=t(12449),k=t(17456),S=t(22875),C=t(81608),N=t(38310),I=t(17491),$=t(23327),z=t(92140),F=t(44414);function _(e){var l,t,a;let{open:d,handleCancel:s,refetch:r}=e;const{t:o}=(0,p.B)(),c=(0,m.wA)(),{payments:h,loading:v}=(0,m.d4)((e=>e.payment),m.bN),{myShop:_}=(0,m.d4)((e=>e.myShop),m.bN),[M,Y]=(0,u.useState)(!1),[B,D]=(0,u.useState)({}),[q,E]=(0,u.useState)(null),[K,T]=(0,u.useState)(null),{payment_type:V}=(0,m.d4)((e=>e.globalSettings.settings),m.bN),[G]=y.A.useForm();(0,u.useEffect)((()=>{h.length||c((0,A.kK)()),async function(){await I.A.getById(_.id).then((e=>{let{data:l}=e;return E(l.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){I.A.getAll().then((e=>{let{data:l}=e;return T(l.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const R=e=>{switch(e){case"wallet":return(0,F.jsx)(N.c8K,{size:80});case"paypal":return(0,F.jsx)(S.SnG,{size:80});case"stripe":return(0,F.jsx)(C.kDV,{size:80});case"selcom":return(0,F.jsx)("img",{src:z,alt:"img",width:"80",height:"80"});case"razorpay":return(0,F.jsx)(C.NVb,{size:80});case"paystack":return(0,F.jsx)("img",{src:k.A,alt:"img",width:"80",height:"80"})}};return(0,F.jsx)(b.A,{visible:d,title:o("wallet.topup"),onCancel:s,footer:[(0,F.jsx)(i.A,{type:"primary",disabled:v,htmlType:"submit",form:"payment",loading:M,children:o("save")},"save-btn"),(0,F.jsx)(i.A,{type:"default",onClick:s,children:o("cancel")},"cancel-btn")],children:v?(0,F.jsx)(f.A,{}):(0,F.jsx)(y.A,{layout:"vertical",id:"payment",onFinish:e=>{B.value?(Y(!0),$.A.topUp({payment_type:B.label,price:e.price}).then((e=>{let{data:l}=e;G.resetFields(),D({}),s(),r(),window.open(l.data.url)})).finally((()=>Y(!1)))):w.oR.warning(o("please.select.payment.type"))},children:(0,F.jsxs)(x.A,{gutter:12,children:[(0,F.jsx)(j.A,{span:24,children:(0,F.jsx)(y.A.Item,{name:"price",label:o("price"),rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("should.be.greater.than.0")}],children:(0,F.jsx)(g.A,{className:"w-100"})})}),null===(l="admin"===V?K:q)||void 0===l||null===(t=l.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===t||null===(a=t.filter((e=>"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,l)=>(0,F.jsx)(j.A,{span:8,children:(0,F.jsxs)(n.A,{className:"payment-card "+((null===B||void 0===B?void 0:B.label)===e.label?"active":""),onClick:()=>{D(e)},children:[(0,F.jsx)("div",{className:"payment-icon",children:R(null===e||void 0===e?void 0:e.label)}),(0,F.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},l)))]})})})}const M=()=>{var e;const[l,t]=(0,u.useState)(null),{t:o}=(0,p.B)(),y=(0,m.wA)(),[b,x]=(0,u.useState)(!1),[j,g]=(0,u.useState)(!1),{activeMenu:A}=(0,m.d4)((e=>e.menu),m.bN),{defaultCurrency:f}=(0,m.d4)((e=>e.currency),m.bN),w=(0,u.useCallback)((()=>{x(!0),v.A.profileShow().then((e=>{t(e.data)})).finally((()=>{x(!1)}))}),[]);(0,u.useEffect)((()=>{null!==A&&void 0!==A&&A.refetch&&w(),y((0,h.km)(A))}),[null===A||void 0===A?void 0:A.refetch]);const k=[{title:o("created.at"),dataIndex:"created_at",render:e=>c()(e).format("YYYY-MM-DD hh:mm")},{title:o("status"),dataIndex:"status",render:e=>(0,F.jsx)("div",{children:"paid"===e?(0,F.jsx)(a.A,{color:"cyan",children:e}):(0,F.jsx)(a.A,{color:"blue",children:e})})},{title:o("type"),dataIndex:"type",render:e=>"topup"===e?(0,F.jsx)(a.A,{color:"cyan",children:e}):(0,F.jsx)(a.A,{color:"error",children:e})},{title:o("note"),dataIndex:"note"}];return(0,F.jsxs)(n.A,{title:o("user.wallet"),extra:b?null:(0,F.jsx)(i.A,{onClick:()=>g(!0),children:o("top.up")}),children:[null!==l&&void 0!==l&&l.wallet?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(d.A.Title,{children:(0,r.A)(null===l||void 0===l?void 0:l.wallet.price,null===f||void 0===f?void 0:f.symbol,null===f||void 0===f?void 0:f.position)}),(0,F.jsx)(s.A,{loading:b,dataSource:null===l||void 0===l||null===(e=l.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,F.jsx)(s.A,{dataSource:[],columns:k,loading:b}),(0,F.jsx)(_,{refetch:w,open:j,handleCancel:()=>g(!1)})]})}},53774:(e,l,t)=>{t.d(l,{A:()=>n});var a=t(83291);function n(){var e,l;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const d=null===(e=a.M.getState())||void 0===e||null===(l=e.currency)||void 0===l?void 0:l.defaultCurrency,s=Number(t).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=n||(null===d||void 0===d?void 0:d.symbol)||"$";return"after"===(i||(null===d||void 0===d?void 0:d.position)||"before")?`${s} ${r}`:`${r} ${s}`}},92140:(e,l,t)=>{e.exports=t.p+"static/media/selcom.3c3823b8e900c4b4ca6a.png"}}]);