"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[229],{89281:(e,t,s)=>{s.d(t,{h:()=>u});var a=s(47313),r=s(12279),n=s.n(r),l=s(74294),i=s(72652),d=s(46417);const u=e=>{let{fetchOptions:t,debounceTimeout:s=400,onClear:r,...u}=e;const[c,o]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),p=(0,a.useMemo)((()=>n()((e=>{h([]),o(!0),t(e).then((e=>{h(e),o(!1)}))}),s)),[t,s]);return(0,d.jsx)(l.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),r&&r()},notFoundContent:c?(0,d.jsx)(i.Z,{size:"small"}):"no results",...u,options:m,onFocus:()=>{p("")}})}},229:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(47313),r=s(97890),n=s(23560),l=s(10976),i=s(77181),d=s(70816),u=s.n(d),c=s(2717),o=s(90954),m=s(57409),h=s(69660),p=s(24511),x=s(4191),f=s(46417);function v(){const{t:e}=(0,p.$)(),{activeMenu:t}=(0,c.v9)((e=>e.menu),c.wU),s=(0,c.I0)(),[d]=l.Z.useForm(),v=(0,r.s0)();(0,a.useEffect)((()=>()=>{const e=d.getFieldsValue(!0),a=JSON.stringify(e.start),r=JSON.stringify(e.end),n={...e,start:a,end:r};s((0,o.nc)({activeMenu:t,data:n}))}),[]);return(0,f.jsx)(i.Z,{title:e("add.discount"),className:"h-100",children:(0,f.jsx)(x.Z,{form:d,handleSubmit:(a,r)=>{var l;if(u()(a.start).format("YYYY-MM-DD")>u()(a.end).format("YYYY-MM-DD"))return n.Am.error(e("start.date.must.be.before.end.date"));const i={price:a.price,type:a.type,products:a.products.map((e=>e.value)),start:a.start?u()(a.start).format("YYYY-MM-DD"):void 0,end:a.end?u()(a.end).format("YYYY-MM-DD"):void 0,images:[null===(l=r[0])||void 0===l?void 0:l.name]},d="seller/discounts";return m.Z.create(i).then((()=>{n.Am.success(e("successfully.created")),s((()=>{s((0,o.ph)({...t,nextUrl:d})),s((0,h.k)({}))})),v(`/${d}`)}))}})})}},4191:(e,t,s)=>{s.d(t,{Z:()=>Z});var a=s(47313),r=s(10976),n=s(68197),l=s(59624),i=s(74294),d=s(16124),u=s(99096),c=s(59491),o=s(70816),m=s.n(o),h=s(89281),p=s(75868),x=s(24511),f=s(2717),v=s(18333),j=s(46417);function Z(e){var t,s;let{form:o,handleSubmit:Z}=e;const{t:b}=(0,x.$)(),{activeMenu:g}=(0,f.v9)((e=>e.menu),f.wU),{myShop:Y}=(0,f.v9)((e=>e.myShop),f.wU),[y,M]=(0,a.useState)(!1),[D,q]=(0,a.useState)(null!==(t=g.data)&&void 0!==t&&t.image?null===(s=g.data)||void 0===s?void 0:s.image:[]);return(0,j.jsxs)(r.Z,{name:"discount-form",layout:"vertical",onFinish:e=>{M(!0),Z(e,D).finally((()=>M(!1)))},form:o,initialValues:{...(()=>{var e;const t=g.data;if(null===(e=g.data)||void 0===e||!e.start)return t;const s=g.data.start,a=g.data.end;return{...t,start:m()(s,"YYYY-MM-DD"),end:m()(a,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,j.jsxs)(n.Z,{gutter:12,children:[(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:b("type"),name:"type",rules:[{required:!0,message:b("required")}],children:(0,j.jsxs)(i.Z,{children:[(0,j.jsx)(i.Z.Option,{value:"fix",children:b("fix")}),(0,j.jsx)(i.Z.Option,{value:"percent",children:b("percent")})]})})}),(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:b("price"),name:"price",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(d.Z,{min:0,className:"w-100"})})}),(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:b("start.date"),name:"start",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(u.Z,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,j.jsx)(l.Z,{span:12,children:(0,j.jsx)(r.Z.Item,{label:b("end.date"),name:"end",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(u.Z,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,j.jsx)(l.Z,{span:24,children:(0,j.jsx)(r.Z.Item,{label:b("products"),name:"products",rules:[{required:!0,message:b("required")}],children:(0,j.jsx)(h.h,{fetchOptions:async function(e){const t={search:e,shop_id:Y.id,status:"published",active:1,rest:1};return v.Z.getAll(t).then((e=>{let{data:t}=e;return t.map((e=>{var t;return{label:null===(t=e.translation)||void 0===t?void 0:t.title,value:e.id}}))}))},mode:"multiple"})})}),(0,j.jsx)(l.Z,{span:24,children:(0,j.jsx)(r.Z.Item,{label:b("image"),name:"images",rules:[{required:!D.length,message:b("required")}],children:(0,j.jsx)(p.Z,{type:"discounts",imageList:D,setImageList:q,form:o,multiple:!1,name:"image"})})})]}),(0,j.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,j.jsx)("div",{className:"pb-5",children:(0,j.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:y,children:b("submit")})})})]})}}}]);