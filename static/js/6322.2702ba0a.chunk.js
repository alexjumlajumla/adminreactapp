"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[6322],{73431:(e,l,n)=>{n.d(l,{Z:()=>r});var t=n(47313),i=n(39180),a=n(2717),o=n(28830),d=n(60535),s=n(46417);const r=()=>{const e=(0,a.I0)(),{languages:l,defaultLang:n}=(0,a.v9)((e=>e.formLang),a.wU);(0,t.useEffect)((()=>{d.Z.getAllActive().then((l=>{let{data:n}=l;e((0,o.dc)(n)),e((0,o.mh)(n.find((e=>!(null===e||void 0===e||!e.default))).locale))}))}),[]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(i.ZP.Group,{value:n,onChange:l=>{let{target:{value:n}}=l;e((0,o.mh)(n))},className:"float-right",buttonStyle:"solid",children:null===l||void 0===l?void 0:l.map((e=>(0,s.jsx)(i.ZP.Button,{value:e.locale,children:e.title},e.id)))})})}},13622:(e,l,n)=>{n.d(l,{R:()=>r});var t=n(47313),i=n(12279),a=n.n(i),o=n(74294),d=n(72652),s=n(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:n=400,refetch:i=!1,...r}=e;const[u,c]=(0,t.useState)(!1),[v,m]=(0,t.useState)([]),p=(0,t.useMemo)((()=>a()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),n)),[l,n]);return(0,s.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>p(""),filterOption:!1,onSearch:p,notFoundContent:u?(0,s.jsx)(d.Z,{size:"small"}):"no results",...r,options:v,onFocus:()=>{p("")}})}},89281:(e,l,n)=>{n.d(l,{h:()=>r});var t=n(47313),i=n(12279),a=n.n(i),o=n(74294),d=n(72652),s=n(46417);const r=e=>{let{fetchOptions:l,debounceTimeout:n=400,onClear:i,...r}=e;const[u,c]=(0,t.useState)(!1),[v,m]=(0,t.useState)([]),p=(0,t.useMemo)((()=>a()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),n)),[l,n]);return(0,s.jsx)(o.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),i&&i()},notFoundContent:u?(0,s.jsx)(d.Z,{size:"small"}):"no results",...r,options:v,onFocus:()=>{p("")}})}},62019:(e,l,n)=>{function t(e,l){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["title"];if(null===l||void 0===l||!l.translations)return{};const{translations:t}=l,i=(e,l)=>{const n=null===t||void 0===t?void 0:t.find((l=>(null===l||void 0===l?void 0:l.locale)===(null===e||void 0===e?void 0:e.locale)));return n||{[l]:""}},a=e.flatMap((e=>n.flatMap((l=>({[`${l}[${null===e||void 0===e?void 0:e.locale}]`]:i(e,l)[l]})))));return Object.assign({},...a)}n.d(l,{Z:()=>t})},75336:(e,l,n)=>{function t(e,l){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"title";const t=null===e||void 0===e?void 0:e.map((e=>({[null===e||void 0===e?void 0:e.locale]:l[`${n}[${null===e||void 0===e?void 0:e.locale}]`]?l[`${n}[${null===e||void 0===e?void 0:e.locale}]`]:void 0})));return Object.assign({},...t)}n.d(l,{Z:()=>t})},26322:(e,l,n)=>{n.r(l),n.d(l,{default:()=>j});var t=n(47313),i=n(10976),a=n(77181),o=n(72652),d=n(97890),s=n(73431),r=n(2717),u=n(90954),c=n(30763),v=n(24511),m=n(42472),p=n(80314),h=n(62019),g=n(8550),Z=n(59308),x=n(66733),f=n(46417);const j=()=>{const{t:e}=(0,v.$)(),l=(0,r.I0)(),[n]=i.Z.useForm(),{state:j}=(0,d.TH)(),{activeMenu:y}=(0,r.v9)((e=>e.menu),r.wU),{languages:b}=(0,r.v9)((e=>e.formLang),r.wU),{params:I}=(0,r.v9)((e=>e.category),r.wU),[w,_]=(0,t.useState)(null),[S,k]=(0,t.useState)(!1),{uuid:q}=(0,d.UO)(),C={...I,type:null!==j&&void 0!==j&&j.parentId?"sub_main":"main",parent_id:null===j||void 0===j?void 0:j.parentId};(0,t.useEffect)((()=>()=>{const e=n.getFieldsValue(!0);(0,r.dC)((()=>{l((0,u.nc)({activeMenu:y,data:e})),l((0,m.pE)(C))}))}),[]),(0,p.Z)((()=>{y.refetch&&($(q),l((0,u.A_)(y)))}),[y.refetch]),(0,t.useEffect)((()=>{$(q),l((0,u.A_)(y))}),[q,null===j||void 0===j?void 0:j.parentId]);const $=e=>{e&&(k(!0),c.Z.getById(e).then((e=>{var t,i,a;let o=null===e||void 0===e?void 0:e.data;console.log("category",o);const d={...o,...(0,h.Z)(b,o,["title","description"]),image:[(0,g.Z)(o.img)],keywords:null===o||void 0===o||null===(t=o.keywords)||void 0===t?void 0:t.split(","),parent_id:{label:null===(i=o.parent)||void 0===i||null===(a=i.translation)||void 0===a?void 0:a.title,value:o.parent_id,key:o.parent_id}};_(o.id),n.setFieldsValue(d),l((0,u.nc)({activeMenu:y,data:d}))})).finally((()=>{k(!1),l((0,u.A_)(y))})))};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(a.Z,{title:null!==j&&void 0!==j&&j.parentId?e("edit.sub.category"):e("edit.category"),extra:(0,f.jsx)(s.Z,{}),children:S?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",children:(0,f.jsx)(o.Z,{size:"large",className:"mt-5 pt-5"})}):(0,f.jsx)(x.Z,{form:n,handleSubmit:e=>c.Z.update(q,e)})}),!!w&&!(null!==j&&void 0!==j&&j.parentId)&&(0,f.jsx)(Z.Z,{type:"sub_main",parentId:w})]})}},66733:(e,l,n)=>{n.d(l,{Z:()=>w});var t=n(47313),i=n(10976),a=n(68197),o=n(59624),d=n(66672),s=n(74294),r=n(16124),u=n(86345),c=n(59491),v=n(52421),m=n(13622),p=n(75868),h=n(24511),g=n(2717),Z=n(97890),x=n(30763),f=(n(89281),n(23560)),j=n(90954),y=n(42472),b=n(75336),I=n(46417);function w(e){var l,n;let{form:w,handleSubmit:_,error:S}=e;const{t:k}=(0,h.$)(),q=(0,g.I0)(),C=(0,Z.s0)(),{state:$}=(0,Z.TH)(),{activeMenu:F}=(0,g.v9)((e=>e.menu),g.wU),{defaultLang:U,languages:M}=(0,g.v9)((e=>e.formLang),g.wU),{params:O}=(0,g.v9)((e=>e.category),g.wU),[L,A]=(0,t.useState)(!1),[N,E]=(0,t.useState)(null!==(l=F.data)&&void 0!==l&&l.image?null===(n=F.data)||void 0===n?void 0:n.image:[]),P={...O,type:null!==$&&void 0!==$&&$.parentId?"sub_main":"main",parent_id:null===$||void 0===$?void 0:$.parentId};return(0,I.jsxs)(i.Z,{name:"basic",layout:"vertical",onFinish:e=>{var l,n;const t={...e,title:(0,b.Z)(M,e),description:(0,b.Z)(M,e,"description"),type:null!==$&&void 0!==$&&$.parentId?"sub_main":"main",active:Number(null===e||void 0===e?void 0:e.active),keywords:null===e||void 0===e||null===(l=e.keywords)||void 0===l?void 0:l.join(","),parent_id:(null===$||void 0===$?void 0:$.parentId)||(null===e||void 0===e||null===(n=e.parent_id)||void 0===n?void 0:n.value),images:null===N||void 0===N?void 0:N.map((e=>null===e||void 0===e?void 0:e.name))};A(!0),_(t).then((()=>{const e=null!==$&&void 0!==$&&$.parentId?`category/${null===$||void 0===$?void 0:$.parentUuid}`:"catalog/categories";f.Am.success(k("successfully.updated")),(0,g.dC)((()=>{q((0,j.ph)({...F,nextUrl:e})),q((0,y.pE)(P))})),C(`/${e}`)})).finally((()=>{A(!1)}))},initialValues:{active:!0,...F.data},form:w,children:[(0,I.jsxs)(a.Z,{gutter:12,children:[(0,I.jsx)(o.Z,{span:12,children:M.map((e=>(0,I.jsx)(i.Z.Item,{label:k("name"),name:`title[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==U,rules:[{required:(null===e||void 0===e?void 0:e.locale)===U,message:k("required")},{type:"string",min:2,max:200,message:k("min.2.max.200.chars")}],children:(0,I.jsx)(d.Z,{})},null===e||void 0===e?void 0:e.locale)))}),(0,I.jsx)(o.Z,{span:12,children:M.map((e=>(0,I.jsx)(i.Z.Item,{label:k("description"),name:`description[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==U,rules:[{required:(null===e||void 0===e?void 0:e.locale)===U,message:k("required")},{type:"string",min:2,max:200,message:k("min.2.max.200.chars")}],children:(0,I.jsx)(v.Z,{rows:2})},null===e||void 0===e?void 0:e.locale)))}),(0,I.jsx)(o.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:k("keywords"),name:"keywords",rules:[{required:!0,message:k("required")}],children:(0,I.jsx)(s.Z,{mode:"tags",style:{width:"100%"}})})}),!(null!==$&&void 0!==$&&$.parentId)&&(0,I.jsx)(o.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{label:k("parent.category"),name:"parent_id",rules:[{required:!0,message:k("required")}],children:(0,I.jsx)(m.R,{refetch:!0,fetchOptions:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const l={perPage:100,type:null!==$&&void 0!==$&&$.parentId?"main":"sub_shop",active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return x.Z.selectPaginate(l).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))}})})}),(0,I.jsx)(o.Z,{span:12,children:(0,I.jsx)(i.Z.Item,{name:"input",label:k("position"),rules:[{required:!0,message:k("required")}],children:(0,I.jsx)(r.Z,{min:0,parser:e=>parseInt(e,10),max:32767,className:"w-100"})})}),(0,I.jsx)(o.Z,{span:4,children:(0,I.jsx)(i.Z.Item,{label:k("image"),name:"images",rules:[{required:!(null!==N&&void 0!==N&&N.length),message:k("required")}],children:(0,I.jsx)(p.Z,{type:"categories",imageList:N,setImageList:E,form:w,multiple:!1})})}),(0,I.jsx)(o.Z,{span:2,children:(0,I.jsx)(i.Z.Item,{label:k("active"),name:"active",valuePropName:"checked",children:(0,I.jsx)(u.Z,{})})})]}),(0,I.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:L,children:k("submit")})]})}}}]);