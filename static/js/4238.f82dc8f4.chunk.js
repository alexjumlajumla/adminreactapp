(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[4238],{49873:(e,l,t)=>{"use strict";t.d(l,{R:()=>a});const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let a=0;a<e;a++){t+=l[Math.floor(Math.random()*l.length)]}return t}},33834:(e,l,t)=>{"use strict";t.d(l,{K:()=>s});var a=t(97890),i=t(74776),d=t.n(i);const s=()=>{const e=(0,a.s0)(),l=(0,a.TH)(),t=d().parse(l.search,{ignoreQueryPrefix:!0});return{values:t,set:(l,a)=>e({search:d().stringify({...t,[l]:a})}),reset:l=>{const a={...t};a[l]&&delete a[l],e({search:d().stringify({...a})})},clear:()=>e({search:d().stringify({})}),merge:l=>e({search:d().stringify({...t,...l})}),get:e=>t[e],setMultiple:l=>{const a={...t,...l};e({search:d().stringify(a)})},resetMultiple:l=>{const a={...t};l.forEach((e=>{a[e]&&delete a[e]})),e({search:d().stringify(a)})}}}},71027:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>R});var a=t(47313),i=t(83999),d=t(77181),s=t(72652),n=t(73431),o=t(97890),u=t(2717),r=t(90954),v=t(24511),c=t(33834),m=t(14349),x=t(96077),h=t(97307),p=t(17231),k=t(78873),j=t(10976),y=t(46155),g=t(68197),Z=t(59624),f=t(66672),b=t(59491),q=t(16124),_=t(74294),w=t(45705),S=t(85104),F=t(47515),I=t(17101),$=t(89281),N=t(33724),V=t(37630),C=t(46417);const M=e=>{var l;let{prev:t,next:i,isRequest:s}=e;const{t:n}=(0,v.$)(),[c]=j.Z.useForm(),{uuid:m}=(0,o.UO)(),{activeMenu:x}=(0,u.v9)((e=>e.menu),u.wU),[h,p]=(0,a.useState)(null),[k,M]=(0,a.useState)(null),[O,W]=(0,a.useState)([]),R=(0,u.I0)(),E=(0,o.TH)(),{defaultLang:U}=(0,u.v9)((e=>e.formLang),u.wU),{defaultCurrency:z}=(0,u.v9)((e=>e.currency),u.wU);const A=async e=>{var l;const t={search:e,addon:1,shop_id:null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l.shop_id,"statuses[0]":"published","statuses[1]":"pending",active:1},a=await I.Z.getAll(t).then((e=>e.data.map((e=>{var l;return{label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,value:null===e||void 0===e?void 0:e.id}}))))||[];return[{label:n("all.addons"),value:"all",key:"all"},...a]};(0,a.useEffect)((()=>{var e;if(s)if(null!==(e=E.state)&&void 0!==e&&e.generate){var l,t,a,i,d;const e=(0,N.Z)(null===x||void 0===x||null===(l=x.data.extras)||void 0===l?void 0:l.map((e=>e.values||[]))),s=e.map((e=>{var l,t;if(e.every((e=>"undefined"!==typeof e.stock_id))){var a,i,d;const l=null===(a=x.data)||void 0===a||null===(i=a.actualStocks)||void 0===i?void 0:i.find((l=>l.extras.every((l=>e.some((e=>e.value===l.id)))))),t=[];return null===l||void 0===l||null===(d=l.addons)||void 0===d||d.forEach((e=>{var l,a,i;e.product&&t.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,stock_id:null===l||void 0===l?void 0:l.id,tax:(null===x||void 0===x?void 0:x.data.tax)||0,addons:t,...Object.assign({},...e.map(((e,l)=>({[`extras[${l}]`]:{label:e.label,value:e.value,group:x.data.extras[l].label}}))))}}return{price:0,quantity:0,tax:(null===(l=x.data)||void 0===l?void 0:l.tax)||0,sku:null===x||void 0===x||null===(t=x.data)||void 0===t?void 0:t.sku,addons:[],...Object.assign({},...e.map(((e,l)=>({[`extras[${l}]`]:{label:e.label,value:e.value}}))))}}));let v=[];if(0===e.length&&0!==(null===(t=x.data)||void 0===t||null===(a=t.actualStocks)||void 0===a?void 0:a.length)){var n,o,u;const e=null===(n=x.data.actualStocks)||void 0===n?void 0:n.at(0),l=[];null===e||void 0===e||null===(o=e.addons)||void 0===o||o.forEach((e=>{var t,a,i;e.product&&l.push({label:(null===e||void 0===e||null===(t=e.product)||void 0===t||null===(a=t.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),v=[{price:(null===e||void 0===e?void 0:e.price)||0,quantity:(null===e||void 0===e?void 0:e.quantity)||0,sku:null===e||void 0===e?void 0:e.sku,tax:(null===(u=x.data)||void 0===u?void 0:u.tax)||0,addons:e?l:[]}]}var r;if(0===e.length&&0===(null===x||void 0===x||null===(i=x.data)||void 0===i||null===(d=i.actualStocks)||void 0===d?void 0:d.length))v=[{price:void 0,quantity:0,sku:null===x||void 0===x?void 0:x.data.sku,tax:(null===(r=x.data)||void 0===r?void 0:r.tax)||0,addons:[]}];const m=v.concat(s);W(x.data.actualStocks.map((e=>e.id))),c.setFieldsValue({stocks:m})}else{var v,h;const e=null===(v=x.data.stocks)||void 0===v?void 0:v.map((e=>{var l;return{price:e.price,quantity:e.quantity,tax:x.data.tax,stock_id:e.stock_id,sku:e.sku,...Object.assign({},...null===(l=e.ids)||void 0===l?void 0:l.map(((e,l)=>({[`extras[${l}]`]:{label:e.label,value:e.value,group:e.group}})))),addons:e.addons}}));W((null===(h=x.data)||void 0===h?void 0:h.delete_ids)||[]),c.setFieldsValue({stocks:e})}else!function(e){M(!0),I.Z.getById(e).then((e=>{var l,t,a;const i=(0,N.Z)(null===x||void 0===x||null===(l=x.data.extras)||void 0===l?void 0:l.map((e=>e.values||[]))),d=i.map(((l,t)=>{var a,i;if(l.every((e=>"undefined"!==typeof e.stock_id))){var d;const t=e.data.stocks.find((e=>e.extras.every((e=>l.some((l=>l.value===e.id)))))),a=[];return null===t||void 0===t||null===(d=t.addons)||void 0===d||d.forEach((e=>{var l,t,i;e.product&&a.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(t=l.translation)||void 0===t?void 0:t.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),{price:(null===t||void 0===t?void 0:t.price)||0,quantity:(null===t||void 0===t?void 0:t.quantity)||0,sku:null===t||void 0===t?void 0:t.sku,stock_id:null===t||void 0===t?void 0:t.id,tax:(null===x||void 0===x?void 0:x.data.tax)||0,addons:a,...Object.assign({},...l.map(((e,l)=>({[`extras[${l}]`]:{label:e.label,value:e.value}}))))}}return{price:0,quantity:0,sku:null===x||void 0===x||null===(a=x.data)||void 0===a?void 0:a.sku,tax:(null===(i=x.data)||void 0===i?void 0:i.tax)||0,addons:[],...Object.assign({},...l.map(((e,l)=>({[`extras[${l}]`]:{label:e.label,value:e.value}}))))}}));let s=[];if(0===i.length&&0!==(null===(t=e.data.stocks)||void 0===t?void 0:t.length)){var n,o,u;const l=null===(n=e.data.stocks)||void 0===n?void 0:n.at(0),t=[];null===l||void 0===l||null===(o=l.addons)||void 0===o||o.forEach((e=>{var l,a,i;e.product&&t.push({label:(null===e||void 0===e||null===(l=e.product)||void 0===l||null===(a=l.translation)||void 0===a?void 0:a.title)||(null===e||void 0===e?void 0:e.label),value:(null===e||void 0===e||null===(i=e.product)||void 0===i?void 0:i.id)||(null===e||void 0===e?void 0:e.value)})})),s=[{price:(null===l||void 0===l?void 0:l.price)||0,quantity:(null===l||void 0===l?void 0:l.quantity)||0,sku:null===l||void 0===l?void 0:l.sku,tax:(null===(u=x.data)||void 0===u?void 0:u.tax)||0,addons:l?t:[]}]}var r,v;0===i.length&&0===(null===(a=e.data.stocks)||void 0===a?void 0:a.length)&&(s=[{price:void 0,quantity:0,sku:null===x||void 0===x||null===(r=x.data)||void 0===r?void 0:r.sku,tax:(null===(v=x.data)||void 0===v?void 0:v.tax)||0,addons:[]}]);const m=s.concat(d);W(e.data.stocks.map((e=>e.id))),c.setFieldsValue({stocks:m})})).finally((()=>{M(!1)}))}(m)}),[s,null===(l=E.state)||void 0===l?void 0:l.generate]);const L=(e,l,t)=>e.map((e=>Object.assign(e,{[l]:t}))),T=(e,l)=>{const t=e?(0,V.Z)(6):l,{stocks:a}=c.getFieldsValue();c.setFieldsValue({"set.all.sku":t,stock:L(a,"sku",t)})};return(0,C.jsx)(d.Z,{title:`${n("product.name")}: ${x.data[`title[${U}]`]?`"${x.data[`title[${U}]`]}"`:""}`,loading:!!k,children:(0,C.jsxs)(j.Z,{layout:"vertical",form:c,onFinish:e=>{var l,t;const{stocks:a}=e,d=O.filter(((e,l)=>{var t;return!(null===(t=a[l])||void 0===t||!t.stock_id)&&!a.some((l=>(null===l||void 0===l?void 0:l.stock_id)===e))}));let n;const o=!(null===(l=x.data)||void 0===l||null===(t=l.extras)||void 0===t||!t.length);if(n=o?a.map(((e,l)=>{var t,a,i,d;return{price:e.price,quantity:e.quantity,sku:e.sku,ids:s?null===(t=x.data)||void 0===t?void 0:t.extras.map(((l,t)=>e[`extras[${t}]`])):null===(a=x.data)||void 0===a?void 0:a.extras.map(((l,t)=>e[`extras[${t}]`].value)),addons:e.addons?s?null===(i=e.addons)||void 0===i?void 0:i.map((e=>e)):null===(d=e.addons)||void 0===d?void 0:d.map((e=>e.value)):[],stock_id:e.stock_id}})):[{price:a[0].price,quantity:a[0].quantity,addons:a[0].addons?s?a[0].addons.map((e=>e)):a[0].addons.map((e=>e.value)):[],stock_id:a[0].stock_id,sku:a[0].sku,ids:[]}],s)return R((0,r.nc)({activeMenu:x,data:{...x.data,stocks:n,delete_ids:d}})),void i();p(!0),I.Z.stocks(m,{extras:n,delete_ids:d}).then((()=>{R((0,r.nc)({activeMenu:x,data:{...x.data,stocks:n,delete_ids:d}})),i()})).finally((()=>p(!1)))},children:[(0,C.jsx)(y.Z,{}),(0,C.jsx)("h2",{children:n("set.all.values")}),(0,C.jsxs)(g.Z,{gutter:12,align:"middle",children:[(0,C.jsx)(Z.Z,{span:5,style:{marginRight:"10px"},children:(0,C.jsx)(j.Z.Item,{label:n("sku"),name:"set.all.sku",children:(0,C.jsx)(f.Z,{className:"w-100",onChange:e=>T(!1,e.target.value)})})}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:" ",name:"sku",children:(0,C.jsx)(b.Z,{icon:(0,C.jsx)(S.Z,{}),onClick:()=>T(!0)})})}),(0,C.jsx)(Z.Z,{span:4,children:(0,C.jsx)(j.Z.Item,{label:n("price"),name:"set.all.price",rules:[{type:"number",min:0,message:n("must.be.positive.number")}],children:(0,C.jsx)(q.Z,{className:"w-100",onChange:function(e){const{stocks:l}=c.getFieldsValue();c.setFieldsValue({stocks:L(l,"price",e)})}})})}),(0,C.jsx)(Z.Z,{span:4,children:(0,C.jsx)(j.Z.Item,{label:n("quantity"),name:"set.all.quantity",rules:[{type:"number",min:0,message:n("must.be.positive.number")}],children:(0,C.jsx)(q.Z,{className:"w-100",onChange:function(e){const{stocks:l}=c.getFieldsValue();c.setFieldsValue({stocks:L(l,"quantity",e)})}})})}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:n("addons"),name:"addons",children:(0,C.jsx)($.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:A,allowClear:!0,onChange:function(e){const{stocks:l}=c.getFieldsValue();c.setFieldsValue({stocks:L(l,"addons",e)})}})})})]}),(0,C.jsx)(y.Z,{}),(0,C.jsx)("h2",{children:n("values")}),(0,C.jsx)(j.Z.List,{name:"stocks",children:(e,l)=>{let{add:t,remove:a}=l;return(0,C.jsx)("div",{children:e.map(((e,l)=>{var t,i,d,s;return(0,C.jsxs)(g.Z,{gutter:12,align:"middle",style:{flexWrap:"nowrap",overflowX:"auto"},hidden:!(null!==(t=x.data)&&void 0!==t&&null!==(i=t.extras)&&void 0!==i&&i.length)&&e.key,children:[null===(d=x.data)||void 0===d||null===(s=d.extras)||void 0===s?void 0:s.map(((e,t)=>(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:null===e||void 0===e?void 0:e.label,name:[l,`extras[${t}]`],rules:[{required:!0,message:n("required")}],children:(0,C.jsx)(_.Z,{disabled:!0,className:"w-100",style:{minWidth:200}})})},"extra"+e.value))),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:n("addons"),name:[l,"addons"],rules:[{required:!1,message:n("required")}],children:(0,C.jsx)($.h,{mode:"multiple",style:{minWidth:"300px"},fetchOptions:A,allowClear:!0})})}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:n("sku"),name:[l,"sku"],children:(0,C.jsx)(f.Z,{className:"w-100",style:{minWidth:200}})})}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:n("quantity"),name:[l,"quantity"],rules:[{required:!0,message:n("required")}],children:(0,C.jsx)(q.Z,{min:0,className:"w-100",style:{minWidth:200}})})}),(0,C.jsxs)(Z.Z,{children:[(0,C.jsx)(j.Z.Item,{label:`${n("price")} (${null===z||void 0===z?void 0:z.symbol})`,name:[l,"price"],rules:[{required:!0,message:n("requried")}],children:(0,C.jsx)(q.Z,{min:0,className:"w-100",style:{minWidth:200}})}),(0,C.jsx)(j.Z.Item,{hidden:!0,label:n("id"),name:[l,"stock_id"],children:(0,C.jsx)(q.Z,{min:1,className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})]}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{label:n("tax"),name:[l,"tax"],children:(0,C.jsx)(q.Z,{className:"w-100",disabled:!0,style:{minWidth:200},addonAfter:"%"})})}),(0,C.jsx)(Z.Z,{children:(0,C.jsx)(j.Z.Item,{noStyle:!0,shouldUpdate:(l,t)=>{var a,i;return(null===(a=l.stocks[e.name])||void 0===a?void 0:a.price)!==(null===(i=t.stocks[e.name])||void 0===i?void 0:i.price)},children:l=>{let{getFieldValue:t}=l;const a=t(["stocks",e.name,"tax"])||0,i=t(["stocks",e.name,"price"]),d=0===a?i:i*a/100+i;return(0,C.jsx)(j.Z.Item,{label:`${n("total.price")} (${null===z||void 0===z?void 0:z.symbol})`,children:(0,C.jsx)(q.Z,{min:1,disabled:!0,value:d,className:"w-100",style:{minWidth:200}})})}})}),(0,C.jsx)(Z.Z,{children:e.key?(0,C.jsx)(b.Z,{type:"primary",className:"mt-2",danger:!0,icon:(0,C.jsx)(F.Z,{}),onClick:()=>{a(e.name)}}):""})]},e.key)}))})}}),(0,C.jsxs)(w.Z,{className:"mt-4",children:[(0,C.jsx)(b.Z,{onClick:t,children:n("prev")}),(0,C.jsx)(b.Z,{type:"primary",htmlType:"submit",loading:!!h,children:n("next")})]})]})})};var O=t(47668);const{Step:W}=i.Z,R=()=>{var e;const{t:l}=(0,v.$)(),{id:t}=(0,o.UO)(),j=(0,c.K)(),{activeMenu:y}=(0,u.v9)((e=>e.menu),u.wU),g=(0,u.I0)(),Z=Number((null===(e=j.values)||void 0===e?void 0:e.step)||0),[f,b]=(0,a.useState)(y.refetch),q=()=>{const e=Z+1;j.set("step",e)},_=()=>{const e=Z-1;j.set("step",e)};(0,a.useEffect)((()=>{var e;y.refetch&&(e=t,b(!0),m.Z.getById(e).then((e=>{var l;let t=e.data.data;g((0,r.nc)({activeMenu:y,data:{...t,request_id:e.data.id,actualStocks:null===(l=e.data.model)||void 0===l?void 0:l.stocks,model_id:e.data.model_id,model:e.data.model}}))})).finally((()=>{b(!1),g((0,r.A_)(y))})))}),[y.refetch,t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(d.Z,{title:l("edit.food"),extra:(0,C.jsx)(n.Z,{}),children:(0,C.jsx)(i.Z,{current:Z,onChange:e=>{g((0,r.nc)({activeMenu:y,data:{...y.data,step:e}})),j.set("step",e)},children:x.S.map((e=>(0,C.jsx)(W,{title:l(e.title)},e.title)))})}),f?(0,C.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,C.jsx)(s.Z,{size:"large",className:"py-5"})}):(0,C.jsxs)("div",{children:["First-content"===x.S[Z].content&&(0,C.jsx)(h.Z,{isRequest:!0,next:q,action_type:"edit"}),"Second-content"===x.S[Z].content&&(0,C.jsx)(O.Z,{isRequest:!0,next:q,prev:_}),"Third-content"===x.S[Z].content&&(0,C.jsx)(M,{isRequest:!0,next:q,prev:_}),"Fourth-content"===x.S[Z].content&&(0,C.jsx)(p.Z,{isRequest:!0,next:q,prev:_}),"Finish-content"===x.S[Z].content&&(0,C.jsx)(k.Z,{isRequest:!0,prev:_})]})]})}},85104:(e,l,t)=>{"use strict";t.d(l,{Z:()=>o});var a=t(1413),i=t(47313);const d={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"};var s=t(17469),n=function(e,l){return i.createElement(s.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:l,icon:d}))};n.displayName="DeploymentUnitOutlined";const o=i.forwardRef(n)},24654:()=>{}}]);