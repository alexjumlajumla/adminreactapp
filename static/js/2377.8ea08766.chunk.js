"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[2377],{49655:(e,l,s)=>{s.d(l,{_:()=>o});var t=s(47313),n=s(12279),a=s.n(n),i=s(74294),u=s(72652),r=s(46417);const o=e=>{let{fetchOptions:l,debounceTimeout:s=400,hasMore:n,refetchOnFocus:o=!1,...d}=e;const[c,m]=(0,t.useState)(!1),[v,h]=(0,t.useState)([]),[p,x]=(0,t.useState)(!1),[b,f]=(0,t.useState)(null),[j,Z]=(0,t.useState)(1),g=(0,t.useMemo)((()=>a()((e=>{h([]),f(e),m(!0),l({search:e}).then((e=>{h(e),Z(2),m(!1)})).finally((()=>x(!1)))}),s)),[l,s,j]);return(0,r.jsxs)(i.Z,{showSearch:!0,allowClear:!0,onPopupScroll:async e=>{const s=e.target;p||s.scrollTop+s.offsetHeight!==s.scrollHeight||n&&(x(!0),l({search:b,page:j}).then((e=>{Z((e=>e+1)),h([...v,...e])})).finally((()=>x(!1))))},labelInValue:!0,filterOption:!1,onSearch:g,notFoundContent:c?(0,r.jsx)(u.Z,{size:"small"}):"no results",onFocus:()=>{o?g(""):null!==v&&void 0!==v&&v.length||g("")},...d,children:[v.map(((e,l)=>(0,r.jsx)(i.Z.Option,{value:e.value,children:e.label},l))),p&&(0,r.jsx)(i.Z.Option,{children:(0,r.jsx)(u.Z,{size:"small"})})]})}},12377:(e,l,s)=>{s.r(l),s.d(l,{default:()=>b});var t=s(47313),n=s(97890),a=s(23560),i=s(10976),u=s(77181),r=s(2717),o=s(90954),d=s(24511),c=s(70816),m=s.n(c),v=s(13783),h=s(73346),p=s(9215),x=s(46417);const b=()=>{const{t:e}=(0,d.$)(),{activeMenu:l}=(0,r.v9)((e=>e.menu),r.wU),s=(0,r.I0)(),[c]=i.Z.useForm(),b=(0,n.s0)(),{myShop:f}=(0,r.v9)((e=>e.myShop),r.wU);(0,t.useEffect)((()=>()=>{const e=c.getFieldsValue(!0);e.expired_at=JSON.stringify(null===e||void 0===e?void 0:e.expired_at),s((0,o.nc)({activeMenu:l,data:e}))}),[]);return(0,x.jsx)(u.Z,{title:e("add.bonus"),className:"h-100",children:(0,x.jsx)(p.Z,{form:c,handleSubmit:t=>{const n={expired_at:m()(t.expired_at).format("YYYY-MM-DD"),status:t.status,type:"sum",value:t.value,bonus_stock_id:t.bonus_stock_id.value,bonus_quantity:t.bonus_quantity,bonusable_id:f.id},i="seller/bonus/shop";return h.Z.create(n).then((()=>{a.Am.success(e("successfully.created")),(0,r.dC)((()=>{s((0,o.ph)({...l,nextUrl:i})),s((0,v.Q)({}))})),b(`/${i}`)}))}})})}},9215:(e,l,s)=>{s.d(l,{Z:()=>f});var t=s(47313),n=s(10976),a=s(68197),i=s(59624),u=s(16124),r=s(99096),o=s(86345),d=s(59491),c=s(70816),m=s.n(c),v=s(24511),h=s(2717),p=s(18333),x=s(49655),b=s(46417);function f(e){let{form:l,handleSubmit:s}=e;const{t:c}=(0,v.$)(),{activeMenu:f}=(0,h.v9)((e=>e.menu),h.wU),[j,Z]=(0,t.useState)({bonusStock:!1}),[g,_]=(0,t.useState)(!1);return(0,b.jsxs)(n.Z,{name:"bonus-form",layout:"vertical",onFinish:e=>{_(!0),s(e).finally((()=>_(!1)))},form:l,initialValues:{status:!0,...f.data,...(()=>{var e,l;if(null===(e=f.data)||void 0===e||!e.expired_at)return{};const s=JSON.parse(null===(l=f.data)||void 0===l?void 0:l.expired_at);return{expired_at:m()(s,"HH:mm:ss")}})()},className:"d-flex flex-column h-100",children:[(0,b.jsxs)(a.Z,{gutter:12,children:[(0,b.jsx)(i.Z,{span:12,children:(0,b.jsx)(n.Z.Item,{label:c("order_amount"),name:"value",rules:[{required:!0,message:c("required")},{type:"number",min:1,message:c("min.1")}],children:(0,b.jsx)(u.Z,{className:"w-100"})})}),(0,b.jsx)(i.Z,{span:12,children:(0,b.jsx)(n.Z.Item,{label:c("bonus.product.stock"),name:"bonus_stock_id",rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(x._,{fetchOptions:function(e){let{page:l,search:s}=e;const t={active:1,status:"published",page:l,search:null!==s&&void 0!==s&&s.length?s:void 0};return p.Z.getStock(t).then((e=>{var l,s;return Z({...j,bonusStock:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<=(null===e||void 0===e||null===(s=e.meta)||void 0===s?void 0:s.last_page)}),e.data.map((e=>{var l,s,t,n,a;return{label:`${null===e||void 0===e||null===(l=e.product)||void 0===l||null===(s=l.translation)||void 0===s?void 0:s.title} ${null!==e&&void 0!==e&&null!==(t=e.extras)&&void 0!==t&&t.length?` => ${null===e||void 0===e||null===(n=e.extras)||void 0===n||null===(a=n.map((e=>{var l,s;return`${null===e||void 0===e||null===(l=e.group)||void 0===l||null===(s=l.translation)||void 0===s?void 0:s.title}: ${null===e||void 0===e?void 0:e.value}`})))||void 0===a?void 0:a.join(", ")}`:""}`,value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:null===j||void 0===j?void 0:j.bonusStock,allowClear:!1})})}),(0,b.jsx)(i.Z,{span:12,children:(0,b.jsx)(n.Z.Item,{label:c("bonus.product.quantity"),name:"bonus_quantity",rules:[{required:!0,message:c("required")},{type:"number",min:1,message:c("min.1")}],children:(0,b.jsx)(u.Z,{className:"w-100"})})}),(0,b.jsx)(i.Z,{span:12,children:(0,b.jsx)(n.Z.Item,{name:"expired_at",label:c("expired.at"),rules:[{required:!0,message:c("required")}],children:(0,b.jsx)(r.Z,{className:"w-100",placeholder:"",disabledDate:e=>m()().add(-1,"days")>=e})})}),(0,b.jsx)(i.Z,{span:12,children:(0,b.jsx)(n.Z.Item,{label:c("active"),name:"status",valuePropName:"checked",children:(0,b.jsx)(o.Z,{})})})]}),(0,b.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,b.jsx)("div",{className:"pb-5",children:(0,b.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:g,children:c("submit")})})})]})}}}]);