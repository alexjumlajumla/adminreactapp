"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[1613],{89281:(e,s,t)=>{t.d(s,{h:()=>u});var a=t(47313),n=t(12279),l=t.n(n),r=t(74294),i=t(72652),d=t(46417);const u=e=>{let{fetchOptions:s,debounceTimeout:t=400,onClear:n,...u}=e;const[o,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),b=(0,a.useMemo)((()=>l()((e=>{h([]),c(!0),s(e).then((e=>{h(e),c(!1)}))}),t)),[s,t]);return(0,d.jsx)(r.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:b,onClear:()=>{b(""),n&&n()},notFoundContent:o?(0,d.jsx)(i.Z,{size:"small"}):"no results",...u,options:m,onFocus:()=>{b("")}})}},31613:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var a=t(47313),n=t(97890),l=t(23560),r=t(10976),i=t(77181),d=t(2717),u=t(90954),o=t(24511),c=t(70816),m=t.n(c),h=t(71274),b=t(18929),g=t(42912),p=t(46417);const x=()=>{const{t:e}=(0,o.$)(),{activeMenu:s}=(0,d.v9)((e=>e.menu),d.wU),t=(0,d.I0)(),[c]=r.Z.useForm(),x=(0,n.s0)();(0,a.useEffect)((()=>()=>{const e=c.getFieldsValue(!0);t((0,u.nc)({activeMenu:s,data:e}))}),[]);return(0,p.jsx)(i.Z,{title:e("add.subscriber"),className:"h-100",children:(0,p.jsx)(g.Z,{form:c,handleSubmit:a=>{const n={...a,type:a.type,email_setting_id:a.email_setting_id.value,send_to:m()(a.send_to).format("YYYY-MM-DD HH:mm:ss")},r="message/subscriber";return h.Z.create(n).then((()=>{l.Am.success(e("successfully.created")),(0,d.dC)((()=>{t((0,u.ph)({...s,nextUrl:r})),t((0,b.F)({}))})),x(`/${r}`)}))}})})}},42912:(e,s,t)=>{t.d(s,{Z:()=>q});var a=t(47313),n=t(10976),l=t(68197),r=t(59624),i=t(66672),d=t(74294),u=t(99096),o=t(59491),c=t(89281),m=t(24511),h=t(68144),b=t(76733),g=t.n(b),p=t(97421),x=t(36104),f=t(46417);function j(e){let{form:s,lang:t,languages:a}=e;const{t:l}=(0,m.$)();return(0,f.jsx)("div",{className:"textEditor",children:(0,f.jsx)(n.Z.Item,{label:l("newsletter.content"),name:"body",valuePropName:"data",getValueFromEvent:(e,s)=>s.getData(),rules:[{required:!0,message:l("required")}],className:"description-editor",children:(0,f.jsx)(h.CKEditor,{editor:g(),config:{extraPlugins:[function(e){e.plugins.get("FileRepository").createUploadAdapter=e=>function(e){return{upload:()=>new Promise(((s,t)=>{const a=new FormData;e.file.then((e=>{a.append("image",e),a.append("type","blogs"),x.Z.upload(a).then((e=>{let{data:t}=e;s({default:`${p.bV+t.title}`})})).catch((e=>{t(e)}))}))}))}}(e)}]},onChange:(e,s)=>{s.getData()},onBlur:(e,t)=>{const a=t.getData();s.setFieldsValue({body:a})}})})})}var v=t(70816),Z=t.n(v),y=t(2717),w=t(38758);const _=[{title:"order",value:"order"},{title:"subscribe",value:"subscribe"},{title:"verify",value:"verify"}];function q(e){let{type:s="add",form:t,handleSubmit:h}=e;const{t:b}=(0,m.$)(),{activeMenu:g}=(0,y.v9)((e=>e.menu),y.wU),{defaultLang:p,languages:x}=(0,y.v9)((e=>e.formLang),y.wU),{subscribers:v}=(0,y.v9)((e=>e.messageSubscriber),y.wU),[q,F]=(0,a.useState)(!1);return(0,f.jsxs)(n.Z,{name:"subscriber-form",layout:"vertical",onFinish:e=>{F(!0),h(e).finally((()=>F(!1)))},form:t,initialValues:{...g.data,...(()=>{const e=g.data;if(null===e||void 0===e||!e.send_to)return e;const s=e.send_to;return{...e,send_to:Z()(s,"YYYY-MM-DD")}})()},className:"d-flex flex-column h-100",children:[(0,f.jsxs)(l.Z,{gutter:12,children:[(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(n.Z.Item,{label:b("subject"),name:"subject",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)(i.Z,{})})}),(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(n.Z.Item,{label:b("type"),name:"type",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)(d.Z,{disabled:"edit"===s,options:_.filter((e=>!v.some((s=>s.type===e.value)))),className:"w-100"})})}),(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(n.Z.Item,{label:b("email.setting.id"),name:"email_setting_id",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)(c.h,{fetchOptions:()=>w.Z.get().then((e=>{let{data:s}=e;return s.map((e=>({label:null===e||void 0===e?void 0:e.host,value:null===e||void 0===e?void 0:e.id})))})),className:"w-100",placeholder:b("email.setting.id")})})}),(0,f.jsx)(r.Z,{span:24,children:(0,f.jsx)(j,{languages:x,form:t,lang:p})}),(0,f.jsx)(r.Z,{span:12,children:(0,f.jsx)(n.Z.Item,{label:b("alt.body"),name:"alt_body",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)(i.Z,{})})}),(0,f.jsx)(r.Z,{span:6,children:(0,f.jsx)(n.Z.Item,{label:b("send.to"),name:"send_to",rules:[{required:!0,message:b("required")}],children:(0,f.jsx)(u.Z,{showTime:!0,className:"w-100",disabledDate:e=>Z()().add(-1,"days")>=e})})})]}),(0,f.jsx)("div",{className:"flex-grow-1 d-flex flex-column justify-content-end",children:(0,f.jsx)("div",{className:"pb-5",children:(0,f.jsx)(o.Z,{type:"primary",htmlType:"submit",loading:q,children:b("send")})})})]})}}}]);