"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[3382],{83382:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var l=a(47313),n=a(97890),i=a(23560),s=a(10976),o=a(77181),r=a(72652),d=a(2717),u=a(90954),c=a(1706),v=a(40113),p=a(24511),g=a(73431),m=a(97421),h=a(31881),f=a.n(h),b=a(75336),_=a(78035),k=a(46417);const y=()=>{const{t:e}=(0,p.$)(),{activeMenu:t}=(0,d.v9)((e=>e.menu),d.wU),a=(0,d.I0)(),[h]=s.Z.useForm(),y=(0,n.s0)(),{id:Z}=(0,n.UO)(),[x,j]=(0,l.useState)(!1),{languages:$}=(0,d.v9)((e=>e.formLang),d.wU);function w(e){if(!e)return{};const{translations:t}=e,a=$.map((e=>{var a,l;return{[`title[${e.locale}]`]:null===(a=t.find((t=>t.locale===e.locale)))||void 0===a?void 0:a.title,[`description[${e.locale}]`]:null===(l=t.find((t=>t.locale===e.locale)))||void 0===l?void 0:l.description}}));return Object.assign({},...a)}(0,l.useEffect)((()=>()=>{const e=h.getFieldsValue(!0);a((0,u.nc)({activeMenu:t,data:e}))}),[]);return(0,l.useEffect)((()=>{var e;t.refetch&&(e=Z,j(!0),v.Z.getById(e).then((e=>{var l;let n=e.data;const i={...n,...w(n),...null===n||void 0===n?void 0:n.buttons,active:!(null===n||void 0===n||!n.active),image:[(s=null===n||void 0===n||null===(l=n.galleries[0])||void 0===l?void 0:l.path,{name:s,url:m.bV+s})]};var s;h.setFieldsValue(i),a((0,u.nc)({activeMenu:t,data:i}))})).finally((()=>{a((0,u.A_)(t)),j(!1)})))}),[t.refetch]),(0,k.jsx)(o.Z,{title:e("edit.page"),className:"h-100",extra:(0,k.jsx)(g.Z,{}),children:x?(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,k.jsx)(r.Z,{size:"large",className:"py-5"})}):(0,k.jsx)(_.Z,{form:h,handleSubmit:(l,n)=>{const s={images:n.map((e=>e.name)),active:Number(l.active),type:l.type,title:(0,b.Z)($,l,"title"),description:(0,b.Z)($,l,"description"),buttons:{google_play_button_link:null===l||void 0===l?void 0:l.google_play_button_link,app_store_button_link:null===l||void 0===l?void 0:l.app_store_button_link}},o="pages";return f()({method:"put",url:`${m.YZ}dashboard/admin/pages/${Z}`,headers:{Authorization:`Bearer ${localStorage.getItem("token")}`},data:s,params:{}}).then((()=>{i.Am.success(e("successfully.updated")),(0,d.dC)((()=>{a((0,u.ph)({...t,nextUrl:o})),a((0,c.R)({}))})),y("/pages")})).catch((e=>{var t,a;return i.Am.error(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}})})}}}]);