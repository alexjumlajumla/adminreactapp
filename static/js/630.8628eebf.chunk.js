"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[630],{13622:(e,l,i)=>{i.d(l,{R:()=>o});var a=i(47313),n=i(12279),t=i.n(n),s=i(74294),d=i(72652),r=i(46417);const o=e=>{let{fetchOptions:l,debounceTimeout:i=400,refetch:n=!1,...o}=e;const[u,c]=(0,a.useState)(!1),[v,m]=(0,a.useState)([]),h=(0,a.useMemo)((()=>t()((e=>{m([]),c(!0),l(e).then((e=>{m(e),c(!1)}))}),i)),[l,i]);return(0,r.jsx)(s.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,onClear:()=>h(""),filterOption:!1,onSearch:h,notFoundContent:u?(0,r.jsx)(d.Z,{size:"small"}):"no results",...o,options:v,onFocus:()=>{h("")}})}},28358:(e,l,i)=>{i.d(l,{Z:()=>n});var a=i(34344);const n={getAll:e=>a.Z.get("dashboard/admin/kitchen",{params:e})}},16190:(e,l,i)=>{i.d(l,{Z:()=>Z});var a=i(47313),n=i(10976),t=i(9274),s=i(59491),d=i(66672),r=i(24511),o=i(73431),u=i(2717),c=i(5170),v=i(23560),m=i(97340),h=i(75336),p=i(51282),x=i(46417);function Z(e){let{modal:l,handleCancel:i,onSuccess:Z}=e;const[j]=n.Z.useForm(),{t:g}=(0,r.$)(),y=(0,u.I0)(),[f,b]=(0,a.useState)(!1),[k,I]=(0,a.useState)(!1),{languages:q,defaultLang:S}=(0,u.v9)((e=>e.formLang),u.wU);(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.id&&(e=l.id,I(!0),c.Z.getGroupById(e).then((e=>{const l=e.data;j.setFieldsValue({...l,...C(l)})})).finally((()=>I(!1))))}),[l]);function C(e){if(!e)return{};const{translations:l}=e,i=q.map((e=>{var i;return{[`title[${e.locale}]`]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.title}}));return Object.assign({},...i)}return(0,x.jsx)(t.Z,{title:null!==l&&void 0!==l&&l.id?g("edit.extra.group"):g("add.extra.group"),visible:!!l,onCancel:i,footer:[(0,x.jsx)(s.Z,{type:"primary",onClick:()=>j.submit(),loading:f,children:g("save")},"save-button-group"),(0,x.jsx)(s.Z,{type:"default",onClick:i,children:g("cancel")},"cancel-button-group")],children:k?(0,x.jsx)(p.Z,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"d-flex justify-content-end",children:(0,x.jsx)(o.Z,{})}),(0,x.jsx)(n.Z,{layout:"vertical",name:"extra-group",form:j,onFinish:e=>{const a={title:(0,h.Z)(q,e),type:"text"};null!==l&&void 0!==l&&l.id?function(e,l){b(!0),c.Z.updateGroup(e,l).then((()=>{v.Am.success(g("successfully.updated")),y((0,m.gw)()),i()})).finally((()=>b(!1)))}(null===l||void 0===l?void 0:l.id,a):function(e){b(!0),c.Z.createGroup(e).then((()=>{v.Am.success(g("successfully.created")),i(),y((0,m.gw)()),Z&&Z()})).finally((()=>b(!1)))}(a)},children:q.map((e=>(0,x.jsx)(n.Z.Item,{rules:[{required:e.locale===S,message:g("required")}],name:`title[${e.locale}]`,label:g("title"),hidden:e.locale!==S,children:(0,x.jsx)(d.Z,{placeholder:g("title")})},"title"+e.locale)))})]})})}},21726:(e,l,i)=>{i.d(l,{Z:()=>j});var a=i(10976),n=i(66672),t=i(9274),s=i(59491),d=i(47313),r=i(8922),o=i(24511),u=i(2717),c=i(23560),v=i(20503),m=i(8550),h=i(34319),p=i(5170),x=i(89281),Z=i(46417);function j(e){let{modal:l,handleCancel:i,onSuccess:j,groupId:g}=e;const[y]=a.Z.useForm(),{t:f}=(0,o.$)(),b=(0,u.I0)(),[k,I]=(0,d.useState)(!1),[q,S]=(0,d.useState)("text"),[C,w]=(0,d.useState)(null),[$,N]=(0,d.useState)(""),{extraGroups:_}=(0,u.v9)((e=>e.extraGroup),u.wU);(0,d.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){var e,i,a;S(l.group.type);const n={...l,extra_group_id:{label:null===l||void 0===l||null===(e=l.group)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===l||void 0===l||null===(a=l.group)||void 0===a?void 0:a.id},value:l.value};switch(l.group.type){case"color":N(l.value);break;case"image":w((0,m.Z)(l.value))}y.setFieldsValue(n)}g&&y.setFieldsValue({extra_group_id:{value:g}})}),[l,g]);function F(e,l){switch(e){case"color":return l.hex;case"text":return l;case"image":return l.name;default:return""}}return(0,Z.jsx)(t.Z,{title:null!==l&&void 0!==l&&l.id?f("edit.extra"):f("add.extra"),visible:!!l,onCancel:i,footer:[(0,Z.jsx)(s.Z,{type:"primary",onClick:()=>y.submit(),loading:k,children:f("save")}),(0,Z.jsx)(s.Z,{type:"default",onClick:i,children:f("cancel")})],children:(0,Z.jsxs)(a.Z,{name:"extra-form",layout:"vertical",form:y,onFinish:e=>{var a;console.log(e);const n={extra_group_id:null===e||void 0===e||null===(a=e.extra_group_id)||void 0===a?void 0:a.value,value:F(q,e.value)};null!==l&&void 0!==l&&l.id?((e,l)=>{I(!0),p.Z.updateValue(e,l).then((()=>{c.Am.success(f("successfully.updated")),i(),b((0,h.pZ)())})).finally((()=>I(!1)))})(l.id,n):(e=>{I(!0),p.Z.createValue(e).then((()=>{c.Am.success(f("successfully.created")),i(),b((0,h.pZ)()),j&&j()})).finally((()=>I(!1)))})(n)},children:[(0,Z.jsx)(a.Z.Item,{name:"extra_group_id",label:f("extra.group"),hidden:!!g,rules:[{required:!0,message:""}],children:(0,Z.jsx)(x.h,{fetchOptions:async function(e){const l={perPage:10,active:1,search:e};return console.log("search => ",l),p.Z.getAllGroups(l).then((e=>{var l;return null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.map((e=>{var l;return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title,key:null===e||void 0===e?void 0:e.id}}))}))}})}),(0,Z.jsx)(a.Z.Item,{name:"value",label:f("value"),rules:[{required:!0,message:""}],children:(e=>{switch(e){case"color":return(0,Z.jsx)(r.xS,{onChangeComplete:e=>N(e.hex),color:$,disableAlpha:!0});case"text":return(0,Z.jsx)(n.Z,{placeholder:f("enter.extra.value")});case"image":return(0,Z.jsx)(v.Z,{type:"extras",image:C,setImage:w,form:y,name:"value"});default:return""}})(q)})]})})}},47668:(e,l,i)=>{i.d(l,{Z:()=>N});var a=i(47313),n=i(77181),t=i(10976),s=i(45705),d=i(59491),r=i(2717),o=i(17101),u=i(90954),c=i(24511),v=i(97890),m=i(23560),h=i(12258),p=i(9274),x=i(66672),Z=i(42346),j=i(66204),g=i(18074),y=i(5170),f=i(16190),b=i(82138),k=i(71136),I=i(46417);const q=e=>{let{open:l,onClose:i,selectedExtras:n,onSelect:t}=e;const{t:s}=(0,c.$)(),[r,o]=(0,a.useState)([]),[u,v]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1),[q,S]=(0,a.useState)(""),C=(0,k.Z)(q,500),[w,$]=(0,a.useState)(),N=function(e){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;v(!0);const i={valid:!0,perPage:10,search:e,page:l};y.Z.getAllGroups(i).then((e=>{const l=e.data.map((e=>{var l;return{id:e.id,label:null===(l=e.translation)||void 0===l?void 0:l.title,value:e.id,shop_id:e.shop_id}}));o(l),$(e.meta)})).finally((()=>v(!1)))};return(0,a.useEffect)((()=>{l&&N(C)}),[l,C]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.Z,{visible:l,onCancel:()=>{i(),S("")},footer:u?null:(0,I.jsx)(d.Z,{type:"link",onClick:()=>h(!0),style:{paddingLeft:0},icon:(0,I.jsx)(b.Z,{}),children:s("add.new.extra")}),children:[(0,I.jsx)(x.Z,{className:"mt-3",value:q,onChange:e=>S(e.target.value)}),(0,I.jsx)(Z.ZP,{loading:u,dataSource:r.filter((e=>!(null!==n&&void 0!==n&&n.some((l=>l.id===e.id))))),renderItem:e=>(0,I.jsx)(Z.ZP.Item,{extra:null!==e&&void 0!==e&&e.shop_id?null:(0,I.jsx)(j.Z,{children:s("admin")}),style:{cursor:"pointer"},onClick:()=>{t(e)},children:e.label})}),(0,I.jsx)(g.Z,{onChange:e=>{N(C,e)},current:null===w||void 0===w?void 0:w.current_page,total:null===w||void 0===w?void 0:w.total})]}),(0,I.jsx)(f.Z,{modal:m,handleCancel:()=>h(!1),onSuccess:()=>N()})]})};var S=i(32697),C=i(98276),w=i(21726);const $=e=>{let{extra:l,onClose:i,onSelect:n}=e;const{t:t}=(0,c.$)(),[s,r]=(0,a.useState)(!1),[o,u]=(0,a.useState)([]),[v,m]=(0,a.useState)([]),[h,x]=(0,a.useState)(!1);function j(e){r(!0),y.Z.getGroupById(e).then((e=>u(e.data.extra_values.map((e=>({label:e.value,value:e.id})))))).finally((()=>{r(!1)}))}return(0,a.useEffect)((()=>{var e;null!==l&&void 0!==l&&l.value&&(j(l.value),m((null===l||void 0===l||null===(e=l.values)||void 0===e?void 0:e.map((e=>e.value)))||[]))}),[null===l||void 0===l?void 0:l.value]),console.log(l),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(p.Z,{visible:!!l,onCancel:i,footer:[(0,I.jsx)(d.Z,{onClick:i,children:t("cancel")}),!s&&o.length>0&&(0,I.jsx)(d.Z,{onClick:()=>{const e=[];o.forEach((l=>{v.forEach((i=>{l.value===i&&e.push(l)}))})),n(null===l||void 0===l?void 0:l.value,e),i()},type:"primary",children:t("save")})],children:[(0,I.jsx)(S.Z.Group,{value:v,onChange:e=>{m(e)},className:"w-100",children:0!==(null===o||void 0===o?void 0:o.length)||s?(0,I.jsx)(Z.ZP,{dataSource:o,loading:s,renderItem:e=>(0,I.jsx)(Z.ZP.Item,{children:(0,I.jsx)(S.Z,{value:e.value,children:null===e||void 0===e?void 0:e.label})})}):(0,I.jsx)(C.Z,{})}),s?null:(0,I.jsx)(d.Z,{type:"link",onClick:()=>x(!0),style:{paddingLeft:0},icon:(0,I.jsx)(b.Z,{}),children:t("add.new.extra")})]}),l&&(0,I.jsx)(w.Z,{modal:h,handleCancel:()=>x(!1),groupId:null===l||void 0===l?void 0:l.value,onSuccess:()=>j(null===l||void 0===l?void 0:l.value)})]})},N=e=>{var l;let{next:i,prev:p,isRequest:x}=e;const{t:Z}=(0,c.$)(),j=(0,r.I0)(),{uuid:g,id:y}=(0,v.UO)(),f=(0,v.s0)(),{activeMenu:b}=(0,r.v9)((e=>e.menu),r.wU),[k,S]=(0,a.useState)(!1),[C,w]=(0,a.useState)(!1),[N,_]=(0,a.useState)((null===(l=b.data)||void 0===l?void 0:l.extras)||[]),[F,P]=(0,a.useState)(null),[A,O]=(0,a.useState)(!1);return(0,I.jsx)(n.Z,{children:(0,I.jsxs)(t.Z,{layout:"vertical",initialValues:{...b.data},onFinish:()=>{if(N.some((e=>{var l;return 0===(null===(l=e.values)||void 0===l?void 0:l.length)||!e.values})))return void m.Am.error(Z("please.select.at.least.1.extra.value.for.each.extra"));const e=N.map((e=>e.value));if(e.sort(((e,l)=>e-l)),x)return j((0,u.nc)({activeMenu:b,data:{...b.data,extras:N}})),void f(`/product-request/${y}?step=2`,{state:{generate:A}});S(!0),o.Z.extras(g,{extras:e}).then((()=>{j((0,u.nc)({activeMenu:b,data:{...b.data,extras:N}})),i()})).finally((()=>S(!1)))},children:[(0,I.jsx)(q,{open:C,onClose:()=>w(!1),selectedExtras:N,onSelect:e=>{O(!0),_((l=>[...l,e])),w(!1)}}),(0,I.jsx)($,{extra:F,onClose:()=>P(null),onSelect:(e,l)=>{O(!0),_((i=>i.map((i=>{if(i.value===e){const e=l.map((e=>{var l,i;const a=null===(l=b.data)||void 0===l||null===(i=l.extras)||void 0===i?void 0:i.flatMap((e=>e.values)).find((l=>l.value===e.value));return{...e,stock_id:null===a||void 0===a?void 0:a.stock_id}}));return{...i,values:e}}return i}))))}}),(0,I.jsx)(s.Z,{className:"w-100",size:"middle",direction:"vertical",children:N.map((e=>{var l;return(0,I.jsxs)(s.Z,{className:"w-100",direction:"vertical",children:[(0,I.jsxs)(s.Z,{className:"w-100",wrap:!0,children:[(0,I.jsx)(d.Z,{onClick:()=>P(e),ghost:!0,type:"primary",children:null===e||void 0===e?void 0:e.label}),null===e||void 0===e||null===(l=e.values)||void 0===l?void 0:l.map((l=>(0,I.jsxs)("div",{className:"extra-value",children:[null===l||void 0===l?void 0:l.label," ",(0,I.jsx)("button",{onClick:()=>{return i=e.value,a=l.value,O(!0),void _((e=>e.map((e=>e.value===i?{...e,values:(null===e||void 0===e?void 0:e.values.filter((e=>e.value!==a)))||[]}:e))));var i,a},type:"button",className:"extra-clear",children:(0,I.jsx)(h.IOM,{})})]},l.value)))]}),(0,I.jsx)(s.Z,{className:"w-100",style:{justifyContent:"flex-end"},children:(0,I.jsx)(d.Z,{danger:!0,onClick:()=>{return l=e,O(!0),void _((e=>e.filter((e=>e.id!==l.id))));var l},type:"text",children:Z("delete")})})]},e.id)}))}),(0,I.jsx)(d.Z,{onClick:()=>w(!0),className:"w-100 my-3",type:"dashed",children:Z("add.extra")}),(0,I.jsxs)(s.Z,{className:"mt-3",children:[(0,I.jsx)(d.Z,{onClick:p,children:Z("prev")}),(0,I.jsx)(d.Z,{type:"primary",htmlType:"submit",loading:k,children:Z("next")})]})]})})}},78873:(e,l,i)=>{i.d(l,{Z:()=>b});var a=i(47313),n=i(77181),t=i(83371),s=i(68197),d=i(59624),r=i(35432),o=i(45705),u=i(59491),c=i(72652),v=i(2717),m=i(97890),h=i(90954),p=i(95882),x=i(24511),Z=i(17101),j=i(97421),g=i(23560),y=i(14349),f=i(46417);const b=e=>{var l,i,b,k,I,q,S,C,w,$,N,_,F;let{prev:P,isRequest:A}=e;const{t:O}=(0,x.$)(),{activeMenu:U}=(0,v.v9)((e=>e.menu),v.wU),{defaultLang:L,languages:M}=(0,v.v9)((e=>e.formLang),v.wU),E=(0,m.s0)(),V=(0,v.I0)(),[G,R]=(0,a.useState)({}),[T,B]=(0,a.useState)(null),{uuid:z}=(0,m.UO)(),[W,D]=(0,a.useState)(!1);function H(e){if(null===e||void 0===e||!e.translations)return{};const{translations:l}=e,i=M.map((e=>{var i,a;return{[`title[${e.locale}]`]:null===(i=l.find((l=>l.locale===e.locale)))||void 0===i?void 0:i.title,[`description[${e.locale}]`]:null===(a=l.find((l=>l.locale===e.locale)))||void 0===a?void 0:a.description}}));return Object.assign({},...i)}(0,a.useEffect)((()=>{A||function(e){B(!0),Z.Z.getById(e).then((e=>{const l={...e.data,...H(e.data),properties:e.data.properties.map(((e,l)=>({id:l,[`key[${e.locale}]`]:e.key,[`value[${e.locale}]`]:e.value}))),translation:void 0,translations:void 0};R(l)})).finally((()=>B(!1)))}(z)}),[A]);const J=U.data,K=A?U.data.model:G;return T?(0,f.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,f.jsx)(c.Z,{size:"large",className:"py-5"})}):(0,f.jsxs)(n.Z,{children:[A&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(t.Z,{bordered:!0,title:O("changed.info"),children:[(0,f.jsx)(t.Z.Item,{label:`${O("title")} (${L})`,span:3,children:J[`title[${L}]`]}),(0,f.jsx)(t.Z.Item,{label:`${O("description")} (${L})`,span:3,children:J[`description[${L}]`]}),(0,f.jsx)(t.Z.Item,{label:O("shop"),span:1.5,children:null===J||void 0===J||null===(l=J.shop)||void 0===l?void 0:l.translation.title}),(0,f.jsx)(t.Z.Item,{label:O("category"),span:1.5,children:null===J||void 0===J||null===(i=J.category)||void 0===i?void 0:i.label}),(0,f.jsx)(t.Z.Item,{label:O("brand"),span:1.5,children:null===J||void 0===J||null===(b=J.brand)||void 0===b?void 0:b.label}),(0,f.jsx)(t.Z.Item,{label:O("unit"),span:1.5,children:null===J||void 0===J||null===(k=J.unit)||void 0===k?void 0:k.label}),(0,f.jsx)(t.Z.Item,{label:O("images"),span:3,children:(0,f.jsx)(s.Z,{gutter:12,children:null===J||void 0===J||null===(I=J.images)||void 0===I?void 0:I.map(((e,l)=>(0,f.jsx)(d.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:e.url})},"image"+l)))})}),(0,f.jsx)(t.Z.Item,{label:O("tax"),children:(null===J||void 0===J?void 0:J.tax)||0}),(0,f.jsx)(t.Z.Item,{label:O("min.quantity"),children:null===J||void 0===J?void 0:J.min_qty}),(0,f.jsx)(t.Z.Item,{label:O("max.quantity"),children:null===J||void 0===J?void 0:J.max_qty})]}),(0,f.jsx)(r.Z,{className:"mt-4",children:(0,f.jsx)(r.Z.Panel,{header:O("stocks"),children:null===J||void 0===J?void 0:J.stocks.map(((e,l)=>{var i;return e?(0,f.jsxs)(t.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(t.Z.Item,{label:O("price"),span:2,children:e.price}),(0,f.jsx)(t.Z.Item,{label:O("quantity"),span:2,children:e.quantity}),null===e||void 0===e||null===(i=e.ids)||void 0===i?void 0:i.map(((e,l)=>(0,f.jsx)(t.Z.Item,{label:null===J||void 0===J?void 0:J.extras[l].label,children:null===e||void 0===e?void 0:e.label},"extra"+l)))]},"desc"+l):""}))},"stocks")})]}),(0,f.jsxs)(t.Z,{bordered:!0,className:"mt-4",title:O("original.info"),children:[(0,f.jsx)(t.Z.Item,{label:`${O("title")} (${L})`,span:3,column:3,children:(null===(q=K.translation)||void 0===q?void 0:q.title)||K[`title[${L}]`]}),(0,f.jsx)(t.Z.Item,{label:`${O("description")} (${L})`,span:3,column:3,children:(null===K||void 0===K||null===(S=K.translation)||void 0===S?void 0:S.description)||K[`description[${L}]`]}),(0,f.jsx)(t.Z.Item,{label:O("shop"),span:1.5,column:1.5,children:null===(C=K.shop)||void 0===C?void 0:C.translation.title}),(0,f.jsx)(t.Z.Item,{label:O("category"),span:1.5,column:1.5,children:null===(w=K.category)||void 0===w?void 0:w.translation.title}),(0,f.jsx)(t.Z.Item,{label:O("brand"),span:1.5,column:1.5,children:null===($=K.brand)||void 0===$?void 0:$.title}),(0,f.jsx)(t.Z.Item,{label:O("unit"),span:1.5,column:1.5,children:null===(N=K.unit)||void 0===N?void 0:N.translation.title}),(0,f.jsx)(t.Z.Item,{label:O("images"),span:3,column:3,children:(0,f.jsx)(s.Z,{gutter:12,children:null===K||void 0===K||null===(_=K.galleries)||void 0===_?void 0:_.map(((e,l)=>(0,f.jsx)(d.Z,{children:(0,f.jsx)("img",{width:80,alt:"product",src:j.bV+e.path})},"image"+l)))})}),(0,f.jsx)(t.Z.Item,{span:3,column:3,label:O("tax"),children:K.tax||0}),(0,f.jsx)(t.Z.Item,{span:3,column:3,label:O("min.quantity"),children:K.min_qty}),(0,f.jsx)(t.Z.Item,{span:3,column:3,label:O("max.quantity"),children:K.max_qty})]}),(0,f.jsx)(r.Z,{className:"mt-4",children:(0,f.jsx)(r.Z.Panel,{header:O("stocks"),children:null===(F=K.stocks)||void 0===F?void 0:F.map(((e,l)=>e?(0,f.jsxs)(t.Z,{bordered:!0,className:"mt-4",children:[(0,f.jsx)(t.Z.Item,{label:O("price"),span:2,column:2,children:e.price}),(0,f.jsx)(t.Z.Item,{label:O("quantity"),span:2,column:2,children:e.quantity}),e.extras.map(((e,l)=>{var i,a;return(0,f.jsx)(t.Z.Item,{label:null===e||void 0===e||null===(i=e.group)||void 0===i||null===(a=i.translation)||void 0===a?void 0:a.title,span:2,column:2,children:null===e||void 0===e?void 0:e.value},"extra"+l)}))]},"desc"+l):""))},"stocks")}),(0,f.jsx)("div",{className:"d-flex justify-content-end mt-4",children:(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(u.Z,{onClick:P,children:O("prev")}),(0,f.jsx)(u.Z,{loading:W,type:"primary",onClick:function(){const e={status:void 0},l="catalog/products";if(A&&U.data){D(!0);const e={id:U.data.model_id,type:"product",data:U.data};y.Z.requestChangeUpdate(U.data.request_id,e).then((()=>{E(`/${l}`,{state:{tab:"request"}}),g.Am.success(O("successfully.updated")),V((0,h.ph)({...U,nextUrl:l}))})).finally((()=>{D(!1)}))}else V((0,h.ph)({...U,nextUrl:l})),V((0,p.t2)(e)),E(`/${l}`)},children:O("finish")})]})})]})}},97307:(e,l,i)=>{i.d(l,{Z:()=>N});var a=i(47313),n=i(10976),t=i(68197),s=i(59624),d=i(77181),r=i(66672),o=i(16124),u=i(86345),c=i(59491),v=i(89281),m=i(53149),h=i(11216),p=i(30763),x=i(2717),Z=i(17101),j=i(90954),g=i(31055),y=i(97890),f=i(24511),b=i(75868),k=i(49080),I=i(13622),q=i(82138),S=i(20776),C=i(28358),w=i(49655),$=i(46417);const N=e=>{var l,i,N;let{next:_,action_type:F="",isRequest:P}=e;const{t:A}=(0,f.$)(),[O]=n.Z.useForm(),U=n.Z.useWatch("shop",O),L=(0,x.I0)(),{uuid:M}=(0,y.UO)(),E=(0,y.s0)(),[V,G]=(0,a.useState)(null),{activeMenu:R}=(0,x.v9)((e=>e.menu),x.wU),{defaultLang:T,languages:B}=(0,x.v9)((e=>e.formLang),x.wU),[z,W]=(0,a.useState)(null!==(l=R.data)&&void 0!==l&&l.images?null===(i=R.data)||void 0===i?void 0:i.images:[]),[D,H]=(0,a.useState)(!1),[J,K]=(0,a.useState)(Boolean(null===(N=R.data)||void 0===N?void 0:N.kcal)),[Q,X]=(0,a.useState)({kitchen:!1});(0,a.useEffect)((()=>{const e=O.getFieldsValue(!0);L((0,j.nc)({activeMenu:R,data:{...R.data,...e}}))}),[]);const Y=()=>{L((0,j.bL)({id:"category-add",url:"category/add",name:A("add.category")})),E("/category/add")};return(0,$.jsxs)(n.Z,{layout:"vertical",form:O,initialValues:{active:!0,vegetarian:!0,...R.data},onFinish:e=>{var l,i,a,n,t;H(!0);const s={...e,active:Number(e.active),vegetarian:Number(e.vegetarian),brand_id:null===(l=e.brand)||void 0===l?void 0:l.value,category_id:(null===(i=e.category)||void 0===i?void 0:i.value)||e.category,shop_id:null===(a=e.shop)||void 0===a?void 0:a.value,kitchen_id:(null===e||void 0===e||null===(n=e.kitchen)||void 0===n?void 0:n.value)||void 0,unit_id:null===(t=e.unit)||void 0===t?void 0:t.value,kcal:J?String(e.kcal):void 0,carbs:J?String(e.carbs):void 0,protein:J?String(e.protein):void 0,fats:J?String(e.fats):void 0,images:void 0,brand:void 0,category:void 0,shop:void 0,unit:void 0,kitchen:void 0,tax:e.tax||0,...Object.assign({},...z.map(((e,l)=>({[`images[${l}]`]:e.name}))))};if(P)return L((0,j.nc)({activeMenu:R,data:{...R.data,...s,images:z,brand:e.brand,category:e.category,kitchen:(null===e||void 0===e?void 0:e.kitchen)||void 0,shop:e.shop,unit:e.unit,tax:e.tax||0,title:{...Object.assign({},...B.map((l=>({[l.locale]:e[`title[${l.locale}]`]}))))},description:{...Object.assign({},...B.map((l=>({[l.locale]:e[`description[${l.locale}]`]}))))}}})),void _();"edit"===F?function(e,l){Z.Z.update(M,l).then((()=>{L((0,j.nc)({activeMenu:R,data:{...e,...null===R||void 0===R?void 0:R.data}})),_()})).catch((e=>G(e.response.data.params))).finally((()=>H(!1)))}(e,s):function(e,l){Z.Z.create(l).then((l=>{let{data:i}=l;L((0,j.SS)({id:`product-${i.uuid}`,url:`product/${i.uuid}`,name:A("add.product"),data:e,refetch:!1})),E(`/product/${i.uuid}/?step=1`)})).catch((e=>G(e.response.data.params))).finally((()=>H(!1)))}(e,s)},children:[(0,$.jsxs)(t.Z,{gutter:12,children:[(0,$.jsx)(s.Z,{span:16,children:(0,$.jsxs)(t.Z,{children:[(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("basic.info"),children:(0,$.jsxs)(t.Z,{children:[(0,$.jsx)(s.Z,{span:24,children:B.map((e=>(0,$.jsx)(n.Z.Item,{label:A("name"),name:`title[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===T,message:A("required")},{type:"string",min:2,max:200,message:A("min.2.max.200.chars")}],hidden:e.locale!==T,children:(0,$.jsx)(r.Z,{})},"name"+e.id)))}),(0,$.jsx)(s.Z,{span:24,children:B.map((e=>(0,$.jsx)(n.Z.Item,{label:A("description"),name:`description[${e.locale}]`,rules:[{required:(null===e||void 0===e?void 0:e.locale)===T,message:A("required")},{type:"string",min:2,max:200,message:A("min.2.max.200.chars")}],hidden:e.locale!==T,children:(0,$.jsx)(k.Z,{rows:3})},"description"+e.id)))})]})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("pricing"),children:(0,$.jsxs)(t.Z,{gutter:12,children:[(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("min.qty"),name:"min_qty",rules:[{required:!0,message:A("required")}],children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("max.qty"),name:"max_qty",rules:[{required:!0,message:A("required")}],children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("tax"),name:"tax",rules:[{validator:(e,l)=>l&&(l<0||l>100)?Promise.reject(new Error(A("must.be.between.0.and.100"))):Promise.resolve()}],children:(0,$.jsx)(o.Z,{className:"w-100",addonAfter:"%"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("add.quantity.per.click"),name:"interval",rules:[{required:!0,message:A("required")},{type:"number",min:0,message:A("must.be.positive")}],help:null!==V&&void 0!==V&&V.interval?V.interval[0]:null,validateStatus:null!==V&&void 0!==V&&V.interval?"error":"success",children:(0,$.jsx)(o.Z,{className:"w-100"})})})]})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("additions"),children:(0,$.jsxs)(t.Z,{gutter:12,children:[(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("active"),name:"active",valuePropName:"checked",children:(0,$.jsx)(u.Z,{})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("vegetarian"),name:"vegetarian",valuePropName:"checked",children:(0,$.jsx)(u.Z,{})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{label:A("nutrition."+(J?"on":"off")),valuePropName:"checked",children:(0,$.jsx)(u.Z,{checked:J,onChange:e=>K(e)})})})]})})}),J&&(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("nutritional.value.of.product"),children:(0,$.jsxs)(t.Z,{gutter:12,children:[(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("kcal"),name:"kcal",children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("carbs"),name:"carbs",children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("protein"),name:"protein",children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})}),(0,$.jsx)(s.Z,{span:6,children:(0,$.jsx)(n.Z.Item,{rules:[{required:!0,message:A("required")}],label:A("fats"),name:"fats",children:(0,$.jsx)(o.Z,{min:0,className:"w-100"})})})]})})})]})}),(0,$.jsx)(s.Z,{span:8,children:(0,$.jsxs)(t.Z,{children:[(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("organization"),children:(0,$.jsxs)(t.Z,{children:[!P&&(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{label:A("shop/restaurant"),name:"shop",rules:[{required:!0,message:A("required")}],children:(0,$.jsx)(I.R,{fetchOptions:async function(e){const l={search:null!==e&&void 0!==e&&e.length?e:void 0,perPage:20,page:1,active:1};return m.Z.get(l).then((e=>e.data.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))))},onChange:()=>{O.setFieldsValue({category:void 0,kitchen:void 0})}})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{label:A("category"),name:"category",rules:[{required:!0,message:A("required")}],children:(0,$.jsx)(S.o,{disabled:!(null!==U&&void 0!==U&&U.value),refetch:!0,fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,shop_id:null===U||void 0===U?void 0:U.value,"statuses[0]":"pending","statuses[1]":"published",active:1};return p.Z.selectPaginate(l).then((e=>e.data.map((e=>{var l,i,a;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id,disabled:(null===e||void 0===e||null===(i=e.children)||void 0===i?void 0:i.length)>0,children:null===e||void 0===e||null===(a=e.children)||void 0===a?void 0:a.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}}))))},dropdownRender:e=>(0,$.jsxs)($.Fragment,{children:[e,(0,$.jsx)("div",{className:"p-1",children:(0,$.jsx)(c.Z,{icon:(0,$.jsx)(q.Z,{}),className:"w-100",onClick:Y,children:A("add.category")})})]})})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{label:A("kitchen"),name:"kitchen",children:(0,$.jsx)(w._,{allowClear:!1,fetchOptions:e=>{let{search:l,page:i=1}=e;const a={search:null!==l&&void 0!==l&&l.length?l:void 0,page:i,perPage:20,active:1,shop_id:null===U||void 0===U?void 0:U.value};return C.Z.getAll(a).then((e=>{var l,i,a;return X({...Q,kitchen:(null===e||void 0===e||null===(l=e.meta)||void 0===l?void 0:l.current_page)<(null===e||void 0===e||null===(i=e.meta)||void 0===i?void 0:i.last_page)}),null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))},hasMore:Q.kitchen,disabled:!(null!==U&&void 0!==U&&U.value)})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{label:A("brand"),name:"brand",children:(0,$.jsx)(v.h,{fetchOptions:async function(e){const l={page:1,perPage:20,type:"main",search:null!==e&&void 0!==e&&e.length?e:void 0,active:1};return h.Z.getAll(l).then((e=>e.data.map((e=>({label:(null===e||void 0===e?void 0:e.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id})))))}})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{label:A("unit"),name:"unit",rules:[{required:!0,message:A("required")}],children:(0,$.jsx)(v.h,{fetchOptions:function(e){const l={perPage:20,page:1,active:1,search:null!==e&&void 0!==e&&e.length?e:void 0};return g.Z.getAll(l).then((e=>{let{data:l}=e;return null===l||void 0===l?void 0:l.map((e=>{var l;return{label:(null===e||void 0===e||null===(l=e.translation)||void 0===l?void 0:l.title)||(null===e||void 0===e?void 0:e.id)||A("N/A"),value:null===e||void 0===e?void 0:e.id,key:null===e||void 0===e?void 0:e.id}}))}))}})})})]})})}),(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(d.Z,{title:A("media"),children:(0,$.jsx)(t.Z,{children:(0,$.jsx)(s.Z,{span:24,children:(0,$.jsx)(n.Z.Item,{name:"images",rules:[{required:!(null!==z&&void 0!==z&&z.length),message:A("required")}],children:(0,$.jsx)(b.Z,{type:"products",imageList:z,setImageList:W,form:O,multiple:!0})})})})})})]})})]}),(0,$.jsx)(c.Z,{type:"primary",htmlType:"submit",loading:D,children:A("next")})]})}},17231:(e,l,i)=>{i.d(l,{Z:()=>C});var a=i(2717),n=i(47313),t=i(49873),s=i(9274),d=i(77181),r=i(45705),o=i(59491),u=i(24511),c=i(17101),v=i(23560),m=i(97890),h=i(90954),p=i(78508),x=i(12019),Z=i(47515),j=i(55940),g=i(46417);const y=e=>{let{properties:l,editSelectedProperty:i,deleteProperty:a,loading:n=!1}=e;const{t:t}=(0,u.$)(),s=[{title:t("key"),dataIndex:"key",key:"key"},{title:t("value"),dataIndex:"value",key:"value"},{title:t("options"),key:"options",render:(e,l)=>(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(o.Z,{type:"primary",icon:(0,g.jsx)(x.Z,{}),onClick:()=>i(l)}),(0,g.jsx)(j.Z,{type:"primary",danger:!0,icon:(0,g.jsx)(Z.Z,{}),onClick:()=>a(null===l||void 0===l?void 0:l.id)})]})}];return(0,g.jsx)(d.Z,{loading:n,children:(0,g.jsx)(p.Z,{dataSource:l,columns:s,pagination:!1})})};var f=i(10976),b=i(68197),k=i(59624),I=i(66672);const q=e=>{let{addNewProperty:l,loading:i=!1}=e;const{t:n}=(0,u.$)(),[s]=f.Z.useForm(),{defaultLang:r,languages:c}=(0,a.v9)((e=>e.formLang),a.wU);return(0,g.jsx)(d.Z,{loading:i,children:(0,g.jsx)(f.Z,{form:s,layout:"vertical",onFinish:e=>{const i={key:null===e||void 0===e?void 0:e[`key[${r}]`],value:null===e||void 0===e?void 0:e[`value[${r}]`]},a=c.map((l=>({id:(0,t.R)(),locale:null===l||void 0===l?void 0:l.locale,key:(null===e||void 0===e?void 0:e[`key[${null===l||void 0===l?void 0:l.locale}]`])||(null===i||void 0===i?void 0:i.key),value:(null===e||void 0===e?void 0:e[`value[${l.locale}]`])||(null===i||void 0===i?void 0:i.value)})));l(a),s.resetFields()},children:(0,g.jsxs)(b.Z,{gutter:12,children:[(0,g.jsx)(k.Z,{span:8,children:c.map((e=>(0,g.jsx)(f.Z.Item,{label:n("key"),name:`key[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==r,rules:[{required:(null===e||void 0===e?void 0:e.locale)===r,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.Z,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.Z,{span:8,children:c.map((e=>(0,g.jsx)(f.Z.Item,{label:n("value"),name:`value[${(null===e||void 0===e?void 0:e.locale)||"en"}]`,hidden:(null===e||void 0===e?void 0:e.locale)!==r,rules:[{required:(null===e||void 0===e?void 0:e.locale)===r,message:n("required")},{type:"string",min:2,max:200,message:n("min.2.max.200.chars")}],children:(0,g.jsx)(I.Z,{})},null===e||void 0===e?void 0:e.locale)))}),(0,g.jsx)(k.Z,{children:(0,g.jsx)(f.Z.Item,{label:" ",children:(0,g.jsx)(o.Z,{type:"primary",htmlType:"submit",children:n("add")})})})]})})})},S=e=>{let{property:l,editProperty:i}=e;const{t:a}=(0,u.$)(),[n]=f.Z.useForm();return(0,g.jsx)(d.Z,{children:(0,g.jsx)(f.Z,{form:n,layout:"vertical",onFinish:e=>{i({...l,...e})},initialValues:{key:null===l||void 0===l?void 0:l.key,value:null===l||void 0===l?void 0:l.value},children:(0,g.jsxs)(b.Z,{gutter:12,children:[(0,g.jsx)(k.Z,{span:24,children:(0,g.jsx)(f.Z.Item,{label:a("key"),name:"key",rules:[{required:!0,message:a("required")},{type:"string",min:2,max:200,message:a("min.2.max.200.chars")}],children:(0,g.jsx)(I.Z,{})})}),(0,g.jsx)(k.Z,{span:24,children:(0,g.jsx)(f.Z.Item,{label:a("value"),name:"value",rules:[{required:!0,message:a("required")},{type:"string",min:2,max:200,message:a("min.2.max.200.chars")}],children:(0,g.jsx)(I.Z,{})})}),(0,g.jsx)(k.Z,{span:24,children:(0,g.jsx)(o.Z,{type:"primary",htmlType:"submit",className:"w-100",children:a("edit")})})]})})})},C=e=>{var l;let{prev:i,next:p,isRequest:x=!1}=e;const{t:Z}=(0,u.$)(),{uuid:j}=(0,m.UO)(),f=(0,a.I0)(),{defaultLang:b}=(0,a.v9)((e=>e.formLang),a.wU),{activeMenu:k}=(0,a.v9)((e=>e.menu),a.wU),[I,C]=(0,n.useState)(x&&(null===(l=k.data)||void 0===l?void 0:l.properties)||[]),[w,$]=(0,n.useState)(null),[N,_]=(0,n.useState)(!1),[F,P]=(0,n.useState)(!1);(0,n.useEffect)((()=>{x||A(j)}),[]);const A=e=>{_(!0),c.Z.getById(e).then((e=>{var l,i;C(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(i=l.properties)||void 0===i?void 0:i.map((e=>({...e,id:(0,t.R)()}))))})).finally((()=>{_(!1)}))};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(q,{loading:N,addNewProperty:e=>{C([...I,...e])}}),(0,g.jsx)(y,{loading:N,properties:null===I||void 0===I?void 0:I.filter((e=>(null===e||void 0===e?void 0:e.locale)===b)),editSelectedProperty:$,deleteProperty:e=>{s.Z.confirm({title:Z("are.you.sure?"),okText:Z("yes"),onOk:()=>{C((l=>l.filter((l=>l.id!==e))))}})}}),(0,g.jsx)(d.Z,{children:(0,g.jsxs)(r.Z,{children:[(0,g.jsx)(o.Z,{onClick:i,disabled:N,children:Z("prev")}),(0,g.jsx)(o.Z,{type:"primary",onClick:()=>{const e={key:[],value:[]};if(null===I||void 0===I||I.map((l=>{e.key.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.key}),e.value.push({[null===l||void 0===l?void 0:l.locale]:null===l||void 0===l?void 0:l.value})})),x)return f((0,h.nc)({activeMenu:k,data:{...k.data,properties:I,props:e}})),void p();P(!0),c.Z.properties(j,e).then((()=>{v.Am.success(Z("successfully.updated")),p()})).finally((()=>{P(!1)}))},disabled:N,loading:F,children:Z("next")})]})}),!!w&&(0,g.jsx)(s.Z,{visible:!!w,onCancel:()=>{$(null)},footer:!1,children:(0,g.jsx)(S,{property:w,editProperty:e=>{C((l=>l.map((l=>l.id===e.id?e:l)))),$(null)}})})]})}},96077:(e,l,i)=>{i.d(l,{S:()=>a});const a=[{title:"product",content:"First-content"},{title:"product.extras",content:"Second-content"},{title:"stocks",content:"Third-content"},{title:"finish",content:"Finish-content"}]}}]);