"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[9094],{52008:(e,s,t)=>{t.d(s,{Z:()=>l});t(47313);const l=t.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},19094:(e,s,t)=>{t.r(s),t.d(s,{default:()=>z});var l=t(47313),a=t(77181),n=t(68197),i=t(59624),c=t(41068),r=t(59491),d=t(72652),o=t(34344);const h={getAll:e=>o.Z.get("dashboard/seller/subscriptions",{params:e}),attach:(e,s)=>o.Z.post(`dashboard/seller/subscriptions/${e}/attach`,s),transactionCreate:(e,s)=>o.Z.post(`payments/subscription/${e}/transactions`,s)};var m=t(2717),p=t(24511),u=t(90954),v=t(9274),x=t(42111),j=t(51282),y=t(23560),b=t(73339),f=t(52008),g=t(16044),w=t(26303),Z=t(69965),N=t(20637),k=t(43435),S=t(46417);function C(e){var s,t;let{modal:c,handleCancel:d}=e;const{t:o}=(0,p.$)(),u=(0,m.I0)(),{payments:C,loading:_}=(0,m.v9)((e=>e.payment),m.wU),{myShop:z}=(0,m.v9)((e=>e.myShop),m.wU),{seller:A}=(0,m.v9)((e=>e.myShop.myShop),m.wU),[U,$]=(0,l.useState)(!1),[I,E]=(0,l.useState)({}),[B,D]=(0,l.useState)(null),[F,K]=(0,l.useState)(null),{payment_type:M}=(0,m.v9)((e=>e.globalSettings.settings),m.wU);(0,l.useEffect)((()=>{C.length||u((0,x.dA)({})),async function(){await N.Z.getById(z.id).then((e=>{let{data:s}=e;return D(s.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){N.Z.getAll().then((e=>{let{data:s}=e;return K(s.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const P=e=>{switch(e){case"wallet":return(0,S.jsx)(Z.dk2,{size:80});case"paypal":return(0,S.jsx)(g.kD0,{size:80});case"stripe":return(0,S.jsx)(w.K6C,{size:80});case"selcom":return(0,S.jsx)("img",{src:k,alt:"img",width:"80",height:"80"});case"razorpay":return(0,S.jsx)(w.r98,{size:80});case"paystack":return(0,S.jsx)("img",{src:f.Z,alt:"img",width:"80",height:"80"})}};return(0,S.jsx)(v.Z,{visible:!!c,title:o("purchase.subscription"),onCancel:d,footer:[(0,S.jsx)(r.Z,{type:"primary",onClick:()=>{var e;I.value?"wallet"===I.label&&(null===A||void 0===A||null===(e=A.wallet)||void 0===e?void 0:e.price)<c.price?y.Am.warning(o("insufficient.balance")):($(!0),h.attach(c.id).then((e=>{let{data:s}=e;return function(e){const s={payment_sys_id:I.value};h.transactionCreate(e,s).then((()=>{d(),y.Am.success(o("successfully.purchased")),u((0,b.S)({}))})).finally((()=>$(!1)))}(s.id)})).error((()=>$(!1)))):y.Am.warning(o("please.select.payment.type"))},loading:U,children:o("save")},"save-btn"),(0,S.jsx)(r.Z,{type:"default",onClick:d,children:o("cancel")},"cancel-btn")],children:_?(0,S.jsx)(j.Z,{}):(0,S.jsx)(n.Z,{gutter:12,children:null===(s="admin"===M?F:B)||void 0===s||null===(t=s.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===t?void 0:t.map(((e,s)=>(0,S.jsx)(i.Z,{span:8,children:(0,S.jsxs)(a.Z,{className:"payment-card "+((null===I||void 0===I?void 0:I.label)===e.label?"active":""),onClick:()=>{E(e)},children:[(0,S.jsx)("div",{className:"payment-icon",children:P(null===e||void 0===e?void 0:e.label)}),(0,S.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},s)))})})}const _=[];function z(){const{t:e}=(0,p.$)(),{defaultCurrency:s}=(0,m.v9)((e=>e.currency),m.wU),{myShop:t}=(0,m.v9)((e=>e.myShop),m.wU),[o,v]=(0,l.useState)(null),[x,j]=(0,l.useState)(!1),[y,b]=(0,l.useState)([]),f=y.length,{activeMenu:g}=(0,m.v9)((e=>e.menu),m.wU),w=(0,m.I0)(),Z=()=>{j(!0),h.getAll().then((e=>{b(e.data)})).finally((()=>{j(!1),w((0,u.A_)(g))}))};return(0,l.useEffect)((()=>{g.refetch&&Z()}),[g.refetch]),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(a.Z,{className:"h-100",children:x?(0,S.jsx)(i.Z,{className:"ant-col-spin d-flex justify-content-center",children:(0,S.jsx)(d.Z,{size:"large"})}):(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"text-center mb-4",children:[(0,S.jsx)("h2",{className:"font-weight-semibold",children:"Pick a base plan"}),(0,S.jsx)(n.Z,{type:"flex",justify:"center",children:(0,S.jsx)(i.Z,{sm:24,md:12,lg:8,children:(0,S.jsx)("p",{children:"Space, the final frontier. These are the voyages of the Starship Enterprise. Its five-year mission."})})})]}),(0,S.jsx)(n.Z,{children:y.map(((l,a)=>{var n,d;return(0,S.jsx)(i.Z,{span:6,className:f===a+1?"":"border-right",children:(0,S.jsx)(c.Z.Ribbon,{text:e("active"),color:"red",className:(null===t||void 0===t||null===(n=t.subscription)||void 0===n||null===(d=n.subscription)||void 0===d?void 0:d.id)===l.id?"":"d-none",children:(0,S.jsxs)("div",{className:"p-3",children:[(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsxs)("h1",{className:"display-4 mt-4",children:["before"===(null===s||void 0===s?void 0:s.position)&&(0,S.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===s||void 0===s?void 0:s.symbol}),(0,S.jsx)("span",{children:l.price}),"after"===(null===s||void 0===s?void 0:s.position)&&(0,S.jsx)("span",{className:"font-size-md d-inline-block mr-1",style:{transform:"translate(0px, -17px)"},children:null===s||void 0===s?void 0:s.symbol})]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[l.month," ",e("month")]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("order.limit")," ",null===l||void 0===l?void 0:l.order_limit]}),(0,S.jsxs)("p",{className:"mb-0 text-lowercase",children:[e("product.limit")," ",null===l||void 0===l?void 0:l.product_limit]}),(0,S.jsx)("p",{className:"mb-0 text-lowercase",children:Boolean(null===l||void 0===l?void 0:l.with_report)?e("with.report"):e("without.report")})]}),(0,S.jsx)("div",{className:"mt-4",children:(0,S.jsx)("h2",{className:"text-center font-weight-semibold",children:l.type})}),(0,S.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,S.jsx)("div",{children:null===_||void 0===_?void 0:_.map(((e,s)=>(0,S.jsxs)("p",{children:[(0,S.jsx)(c.Z,{color:"blue"}),(0,S.jsx)("span",{children:e})]},`pricing-feature-${s}`)))})}),(0,S.jsx)("div",{className:"mt-3 text-center",children:(0,S.jsx)(r.Z,{type:"default",onClick:()=>v(l),children:e("purchase")})})]})})},`price-column-${a}`)}))})]})}),o&&(0,S.jsx)(C,{modal:o,handleCancel:()=>v(null),refetch:Z})]})}},43435:(e,s,t)=>{e.exports=t.p+"static/media/selcom.3c3823b8e900c4b4ca6a.png"}}]);