"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[509],{68221:(l,e,i)=>{i.d(e,{Z:()=>g});var o=i(16609),t=i(47313),a=i(59392),n=i(307),d=i(67968),s=i(97421);const r=()=>{var l,e,i;const o=null===(l=d.h.getState())||void 0===l||null===(e=l.globalSettings)||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.location;if(null!==o&&void 0!==o&&o.length){const l=null===o||void 0===o?void 0:o.split(",");return{lat:parseFloat(null===l||void 0===l?void 0:l[0]),lng:parseFloat(null===l||void 0===l?void 0:l[1])}}return{lat:s.Yg,lng:s.Ly}};var u=i(46417);const v=(0,n.Z)(),c=r(),g=(0,o.GoogleApiWrapper)({apiKey:v,libraries:["places"]})((l=>{var e,i;const[n,d]=(0,t.useState)(c),[s,r]=(0,t.useState)(l.triangleCoords?l.triangleCoords:[]),[v,g]=(0,t.useState)(!!l.triangleCoords),[m,h]=(0,t.useState)(null);l.setMerge(v);(0,t.useEffect)((()=>{h(!0)}),[]);const p=l.triangleCoords.map((l=>({lat:Number(l.lat||"0"),lng:Number(l.lng||"0")})));for(var b=new l.google.maps.LatLngBounds(n),f=0;f<p.length;f++)b.extend(p[f]);return(0,u.jsxs)("div",{className:"map-container",style:{height:500,width:"100%"},children:[(0,u.jsx)("button",{className:"map-button",type:"button",onClick:()=>{navigator.geolocation.getCurrentPosition((function(l){d({lat:l.coords.latitude,lng:l.coords.longitude})}))},children:(0,u.jsx)(a.nDs,{})}),(0,u.jsxs)(o.Map,{options:{minZoom:15,maxZoom:15},cursor:"pointer",onClick:(e,i,o)=>{h(!1);const{latLng:t}=o,a=t.lat(),n=t.lng();v?(r([]),l.settriangleCoords([{lat:a,lng:n}]),d({lat:a,lng:n}),g(!1)):l.settriangleCoords((l=>[...l,{lat:a,lng:n}]))},maxZoom:16,minZoom:2,google:l.google,initialCenter:c,center:n,onReady:function(l,e){e.setOptions({draggableCursor:"crosshair",draggingCursor:"grab"})},bounds:m&&b,className:"clickable",children:[null===(e=l.triangleCoords)||void 0===e?void 0:e.map(((e,i)=>(0,u.jsx)(o.Marker,{onClick:e=>(e=>{var i,o;g(!(null===l||void 0===l||!l.triangleCoords)),(null===(i=l.triangleCoords[0])||void 0===i?void 0:i.lat)===(null===(o=e.position)||void 0===o?void 0:o.lat)&&l.triangleCoords.length>1&&(r(l.triangleCoords),l.setLocation(l.triangleCoords),g(!0),h(!0))})(e),position:e,icon:{url:"https://upload.wikimedia.org/wikipedia/commons/9/94/Circle-image.svg",scaledSize:new l.google.maps.Size(10,10)},className:"marker"},i))),null!==s&&void 0!==s&&s.length?(0,u.jsx)(o.Polygon,{path:l.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===s||void 0===s?void 0:s.length):(0,u.jsx)(o.Polyline,{path:l.triangleCoords,strokeColor:"black",strokeOpacity:.8,strokeWeight:3,fillColor:"black",fillOpacity:.35},null===(i=l.triangleCoords)||void 0===i?void 0:i.length)]})]})}))},4014:(l,e,i)=>{function o(l){var e,i;let o=null===l||void 0===l?void 0:l.slice(0,1),t=null===l||void 0===l?void 0:l.lastIndexOf("@"),a=null===l||void 0===l?void 0:l.slice(1,t-1);a=null===(e=a)||void 0===e?void 0:e.replace(/./g,"*");let n=null===l||void 0===l?void 0:l.slice(t-1,l.length);return null===o||void 0===o||null===(i=o.concat(a))||void 0===i?void 0:i.concat(n)}i.d(e,{Z:()=>o})},90509:(l,e,i)=>{i.r(e),i.d(e,{default:()=>M});var o=i(47313),t=i(73591),a=i(10976),n=i(77181),d=i(97890),s=i(70816),r=i.n(s),u=i(49986),v=i(51282),c=i(2717),g=i(90954),m=i(24511),h=i(8550),p=i(79492),b=i(4014),f=i(78067),x=i(65559),y=i(45713),Z=i(92815),j=i(94748),C=i(68197),k=i(59624),w=i(59491),S=i(68221),_=i(44207),A=i(23560),F=i(46417);const N=l=>{let{user_id:e}=l;const{t:i}=(0,m.$)(),[t]=a.Z.useForm(),[d,s]=(0,o.useState)([]),[r,v]=(0,o.useState)(null),[c,g]=(0,o.useState)(!1),[h,p]=(0,o.useState)(!1);(0,o.useEffect)((()=>{var l;e&&(l=e,g(!0),u.Z.showDeliverymanZone(l).then((l=>{var e;s(void 0!==l.data?null===(e=l.data)||void 0===e?void 0:e.map((l=>({lat:null===l||void 0===l?void 0:l[0],lng:null===l||void 0===l?void 0:l[1]}))):[])})).catch((l=>{404===l.response.status&&A.Am.dismiss(),console.log("err",l)})).finally((()=>{g(!1)})))}),[e]);return(0,F.jsx)(n.Z,{loading:c,children:(0,F.jsxs)(a.Z,{layout:"vertical",form:t,onFinish:()=>{if(!e)return void A.Am.error(i("no.user.id"));if(d.length<3)return void A.Am.warning(i("place.selected.map"));if(!r)return void A.Am.warning(i("place.selected.map"));const l={user_id:e,address:d.map((l=>({0:l.lat,1:l.lng})))};p(!0),u.Z.createAndUpdateDeliverymanZone(l).then((()=>{A.Am.success(i("successfully.updated"))})).finally((()=>{p(!1)}))},children:[(0,F.jsxs)(C.Z,{gutter:12,children:[(0,F.jsx)(k.Z,{span:12,children:(0,F.jsx)("img",{src:_,alt:i("map.gif"),style:{object:"contain"}})}),(0,F.jsx)(k.Z,{span:24,children:(0,F.jsx)(S.Z,{triangleCoords:d,settriangleCoords:s,setMerge:v})})]}),(0,F.jsx)(w.Z,{type:"primary",htmlType:"submit",loading:h,className:"mt-4",children:i("save")})]})})},{TabPane:O}=t.Z,M=()=>{var l,e;const{t:i}=(0,m.$)(),[s]=a.Z.useForm(),{activeMenu:C}=(0,c.v9)((l=>l.menu),c.wU),k=(0,c.I0)(),{uuid:w}=(0,d.UO)(),[S,_]=(0,o.useState)(!1),[A,M]=(0,o.useState)("edit"),[z,L]=(0,o.useState)([]),[P,W]=(0,o.useState)(null),D=null===C||void 0===C||null===(l=C.data)||void 0===l?void 0:l.role,{isDemo:I}=(0,p.Z)();(0,o.useEffect)((()=>{null!==C&&void 0!==C&&C.refetch&&(l=>{_(!0),u.Z.getById(l).then((l=>{var e,i,o,t,a,n,d,u;const v=l.data,c={...v,image:v.img?(0,h.Z)(v.img):[]};k((0,g.nc)({activeMenu:C,data:c})),s.setFieldsValue({firstname:v.firstname,lastname:v.lastname,email:I?(0,b.Z)(v.email):v.email,phone:v.phone,birthday:r()(v.birthday),gender:v.gender,password_confirmation:v.password_confirmation,password:v.password,shop_id:0!==v.invitations.length?v.invitations.map((l=>{var e,i,o;return{label:null===(e=l.shop)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===(o=l.shop)||void 0===o?void 0:o.id}})):void 0,kitchen:{label:null===v||void 0===v||null===(e=v.kitchen)||void 0===e||null===(i=e.translation)||void 0===i?void 0:i.title,value:null===v||void 0===v||null===(o=v.kitchen)||void 0===o?void 0:o.id,key:null===v||void 0===v||null===(t=v.kitchen)||void 0===t?void 0:t.id},isWork:!(null===v||void 0===v||!v.isWork),table_ids:0!==(null===(a=v.tables)||void 0===a?void 0:a.length)?null===v||void 0===v||null===(n=v.tables)||void 0===n?void 0:n.map((l=>({label:null===l||void 0===l?void 0:l.name,value:null===l||void 0===l?void 0:l.id}))):void 0}),L(v.img?[(0,h.Z)(v.img)]:[]),W(null===(d=l.data)||void 0===d||null===(u=d.delivery_man_setting)||void 0===u?void 0:u.id)})).finally((()=>{_(!1),k((0,g.A_)(C))}))})(w)}),[null===C||void 0===C?void 0:C.refetch]);return(0,F.jsx)(n.Z,{title:i("user.settings"),children:S?(0,F.jsx)(v.Z,{}):(0,F.jsxs)(t.Z,{activeKey:A,onChange:l=>M(l),tabPosition:"left",size:"small",children:[(0,F.jsx)(O,{tab:i("edit.user"),children:(0,F.jsx)(x.Z,{data:null===C||void 0===C?void 0:C.data,form:s,image:z,setImage:L,action_type:"edit"})},"edit"),"cook"===D&&(0,F.jsx)(O,{tab:i("orders"),children:(0,F.jsx)(y.Z,{data:null===C||void 0===C?void 0:C.data})},"order"),"deliveryman"===D&&(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(O,{tab:i("deliveryman"),children:(0,F.jsx)(f.Z,{id:P,data:C.data})},"delivery"),(0,F.jsx)(O,{tab:i("deliveryman.zone"),children:(0,F.jsx)(N,{user_id:null===(e=C.data)||void 0===e?void 0:e.id})},"deliverymanzone")]}),(0,F.jsx)(O,{tab:i("wallet"),children:(0,F.jsx)(Z.Z,{data:null===C||void 0===C?void 0:C.data})},"wallet"),(0,F.jsx)(O,{tab:i("password"),children:(0,F.jsx)(j.Z,{data:null===C||void 0===C?void 0:C.data})},"password")]})})}},44207:(l,e,i)=>{l.exports=i.p+"static/media/map.f2e0b3013d676ba09c88.gif"}}]);