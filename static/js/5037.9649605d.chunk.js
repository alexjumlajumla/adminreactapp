"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[5037],{89281:(e,o,r)=>{r.d(o,{h:()=>s});var l=r(47313),t=r(12279),i=r.n(t),n=r(74294),d=r(72652),a=r(46417);const s=e=>{let{fetchOptions:o,debounceTimeout:r=400,onClear:t,...s}=e;const[u,v]=(0,l.useState)(!1),[c,h]=(0,l.useState)([]),p=(0,l.useMemo)((()=>i()((e=>{h([]),v(!0),o(e).then((e=>{h(e),v(!1)}))}),r)),[o,r]);return(0,a.jsx)(n.Z,{showSearch:!0,allowClear:!0,labelInValue:!0,filterOption:!1,onSearch:p,onClear:()=>{p(""),t&&t()},notFoundContent:u?(0,a.jsx)(d.Z,{size:"small"}):"no results",...s,options:c,onFocus:()=>{p("")}})}},13945:(e,o,r)=>{function l(e){switch(e){case"ascend":return"asc";case"descend":return"desc"}}r.d(o,{Z:()=>l})},84017:(e,o,r)=>{r.d(o,{Z:()=>t});var l=r(67968);function t(){var e,o;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const n=null===(e=l.h.getState())||void 0===e||null===(o=e.currency)||void 0===o?void 0:o.defaultCurrency,d=Number(r).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),a=t||(null===n||void 0===n?void 0:n.symbol)||"$",s=i||(null===n||void 0===n?void 0:n.position)||"before";return"after"===s?`${d} ${a}`:`${a} ${d}`}},75037:(e,o,r)=>{r.r(o),r.d(o,{default:()=>Y});var l=r(47313),t=r(99096),i=r(77181),n=r(45705),d=r(78508),a=r(97890),s=r(2717),u=r(90954),v=r(24511),c=r(80314),h=r(13945),p=r(84017),_=r(89281),m=r(49986),f=r(70816),y=r.n(f),g=r(53149),x=r(10924),w=r(46417);const{RangePicker:b}=t.Z;function Y(){var e,o,r,t,f,Y,Z;const{type:k}=(0,a.UO)(),M=(0,s.I0)(),j=(0,a.s0)(),{t:D}=(0,v.$)(),{defaultCurrency:C}=(0,s.v9)((e=>e.currency),s.wU),I=[{title:D("order.id"),is_show:!0,dataIndex:"order_id",key:"order_id",sorter:!0,render:e=>(0,w.jsxs)("span",{className:"text-hover",onClick:()=>(e=>{M((0,u.bL)({url:`order/details/${e}`,id:"order_details",name:D("order.details")})),j(`/order/details/${e}`)})(e),children:["#",e]})},{title:D(k),is_show:!0,dataIndex:"user",key:"user",render:(e,o)=>{const r=null===o||void 0===o?void 0:o.user;return(0,w.jsxs)("div",{children:[null===r||void 0===r?void 0:r.firstname," ",(null===r||void 0===r?void 0:r.lastname)||""]})}},{title:D("order.total_price"),is_show:!0,dataIndex:"transaction",key:"transaction",render:(e,o)=>{var r;null===e||void 0===e||e.status;return(0,w.jsx)("span",{children:(0,p.Z)(null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.total_price,C.symbol)})}},..."seller"===k?[{title:D("coupon.price"),is_show:!0,dataIndex:"coupon_sum_price",key:"coupon_sum_price",render:(e,o)=>{var r;return(0,p.Z)(null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.coupon_sum_price,C.symbol)}}]:[],..."seller"===k?[{title:D("total.cashback"),is_show:!0,dataIndex:"point_history_sum_price",key:"point_history_sum_price",render:(e,o)=>{var r;return(0,p.Z)(null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.point_history_sum_price,C.symbol)}}]:[],{title:D("delivery.fee"),is_show:!0,dataIndex:"delivery_fee",key:"delivery_fee",render:(e,o)=>{var r;return(0,p.Z)(null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.delivery_fee,C.symbol)}},..."seller"===k?[{title:D("service.fee"),is_show:!0,dataIndex:"service_fee",key:"service_fee",render:(e,o)=>{var r;return(0,p.Z)((null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.service_fee)||0,C.symbol)}}]:[],..."seller"===k?[{title:D("commission.fee"),is_show:!0,dataIndex:"commission_fee",key:"commission_fee",render:(e,o)=>(0,p.Z)((null===o||void 0===o?void 0:o.order.commission_fee)||0,C.symbol)}]:[],..."seller"===k?[{title:D("seller.fee"),is_show:!0,dataIndex:"seller_fee",key:"seller_fee",render:(e,o)=>{var r;return(0,p.Z)(null===o||void 0===o||null===(r=o.order)||void 0===r?void 0:r.seller_fee,C.symbol)}}]:[],{title:D("payment.type"),is_show:!0,dataIndex:"transaction",key:"transaction",render:e=>{var o;return D(null===e||void 0===e||null===(o=e.payment_system)||void 0===o?void 0:o.tag)||"-"}}],{activeMenu:S}=(0,s.v9)((e=>e.menu),s.wU),[$,P]=(0,l.useState)(y()().subtract(1,"month"),y()()),{completedList:A,loading:O,params:F,meta:N}=(0,s.v9)((e=>e.paymentToPartners),s.wU),U=S.data,z={search:null===U||void 0===U?void 0:U.search,sort:null===U||void 0===U?void 0:U.sort,column:null===U||void 0===U?void 0:U.column,perPage:null===U||void 0===U?void 0:U.perPage,page:null===U||void 0===U?void 0:U.page,user_id:null===U||void 0===U?void 0:U.user_id,shop_id:null!==(null===(e=S.data)||void 0===e?void 0:e.shop_id)?null===(o=S.data)||void 0===o?void 0:o.shop_id:null,date_from:Array.isArray($)?null===(r=$[0])||void 0===r?void 0:r.format("YYYY-MM-DD"):y()().subtract(1,"month").format("YYYY-MM-DD"),date_to:Array.isArray($)?null===(t=$[1])||void 0===t?void 0:t.format("YYYY-MM-DD"):y()().format("YYYY-MM-DD"),type:k};(0,c.Z)((()=>{M((0,x.kR)(z))}),[U,$,k]);const R=(e,o)=>{M((0,u.nc)({activeMenu:S,data:{...U,[o]:e}}))};return(0,l.useEffect)((()=>{null!==S&&void 0!==S&&S.refetch&&(M((0,x.kR)(z)),M((0,u.A_)(S)))}),[null===S||void 0===S?void 0:S.refetch]),(0,l.useEffect)((()=>()=>{M((0,u.nc)({activeMenu:S,data:{}}))}),[]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.Z,{children:(0,w.jsx)("div",{className:"flex justify-content-space-between",children:(0,w.jsxs)(n.Z,{wrap:!0,className:"order-filter",style:{flex:1,width:"100%"},children:[(0,w.jsx)(_.h,{placeholder:D("select.shop"),fetchOptions:async function(e){const o={search:e,status:"approved"};return g.Z.getAll(o).then((e=>{let{data:o}=e;return o.map((e=>{var o;return{label:null===(o=e.translation)||void 0===o?void 0:o.title,value:e.id}}))}))},style:{width:"100%"},onSelect:e=>R(e.value,"shop_id"),onDeselect:()=>R(null,"shop_id"),allowClear:!0,value:null===U||void 0===U?void 0:U.shop_id}),(0,w.jsx)(_.h,{placeholder:D("select.user"),fetchOptions:async function(e){const o={search:e,perPage:10,role:k};return m.Z.search(o).then((e=>{let{data:o}=e;return o.map((e=>({label:`${e.firstname} ${e.lastname}`,value:e.id})))}))},onSelect:e=>R(e.value,"user_id"),onDeselect:()=>R(null,"user_id"),style:{width:"100%"},value:null===U||void 0===U?void 0:U.user_id}),(0,w.jsx)(b,{value:$,onChange:e=>{R((o=>{var r,l;return{...o,date_from:null===e||void 0===e||null===(r=e[0])||void 0===r?void 0:r.format("YYYY-MM-DD"),date_to:null===e||void 0===e||null===(l=e[1])||void 0===l?void 0:l.format("YYYY-MM-DD")}})),P(e)},disabledDate:e=>e&&e>y()().endOf("day"),style:{width:"100%"}})]})})}),(0,w.jsx)(i.Z,{children:(0,w.jsx)(d.Z,{scroll:{x:!0},columns:null===I||void 0===I?void 0:I.filter((e=>e.is_show)),dataSource:A,loading:O,pagination:{pageSize:F.perPage,page:(null===(f=S.data)||void 0===f?void 0:f.page)||1,total:null===N||void 0===N?void 0:N.total,defaultCurrent:null===(Y=S.data)||void 0===Y?void 0:Y.page,current:null===(Z=S.data)||void 0===Z?void 0:Z.page},rowKey:e=>e.id,onChange:function(e,o,r){const{pageSize:l,current:t}=e,{field:i,order:n}=r,d=(0,h.Z)(n);M((0,u.nc)({activeMenu:S,data:{...U,perPage:l,page:t,column:i,sort:d}}))}})})]})}}}]);