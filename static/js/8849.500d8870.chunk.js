"use strict";(self.webpackChunkgithubit_dashboard=self.webpackChunkgithubit_dashboard||[]).push([[8849],{52008:(e,t,l)=>{l.d(t,{Z:()=>a});l(47313);const a=l.p+"static/media/paystack.6d6a77c8d6bfc75061ec651e5c2e74eb.svg"},84017:(e,t,l)=>{l.d(t,{Z:()=>n});var a=l(67968);function n(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const s=null===(e=a.h.getState())||void 0===e||null===(t=e.currency)||void 0===t?void 0:t.defaultCurrency,d=Number(l).toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"),r=n||(null===s||void 0===s?void 0:s.symbol)||"$",o=i||(null===s||void 0===s?void 0:s.position)||"before";return"after"===o?`${d} ${r}`:`${r} ${d}`}},18849:(e,t,l)=>{l.r(t),l.d(t,{default:()=>N});var a=l(66204),n=l(77181),i=l(59491),s=l(56140),d=l(78508),r=l(84017),o=l(70816),c=l.n(o),u=l(47313),p=l(24511),h=l(2717),v=l(90954),m=l(49986),y=l(10976),x=l(9274),b=l(68197),g=l(59624),j=l(16124),f=l(42111),Z=l(51282),w=l(23560),k=l(52008),S=l(16044),C=l(26303),I=l(69965),$=l(20637),U=l(49644),_=l(43435),z=l(46417);function F(e){var t,l,a;let{open:s,handleCancel:d,refetch:r}=e;const{t:o}=(0,p.$)(),c=(0,h.I0)(),{payments:v,loading:m}=(0,h.v9)((e=>e.payment),h.wU),{myShop:F}=(0,h.v9)((e=>e.myShop),h.wU),[N,A]=(0,u.useState)(!1),[Y,D]=(0,u.useState)({}),[M,q]=(0,u.useState)(null),[E,T]=(0,u.useState)(null),{payment_type:B}=(0,h.v9)((e=>e.globalSettings.settings),h.wU),[K]=y.Z.useForm();(0,u.useEffect)((()=>{v.length||c((0,f.dA)()),async function(){await $.Z.getById(F.id).then((e=>{let{data:t}=e;return q(t.map((e=>({label:e.payment.tag||"no name",value:e.payment.id,key:e.payment.id}))))}))}(),async function(){$.Z.getAll().then((e=>{let{data:t}=e;return T(t.map((e=>({label:e.tag||"no name",value:e.id,key:e.id}))))}))}()}),[]);const G=e=>{switch(e){case"wallet":return(0,z.jsx)(I.dk2,{size:80});case"paypal":return(0,z.jsx)(S.kD0,{size:80});case"stripe":return(0,z.jsx)(C.K6C,{size:80});case"selcom":return(0,z.jsx)("img",{src:_,alt:"img",width:"80",height:"80"});case"razorpay":return(0,z.jsx)(C.r98,{size:80});case"paystack":return(0,z.jsx)("img",{src:k.Z,alt:"img",width:"80",height:"80"})}};return(0,z.jsx)(x.Z,{visible:s,title:o("wallet.topup"),onCancel:d,footer:[(0,z.jsx)(i.Z,{type:"primary",disabled:m,htmlType:"submit",form:"payment",loading:N,children:o("save")},"save-btn"),(0,z.jsx)(i.Z,{type:"default",onClick:d,children:o("cancel")},"cancel-btn")],children:m?(0,z.jsx)(Z.Z,{}):(0,z.jsx)(y.Z,{layout:"vertical",id:"payment",onFinish:e=>{Y.value?(A(!0),U.Z.topUp({payment_type:Y.label,price:e.price}).then((e=>{let{data:t}=e;K.resetFields(),D({}),d(),r(),window.open(t.data.url)})).finally((()=>A(!1)))):w.Am.warning(o("please.select.payment.type"))},children:(0,z.jsxs)(b.Z,{gutter:12,children:[(0,z.jsx)(g.Z,{span:24,children:(0,z.jsx)(y.Z.Item,{name:"price",label:o("price"),rules:[{required:!0,message:o("required")},{type:"number",min:0,message:o("should.be.greater.than.0")}],children:(0,z.jsx)(j.Z,{className:"w-100"})})}),null===(t="admin"===B?E:M)||void 0===t||null===(l=t.filter((e=>"cash"!==(null===e||void 0===e?void 0:e.label))))||void 0===l||null===(a=l.filter((e=>"wallet"!==(null===e||void 0===e?void 0:e.label))))||void 0===a?void 0:a.map(((e,t)=>(0,z.jsx)(g.Z,{span:8,children:(0,z.jsxs)(n.Z,{className:"payment-card "+((null===Y||void 0===Y?void 0:Y.label)===e.label?"active":""),onClick:()=>{D(e)},children:[(0,z.jsx)("div",{className:"payment-icon",children:G(null===e||void 0===e?void 0:e.label)}),(0,z.jsx)("div",{className:"font-weight-bold mt-2",children:o(null===e||void 0===e?void 0:e.label)})]})},t)))]})})})}const N=()=>{var e;const[t,l]=(0,u.useState)(null),{t:o}=(0,p.$)(),y=(0,h.I0)(),[x,b]=(0,u.useState)(!1),[g,j]=(0,u.useState)(!1),{activeMenu:f}=(0,h.v9)((e=>e.menu),h.wU),{defaultCurrency:Z}=(0,h.v9)((e=>e.currency),h.wU),w=(0,u.useCallback)((()=>{b(!0),m.Z.profileShow().then((e=>{l(e.data)})).finally((()=>{b(!1)}))}),[]);(0,u.useEffect)((()=>{null!==f&&void 0!==f&&f.refetch&&w(),y((0,v.A_)(f))}),[null===f||void 0===f?void 0:f.refetch]);const k=[{title:o("created.at"),dataIndex:"created_at",render:e=>c()(e).format("YYYY-MM-DD hh:mm")},{title:o("status"),dataIndex:"status",render:e=>(0,z.jsx)("div",{children:"paid"===e?(0,z.jsx)(a.Z,{color:"cyan",children:e}):(0,z.jsx)(a.Z,{color:"blue",children:e})})},{title:o("type"),dataIndex:"type",render:e=>"topup"===e?(0,z.jsx)(a.Z,{color:"cyan",children:e}):(0,z.jsx)(a.Z,{color:"error",children:e})},{title:o("note"),dataIndex:"note"}];return(0,z.jsxs)(n.Z,{title:o("user.wallet"),extra:x?null:(0,z.jsx)(i.Z,{onClick:()=>j(!0),children:o("top.up")}),children:[null!==t&&void 0!==t&&t.wallet?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(s.Z.Title,{children:(0,r.Z)(null===t||void 0===t?void 0:t.wallet.price,null===Z||void 0===Z?void 0:Z.symbol,null===Z||void 0===Z?void 0:Z.position)}),(0,z.jsx)(d.Z,{loading:x,dataSource:null===t||void 0===t||null===(e=t.wallet)||void 0===e?void 0:e.histories,columns:k})]}):(0,z.jsx)(d.Z,{dataSource:[],columns:k,loading:x}),(0,z.jsx)(F,{refetch:w,open:g,handleCancel:()=>j(!1)})]})}},43435:(e,t,l)=>{e.exports=l.p+"static/media/selcom.3c3823b8e900c4b4ca6a.png"}}]);